"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[945],{62003:function(ae,Z,t){t.d(Z,{ew:function(){return Q},Jx:function(){return G},iT:function(){return B},Zi:function(){return U},Bw:function(){return S},eJ:function(){return $},fk:function(){return r},sE:function(){return L},WW:function(){return A},sy:function(){return Y},E$:function(){return W},_M:function(){return te},tC:function(){return s},wX:function(){return E},oh:function(){return D},Uc:function(){return P},x:function(){return n},Mw:function(){return K},p_:function(){return _},$V:function(){return F},Qo:function(){return J},$9:function(){return ee},Jy:function(){return V},VP:function(){return i},g4:function(){return u},Fu:function(){return a},Rj:function(){return O},tE:function(){return l},iO:function(){return ne},q2:function(){return M},jR:function(){return q},BP:function(){return X},au:function(){return g}});var y=t(76361),s={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",width:60},$={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},g={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},L={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:y.IZ},r={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},i={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},q={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},M={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},G={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},A={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},U={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},B={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},S={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},F={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:y.Xp,width:90},_={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},D={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:y.sv},E={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:y.sv},P={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:y.sv},n={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:y.sv},K={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:y.sv},V={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:y.g7,width:70},X={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:y.m$},ee={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},J={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},Q={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},Y={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},te={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:y.WZ},W={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},ne={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},O={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},u={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},a={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},l={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},27919:function(ae,Z,t){t.d(Z,{Z:function(){return $}});var y=t(50959),s=t(87130),$=function(L){var r=(0,y.useRef)(),i=(0,s.Zl)(L);return(0,y.useEffect)(function(){r!=null&&r.current&&i(r.current)},[]),r}},48626:function(ae,Z,t){t.r(Z),t.d(Z,{default:function(){return je}});var y=t(18172),s=t.n(y),$=t(3849),g=t.n($),L=t(29960),r=t.n(L),i=t(62003),q=t(19842),M=t(27919),G=t(87130),A="toolGen",U=(0,G.cn)({key:"".concat(A,"TableActions"),default:void 0}),B=(0,G.cn)({key:"".concat(A,"PreviewIdAtom"),default:0}),S=t(10439),F=t(71224),_=t(71810),D=t(31968),E=t(78300),P=t(2891),n=t(11527),K=function(d){var o=d.tableIds,h=d.isBatch,C=h===void 0?!1:h,w=C?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",I=o.length===0&&C,m=(0,G.sJ)(U),v=(0,P.Db)(S.LV,{onSuccess:function(){var b;m==null||m.reload(),m==null||(b=m.clearSelected)===null||b===void 0||b.call(m),_.ZP.success("\u5220\u9664\u6210\u529F")}}),R=v.mutateAsync,f=v.isLoading,c=function(){D.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(o.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var b=s()(r().mark(function j(){return r().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,R({tableIds:o});case 2:case"end":return H.stop()}},j)}));function p(){return b.apply(this,arguments)}return p}()})};return(0,n.jsx)(E.Z,{loading:f,icon:(0,n.jsx)(F.Z,{}),type:"link",onClick:c,disabled:I,children:w})},V=K,X=t(85078),ee=t(11227),J=function(d){var o=d.rows,h=o===void 0?[]:o,C=d.isBatch,w=C===void 0?!1:C,I=w?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",m=h.length===0&&w,v=(0,P.Db)(s()(r().mark(function c(){var x;return r().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,S.XS)({tables:h.map(function(j){return j.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:x=p.sent,(0,ee.saveAs)(new Blob([x.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return p.stop()}},c)})),{onSuccess:function(){_.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),R=v.isLoading,f=v.mutate;return(0,n.jsx)(E.Z,{loading:R,onClick:function(){return f()},type:"link",icon:(0,n.jsx)(X.Z,{}),disabled:m,children:I})},Q=J,Y=t(17073),te=t(6659),W=function(d){var o=d.tableId,h=(0,te.useNavigate)();return(0,n.jsx)(E.Z,{type:"link",icon:(0,n.jsx)(Y.Z,{}),onClick:function(){return h("/tool/gen-edit/".concat(o))},children:"\u7F16\u8F91"})},ne=W,O=t(88649),u=t(42267),a=t(17103),l=t(76922),T=t(50959),e=[i.tC,i.jR,i.q2,i.eJ,i.au,i.fk],ue=function(){var d=(0,T.useRef)(),o=(0,G.sJ)(U),h=(0,l.Z)(),C=g()(h,2),w=C[0],I=C[1].toggle,m=(0,T.useState)([]),v=g()(m,2),R=v[0],f=v[1],c=(0,P.Db)(S.qm,{onSuccess:function(){var p,j;o==null||o.reload(),I(),_.ZP.success("\u5BFC\u5165\u6210\u529F"),d==null||(p=d.current)===null||p===void 0||(j=p.clearSelected)===null||j===void 0||j.call(p)}}),x=c.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{type:"primary",onClick:I,icon:(0,n.jsx)(u.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(D.Z,{visible:w,onCancel:I,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return x({tables:R.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(a.Z,{ghost:!0,size:"small",actionRef:d,pagination:{pageSize:10,current:1},columns:e,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(p){f(p)}},options:!1,request:s()(r().mark(function b(){var p,j,k,H=arguments;return r().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,S.we)(O.h$.apply(void 0,H));case 2:return p=z.sent,j=p.rows,k=p.total,z.abrupt("return",{data:j,total:k,success:!0});case 6:case"end":return z.stop()}},b)}))})})]})},oe=ue,ie=t(8667),le=function(d){var o=d.tableId,h=(0,G.Zl)(B);return(0,n.jsx)(E.Z,{onClick:function(){return h(o)},type:"link",icon:(0,n.jsx)(ie.Z,{}),children:"\u9884\u89C8"})},se=le,ce=t(59138),de=function(d){var o=d.tableName,h=(0,P.Db)(s()(r().mark(function I(){return r().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,S.He)({tableName:o});case 2:case"end":return v.stop()}},I)})),{onSuccess:function(){_.ZP.success("\u540C\u6B65\u6210\u529F")}}),C=h.isLoading,w=h.mutate;return(0,n.jsx)(E.Z,{loading:C,type:"link",icon:(0,n.jsx)(ce.Z,{}),onClick:function(){return w()},children:"\u540C\u6B65"})},me=de,ve=t(42020),pe=t(34179),re=t(819),he=t(2097),fe=t(15912),ye=t.n(fe),ge=t(56802),Ge=t(50274),Te=re.Z.TabPane,Ce=function(d){ye()(d),_.ZP.success("\u590D\u5236\u6210\u529F")},be=function(){var d=(0,G.rb)(B),o=(0,G.sJ)(B),h=o>0,C=(0,pe.Z)(s()(r().mark(function m(){var v;return r().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,S.Zd)({tableId:o});case 2:return v=f.sent,f.abrupt("return",Object.keys(v).map(function(c){return{tab:c,key:c,content:v[c],highlightContent:ge.Z.highlightAuto(v[c]).value}}));case 4:case"end":return f.stop()}},m)})),{ready:h,refreshDeps:[o]}),w=C.data,I=C.loading;return(0,n.jsx)(D.Z,{visible:h,onCancel:d,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(he.Z,{spinning:I,children:(0,n.jsx)(re.Z,{tabPosition:"left",children:w&&w.map(function(m){var v=m.key,R=m.tab,f=m.content,c=m.highlightContent;return(0,n.jsxs)(Te,{tab:R,className:"relative",children:[(0,n.jsx)(E.Z,{icon:(0,n.jsx)(ve.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Ce(f)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:c}})})})]},v)})})})})},Ie=be,xe=[i.tC,i.jR,i.q2,i.Jx,i.eJ,i.au,i.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(d,o){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(se,{tableId:o.tableId}),(0,n.jsx)(ne,{tableId:o.tableId}),(0,n.jsx)(V,{tableIds:[o.tableId]}),(0,n.jsx)(me,{tableName:o.tableName}),(0,n.jsx)(Q,{rows:[{tableName:o.tableName,genType:o.genType,genPath:o.genPath}]})]})}}],we=function(){var d=(0,M.Z)(U),o=(0,T.useState)([]),h=g()(o,2),C=h[0],w=h[1],I=(0,T.useState)([]),m=g()(I,2),v=m[0],R=m[1];return(0,n.jsxs)(q.AC,{children:[(0,n.jsx)(a.Z,{actionRef:d,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(c,x){w(c),R(x)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{tableIds:C,isBatch:!0}),(0,n.jsx)(Q,{rows:v.map(function(c){var x=c.tableName,b=c.genType,p=c.genPath;return{tableName:x,genType:b,genPath:p}}),isBatch:!0})]})},columns:xe,toolbar:{actions:[(0,n.jsx)(oe,{},"ButtonCreate")]},request:s()(r().mark(function f(){var c,x,b,p=arguments;return r().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,S.DT)(O.h$.apply(void 0,p));case 2:return c=k.sent,x=c.total,b=c.rows,k.abrupt("return",{data:b,success:!0,total:x});case 6:case"end":return k.stop()}},f)}))}),(0,n.jsx)(Ie,{})]})},je=we},10439:function(ae,Z,t){t.d(Z,{DI:function(){return _},DT:function(){return ee},He:function(){return ne},LV:function(){return te},XS:function(){return q},Zd:function(){return Q},cj:function(){return V},qm:function(){return n},we:function(){return U}});var y=t(55980),s=t.n(y),$=t(18172),g=t.n($),L=t(29960),r=t.n(L),i=t(88649);function q(u,a){return M.apply(this,arguments)}function M(){return M=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/batchGenCode",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),M.apply(this,arguments)}function G(u,a){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,l){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),A.apply(this,arguments)}function U(u,a){return B.apply(this,arguments)}function B(){return B=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/db/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},u)})),B.apply(this,arguments)}function S(u,a){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,l){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),F.apply(this,arguments)}function _(u,a){return D.apply(this,arguments)}function D(){return D=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/edit",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},u)})),D.apply(this,arguments)}function E(u,a){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,l){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),P.apply(this,arguments)}function n(u,a){return K.apply(this,arguments)}function K(){return K=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/importTable",s()({method:"POST",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),K.apply(this,arguments)}function V(u,a){return X.apply(this,arguments)}function X(){return X=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/info",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),X.apply(this,arguments)}function ee(u,a){return J.apply(this,arguments)}function J(){return J=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},u)})),J.apply(this,arguments)}function Q(u,a){return Y.apply(this,arguments)}function Y(){return Y=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/preview",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),Y.apply(this,arguments)}function te(u,a){return W.apply(this,arguments)}function W(){return W=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/remove",s()({method:"POST",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),W.apply(this,arguments)}function ne(u,a){return O.apply(this,arguments)}function O(){return O=g()(r().mark(function u(a,l){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/synchDb",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},u)})),O.apply(this,arguments)}}}]);
