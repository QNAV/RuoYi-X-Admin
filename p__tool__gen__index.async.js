"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[945],{64701:function(ae,D,t){t.d(D,{ew:function(){return Q},Jx:function(){return S},iT:function(){return B},Zi:function(){return L},Bw:function(){return E},eJ:function(){return O},fk:function(){return m},sE:function(){return $},WW:function(){return N},sy:function(){return J},E$:function(){return Y},_M:function(){return te},tC:function(){return u},wX:function(){return W},oh:function(){return R},Uc:function(){return w},x:function(){return n},Mw:function(){return F},p_:function(){return A},$V:function(){return U},Qo:function(){return X},$9:function(){return ee},Jy:function(){return V},VP:function(){return i},g4:function(){return r},Fu:function(){return a},Rj:function(){return Z},tE:function(){return l},iO:function(){return ne},q2:function(){return M},jR:function(){return q},BP:function(){return K},au:function(){return s}});var g=t(96577),u={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",width:60},O={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},s={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},$={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:g.al},m={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},i={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},q={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},M={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},S={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},N={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},L={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},B={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},E={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},U={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:g.gh,width:90},A={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},R={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:g.gc},W={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:g.gc},w={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:g.gc},n={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:g.gc},F={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:g.gc},V={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:g.CX,width:70},K={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:g.V},ee={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},X={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},Q={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},J={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},te={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:g.LZ},Y={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},ne={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},Z={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},r={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},a={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},l={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},89526:function(ae,D,t){t.d(D,{Z:function(){return O}});var g=t(50959),u=t(87130),O=function($){var m=(0,g.useRef)(),i=(0,u.Zl)($);return(0,g.useEffect)(function(){m!=null&&m.current&&i(m.current)},[]),m}},24308:function(ae,D,t){t.r(D),t.d(D,{default:function(){return je}});var g=t(35290),u=t.n(g),O=t(411),s=t.n(O),$=t(46686),m=t.n($),i=t(64701),q=t(46722),M=t(89526),S=t(87130),N="toolGen",L=(0,S.cn)({key:"".concat(N,"TableActions"),default:void 0}),B=(0,S.cn)({key:"".concat(N,"PreviewIdAtom"),default:0}),E=t(84017),U=t(71224),A=t(69080),R=t(25125),W=t(14730),w=t(45593),n=t(11527),F=function(d){var o=d.tableIds,f=d.isBatch,C=f===void 0?!1:f,j=C?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",I=o.length===0&&C,v=(0,S.sJ)(L),p=(0,A.useMutation)(E.LV,{onSuccess:function(){var b;v==null||v.reload(),v==null||(b=v.clearSelected)===null||b===void 0||b.call(v),R.ZP.success("\u5220\u9664\u6210\u529F")}}),P=p.mutateAsync,y=p.isLoading,c=function(){W.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(o.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var b=s()(u()().mark(function G(){return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,P({tableIds:o});case 2:case"end":return H.stop()}},G)}));function h(){return b.apply(this,arguments)}return h}()})};return(0,n.jsx)(w.Z,{loading:y,icon:(0,n.jsx)(U.Z,{}),type:"link",onClick:c,disabled:I,children:j})},V=F,K=t(85078),ee=t(11227),X=function(d){var o=d.rows,f=o===void 0?[]:o,C=d.isBatch,j=C===void 0?!1:C,I=j?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",v=f.length===0&&j,p=(0,A.useMutation)(s()(u()().mark(function c(){var x;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,E.XS)({tables:f.map(function(G){return G.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:x=h.sent,(0,ee.saveAs)(new Blob([x.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return h.stop()}},c)})),{onSuccess:function(){R.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),P=p.isLoading,y=p.mutate;return(0,n.jsx)(w.Z,{loading:P,onClick:function(){return y()},type:"link",icon:(0,n.jsx)(K.Z,{}),disabled:v,children:I})},Q=X,J=t(17073),te=t(35958),Y=function(d){var o=d.tableId,f=(0,te.useNavigate)();return(0,n.jsx)(w.Z,{type:"link",icon:(0,n.jsx)(J.Z,{}),onClick:function(){return f("/tool/gen-edit/".concat(o))},children:"\u7F16\u8F91"})},ne=Y,Z=t(85403),r=t(42267),a=t(85234),l=t(28069),T=t(50959),e=[i.tC,i.jR,i.q2,i.eJ,i.au,i.fk],ue=function(){var d=(0,T.useRef)(),o=(0,S.sJ)(L),f=(0,l.Z)(),C=m()(f,2),j=C[0],I=C[1].toggle,v=(0,T.useState)([]),p=m()(v,2),P=p[0],y=p[1],c=(0,A.useMutation)(E.qm,{onSuccess:function(){var h,G;o==null||o.reload(),I(),R.ZP.success("\u5BFC\u5165\u6210\u529F"),d==null||(h=d.current)===null||h===void 0||(G=h.clearSelected)===null||G===void 0||G.call(h)}}),x=c.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w.Z,{type:"primary",onClick:I,icon:(0,n.jsx)(r.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(W.Z,{visible:j,onCancel:I,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return x({tables:P.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(a.Z,{ghost:!0,size:"small",actionRef:d,pagination:{pageSize:10,current:1},columns:e,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(h){y(h)}},options:!1,request:s()(u()().mark(function b(){var h,G,k,H=arguments;return u()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,(0,E.we)(Z.h$.apply(void 0,H));case 2:return h=z.sent,G=h.rows,k=h.total,z.abrupt("return",{data:G,total:k,success:!0});case 6:case"end":return z.stop()}},b)}))})})]})},oe=ue,ie=t(8667),le=function(d){var o=d.tableId,f=(0,S.Zl)(B);return(0,n.jsx)(w.Z,{onClick:function(){return f(o)},type:"link",icon:(0,n.jsx)(ie.Z,{}),children:"\u9884\u89C8"})},se=le,ce=t(59138),de=function(d){var o=d.tableName,f=(0,A.useMutation)(s()(u()().mark(function I(){return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,E.He)({tableName:o});case 2:case"end":return p.stop()}},I)})),{onSuccess:function(){R.ZP.success("\u540C\u6B65\u6210\u529F")}}),C=f.isLoading,j=f.mutate;return(0,n.jsx)(w.Z,{loading:C,type:"link",icon:(0,n.jsx)(ce.Z,{}),onClick:function(){return j()},children:"\u540C\u6B65"})},me=de,ve=t(42020),pe=t(63708),re=t(40177),he=t(79557),fe=t(15912),ye=t.n(fe),ge=t(56802),Re=t(26527),Te=re.Z.TabPane,Ce=function(d){ye()(d),R.ZP.success("\u590D\u5236\u6210\u529F")},be=function(){var d=(0,S.rb)(B),o=(0,S.sJ)(B),f=o>0,C=(0,pe.Z)(s()(u()().mark(function v(){var p;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,E.Zd)({tableId:o});case 2:return p=y.sent,y.abrupt("return",Object.keys(p).map(function(c){return{tab:c,key:c,content:p[c],highlightContent:ge.Z.highlightAuto(p[c]).value}}));case 4:case"end":return y.stop()}},v)})),{ready:f,refreshDeps:[o]}),j=C.data,I=C.loading;return(0,n.jsx)(W.Z,{visible:f,onCancel:d,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(he.Z,{spinning:I,children:(0,n.jsx)(re.Z,{tabPosition:"left",children:j&&j.map(function(v){var p=v.key,P=v.tab,y=v.content,c=v.highlightContent;return(0,n.jsxs)(Te,{tab:P,className:"relative",children:[(0,n.jsx)(w.Z,{icon:(0,n.jsx)(ve.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Ce(y)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:c}})})})]},p)})})})})},Ie=be,xe=[i.tC,i.jR,i.q2,i.Jx,i.eJ,i.au,i.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(d,o){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(se,{tableId:o.tableId}),(0,n.jsx)(ne,{tableId:o.tableId}),(0,n.jsx)(V,{tableIds:[o.tableId]}),(0,n.jsx)(me,{tableName:o.tableName}),(0,n.jsx)(Q,{rows:[{tableName:o.tableName,genType:o.genType,genPath:o.genPath}]})]})}}],we=function(){var d=(0,M.Z)(L),o=(0,T.useState)([]),f=m()(o,2),C=f[0],j=f[1],I=(0,T.useState)([]),v=m()(I,2),p=v[0],P=v[1];return(0,n.jsxs)(q.AC,{children:[(0,n.jsx)(a.Z,{actionRef:d,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(c,x){j(c),P(x)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(V,{tableIds:C,isBatch:!0}),(0,n.jsx)(Q,{rows:p.map(function(c){var x=c.tableName,b=c.genType,h=c.genPath;return{tableName:x,genType:b,genPath:h}}),isBatch:!0})]})},columns:xe,toolbar:{actions:[(0,n.jsx)(oe,{},"ButtonCreate")]},request:s()(u()().mark(function y(){var c,x,b,h=arguments;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,E.DT)(Z.h$.apply(void 0,h));case 2:return c=k.sent,x=c.total,b=c.rows,k.abrupt("return",{data:b,success:!0,total:x});case 6:case"end":return k.stop()}},y)}))}),(0,n.jsx)(Ie,{})]})},je=we},84017:function(ae,D,t){t.d(D,{DI:function(){return A},DT:function(){return ee},He:function(){return ne},LV:function(){return te},XS:function(){return q},Zd:function(){return Q},cj:function(){return V},qm:function(){return n},we:function(){return L}});var g=t(35290),u=t.n(g),O=t(30279),s=t.n(O),$=t(411),m=t.n($),i=t(85403);function q(r,a){return M.apply(this,arguments)}function M(){return M=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/batchGenCode",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function S(r,a){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),N.apply(this,arguments)}function L(r,a){return B.apply(this,arguments)}function B(){return B=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/db/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function E(r,a){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),U.apply(this,arguments)}function A(r,a){return R.apply(this,arguments)}function R(){return R=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/edit",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function W(r,a){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,l){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function n(r,a){return F.apply(this,arguments)}function F(){return F=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/importTable",s()({method:"POST",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function V(r,a){return K.apply(this,arguments)}function K(){return K=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/info",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}function ee(r,a){return X.apply(this,arguments)}function X(){return X=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:a},l||{})));case 1:case"end":return e.stop()}},r)})),X.apply(this,arguments)}function Q(r,a){return J.apply(this,arguments)}function J(){return J=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/preview",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),J.apply(this,arguments)}function te(r,a){return Y.apply(this,arguments)}function Y(){return Y=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/remove",s()({method:"POST",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),Y.apply(this,arguments)}function ne(r,a){return Z.apply(this,arguments)}function Z(){return Z=m()(u()().mark(function r(a,l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.h3)("/tool/gen/synchDb",s()({method:"GET",params:s()({},a)},l||{})));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}}}]);
