"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[945],{20747:function(ae,W,t){t.d(W,{ew:function(){return B},Jx:function(){return H},iT:function(){return w},Zi:function(){return F},Bw:function(){return ee},eJ:function(){return g},fk:function(){return i},sE:function(){return V},WW:function(){return P},sy:function(){return O},E$:function(){return X},_M:function(){return q},tC:function(){return l},wX:function(){return T},oh:function(){return S},Uc:function(){return n},x:function(){return _},Mw:function(){return N},p_:function(){return D},$V:function(){return E},Qo:function(){return Z},$9:function(){return z},Jy:function(){return L},VP:function(){return x},g4:function(){return r},Fu:function(){return a},Rj:function(){return J},tE:function(){return u},iO:function(){return Q},q2:function(){return I},jR:function(){return A},BP:function(){return k},au:function(){return v}});var y=t(31194),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},g={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},v={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},V={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:y.al},i={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},x={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},A={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},I={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},H={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},P={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},F={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},w={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},ee={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},E={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:y.gh,width:90},D={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},S={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:y.gc},T={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:y.gc},n={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:y.gc},_={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:y.gc},N={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:y.gc},L={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:y.CX,width:70},k={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:y.V},z={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},Z={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},B={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},O={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},q={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:y.LZ},X={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},Q={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},J={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},r={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},a={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},u={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},44926:function(ae,W,t){t.d(W,{Z:function(){return g},n:function(){return E}});var y=t(50959),l=t(98205),g=function(S){var T=(0,y.useRef)(),n=(0,l.Zl)(S);return(0,y.useEffect)(function(){T!=null&&T.current&&n(T.current)},[]),T},v=t(35290),V=t.n(v),i=t(411),x=t.n(i),A=t(94434),I=t.n(A),H=t(46686),P=t.n(H),F=t(70264),w=t(32222),ee=t.n(w),E=function(S){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=(0,y.useState)([]),N=P()(_,2),L=N[0],k=N[1],z=(0,y.useState)([]),Z=P()(z,2),B=Z[0],O=Z[1],q={alwaysShowAlert:n,type:T,selectedRowKeys:L,onChange:function(a,u){O(u),k(a)}},X=function(a){var u=a[S],s=[a],e=[u];if(T==="checkbox")if(e=I()(L),s=ee()(B),e.includes(u)){var $=L.indexOf(u);e.splice($,1),s.splice($,1)}else s.push(a),e.push(u);O(s),k(e)},Q=function(){O([]),k([])},J=function(){var r=x()(V()().mark(function a(){var u,s=arguments;return V()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(u=s.length>0&&s[0]!==void 0?s[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(B==null?void 0:B.length)!==0){$.next=4;break}return F.ZP.warning(u),$.abrupt("return",Promise.reject(u));case 4:return $.abrupt("return",Promise.resolve(B));case 5:case"end":return $.stop()}},a)}));return function(){return r.apply(this,arguments)}}();return{selectedRows:B,selectedRowKeys:L,rowSelection:q,onClick:X,clearSelection:Q,setSelectedRowKeys:k,checkRowSelection:J}}},5272:function(ae,W,t){t.r(W),t.d(W,{default:function(){return Re}});var y=t(46686),l=t.n(y),g=t(20747),v=t(44926),V=t(35290),i=t.n(V),x=t(411),A=t.n(x),I=t(98205),H="toolGen",P=(0,I.cn)({key:"".concat(H,"TableActions"),default:void 0}),F=(0,I.cn)({key:"".concat(H,"PreviewIdAtom"),default:0}),w=t(56647),ee=t(39449),E=t(3650),D=t(70264),S=t(9535),T=t(61857),n=t(11527),_=function(c){var o=c.tableIds,p=c.isBatch,C=p===void 0?!1:p,j=C?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",R=o.length===0&&C,d=(0,I.sJ)(P),m=(0,E.useMutation)(w.LV,{onSuccess:function(){var G;d==null||d.reload(),d==null||(G=d.clearSelected)===null||G===void 0||G.call(d),D.ZP.success("\u5220\u9664\u6210\u529F")}}),K=m.mutateAsync,b=m.isLoading,h=function(){S.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(o.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var G=A()(i()().mark(function U(){return i()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,K({tableIds:o});case 2:case"end":return te.stop()}},U)}));function f(){return G.apply(this,arguments)}return f}()})};return(0,n.jsx)(T.Z,{loading:b,icon:(0,n.jsx)(ee.Z,{}),type:"link",onClick:h,disabled:R,children:j})},N=_,L=t(56746),k=t(11227),z=function(c){var o=c.rows,p=o===void 0?[]:o,C=c.isBatch,j=C===void 0?!1:C,R=j?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",d=p.length===0&&j,m=(0,E.useMutation)(A()(i()().mark(function h(){var M;return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,w.XS)({tables:p.map(function(U){return U.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:M=f.sent,(0,k.saveAs)(new Blob([M.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return f.stop()}},h)})),{onSuccess:function(){D.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),K=m.isLoading,b=m.mutate;return(0,n.jsx)(T.Z,{loading:K,onClick:function(){return b()},type:"link",icon:(0,n.jsx)(L.Z,{}),disabled:d,children:R})},Z=z,B=t(26099),O=t(53136),q=function(c){var o=c.tableId,p=(0,O.useNavigate)();return(0,n.jsx)(T.Z,{type:"link",icon:(0,n.jsx)(B.Z,{}),onClick:function(){return p("/tool/gen-edit/".concat(o))},children:"\u7F16\u8F91"})},X=q,Q=t(45402),J=t(4412),r=t(14398),a=t(81027),u=t(50959),s=[g.tC,g.jR,g.q2,g.eJ,g.au,g.fk],e=function(){var c=(0,u.useRef)(),o=(0,I.sJ)(P),p=(0,a.Z)(),C=l()(p,2),j=C[0],R=C[1].toggle,d=(0,u.useState)([]),m=l()(d,2),K=m[0],b=m[1],h=(0,E.useMutation)(w.qm,{onSuccess:function(){var f,U;o==null||o.reload(),R(),D.ZP.success("\u5BFC\u5165\u6210\u529F"),c==null||(f=c.current)===null||f===void 0||(U=f.clearSelected)===null||U===void 0||U.call(f)}}),M=h.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.Z,{type:"primary",onClick:R,icon:(0,n.jsx)(J.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(S.Z,{visible:j,onCancel:R,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return M({tables:K.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(r.Z,{ghost:!0,size:"small",actionRef:c,pagination:{pageSize:10,current:1},columns:s,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(f){b(f)}},options:!1,request:A()(i()().mark(function G(){var f,U,re,te=arguments;return i()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,(0,w.we)(Q.h$.apply(void 0,te));case 2:return f=ne.sent,U=f.rows,re=f.total,ne.abrupt("return",{data:U,total:re,success:!0});case 6:case"end":return ne.stop()}},G)}))})})]})},$=e,oe=t(65184),le=function(c){var o=c.tableId,p=(0,I.Zl)(F);return(0,n.jsx)(T.Z,{onClick:function(){return p(o)},type:"link",icon:(0,n.jsx)(oe.Z,{}),children:"\u9884\u89C8"})},ie=le,se=t(81350),ce=function(c){var o=c.tableName,p=(0,E.useMutation)(A()(i()().mark(function R(){return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,w.He)({tableName:o});case 2:case"end":return m.stop()}},R)})),{onSuccess:function(){D.ZP.success("\u540C\u6B65\u6210\u529F")}}),C=p.isLoading,j=p.mutate;return(0,n.jsx)(T.Z,{loading:C,type:"link",icon:(0,n.jsx)(se.Z,{}),onClick:function(){return j()},children:"\u540C\u6B65"})},de=ce,me=t(62991),ve=t(84337),ue=t(40729),pe=t(96022),he=t(86322),fe=t.n(he),ye=t(56802),Se=t(46980),ge=ue.Z.TabPane,Te=function(c){fe()(c),D.ZP.success("\u590D\u5236\u6210\u529F")},Ce=function(){var c=(0,I.rb)(F),o=(0,I.sJ)(F),p=o>0,C=(0,ve.Z)(A()(i()().mark(function d(){var m;return i()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(0,w.Zd)({tableId:o});case 2:return m=b.sent,b.abrupt("return",Object.keys(m).map(function(h){return{tab:h,key:h,content:m[h],highlightContent:ye.Z.highlightAuto(m[h]).value}}));case 4:case"end":return b.stop()}},d)})),{ready:p,refreshDeps:[o]}),j=C.data,R=C.loading;return(0,n.jsx)(S.Z,{visible:p,onCancel:c,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(pe.Z,{spinning:R,children:(0,n.jsx)(ue.Z,{tabPosition:"left",children:j&&j.map(function(d){var m=d.key,K=d.tab,b=d.content,h=d.highlightContent;return(0,n.jsxs)(ge,{tab:K,className:"relative",children:[(0,n.jsx)(T.Z,{icon:(0,n.jsx)(me.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Te(b)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:h}})})})]},m)})})})})},be=Ce,xe=t(92112),Ie=[g.tC,g.jR,g.q2,g.Jx,g.eJ,g.au,g.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(c,o){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ie,{tableId:o.tableId}),(0,n.jsx)(X,{tableId:o.tableId}),(0,n.jsx)(N,{tableIds:[o.tableId]}),(0,n.jsx)(de,{tableName:o.tableName}),(0,n.jsx)(Z,{rows:[{tableName:o.tableName,genType:o.genType,genPath:o.genPath}]})]})}}],we=function(){var c=(0,v.Z)(P),o=(0,u.useState)([]),p=l()(o,2),C=p[0],j=p[1],R=(0,u.useState)([]),d=l()(R,2),m=d[0],K=d[1];return(0,n.jsxs)(xe.ZP,{children:[(0,n.jsx)(r.Z,{actionRef:c,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(h,M){j(h),K(M)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{tableIds:C,isBatch:!0}),(0,n.jsx)(Z,{rows:m.map(function(h){var M=h.tableName,G=h.genType,f=h.genPath;return{tableName:M,genType:G,genPath:f}}),isBatch:!0})]})},columns:Ie,toolbar:{actions:[(0,n.jsx)($,{},"ButtonImport")]},request:function(){return(0,w.DT)(Q.h$.apply(void 0,arguments))}}),(0,n.jsx)(be,{})]})},Re=we},56647:function(ae,W,t){t.d(W,{DI:function(){return D},DT:function(){return z},He:function(){return Q},LV:function(){return q},XS:function(){return A},Zd:function(){return B},cj:function(){return L},qm:function(){return _},we:function(){return F}});var y=t(35290),l=t.n(y),g=t(30279),v=t.n(g),V=t(411),i=t.n(V),x=t(45402);function A(r,a){return I.apply(this,arguments)}function I(){return I=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/batchGenCode",v()({method:"GET",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function H(r,a){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function F(r,a){return w.apply(this,arguments)}function w(){return w=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/db/list",v()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return e.stop()}},r)})),w.apply(this,arguments)}function ee(r,a){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function D(r,a){return S.apply(this,arguments)}function S(){return S=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/edit",v()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function T(r,a){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(_regeneratorRuntime().mark(function r(a,u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),n.apply(this,arguments)}function _(r,a){return N.apply(this,arguments)}function N(){return N=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/importTable",v()({method:"POST",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),N.apply(this,arguments)}function L(r,a){return k.apply(this,arguments)}function k(){return k=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/info",v()({method:"GET",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function z(r,a){return Z.apply(this,arguments)}function Z(){return Z=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/list",v()({method:"POST",headers:{"Content-Type":"application/json"},data:a},u||{})));case 1:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function B(r,a){return O.apply(this,arguments)}function O(){return O=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/preview",v()({method:"GET",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function q(r,a){return X.apply(this,arguments)}function X(){return X=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/remove",v()({method:"POST",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),X.apply(this,arguments)}function Q(r,a){return J.apply(this,arguments)}function J(){return J=i()(l()().mark(function r(a,u){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,x.h3)("/tool/gen/synchDb",v()({method:"GET",params:v()({},a)},u||{})));case 1:case"end":return e.stop()}},r)})),J.apply(this,arguments)}}}]);
