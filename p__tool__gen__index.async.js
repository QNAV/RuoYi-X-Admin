"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[945],{6923:function(se,z,e){e.d(z,{Z:function(){return d},n:function(){return q}});var E=e(50959),N=e(98205),d=function(b){var y=(0,E.useRef)(),S=(0,N.Zl)(b);return(0,E.useEffect)(function(){y!=null&&y.current&&S(y.current)},[]),y},X=e(35290),H=e.n(X),W=e(411),g=e.n(W),Y=e(94434),T=e.n(Y),Z=e(46686),L=e.n(Z),M=e(55024),J=e(32222),w=e.n(J),q=function(b){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,t=(0,E.useState)([]),V=L()(t,2),D=V[0],$=V[1],_=(0,E.useState)([]),Q=L()(_,2),A=Q[0],k=Q[1],ee={alwaysShowAlert:S,type:y,selectedRowKeys:D,onChange:function(C,p){k(p),$(C)}},te=function(C){var p=C[b],h=[C],P=[p];if(y==="checkbox")if(P=T()(D),h=w()(A),P.includes(p)){var j=D.indexOf(p);P.splice(j,1),h.splice(j,1)}else h.push(C),P.push(p);k(h),$(P)},ne=function(){k([]),$([])},U=function(){var K=g()(H()().mark(function C(){var p,h=arguments;return H()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(p=h.length>0&&h[0]!==void 0?h[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(A==null?void 0:A.length)!==0){j.next=4;break}return M.ZP.warning(p),j.abrupt("return",Promise.reject(p));case 4:return j.abrupt("return",Promise.resolve(A));case 5:case"end":return j.stop()}},C)}));return function(){return K.apply(this,arguments)}}();return{selectedRows:A,selectedRowKeys:D,rowSelection:ee,onClick:te,clearSelection:ne,setSelectedRowKeys:$,checkRowSelection:U}}},84264:function(se,z,e){e.r(z),e.d(z,{default:function(){return Ze}});var E=e(46686),N=e.n(E),d=e(91500),X=e(15769),H=e(6923),W=e(35290),g=e.n(W),Y=e(411),T=e.n(Y),Z=e(98205),L="toolGen",M=(0,Z.cn)({key:"".concat(L,"TableActions"),default:void 0}),J=(0,Z.cn)({key:"".concat(L,"PreviewIdAtom"),default:0}),w=e(45214),q=e(39449),O=e(28622),b=e(55024),y=e(88171),S=e(4733),t=e(11527),V=function(a){var n=a.tableIds,r=a.isBatch,i=r===void 0?!1:r,f=i?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",v=n.length===0&&i,o=(0,Z.sJ)(M),s=(0,O.D)(w.LV,{onSuccess:function(){var m;o==null||o.reload(),o==null||(m=o.clearSelected)===null||m===void 0||m.call(o),b.ZP.success("\u5220\u9664\u6210\u529F")}}),B=s.mutateAsync,c=s.isLoading,l=function(){y.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(n.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var m=T()(g()().mark(function x(){return g()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,B({tableIds:n});case 2:case"end":return F.stop()}},x)}));function u(){return m.apply(this,arguments)}return u}()})};return(0,t.jsx)(S.Z,{loading:c,icon:(0,t.jsx)(q.Z,{}),type:"link",onClick:l,disabled:v,children:f})},D=V,$=e(56746),_=e(11227),Q=function(a){var n=a.rows,r=n===void 0?[]:n,i=a.isBatch,f=i===void 0?!1:i,v=f?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",o=r.length===0&&f,s=(0,O.D)(T()(g()().mark(function l(){var R;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,w.XS)({tables:r.map(function(x){return x.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:R=u.sent,(0,_.saveAs)(new Blob([R.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return u.stop()}},l)})),{onSuccess:function(){b.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),B=s.isLoading,c=s.mutate;return(0,t.jsx)(S.Z,{loading:B,onClick:function(){return c()},type:"link",icon:(0,t.jsx)($.Z,{}),disabled:o,children:v})},A=Q,k=e(26099),ee=e(18662),te=function(a){var n=a.tableId,r=(0,ee.useNavigate)();return(0,t.jsx)(S.Z,{type:"link",icon:(0,t.jsx)(k.Z,{}),onClick:function(){return r("/tool/gen-edit/".concat(n))},children:"\u7F16\u8F91"})},ne=te,U=e(72259),K=e(4412),C=e(78054),p=e(22449),h=e(50959),P=[d.tC,d.jR,d.q2,d.eJ,d.au,d.fk],j=function(){var a=(0,h.useRef)(),n=(0,Z.sJ)(M),r=(0,p.Z)(),i=N()(r,2),f=i[0],v=i[1].toggle,o=(0,h.useState)([]),s=N()(o,2),B=s[0],c=s[1],l=(0,O.D)(w.qm,{onSuccess:function(){var u,x;n==null||n.reload(),v(),b.ZP.success("\u5BFC\u5165\u6210\u529F"),a==null||(u=a.current)===null||u===void 0||(x=u.clearSelected)===null||x===void 0||x.call(u)}}),R=l.mutate;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{type:"primary",onClick:v,icon:(0,t.jsx)(K.Z,{}),children:"\u5BFC\u5165"}),(0,t.jsx)(y.Z,{visible:f,onCancel:v,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return R({tables:B.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,t.jsx)(C.QVr,{ghost:!0,size:"small",actionRef:a,pagination:{pageSize:10,current:1},columns:P,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(u){c(u)}},options:!1,request:T()(g()().mark(function m(){var u,x,ae,F=arguments;return g()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,w.we)(U.h$.apply(void 0,F));case 2:return u=G.sent,x=u.rows,ae=u.total,G.abrupt("return",{data:x,total:ae,success:!0});case 6:case"end":return G.stop()}},m)}))})})]})},re=j,le=e(65184),ue=function(a){var n=a.tableId,r=(0,Z.Zl)(J);return(0,t.jsx)(S.Z,{onClick:function(){return r(n)},type:"link",icon:(0,t.jsx)(le.Z,{}),children:"\u9884\u89C8"})},ie=ue,ce=e(81350),de=function(a){var n=a.tableName,r=(0,O.D)(T()(g()().mark(function v(){return g()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,w.He)({tableName:n});case 2:case"end":return s.stop()}},v)})),{onSuccess:function(){b.ZP.success("\u540C\u6B65\u6210\u529F")}}),i=r.isLoading,f=r.mutate;return(0,t.jsx)(S.Z,{loading:i,type:"link",icon:(0,t.jsx)(ce.Z,{}),onClick:function(){return f()},children:"\u540C\u6B65"})},ve=de,he=e(62991),fe=e(41202),oe=e(49256),me=e(68707),ge=e(86322),ye=e.n(ge),pe=e(56802),we=e(15199),Se=oe.Z.TabPane,Ce=function(a){ye()(a),b.ZP.success("\u590D\u5236\u6210\u529F")},je=function(){var a=(0,Z.rb)(J),n=(0,Z.sJ)(J),r=n>0,i=(0,fe.Z)(T()(g()().mark(function o(){var s;return g()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,w.Zd)({tableId:n});case 2:return s=c.sent,c.abrupt("return",Object.keys(s).map(function(l){return{tab:l,key:l,content:s[l],highlightContent:pe.Z.highlightAuto(s[l]).value}}));case 4:case"end":return c.stop()}},o)})),{ready:r,refreshDeps:[n]}),f=i.data,v=i.loading;return(0,t.jsx)(y.Z,{visible:r,onCancel:a,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,t.jsx)(me.Z,{spinning:v,children:(0,t.jsx)(oe.Z,{tabPosition:"left",children:f&&f.map(function(o){var s=o.key,B=o.tab,c=o.content,l=o.highlightContent;return(0,t.jsxs)(Se,{tab:B,className:"relative",children:[(0,t.jsx)(S.Z,{icon:(0,t.jsx)(he.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Ce(c)},children:"\u590D\u5236\u4EE3\u7801"}),(0,t.jsx)("pre",{children:(0,t.jsx)("code",{children:(0,t.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:l}})})})]},s)})})})})},Re=je,Be=[d.tC,d.jR,d.q2,d.Jx,d.eJ,d.au,d.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(a,n){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ie,{tableId:n.tableId}),(0,t.jsx)(ne,{tableId:n.tableId}),(0,t.jsx)(D,{tableIds:[n.tableId]}),(0,t.jsx)(ve,{tableName:n.tableName}),(0,t.jsx)(A,{rows:[{tableName:n.tableName,genType:n.genType,genPath:n.genPath}]})]})}}],xe=function(){var a=(0,H.Z)(M),n=(0,h.useState)([]),r=N()(n,2),i=r[0],f=r[1],v=(0,h.useState)([]),o=N()(v,2),s=o[0],B=o[1];return(0,t.jsxs)(X.A,{children:[(0,t.jsx)(C.QVr,{actionRef:a,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(l,R){f(l),B(R)}},tableAlertOptionRender:function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D,{tableIds:i,isBatch:!0}),(0,t.jsx)(A,{rows:s.map(function(l){var R=l.tableName,m=l.genType,u=l.genPath;return{tableName:R,genType:m,genPath:u}}),isBatch:!0})]})},columns:Be,toolbar:{actions:[(0,t.jsx)(re,{},"ButtonImport")]},request:function(){return(0,w.DT)(U.h$.apply(void 0,arguments))}}),(0,t.jsx)(Re,{})]})},Ze=xe}}]);
