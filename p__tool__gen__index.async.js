"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[945],{78798:function(ae,Z,t){t.d(Z,{ew:function(){return ee},Jx:function(){return Q},iT:function(){return j},Zi:function(){return L},Bw:function(){return ne},eJ:function(){return $},fk:function(){return m},sE:function(){return M},WW:function(){return B},sy:function(){return F},E$:function(){return K},_M:function(){return te},tC:function(){return u},wX:function(){return S},oh:function(){return D},Uc:function(){return n},x:function(){return H},Mw:function(){return A},p_:function(){return _},$V:function(){return P},Qo:function(){return O},$9:function(){return q},Jy:function(){return z},VP:function(){return l},g4:function(){return a},Fu:function(){return r},Rj:function(){return X},tE:function(){return o},iO:function(){return J},q2:function(){return w},jR:function(){return V},BP:function(){return U},au:function(){return s}});var g=t(85880),u={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",width:60},$={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},s={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},M={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:g.al},m={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},l={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},V={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},w={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},Q={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},B={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},L={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},j={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},ne={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},P={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:g.gh,width:90},_={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},D={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:g.gc},S={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:g.gc},n={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:g.gc},H={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:g.gc},A={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:g.gc},z={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:g.CX,width:70},U={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:g.V},q={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},O={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},ee={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},F={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},te={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:g.LZ},K={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},J={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},X={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},a={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},r={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},o={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},79797:function(ae,Z,t){t.d(Z,{Z:function(){return $}});var g=t(50959),u=t(98205),$=function(M){var m=(0,g.useRef)(),l=(0,u.Zl)(M);return(0,g.useEffect)(function(){m!=null&&m.current&&l(m.current)},[]),m}},72990:function(ae,Z,t){t.r(Z),t.d(Z,{default:function(){return je}});var g=t(35290),u=t.n(g),$=t(411),s=t.n($),M=t(46686),m=t.n(M),l=t(78798),V=t(79797),w=t(98205),Q="toolGen",B=(0,w.cn)({key:"".concat(Q,"TableActions"),default:void 0}),L=(0,w.cn)({key:"".concat(Q,"PreviewIdAtom"),default:0}),j=t(59373),ne=t(71224),P=t(3650),_=t(25081),D=t(74444),S=t(61857),n=t(11527),H=function(d){var i=d.tableIds,f=d.isBatch,T=f===void 0?!1:f,R=T?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",b=i.length===0&&T,v=(0,w.sJ)(B),p=(0,P.useMutation)(j.LV,{onSuccess:function(){var C;v==null||v.reload(),v==null||(C=v.clearSelected)===null||C===void 0||C.call(v),_.ZP.success("\u5220\u9664\u6210\u529F")}}),E=p.mutateAsync,y=p.isLoading,c=function(){D.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(i.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var C=s()(u()().mark(function G(){return u()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,E({tableIds:i});case 2:case"end":return Y.stop()}},G)}));function h(){return C.apply(this,arguments)}return h}()})};return(0,n.jsx)(S.Z,{loading:y,icon:(0,n.jsx)(ne.Z,{}),type:"link",onClick:c,disabled:b,children:R})},A=H,z=t(85078),U=t(11227),q=function(d){var i=d.rows,f=i===void 0?[]:i,T=d.isBatch,R=T===void 0?!1:T,b=R?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",v=f.length===0&&R,p=(0,P.useMutation)(s()(u()().mark(function c(){var x;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,j.XS)({tables:f.map(function(G){return G.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:x=h.sent,(0,U.saveAs)(new Blob([x.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return h.stop()}},c)})),{onSuccess:function(){_.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),E=p.isLoading,y=p.mutate;return(0,n.jsx)(S.Z,{loading:E,onClick:function(){return y()},type:"link",icon:(0,n.jsx)(z.Z,{}),disabled:v,children:b})},O=q,ee=t(17073),F=t(62325),te=function(d){var i=d.tableId,f=(0,F.useNavigate)();return(0,n.jsx)(S.Z,{type:"link",icon:(0,n.jsx)(ee.Z,{}),onClick:function(){return f("/tool/gen-edit/".concat(i))},children:"\u7F16\u8F91"})},K=te,J=t(12824),X=t(42267),a=t(33297),r=t(86794),o=t(50959),I=[l.tC,l.jR,l.q2,l.eJ,l.au,l.fk],e=function(){var d=(0,o.useRef)(),i=(0,w.sJ)(B),f=(0,r.Z)(),T=m()(f,2),R=T[0],b=T[1].toggle,v=(0,o.useState)([]),p=m()(v,2),E=p[0],y=p[1],c=(0,P.useMutation)(j.qm,{onSuccess:function(){var h,G;i==null||i.reload(),b(),_.ZP.success("\u5BFC\u5165\u6210\u529F"),d==null||(h=d.current)===null||h===void 0||(G=h.clearSelected)===null||G===void 0||G.call(h)}}),x=c.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.Z,{type:"primary",onClick:b,icon:(0,n.jsx)(X.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(D.Z,{visible:R,onCancel:b,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return x({tables:E.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(a.Z,{ghost:!0,size:"small",actionRef:d,pagination:{pageSize:10,current:1},columns:I,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(h){y(h)}},options:!1,request:s()(u()().mark(function C(){var h,G,k,Y=arguments;return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,j.we)(J.h$.apply(void 0,Y));case 2:return h=W.sent,G=h.rows,k=h.total,W.abrupt("return",{data:G,total:k,success:!0});case 6:case"end":return W.stop()}},C)}))})})]})},ue=e,oe=t(8667),ie=function(d){var i=d.tableId,f=(0,w.Zl)(L);return(0,n.jsx)(S.Z,{onClick:function(){return f(i)},type:"link",icon:(0,n.jsx)(oe.Z,{}),children:"\u9884\u89C8"})},le=ie,se=t(59138),ce=function(d){var i=d.tableName,f=(0,P.useMutation)(s()(u()().mark(function b(){return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,j.He)({tableName:i});case 2:case"end":return p.stop()}},b)})),{onSuccess:function(){_.ZP.success("\u540C\u6B65\u6210\u529F")}}),T=f.isLoading,R=f.mutate;return(0,n.jsx)(S.Z,{loading:T,type:"link",icon:(0,n.jsx)(se.Z,{}),onClick:function(){return R()},children:"\u540C\u6B65"})},de=ce,me=t(42020),ve=t(10979),re=t(26494),pe=t(96022),he=t(86322),fe=t.n(he),ye=t(56802),Re=t(31982),ge=re.Z.TabPane,Te=function(d){fe()(d),_.ZP.success("\u590D\u5236\u6210\u529F")},Ce=function(){var d=(0,w.rb)(L),i=(0,w.sJ)(L),f=i>0,T=(0,ve.Z)(s()(u()().mark(function v(){var p;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,j.Zd)({tableId:i});case 2:return p=y.sent,y.abrupt("return",Object.keys(p).map(function(c){return{tab:c,key:c,content:p[c],highlightContent:ye.Z.highlightAuto(p[c]).value}}));case 4:case"end":return y.stop()}},v)})),{ready:f,refreshDeps:[i]}),R=T.data,b=T.loading;return(0,n.jsx)(D.Z,{visible:f,onCancel:d,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(pe.Z,{spinning:b,children:(0,n.jsx)(re.Z,{tabPosition:"left",children:R&&R.map(function(v){var p=v.key,E=v.tab,y=v.content,c=v.highlightContent;return(0,n.jsxs)(ge,{tab:E,className:"relative",children:[(0,n.jsx)(S.Z,{icon:(0,n.jsx)(me.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Te(y)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:c}})})})]},p)})})})})},be=Ce,Ie=t(47652),xe=[l.tC,l.jR,l.q2,l.Jx,l.eJ,l.au,l.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(d,i){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(le,{tableId:i.tableId}),(0,n.jsx)(K,{tableId:i.tableId}),(0,n.jsx)(A,{tableIds:[i.tableId]}),(0,n.jsx)(de,{tableName:i.tableName}),(0,n.jsx)(O,{rows:[{tableName:i.tableName,genType:i.genType,genPath:i.genPath}]})]})}}],we=function(){var d=(0,V.Z)(B),i=(0,o.useState)([]),f=m()(i,2),T=f[0],R=f[1],b=(0,o.useState)([]),v=m()(b,2),p=v[0],E=v[1];return(0,n.jsxs)(Ie.ZP,{children:[(0,n.jsx)(a.Z,{actionRef:d,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(c,x){R(c),E(x)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{tableIds:T,isBatch:!0}),(0,n.jsx)(O,{rows:p.map(function(c){var x=c.tableName,C=c.genType,h=c.genPath;return{tableName:x,genType:C,genPath:h}}),isBatch:!0})]})},columns:xe,toolbar:{actions:[(0,n.jsx)(ue,{},"ButtonCreate")]},request:s()(u()().mark(function y(){var c,x,C,h=arguments;return u()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,j.DT)(J.h$.apply(void 0,h));case 2:return c=k.sent,x=c.total,C=c.rows,k.abrupt("return",{data:C,success:!0,total:x});case 6:case"end":return k.stop()}},y)}))}),(0,n.jsx)(be,{})]})},je=we},59373:function(ae,Z,t){t.d(Z,{DI:function(){return _},DT:function(){return q},He:function(){return J},LV:function(){return te},XS:function(){return V},Zd:function(){return ee},cj:function(){return z},qm:function(){return H},we:function(){return L}});var g=t(35290),u=t.n(g),$=t(30279),s=t.n($),M=t(411),m=t.n(M),l=t(12824);function V(a,r){return w.apply(this,arguments)}function w(){return w=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/batchGenCode",s()({method:"GET",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),w.apply(this,arguments)}function Q(a,r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function a(r,o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),B.apply(this,arguments)}function L(a,r){return j.apply(this,arguments)}function j(){return j=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/db/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),j.apply(this,arguments)}function ne(a,r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function a(r,o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),P.apply(this,arguments)}function _(a,r){return D.apply(this,arguments)}function D(){return D=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/edit",s()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),D.apply(this,arguments)}function S(a,r){return n.apply(this,arguments)}function n(){return n=_asyncToGenerator(_regeneratorRuntime().mark(function a(r,o){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),n.apply(this,arguments)}function H(a,r){return A.apply(this,arguments)}function A(){return A=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/importTable",s()({method:"POST",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),A.apply(this,arguments)}function z(a,r){return U.apply(this,arguments)}function U(){return U=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/info",s()({method:"GET",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),U.apply(this,arguments)}function q(a,r){return O.apply(this,arguments)}function O(){return O=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/list",s()({method:"POST",headers:{"Content-Type":"application/json"},data:r},o||{})));case 1:case"end":return e.stop()}},a)})),O.apply(this,arguments)}function ee(a,r){return F.apply(this,arguments)}function F(){return F=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/preview",s()({method:"GET",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),F.apply(this,arguments)}function te(a,r){return K.apply(this,arguments)}function K(){return K=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/remove",s()({method:"POST",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),K.apply(this,arguments)}function J(a,r){return X.apply(this,arguments)}function X(){return X=m()(u()().mark(function a(r,o){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/synchDb",s()({method:"GET",params:s()({},r)},o||{})));case 1:case"end":return e.stop()}},a)})),X.apply(this,arguments)}}}]);
