"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[641],{89314:function(I,C,e){var M=e(82175),i=e(62957),P=e(11527),o=e(50959),f=e(20048),p=["fieldProps","min","proFieldProps","max"],h=function(y,R){var E=y.fieldProps,v=y.min,T=y.proFieldProps,g=y.max,c=(0,i.Z)(y,p);return(0,P.jsx)(f.Z,(0,M.Z)({mode:"edit",valueType:"digit",fieldProps:(0,M.Z)({min:v,max:g},E),ref:R,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:T},c))};C.Z=o.forwardRef(h)},38288:function(I,C,e){var M=e(65691),i=e(82025),P=e(82175),o=e(62957),f=e(11527),p=e(41946),h=e(50959),j=e(46890),y=e(20048),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],E=h.forwardRef(function(c,D){var x=c.fieldProps,U=c.options,b=c.radioType,B=c.layout,O=c.proFieldProps,m=c.valueEnum,_=(0,o.Z)(c,R);return(0,f.jsx)(y.Z,(0,P.Z)((0,P.Z)({mode:"edit",valueType:b==="button"?"radioButton":"radio",ref:D,valueEnum:(0,p.h)(m,void 0)},_),{},{fieldProps:(0,P.Z)({options:U,layout:B},x),proFieldProps:O,filedConfig:{customLightMode:!0}}))}),v=h.forwardRef(function(c,D){var x=c.fieldProps,U=c.children;return(0,f.jsx)(i.ZP,(0,P.Z)((0,P.Z)({},x),{},{ref:D,children:U}))}),T=(0,j.G)(v,{valuePropName:"checked",ignoreWidth:!0}),g=T;g.Group=E,g.Button=i.ZP.Button,g.displayName="ProFormComponent",C.Z=g},96639:function(I,C,e){var M=e(82175),i=e(62957),P=e(11527),o=e(20048),f=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],h="text",j=function(v){var T=v.fieldProps,g=v.proFieldProps,c=(0,i.Z)(v,f);return(0,P.jsx)(o.Z,(0,M.Z)({mode:"edit",valueType:h,fieldProps:T,filedConfig:{valueType:h},proFieldProps:g},c))},y=function(v){var T=v.fieldProps,g=v.proFieldProps,c=(0,i.Z)(v,p);return(0,P.jsx)(o.Z,(0,M.Z)({mode:"edit",valueType:"password",fieldProps:T,proFieldProps:g,filedConfig:{valueType:h}},c))},R=j;R.Password=y,R.displayName="ProFormComponent",C.Z=R},90178:function(I,C,e){var M=e(82175),i=e(62957),P=e(11527),o=e(50959),f=e(20048),p=["fieldProps","proFieldProps"],h=function(y,R){var E=y.fieldProps,v=y.proFieldProps,T=(0,i.Z)(y,p);return(0,P.jsx)(f.Z,(0,M.Z)({ref:R,mode:"edit",valueType:"textarea",fieldProps:E,proFieldProps:v},T))};C.Z=o.forwardRef(h)},33921:function(I,C,e){e.d(C,{Jx:function(){return y},eJ:function(){return P},fk:function(){return p},sE:function(){return f},tC:function(){return i},g4:function(){return E},Fu:function(){return v},Rj:function(){return R},tE:function(){return T},q2:function(){return j},jR:function(){return h},au:function(){return o}});var M=e(75786),i={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder"},P={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},o={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0},f={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:M.IZ},p={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(c){return{beginCreateTime:c[0],endCreateTime:c[1]}}}},h={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},j={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},y={title:"\u5B9E\u4F53",dataIndex:"className",key:"className",valueType:"text"},R={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},E={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},v={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},T={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},86922:function(I,C,e){e.r(C),e.d(C,{default:function(){return Ce}});var M=e(18172),i=e.n(M),P=e(29960),o=e.n(P),f=e(33921),p=e(75786),h=e(3849),j=e.n(h),y=e(61010),R=e(8513),E=e(2891),v=e(87130),T="systemRole",g=[T,"menuTree"],c=(0,v.cn)({key:"".concat(T,"TableActions")}),D=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,E.aM)(g,i()(o().mark(function a(){var u;return o().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,y.Q_)(t);case 2:return u=d.sent,console.log(u),d.abrupt("return",{treeData:u,parentIds:(0,R.Vy)(u)});case 5:case"end":return d.stop()}},a)})))},x=e(8790),U=e(98408),b=e(75687),B=e(26055),O=e(16278),m=e(68590),_=e(94649),S=e(50959),l=e(11527),s={title:"label",key:"id",children:"children"},ie=function(){var t,a,u=D(),r=u.data,d=(0,S.useState)(),W=j()(d,2),ee=W[0],ne=W[1],F=(0,S.useState)([]),ae=j()(F,2),Z=ae[0],se=ae[1],Me=(0,S.useState)(),ue=j()(Me,2),je=ue[0],xe=ue[1];console.log(r);var oe=(t=r==null?void 0:r.parentIds)!==null&&t!==void 0?t:[],re=Z&&Z.length>0&&Z.length===oe.length;return(0,l.jsxs)(b.Z,{bordered:!0,ghost:!0,children:[(0,l.jsxs)(B.Z,{children:[(0,l.jsx)(O.Z,{size:"small",icon:re?(0,l.jsx)(x.Z,{}):(0,l.jsx)(U.Z,{}),onClick:function(){return se(re?[]:oe)},children:re?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),(0,l.jsx)(m.Z,{defaultChecked:!0,onChange:function(A){return xe(!A.target.checked)},children:"\u7236\u5B50\u8054\u52A8"})]}),(0,l.jsx)(_.Z,{checkable:!0,treeData:(a=r==null?void 0:r.treeData)!==null&&a!==void 0?a:[],fieldNames:s,checkedKeys:ee,onCheck:function(A){return ne(Array.isArray(A)?A:A==null?void 0:A.checked)},expandedKeys:Z,onExpand:se,checkStrictly:je})]})},de=ie,pe=e(55980),K=e.n(pe);function ce(n,t){return L.apply(this,arguments)}function L(){return L=i()(o().mark(function n(t,a){return o().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,R.WY)("/system/role/add",K()({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),L.apply(this,arguments)}function Oe(n,t,a){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a,u){return _regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},params:_objectSpread({},t),data:a},u||{})));case 1:case"end":return d.stop()}},n)})),w.apply(this,arguments)}function De(n,t){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),G.apply(this,arguments)}function be(n,t){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),$.apply(this,arguments)}function Ae(n,t){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),Y.apply(this,arguments)}function Ie(n,t,a){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a,u){return _regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},params:_objectSpread({},t),data:a},u||{})));case 1:case"end":return d.stop()}},n)})),N.apply(this,arguments)}function Ue(n,t){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),X.apply(this,arguments)}function Fe(n,t){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),k.apply(this,arguments)}function Be(n,t){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),Q.apply(this,arguments)}function We(n,t){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},a||{})));case 1:case"end":return r.stop()}},n)})),J.apply(this,arguments)}function Ze(n,t){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/info",_objectSpread({method:"GET",params:_objectSpread({},t)},a||{})));case 1:case"end":return r.stop()}},n)})),V.apply(this,arguments)}function me(n,t,a){return z.apply(this,arguments)}function z(){return z=i()(o().mark(function n(t,a,u){return o().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,R.WY)("/system/role/list",K()({method:"POST",headers:{"Content-Type":"application/json"},params:K()({},t),data:a},u||{})));case 1:case"end":return d.stop()}},n)})),z.apply(this,arguments)}function Ke(n){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime.mark(function n(t){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},t||{})));case 1:case"end":return u.stop()}},n)})),H.apply(this,arguments)}function Le(n,t){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime.mark(function n(t,a){return _regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/system/role/remove",_objectSpread({method:"POST",params:_objectSpread({},t)},a||{})));case 1:case"end":return r.stop()}},n)})),q.apply(this,arguments)}var _e=e(20436),he=e(75345),te=e(96639),ye=e(89314),fe=e(38288),ve=e(63331),Pe=e(90178),Te=e(43668),Se=function(t){var a=t.reloadTable,u=(0,E.Db)(ce,{onSuccess:function(){a(),Te.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),r=u.mutateAsync;return(0,l.jsxs)(he.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,l.jsx)(O.Z,{type:"primary",icon:(0,l.jsx)(_e.Z,{}),children:"\u65B0\u5EFA"}),onFinish:function(){var d=i()(o().mark(function W(ee){return o().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,r(ee);case 2:case"end":return F.stop()}},W)}));return function(W){return d.apply(this,arguments)}}(),width:500,children:[(0,l.jsx)(te.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,l.jsx)(te.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,l.jsx)(ye.Z,{name:"roleSort",label:"\u89D2\u8272\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,l.jsx)(fe.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:p.IZ,initialValue:p.vu.ENABLE}),(0,l.jsx)(ve.Z,{label:"\u83DC\u5355\u6743\u9650",children:(0,l.jsx)(de,{})}),(0,l.jsx)(Pe.Z,{name:"remark",label:"\u5907\u6CE8"})]})},Re=Se,Ee=e(54923),ge=e(59527);function Ce(){var n=(0,S.useRef)();return(0,l.jsx)(ge._z,{children:(0,l.jsx)(Ee.Z,{actionRef:n,columns:[f.g4,f.sE,f.Rj,f.Fu,f.tE,f.eJ,f.fk],request:i()(o().mark(function t(){return o().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,me({},{});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},t)})),toolbar:{actions:[(0,l.jsx)(Re,{reloadTable:function(){var a;return n==null||(a=n.current)===null||a===void 0?void 0:a.reload()}},"ButtonCreate")]}})})}},61010:function(I,C,e){e.d(C,{CP:function(){return g},FV:function(){return j},Q_:function(){return B},WJ:function(){return v},Yh:function(){return R},tg:function(){return D}});var M=e(55980),i=e.n(M),P=e(18172),o=e.n(P),f=e(29960),p=e.n(f),h=e(8513);function j(m,_){return y.apply(this,arguments)}function y(){return y=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/add",i()({method:"POST",headers:{"Content-Type":"application/json"},data:_},S||{})));case 1:case"end":return s.stop()}},m)})),y.apply(this,arguments)}function R(m,_){return E.apply(this,arguments)}function E(){return E=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/edit",i()({method:"POST",headers:{"Content-Type":"application/json"},data:_},S||{})));case 1:case"end":return s.stop()}},m)})),E.apply(this,arguments)}function v(m,_){return T.apply(this,arguments)}function T(){return T=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/info",i()({method:"GET",params:i()({},_)},S||{})));case 1:case"end":return s.stop()}},m)})),T.apply(this,arguments)}function g(m,_){return c.apply(this,arguments)}function c(){return c=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/list",i()({method:"POST",headers:{"Content-Type":"application/json"},data:_},S||{})));case 1:case"end":return s.stop()}},m)})),c.apply(this,arguments)}function D(m,_){return x.apply(this,arguments)}function x(){return x=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/remove",i()({method:"POST",params:i()({},_)},S||{})));case 1:case"end":return s.stop()}},m)})),x.apply(this,arguments)}function U(m,_){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime.mark(function m(_,S){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/roleMenuTreeSelect",_objectSpread({method:"GET",params:_objectSpread({},_)},S||{})));case 1:case"end":return s.stop()}},m)})),b.apply(this,arguments)}function B(m,_){return O.apply(this,arguments)}function O(){return O=o()(p().mark(function m(_,S){return p().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,h.WY)("/system/menu/treeSelect",i()({method:"POST",headers:{"Content-Type":"application/json"},data:_},S||{})));case 1:case"end":return s.stop()}},m)})),O.apply(this,arguments)}}}]);
