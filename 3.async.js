"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[641],{69870:function(te,L,e){e.d(L,{UW:function(){return I}});var W=e(30553),I=W.A.Group},41846:function(te,L,e){e.r(L),e.d(L,{default:function(){return De}});var W=e(55980),I=e.n(W),ae=e(42217),re=e.n(ae),ne=e(18172),Y=e.n(ne),se=e(3849),le=e.n(se),oe=e(29960),O=e.n(oe),ie=e(72867),ue=e(25384),M=e(96069),n=e(11527),ce=function(){return(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,n.jsx)(ue.Z,{plain:!0,children:(0,n.jsx)("span",{className:"text-sm font-normal text-neutral-400",children:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"})}),(0,n.jsx)("div",{onClick:function(){M.ZP.info("\u656C\u8BF7\u671F\u5F85")},className:"flex justify-center items-center cursor-pointer rounded-full h-[40px] w-[40px] border-solid border border-gray-300",children:(0,n.jsx)(ie.Z,{style:{fontSize:"20px",color:"#00ac84"}})})]})},de=ce,$=e(96032),G=e(16064),me=e(16916),H=e(88387),ve=e(642),fe=e(57174),N=e(45443),ze=e(68591),ge=e(28856),g=e(44367),K=e(29547),he=e(12191),a=e(50959),pe=e(30553),Ee=["logo","message","style","activityConfig","backgroundImageUrl","title","subTitle","actions","children"];function Pe(r){var o=r.logo,v=r.message,i=r.style,P=r.activityConfig,l=P===void 0?{}:P,c=r.backgroundImageUrl,h=r.title,Z=r.subTitle,m=r.actions,f=r.children,s=(0,K.Z)(r,Ee),j=(0,he.YB)(),x=function(){var F,B;return s.submitter===!1||((F=s.submitter)===null||F===void 0?void 0:F.submitButtonProps)===!1?!1:(0,g.Z)({size:"large",style:{width:"100%"}},(B=s.submitter)===null||B===void 0?void 0:B.submitButtonProps)},S=(0,g.Z)((0,g.Z)({searchConfig:{submitText:j.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(F,B){return B.pop()}},s.submitter),{},{submitButtonProps:x()}),R=(0,a.useContext)(ge.ZP.ConfigContext),b=R.getPrefixCls("pro-form-login-page"),t=function(F){return"".concat(b,"-").concat(F)},A=(0,a.useMemo)(function(){return o?typeof o=="string"?a.createElement("img",{src:o}):o:null},[o]);return a.createElement("div",{className:b,style:(0,g.Z)((0,g.Z)({},i),{},{backgroundImage:'url("'.concat(c,'")')})},a.createElement("div",{className:t("notice")},l&&a.createElement("div",{className:t("notice-activity"),style:l.style},l.title&&a.createElement("div",{className:t("notice-activity-title")}," ",l.title," "),l.subTitle&&a.createElement("div",{className:t("notice-activity-subTitle")}," ",l.subTitle," "),l.action&&a.createElement("div",{className:t("notice-activity-action")}," ",l.action," "))),a.createElement("div",{className:t("container")},a.createElement("div",{className:t("top")},h||A?a.createElement("div",{className:t("header")},A?a.createElement("span",{className:t("logo")},A):null,h?a.createElement("span",{className:t("title")},h):null):null,Z?a.createElement("div",{className:t("desc")},Z):null),a.createElement("div",{className:t("main")},a.createElement(pe.A,(0,N.Z)({isKeyPressSubmit:!0},s,{submitter:S}),v,f),m?a.createElement("div",{className:t("other")},m):null)))}var We=e(88843),Ze=e(43114),$e=e(63743),xe=e(34602),Ke=e(50118),Fe=e(73466),U=e(67948),Q=e(82173),J=e(23151),X=e(91417),Ce=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],ye=a.forwardRef(function(r,o){var v=(0,a.useState)(r.countDown||60),i=(0,J.Z)(v,2),P=i[0],l=i[1],c=(0,a.useState)(!1),h=(0,J.Z)(c,2),Z=h[0],m=h[1],f=(0,a.useState)(),s=(0,J.Z)(f,2),j=s[0],x=s[1],S=r.rules,R=r.name,b=r.phoneName,t=r.fieldProps,A=r.captchaTextRender,z=A===void 0?function(p,C){return p?"".concat(C," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:A,F=r.captchaProps,B=(0,K.Z)(r,Ce),_=function(){var p=(0,Q.Z)((0,U.Z)().mark(function C(T){return(0,U.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,x(!0),d.next=4,B.onGetCaptcha(T);case 4:x(!1),m(!0),d.next=13;break;case 8:d.prev=8,d.t0=d.catch(0),m(!1),x(!1),console.log(d.t0);case 13:case"end":return d.stop()}},C,null,[[0,8]])}));return function(T){return p.apply(this,arguments)}}();return(0,a.useEffect)(function(){var p=0,C=r.countDown;return Z&&(p=window.setInterval(function(){l(function(T){return T<=1?(m(!1),clearInterval(p),C||60):T-1})},1e3)),function(){return clearInterval(p)}},[Z]),a.createElement(Ze.Z.Item,{noStyle:!0,shouldUpdate:!0},function(p){var C=p.getFieldValue,T=p.validateFields;return a.createElement("div",{style:(0,g.Z)((0,g.Z)({},t==null?void 0:t.style),{},{display:"flex",alignItems:"center"}),ref:o},a.createElement(Fe.Z,(0,N.Z)({},t,{style:{flex:1,transition:"width .3s",marginRight:8}})),a.createElement(xe.Z,(0,N.Z)({style:{display:"block"},disabled:Z,loading:j},F,{onClick:(0,Q.Z)((0,U.Z)().mark(function ee(){var d;return(0,U.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.prev=0,!b){u.next=9;break}return u.next=4,T([b].flat(1));case 4:return d=C([b].flat(1)),u.next=7,_(d);case 7:u.next=11;break;case 9:return u.next=11,_("");case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(0),console.log(u.t0);case 16:case"end":return u.stop()}},ee,null,[[0,13]])}))}),z(Z,P)))})}),je=(0,X.G)(ye),be=je,Je=e(19857),Be=e(78586),k=e(44963),w=e(28423),Te=["options","fieldProps","proFieldProps","valueEnum"],Ne=a.forwardRef(function(r,o){var v=r.options,i=r.fieldProps,P=r.proFieldProps,l=r.valueEnum,c=(0,K.Z)(r,Te);return a.createElement(w.Z,(0,N.Z)({ref:o,valueType:"checkbox",mode:"edit",valueEnum:(0,k.h)(l,void 0),fieldProps:(0,g.Z)({options:v},i),lightProps:(0,g.Z)({labelFormatter:function(){return a.createElement(w.Z,(0,N.Z)({ref:o,valueType:"checkbox",mode:"read",valueEnum:(0,k.h)(l,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:v},i),proFieldProps:P},c))}},c.lightProps),proFieldProps:P},c))}),Se=a.forwardRef(function(r,o){var v=r.fieldProps,i=r.children;return a.createElement(Be.Z,(0,N.Z)({ref:o},v),i)}),Re=(0,X.G)(Se,{valuePropName:"checked"}),q=Re;q.Group=Ne;var Ae=q,D=e(50405),Le=e(69870),Ie=e(85384),V=e(77854),Oe=e(5264),Me=e(35234),Ge=["autoLogin"],E;(function(r){r.MOBILE="MOBILE",r.USERNAME="USERNAME"})(E||(E={}));var y=Me.parse(window.location.search),Ue=function(){var o=(0,a.useState)(E.USERNAME),v=le()(o,2),i=v[0],P=v[1],l=(0,Ie.Z)($.Ex),c=l.data,h=l.run,Z=function(){var m=Y()(O().mark(function f(s){var j,x,S,R;return O().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,x=s.autoLogin,S=re()(s,Ge),i!==E.MOBILE){t.next=8;break}return t.next=5,(0,$.w3)(S);case 5:R=t.sent,t.next=16;break;case 8:if(c){t.next=13;break}return M.ZP.error("\u8BF7\u5148\u83B7\u53D6\u56FE\u7247\u9A8C\u8BC1\u7801"),t.abrupt("return");case 13:return t.next=15,(0,$.Hd)(I()(I()({},S),{},{uuid:c.uuid}));case 15:R=t.sent;case 16:(0,G.o4)(x?G.Z1.LOCAL_STORAGE:G.Z1.SESSION_STORAGE,"Bearer ".concat(R.token)),window.location.href=(j=y==null?void 0:y.redirect)!==null&&j!==void 0?j:"/",t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),i===E.USERNAME&&h();case 23:case"end":return t.stop()}},f,null,[[0,20]])}));return function(s){return m.apply(this,arguments)}}();return(0,a.useEffect)(function(){y!=null&&y.msg&&M.ZP.error(y.msg)},[]),(0,n.jsx)("div",{className:"h-[100vh]",children:(0,n.jsxs)(Pe,{backgroundImageUrl:"https://gw.alipayobjects.com/zos/rmsportal/FfdJeJRQWjEeGTpqgBKj.png",logo:"https://github.githubassets.com/images/modules/logos_page/Octocat.png",title:"RuoYi X Umi",subTitle:"\u82E5\u4F9D\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",actions:(0,n.jsx)(de,{}),onFinish:Z,children:[(0,n.jsxs)(V.Z,{activeKey:i,onChange:function(f){return P(f)},children:[(0,n.jsx)(V.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},E.USERNAME),(0,n.jsx)(V.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55"},E.MOBILE)]}),i===E.USERNAME&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(me.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,n.jsx)(D.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)(H.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,n.jsxs)(Le.UW,{children:[(0,n.jsx)(D.Z,{width:160,name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",fieldProps:{size:"large",prefix:(0,n.jsx)(ve.Z,{})},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]}),(0,n.jsx)("div",{className:"h-[40px] w-[135px] cursor-pointer border border-solid border-gray-300",children:(0,n.jsx)(Oe.Z,{src:"data:image/png;base64,".concat(c==null?void 0:c.img),preview:!1,className:"h-[40px] w-[135px]",alt:"\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:h})})]})]}),i===E.MOBILE&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z,{fieldProps:{maxLength:11,size:"large",prefix:(0,n.jsx)(fe.Z,{})},name:"phonenumber",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{pattern:G.RE,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF"}]}),(0,n.jsx)(be,{fieldProps:{size:"large",prefix:(0,n.jsx)(H.Z,{})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(f,s){return f?"".concat(s," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"smsCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],onGetCaptcha:Y()(O().mark(function m(){return O().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return M.ZP.info("\u656C\u8BF7\u671F\u5F85"),s.abrupt("return",Promise.reject(new Error("\u656C\u8BF7\u671F\u5F85")));case 2:case"end":return s.stop()}},m)}))})]}),(0,n.jsx)(Ae,{name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"})]})})},De=Ue}}]);
