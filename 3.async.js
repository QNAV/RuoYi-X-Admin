"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[641],{48810:function(ye,g,e){e.r(g),e.d(g,{default:function(){return ve}});var M=e(18172),m=e.n(M),F=e(29960),d=e.n(F),y=e(210),N={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},$={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:y.IZ},z={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(r){return{beginCreateTime:r[0],endCreateTime:r[1]}}}},O={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},P={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},G={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},Q={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},V=e(3849),T=e.n(V),f=e(34638),S=e(96143),j=e(2891),H=e(87130),I="systemRole",L=[I,"menuTree"],Te=(0,H.cn)({key:"".concat(I,"TableActions")}),Y=function(r){return(0,j.aM)(L,m()(d().mark(function n(){var u;return d().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,f.eT)(r);case 2:return u=l.sent,console.log(u),l.abrupt("return",{treeData:u,parentIds:(0,S.Vy)(u)});case 5:case"end":return l.stop()}},n)})))},J=e(8790),U=e(98408),W=e(5877),X=e(26055),Z=e(16278),b=e(68590),k=e(94649),c=e(50959),a=e(11527),w={title:"label",key:"id",children:"children"},q=function(){var r,n,u=Y(),t=u.data,l=(0,c.useState)(),v=T()(l,2),x=v[0],R=v[1],i=(0,c.useState)([]),D=T()(i,2),h=D[0],E=D[1],ce=(0,c.useState)(),K=T()(ce,2),he=K[0],me=K[1];console.log(t);var B=(r=t==null?void 0:t.parentIds)!==null&&r!==void 0?r:[],C=h&&h.length>0&&h.length===B.length;return(0,a.jsxs)(W.Z,{bordered:!0,ghost:!0,children:[(0,a.jsxs)(X.Z,{children:[(0,a.jsx)(Z.Z,{size:"small",icon:C?(0,a.jsx)(J.Z,{}):(0,a.jsx)(U.Z,{}),onClick:function(){return E(C?[]:B)},children:C?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),(0,a.jsx)(b.Z,{defaultChecked:!0,onChange:function(o){return me(!o.target.checked)},children:"\u7236\u5B50\u8054\u52A8"})]}),(0,a.jsx)(k.Z,{checkable:!0,treeData:(n=t==null?void 0:t.treeData)!==null&&n!==void 0?n:[],fieldNames:w,checkedKeys:x,onCheck:function(o){return R(Array.isArray(o)?o:o==null?void 0:o.checked)},expandedKeys:h,onExpand:E,checkStrictly:he})]})},_=q,ee=e(20436),ae=e(57075),A=e(57852),te=e(59704),re=e(98658),ne=e(84551),le=e(52201),ue=e(43668),se=function(r){var n=r.reloadTable,u=(0,j.Db)(f.rH,{onSuccess:function(){n(),ue.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),t=u.mutateAsync;return(0,a.jsxs)(ae.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,a.jsx)(Z.Z,{type:"primary",icon:(0,a.jsx)(ee.Z,{}),children:"\u65B0\u5EFA"}),onFinish:function(){var l=m()(d().mark(function v(x){return d().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t(x);case 2:case"end":return i.stop()}},v)}));return function(v){return l.apply(this,arguments)}}(),width:500,children:[(0,a.jsx)(A.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,a.jsx)(A.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,a.jsx)(te.Z,{name:"roleSort",label:"\u89D2\u8272\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,a.jsx)(re.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:y.IZ,initialValue:y.vu.ENABLE}),(0,a.jsx)(ne.Z,{label:"\u83DC\u5355\u6743\u9650",children:(0,a.jsx)(_,{})}),(0,a.jsx)(le.Z,{name:"remark",label:"\u5907\u6CE8"})]})},oe=se,de=e(24914),ie=e(35187);function ve(){var s=(0,c.useRef)();return(0,a.jsx)(ie._z,{children:(0,a.jsx)(de.Z,{actionRef:s,columns:[P,$,O,G,Q,N,z],request:m()(d().mark(function r(){var n=arguments;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.Oz)(S.c1.apply(void 0,n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},r)})),toolbar:{actions:[(0,a.jsx)(oe,{reloadTable:function(){var n;return s==null||(n=s.current)===null||n===void 0?void 0:n.reload()}},"ButtonCreate")]}})})}}}]);
