"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[641],{6202:function(pe,x,n){n.r(x),n.d(x,{default:function(){return Me}});var U=n(18172),m=n.n(U),I=n(29960),p=n.n(I),T=n(210),h={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},y={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:T.IZ},D={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(r){return{beginCreateTime:r[0],endCreateTime:r[1]}}}},R={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},G={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},P={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},$={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},j=n(3849),C=n.n(j),b=n(39604),E=n(96143),S=n(2891),te=n(87130),v="systemRole",Y=[v,"menuTree"],A=(0,te.cn)({key:"".concat(v,"TableActions")}),l=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,S.aM)(Y,m()(p().mark(function a(){var u;return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,b.Q_)(r);case 2:return u=o.sent,console.log(u),o.abrupt("return",{treeData:u,parentIds:(0,E.Vy)(u)});case 5:case"end":return o.stop()}},a)})))},i=n(8790),d=n(98408),f=n(4674),s=n(26055),ne=n(16278),de=n(68590),me=n(94649),M=n(50959),c=n(11527),he={title:"label",key:"id",children:"children"},ye=function(){var r,a,u=l(),e=u.data,o=(0,M.useState)(),w=C()(o,2),ee=w[0],se=w[1],g=(0,M.useState)([]),ue=C()(g,2),O=ue[0],oe=ue[1],Oe=(0,M.useState)(),le=C()(Oe,2),Ue=le[0],Ie=le[1];console.log(e);var ie=(r=e==null?void 0:e.parentIds)!==null&&r!==void 0?r:[],re=O&&O.length>0&&O.length===ie.length;return(0,c.jsxs)(f.Z,{bordered:!0,ghost:!0,children:[(0,c.jsxs)(s.Z,{children:[(0,c.jsx)(ne.Z,{size:"small",icon:re?(0,c.jsx)(i.Z,{}):(0,c.jsx)(d.Z,{}),onClick:function(){return oe(re?[]:ie)},children:re?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),(0,c.jsx)(de.Z,{defaultChecked:!0,onChange:function(_){return Ie(!_.target.checked)},children:"\u7236\u5B50\u8054\u52A8"})]}),(0,c.jsx)(me.Z,{checkable:!0,treeData:(a=e==null?void 0:e.treeData)!==null&&a!==void 0?a:[],fieldNames:he,checkedKeys:ee,onCheck:function(_){return se(Array.isArray(_)?_:_==null?void 0:_.checked)},expandedKeys:O,onExpand:oe,checkStrictly:Ue})]})},fe=ye,_e=n(55980),K=n.n(_e);function Se(t,r){return Z.apply(this,arguments)}function Z(){return Z=m()(p().mark(function t(r,a){return p().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,E.WY)("/system/role/add",K()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),Z.apply(this,arguments)}function De(t,r,a){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a,u){return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},params:_objectSpread({},r),data:a},u||{})));case 1:case"end":return o.stop()}},t)})),B.apply(this,arguments)}function Ge(t,r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function $e(t,r){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),k.apply(this,arguments)}function Ye(t,r){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),W.apply(this,arguments)}function Ke(t,r,a){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a,u){return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},params:_objectSpread({},r),data:a},u||{})));case 1:case"end":return o.stop()}},t)})),X.apply(this,arguments)}function Ze(t,r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),F.apply(this,arguments)}function Be(t,r){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),N.apply(this,arguments)}function Le(t,r){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),Q.apply(this,arguments)}function ke(t,r){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},t)})),V.apply(this,arguments)}function We(t,r){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/info",_objectSpread({method:"GET",params:_objectSpread({},r)},a||{})));case 1:case"end":return e.stop()}},t)})),z.apply(this,arguments)}function ve(t,r,a){return J.apply(this,arguments)}function J(){return J=m()(p().mark(function t(r,a,u){return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,E.WY)("/system/role/list",K()({method:"POST",headers:{"Content-Type":"application/json"},params:K()({},r),data:a},u||{})));case 1:case"end":return o.stop()}},t)})),J.apply(this,arguments)}function Xe(t){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime.mark(function t(r){return _regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return u.stop()}},t)})),H.apply(this,arguments)}function Fe(t,r){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime.mark(function t(r,a){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/remove",_objectSpread({method:"POST",params:_objectSpread({},r)},a||{})));case 1:case"end":return e.stop()}},t)})),q.apply(this,arguments)}var ge=n(20436),Te=n(57251),ae=n(96639),Re=n(89314),Pe=n(38288),je=n(94272),Ce=n(90178),be=n(43668),Ee=function(r){var a=r.reloadTable,u=(0,S.Db)(Se,{onSuccess:function(){a(),be.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),e=u.mutateAsync;return(0,c.jsxs)(Te.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,c.jsx)(ne.Z,{type:"primary",icon:(0,c.jsx)(ge.Z,{}),children:"\u65B0\u5EFA"}),onFinish:function(){var o=m()(p().mark(function w(ee){return p().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e(ee);case 2:case"end":return g.stop()}},w)}));return function(w){return o.apply(this,arguments)}}(),width:500,children:[(0,c.jsx)(ae.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,c.jsx)(ae.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,c.jsx)(Re.Z,{name:"roleSort",label:"\u89D2\u8272\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,c.jsx)(Pe.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:T.IZ,initialValue:T.vu.ENABLE}),(0,c.jsx)(je.Z,{label:"\u83DC\u5355\u6743\u9650",children:(0,c.jsx)(fe,{})}),(0,c.jsx)(Ce.Z,{name:"remark",label:"\u5907\u6CE8"})]})},we=Ee,xe=n(20220),Ae=n(73798);function Me(){var t=(0,M.useRef)();return(0,c.jsx)(Ae._z,{children:(0,c.jsx)(xe.Z,{actionRef:t,columns:[G,y,R,P,$,h,D],request:m()(p().mark(function r(){return p().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ve({},{});case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},r)})),toolbar:{actions:[(0,c.jsx)(we,{reloadTable:function(){var a;return t==null||(a=t.current)===null||a===void 0?void 0:a.reload()}},"ButtonCreate")]}})})}},39604:function(pe,x,n){n.d(x,{CP:function(){return C},FV:function(){return D},Q_:function(){return Y},WJ:function(){return $},Yh:function(){return G},tg:function(){return E}});var U=n(55980),m=n.n(U),I=n(18172),p=n.n(I),T=n(29960),h=n.n(T),y=n(96143);function D(l,i){return R.apply(this,arguments)}function R(){return R=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:i},d||{})));case 1:case"end":return s.stop()}},l)})),R.apply(this,arguments)}function G(l,i){return P.apply(this,arguments)}function P(){return P=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/edit",m()({method:"POST",headers:{"Content-Type":"application/json"},data:i},d||{})));case 1:case"end":return s.stop()}},l)})),P.apply(this,arguments)}function $(l,i){return j.apply(this,arguments)}function j(){return j=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/info",m()({method:"GET",params:m()({},i)},d||{})));case 1:case"end":return s.stop()}},l)})),j.apply(this,arguments)}function C(l,i){return b.apply(this,arguments)}function b(){return b=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/list",m()({method:"POST",headers:{"Content-Type":"application/json"},data:i},d||{})));case 1:case"end":return s.stop()}},l)})),b.apply(this,arguments)}function E(l,i){return S.apply(this,arguments)}function S(){return S=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/remove",m()({method:"POST",params:m()({},i)},d||{})));case 1:case"end":return s.stop()}},l)})),S.apply(this,arguments)}function te(l,i){return v.apply(this,arguments)}function v(){return v=_asyncToGenerator(_regeneratorRuntime.mark(function l(i,d){return _regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/roleMenuTreeSelect",_objectSpread({method:"GET",params:_objectSpread({},i)},d||{})));case 1:case"end":return s.stop()}},l)})),v.apply(this,arguments)}function Y(l,i){return A.apply(this,arguments)}function A(){return A=p()(h().mark(function l(i,d){return h().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,y.WY)("/system/menu/treeSelect",m()({method:"POST",headers:{"Content-Type":"application/json"},data:i},d||{})));case 1:case"end":return s.stop()}},l)})),A.apply(this,arguments)}}}]);
