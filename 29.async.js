"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[426],{72188:function(te,L,e){e.d(L,{UW:function(){return I}});var W=e(49011),I=W.A.Group},79465:function(te,L,e){e.r(L),e.d(L,{default:function(){return Ue}});var W=e(55980),I=e.n(W),ae=e(42217),re=e.n(ae),ne=e(18172),Y=e.n(ne),se=e(3849),H=e.n(se),le=e(29960),M=e.n(le),oe=e(72867),ue=e(25437),O=e(43668),r=e(11527),ie=function(){return(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,r.jsx)(ue.Z,{plain:!0,children:(0,r.jsx)("span",{className:"text-sm font-normal text-neutral-400",children:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"})}),(0,r.jsx)("div",{onClick:function(){O.ZP.info("\u656C\u8BF7\u671F\u5F85")},className:"flex justify-center items-center cursor-pointer rounded-full h-[40px] w-[40px] border-solid border border-gray-300",children:(0,r.jsx)(oe.Z,{style:{fontSize:"20px",color:"#00ac84"}})})]})},ce=ie,$=e(34638),G=e(96143),de=e(16916),Q=e(88387),me=e(642),ve=e(57174),R=e(665),De=e(33407),fe=e(35123),h=e(82175),K=e(62957),ge=e(100),t=e(50959),he=e(49011),pe=["logo","message","style","activityConfig","backgroundImageUrl","title","subTitle","actions","children"];function Pe(a){var l=a.logo,v=a.message,o=a.style,x=a.activityConfig,u=x===void 0?{}:x,p=a.backgroundImageUrl,f=a.title,Z=a.subTitle,C=a.actions,A=a.children,g=(0,K.Z)(a,pe),F=(0,ge.YB)(),j=function(){var m,b;return g.submitter===!1||((m=g.submitter)===null||m===void 0?void 0:m.submitButtonProps)===!1?!1:(0,h.Z)({size:"large",style:{width:"100%"}},(b=g.submitter)===null||b===void 0?void 0:b.submitButtonProps)},z=(0,h.Z)((0,h.Z)({searchConfig:{submitText:F.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(m,b){return b.pop()}},g.submitter),{},{submitButtonProps:j()}),B=(0,t.useContext)(fe.ZP.ConfigContext),i=B.getPrefixCls("pro-form-login-page"),n=function(m){return"".concat(i,"-").concat(m)},y=(0,t.useMemo)(function(){return l?typeof l=="string"?t.createElement("img",{src:l}):l:null},[l]);return t.createElement("div",{className:i,style:(0,h.Z)((0,h.Z)({},o),{},{backgroundImage:'url("'.concat(p,'")')})},t.createElement("div",{className:n("notice")},u&&t.createElement("div",{className:n("notice-activity"),style:u.style},u.title&&t.createElement("div",{className:n("notice-activity-title")}," ",u.title," "),u.subTitle&&t.createElement("div",{className:n("notice-activity-subTitle")}," ",u.subTitle," "),u.action&&t.createElement("div",{className:n("notice-activity-action")}," ",u.action," "))),t.createElement("div",{className:n("container")},t.createElement("div",{className:n("top")},f||y?t.createElement("div",{className:n("header")},y?t.createElement("span",{className:n("logo")},y):null,f?t.createElement("span",{className:n("title")},f):null):null,Z?t.createElement("div",{className:n("desc")},Z):null),t.createElement("div",{className:n("main")},t.createElement(he.A,(0,R.Z)({isKeyPressSubmit:!0},g,{submitter:z}),v,A),C?t.createElement("div",{className:n("other")},C):null)))}var ze=e(78844),Ee=e(41494),We=e(43955),xe=e(16278),$e=e(58245),Ze=e(79725),U=e(88081),X=e(21519),J=e(61431),k=e(40923),Fe=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],ye=t.forwardRef(function(a,l){var v=(0,t.useState)(a.countDown||60),o=(0,J.Z)(v,2),x=o[0],u=o[1],p=(0,t.useState)(!1),f=(0,J.Z)(p,2),Z=f[0],C=f[1],A=(0,t.useState)(),g=(0,J.Z)(A,2),F=g[0],j=g[1],z=a.rules,B=a.name,i=a.phoneName,n=a.fieldProps,y=a.captchaTextRender,S=y===void 0?function(P,T){return P?"".concat(T," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:y,m=a.captchaProps,b=(0,K.Z)(a,Fe),s=function(){var P=(0,X.Z)((0,U.Z)().mark(function T(N){return(0,U.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,j(!0),d.next=4,b.onGetCaptcha(N);case 4:j(!1),C(!0),d.next=13;break;case 8:d.prev=8,d.t0=d.catch(0),C(!1),j(!1),console.log(d.t0);case 13:case"end":return d.stop()}},T,null,[[0,8]])}));return function(N){return P.apply(this,arguments)}}();return(0,t.useEffect)(function(){var P=0,T=a.countDown;return Z&&(P=window.setInterval(function(){u(function(N){return N<=1?(C(!1),clearInterval(P),T||60):N-1})},1e3)),function(){return clearInterval(P)}},[Z]),t.createElement(Ee.Z.Item,{noStyle:!0,shouldUpdate:!0},function(P){var T=P.getFieldValue,N=P.validateFields;return t.createElement("div",{style:(0,h.Z)((0,h.Z)({},n==null?void 0:n.style),{},{display:"flex",alignItems:"center"}),ref:l},t.createElement(Ze.Z,(0,R.Z)({},n,{style:{flex:1,transition:"width .3s",marginRight:8}})),t.createElement(xe.Z,(0,R.Z)({style:{display:"block"},disabled:Z,loading:F},m,{onClick:(0,X.Z)((0,U.Z)().mark(function ee(){var d;return(0,U.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!i){c.next=9;break}return c.next=4,N([i].flat(1));case 4:return d=T([i].flat(1)),c.next=7,s(d);case 7:c.next=11;break;case 9:return c.next=11,s("");case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.log(c.t0);case 16:case"end":return c.stop()}},ee,null,[[0,13]])}))}),S(Z,x)))})}),Ce=(0,k.G)(ye),je=Ce,Ke=e(28931),Be=e(68590),w=e(51919),q=e(33393),Se=["options","fieldProps","proFieldProps","valueEnum"],be=t.forwardRef(function(a,l){var v=a.options,o=a.fieldProps,x=a.proFieldProps,u=a.valueEnum,p=(0,K.Z)(a,Se);return t.createElement(q.Z,(0,R.Z)({ref:l,valueType:"checkbox",mode:"edit",valueEnum:(0,w.h)(u,void 0),fieldProps:(0,h.Z)({options:v},o),lightProps:(0,h.Z)({labelFormatter:function(){return t.createElement(q.Z,(0,R.Z)({ref:l,valueType:"checkbox",mode:"read",valueEnum:(0,w.h)(u,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:v},o),proFieldProps:x},p))}},p.lightProps),proFieldProps:x},p))}),Te=t.forwardRef(function(a,l){var v=a.fieldProps,o=a.children;return t.createElement(Be.Z,(0,R.Z)({ref:l},v),o)}),Ne=(0,k.G)(Te,{valuePropName:"checked"}),_=Ne;_.Group=be;var Re=_,D=e(57852),Ae=e(72188),Le=e(89011),Ie=e(85384),V=e(6250),Me=e(29293),Oe=["autoLogin"],E;(function(a){a.MOBILE="MOBILE",a.USERNAME="USERNAME"})(E||(E={}));var Ge=function(){var l=(0,t.useState)(E.USERNAME),v=H()(l,2),o=v[0],x=v[1],u=(0,Le.useSearchParams)(),p=H()(u,2),f=p[0],Z=p[1],C=f.get("msg"),A=f.get("redirect")||"/",g=(0,Ie.Z)($.Ex),F=g.data,j=g.run,z=function(){var B=Y()(M().mark(function i(n){var y,S,m;return M().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,y=n.autoLogin,S=re()(n,Oe),o!==E.MOBILE){s.next=8;break}return s.next=5,(0,$.w3)(S);case 5:m=s.sent,s.next=16;break;case 8:if(F){s.next=13;break}return O.ZP.error("\u8BF7\u5148\u83B7\u53D6\u56FE\u7247\u9A8C\u8BC1\u7801"),s.abrupt("return");case 13:return s.next=15,(0,$.Hd)(I()(I()({},S),{},{uuid:F.uuid}));case 15:m=s.sent;case 16:(0,G.o4)(y?G.Z1.LOCAL_STORAGE:G.Z1.SESSION_STORAGE,"Bearer ".concat(m.token)),window.location.href=A,s.next=23;break;case 20:s.prev=20,s.t0=s.catch(0),o===E.USERNAME&&j();case 23:case"end":return s.stop()}},i,null,[[0,20]])}));return function(n){return B.apply(this,arguments)}}();return(0,t.useEffect)(function(){C&&(O.ZP.error(f.get("msg")),Z({redirect:A},{replace:!0}))},[]),(0,r.jsx)("div",{className:"h-[100vh]",children:(0,r.jsxs)(Pe,{backgroundImageUrl:"https://gw.alipayobjects.com/zos/rmsportal/FfdJeJRQWjEeGTpqgBKj.png",logo:"https://github.githubassets.com/images/modules/logos_page/Octocat.png",title:"RuoYi X Umi",subTitle:"\u82E5\u4F9D\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",actions:(0,r.jsx)(ce,{}),onFinish:z,children:[(0,r.jsxs)(V.Z,{activeKey:o,onChange:function(i){return x(i)},children:[(0,r.jsx)(V.Z.TabPane,{tab:"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"},E.USERNAME),(0,r.jsx)(V.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55"},E.MOBILE)]}),o===E.USERNAME&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(de.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}]}),(0,r.jsx)(D.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Q.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}]}),(0,r.jsxs)(Ae.UW,{children:[(0,r.jsx)(D.Z,{width:160,name:"code",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",fieldProps:{size:"large",prefix:(0,r.jsx)(me.Z,{})},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}]}),(0,r.jsx)("div",{className:"h-[40px] w-[135px] cursor-pointer border border-solid border-gray-300",children:(0,r.jsx)(Me.Z,{src:"data:image/png;base64,".concat(F==null?void 0:F.img),preview:!1,style:{height:"40px",width:"135px"},alt:"\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:j})})]})]}),o===E.MOBILE&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{fieldProps:{maxLength:11,size:"large",prefix:(0,r.jsx)(ve.Z,{})},name:"phonenumber",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},{pattern:G.RE,message:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF"}]}),(0,r.jsx)(je,{fieldProps:{size:"large",prefix:(0,r.jsx)(Q.Z,{})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",captchaTextRender:function(i,n){return i?"".concat(n," ","\u83B7\u53D6\u9A8C\u8BC1\u7801"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"smsCode",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}],onGetCaptcha:Y()(M().mark(function B(){return M().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return O.ZP.info("\u656C\u8BF7\u671F\u5F85"),n.abrupt("return",Promise.reject(new Error("\u656C\u8BF7\u671F\u5F85")));case 2:case"end":return n.stop()}},B)}))})]}),(0,r.jsx)(Re,{name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"})]})})},Ue=Ge}}]);
