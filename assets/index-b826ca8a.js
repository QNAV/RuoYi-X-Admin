import{aX as w,aY as b,aj as C,r as p,b9 as x,d as a,af as d,j as y,b_ as R,b$ as P,aH as h,c0 as v,aA as u,c1 as E,bT as O,c2 as B,a$ as S,c3 as F,a_ as M,c4 as V,c5 as q,aZ as _,b0 as D,b1 as K,c6 as L,h as X,av as Y}from"./index-59e82507.js";import{a as N}from"./index-f5f72f36.js";import{a as $,u as H}from"./utils-40fd3b80.js";import{P as G}from"./index-74e5f548.js";import{P as Q}from"./index-1a196f85.js";import{P as f}from"./index-a313c373.js";import{u as j}from"./useMutation.esm-1abebd86.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",w(void 0));T.debugLabel="atomMainTableActions";const k=()=>b(T),U=()=>N(T),g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",$({open:!1,actionType:"add"}));g.debugLabel="atomAddOrEditModal";const W=()=>b(g),Z=()=>{const e=C(g);return()=>{e({open:!0,actionType:"add"})}},z=()=>{const e=C(g);return t=>{e({open:!0,actionType:"edit",record:t})}},J=()=>H(g);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{var r;const e=p.exports.useRef(),t=k(),{data:s}=x("sys_yes_no"),{open:c,actionType:o,record:i}=W(),m=J(),A=()=>{var n;o==="edit"&&((n=e.current)==null||n.resetFields()),m()};return p.exports.useEffect(()=>{if(c&&o==="edit"){const n=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(i),clearTimeout(n)},0)}},[c]),a(d,{accessible:!0,children:y(R,{formRef:e,width:500,title:o==="add"?"新增字典类型":"编辑字典类型",open:c,modalProps:{onCancel:A,okText:"提交"},onFinish:async n=>{var l;o==="add"?(await P(n),h.success("新增成功")):(await v({...n,configId:i.configId}),h.success("编辑成功")),t==null||t.reload(),m(),(l=e.current)==null||l.resetFields()},children:[a(f,{name:"configName",label:"参数名称",required:!0,rules:[{required:!0}]}),a(f,{name:"configKey",label:"参数键名",required:!0,rules:[{required:!0}]}),a(f,{name:"configValue",label:"参数键值",required:!0,rules:[{required:!0}]}),a(G.Group,{name:"configType",label:"系统内置",valueEnum:(r=s==null?void 0:s.mapData)!=null?r:{},initialValue:s==null?void 0:s.defaultValue}),a(Q,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=Z();return a(d,{accessible:!0,children:a(u,{icon:a(E,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=z();return a(u,{type:"link",icon:a(O,{}),onClick:()=>t(e),children:"编辑"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({searchParams:e})=>{const{isLoading:t,mutate:s}=j(()=>B(e),{onSuccess:()=>{h.success("导出成功")}});return a(d,{accessible:!0,children:a(u,{ghost:!0,type:"primary",icon:a(S,{}),loading:t,onClick:()=>s(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>a(d,{accessible:!0,children:a(u,{danger:!0,icon:a(F,{}),onClick:()=>{M.confirm({title:"刷新缓存？",content:"确定刷新缓存吗？",onOk:async()=>{await V(),h.success("刷新成功")}})},children:"刷新缓存"})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const I=({configId:e,disabled:t,isBatch:s})=>{const c=s?"批量删除":"删除",o=k(),{mutateAsync:i,isLoading:m}=j(async r=>{await q({configIds:r})},{onSuccess:()=>{var r;o==null||o.reload(),(r=o==null?void 0:o.clearSelected)==null||r.call(o),h.success("删除成功")}});return a(d,{accessible:!0,children:a(u,{type:"link",danger:!0,disabled:t,icon:a(_,{}),onClick:()=>{M.confirm({title:"删除参数",content:`确定删除参数编号为 ${e} 的参数吗？`,onOk:async()=>i(e),okButtonProps:{loading:m}})},children:c})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{var t;const{data:e}=x("sys_yes_no");return[{title:"参数主键",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},{title:"参数名称",dataIndex:"configName",key:"configName",valueType:"text"},{title:"参数键名",dataIndex:"configKey",key:"configKey",valueType:"text"},{title:"参数键值",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},{title:"系统内置",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",fixed:"right",render:(s,c)=>y(X,{children:[a(ae,{record:c}),a(I,{configId:c.configId})]})}]},ie=({selectedRows:e})=>a(I,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(",")}),re=()=>{const e=U(),t=ce(),[s,c]=p.exports.useState({});return a(D,{rowKey:"configId",actionRef:e,columns:t,tableAlertOptionRender:ie,request:async(...o)=>{const i=K(...o);return c(i),await L(i)},toolbar:{actions:[a(se,{},"ButtonRefresh"),a(oe,{searchParams:s},"ButtonExport"),a(te,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>y(Y,{children:[a(re,{}),a(ee,{})]});export{fe as default};
