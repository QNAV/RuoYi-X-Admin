import{j as e,B as A,b as C}from"./antdProComponents-6fa50338.js";import{aF as T,aG as b,aH as M,A as y,L as O,d as j,aI as B,m as w,B as F}from"./index-dffabdf2.js";import{u as E,a as P,O as x,b as R,c as h,d as I,e as S,f as V,g as k,B as q}from"./index-1d39ad91.js";import{u as G}from"./useRequest-f9345e2b.js";import{bm as H,r as u}from"./antd-5b22be5a.js";import"./iconPark-f28c66b3.js";import"./wangEditor-77edb64d.js";import"./useMutation-dd6321b2.js";import"./utils-300c3bed.js";import"./tslib.es6-3c43c0a4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const L=()=>{const{message:s}=H.useApp(),t=u.useRef(),a=E(),{open:c,actionType:r,ossConfigId:n}=P(),d=x[r],l=R(),m=()=>{var o;r===h.Edit&&((o=t.current)==null||o.resetFields()),l()},[,f]=u.useTransition();G(()=>T({ossConfigId:n}),{ready:c&&h.Edit&&!!n,onSuccess:o=>{f(()=>{var i;(i=t.current)==null||i.setFieldsValue(o)})},refreshDeps:[c]});const g=async o=>{var i;r===h.Add?await b(o):await M({ossConfigId:n,...o}),a==null||a.reload(),(i=t.current)==null||i.resetFields(),l(),s.success(`${d}成功`)},p=I();return e(A,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:m},width:680,open:c,onFinish:g,columns:p})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const $=()=>{const s=S();return e(y,{accessKey:"system:oss:add",children:e(O,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const v=({selectedRowKeys:s})=>e(q,{disabled:s.length===0,batch:!0,ossConfigIds:s}),D=()=>{const s=V(),t=k();return e(j,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...a)=>B(w(...a)),toolbar:{actions:[e($,{},"ButtonAdd")]},tableAlertOptionRender:v})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const _=()=>C(F,{children:[e(D,{}),e(L,{})]});export{_ as default};
