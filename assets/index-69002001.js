import{a0 as S,a2 as y,a1 as w,ao as C,j as a,a3 as g,ap as B,A as I,bv as R,a6 as P,Z as i,b as f,p as N,bw as F,bx as O,by as k,r as T,as as V,bz as L,bA as X,av as q,X as Y,bB as K,a7 as W,B as $}from"./index-07498b91.js";import{a as D,u as Q}from"./utils-ba590b6c.js";import{u as z}from"./useMutation-fd2fd3eb.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",S(void 0));A.debugLabel="atomMainTableActions";const M=()=>y(A),H=()=>w(A);var h=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(h||{});const Z={[0]:"新增",[1]:"编辑"},r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",D({open:!1,actionType:0}));r.debugLabel="atomAddOrEditModal";const G=()=>y(r),J=()=>{const e=C(r);return()=>{e({open:!0,actionType:0})}},U=()=>{const e=C(r);return t=>{e({open:!0,actionType:1,record:t})}},_=()=>Q(r);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=U();return a(g,{accessKey:"system:notice:edit",children:a(B,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=({noticeIds:e,disabled:t,batch:s})=>{const o=M(),{message:n,modal:l}=I.useApp(),{mutate:u,isLoading:m}=z(R,{onSuccess:()=>{var d;o==null||o.reload(),(d=o==null?void 0:o.clearSelected)==null||d.call(o),n.success("删除成功")}});return a(g,{accessKey:"system:notice:remove",children:a(P,{batch:s,disabled:t,onClick:()=>{l.confirm({title:"操作确认",content:`确定删除公告编号为 ${e.join(",")} 的公告通知吗？`,onOk:()=>u({noticeIds:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const[te]=i({title:"公告编号",dataIndex:"noticeId",table:{valueType:"text",hideInSearch:!0}}),[oe,,ae]=i({title:"公告标题",dataIndex:"noticeTitle",table:{valueType:"text"},form:{valueType:"text",formItemProps:{rules:[{required:!0}]}}}),E=()=>{const{valueEnumSysNoticeType:e}=O();return i({title:"公告类型",dataIndex:"noticeType",valueEnum:e,table:{valueType:"select"},form:{valueType:"select",formItemProps:{rules:[{required:!0}]}}})},se="NORMAL",j=()=>{const{valueEnumSysNoticeStatus:e}=k();return i({title:"状态",dataIndex:"status",valueEnum:e,table:{valueType:"select",hideInSearch:!0},form:{valueType:"radio",formItemProps:{rules:[{required:!0}]},initialValue:se}})},[ce]=i({title:"创建者",dataIndex:"createBy",table:{valueType:"text"}}),[ie]=i({title:"创建时间",dataIndex:"createTime",table:{valueType:"dateTime",hideInSearch:!0,sorter:!0}}),ne=()=>{const[e]=E(),[t]=j();return[te,oe,e,t,ce,ie,{title:"操作",valueType:"option",render:(s,o)=>f(N,{children:[a(ee,{record:o}),a(v,{noticeIds:[o.noticeId]})]})}]},re=()=>{const[,,e]=E(),[,,t]=j();return[ae,e,t,{name:"noticeContent",title:"内容",colProps:{span:24},renderFormItem:()=>a(F,{})}]};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const e=T.useRef(),{message:t}=I.useApp(),s=M(),{open:o,actionType:n,record:l}=G(),u=_(),m=()=>{var c;n===h.Edit&&((c=e.current)==null||c.resetFields()),u()},p=Z[n],d=async c=>{var b;n===h.Add?await L(c):await X({...c,noticeId:l.noticeId}),u(),(b=e.current)==null||b.resetFields(),s==null||s.reload(),t.success(`${p}成功`)},x=re();return T.useEffect(()=>{o&&h.Edit&&T.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(l)})},[o]),a(V,{title:`${p}公告通知`,layoutType:"ModalForm",grid:!0,colProps:{span:12},open:o,modalProps:{onCancel:m,okText:"提交"},columns:x,formRef:e,width:800,onFinish:d})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const e=J();return a(g,{accessKey:"system:notice:add",children:a(q,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({selectedRowKeys:e})=>a(v,{batch:!0,disabled:e.length===0,noticeIds:e}),he=()=>{const e=H(),t=ne();return a(Y,{rowKey:"noticeId",actionRef:e,columns:t,request:(...s)=>K(W(...s)),tableAlertOptionRender:de,toolbar:{actions:[a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>f($,{children:[a(he,{}),a(le,{})]});export{ge as default};
