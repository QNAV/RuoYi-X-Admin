import{u as L,k as O,m as g,r as m,j as h,F as E,a,b as v,D as K,M as k,S as N,A as R,l as C,c as y,d as f,T as F,L as w,i as j,N as x,P as D,e as M,f as T}from"./index.80762a21.js";import{u as H,a as _,b as B,c as I}from"./keepAlive.bf3fd4a2.js";import{u as A}from"./initialState.a2e79fb8.js";import"./useQuery.esm.96e6c56f.js";import"./utils.esm.812ffd2f.js";const S=e=>{const[n,u]=H(),o=L(),r=O.some(t=>g(t,e));return m.exports.useEffect(()=>{r&&u({...n,[e]:o})},[e]),h(E,{children:[Object.entries(n).map(([t,i])=>a("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout",hidden:!g(e,t),children:i},`${t}:${n[t]||"_"}`)),a("div",{hidden:r,style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout-no",children:!r&&o})]})},U=()=>a("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"}),$=[{key:"PROFILE",label:"\u4E2A\u4EBA\u4E2D\u5FC3"},{type:"divider"},{key:"LOGOUT",label:"\u9000\u51FA\u767B\u5F55"}],q=()=>{var o,r,t,i,c,s;const e=A(),n=v(),u={PROFILE:()=>n("/settings"),LOGOUT:C};return a("div",{className:"cursor-pointer hover:bg-[rgba(0,0,0,0.065)] px-3",children:a(K,{overlay:a(k,{items:$,onClick:({key:l})=>{var d;return(d=u[l])==null?void 0:d.call(u)}}),children:h(N,{children:[a(R,{src:(t=(r=(o=e==null?void 0:e.data)==null?void 0:o.userInfo)==null?void 0:r.user)==null?void 0:t.avatar}),a("span",{children:(s=(c=(i=e==null?void 0:e.data)==null?void 0:i.userInfo)==null?void 0:c.user)==null?void 0:s.nickName})]})})})},G=()=>{const[e,n]=m.exports.useState(""),{pathname:u}=y(),o=v(),r=_(),t=B(),i=m.exports.useMemo(()=>{const c=Object.keys(r);return c.length>5&&(t(c[0]),c.shift()),c.map(s=>{var l,d,p;return{label:(p=(d=f)==null?void 0:d[(l=Object.keys(f).find(b=>b===s))!=null?l:""])!=null?p:s,key:s}})},[r]);return m.exports.useEffect(()=>{n(u)},[u]),a(F,{hideAdd:!0,type:"editable-card",items:i,activeKey:e,onChange:o,onEdit:c=>{var s;if(c===u){const l=i.map(p=>p.key),d=l.findIndex(p=>p===e);o((s=l==null?void 0:l[d>0?d-1:d+1])!=null?s:"/")}t(c)}})},W=m.exports.memo(G),X=()=>h("div",{className:"flex justify-between items-end pl-5",children:[a(W,{}),a(q,{})]}),Y=(e,n)=>e!=null&&e.path?a(w,{to:e.path,target:j(e.path)?"_blank":"_self",rel:"noopener noreferrer",children:n}):n,P=()=>{const{pathname:e}=y(),n=v(),u=S(e),{data:o,isSuccess:r,isLoading:t}=A(),i=I(),c=m.exports.useMemo(()=>{var l;const s=(l=T)==null?void 0:l[e];return s===void 0?!0:!!(i!=null&&i[s])},[e,i]);return!t&&!r?a(x,{to:"/500",replace:!0}):!c&&!t&&r?a(x,{to:"/403",replace:!0}):a(D,{title:"RuoYi X Admin",layout:"mix",location:{pathname:e},onMenuHeaderClick:()=>n("/"),menu:{loading:t},loading:t,headerContentRender:X,menuItemRender:Y,menuDataRender:()=>{var s;return M((s=o==null?void 0:o.userRoutes)!=null?s:[])},footerRender:U,bgLayoutImgList:[{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",left:85,bottom:100,height:"303px"},{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",bottom:-68,right:-45,height:"303px"},{src:"https://img.alicdn.com/imgextra/i3/O1CN018NxReL1shX85Yz6Cx_!!6000000005798-2-tps-884-496.png",bottom:0,left:0,width:"331px"}],children:u})};export{P as default};
