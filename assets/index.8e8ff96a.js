import{r as y,j as a,af as n,g as B,ay as x,Y as p,$ as A,az as j,ag as l,aA as k,a as S,aT as M,aB as I,aj as w,aC as P,ai as C,ah as v,ak as R,al as O,F as V,I as q}from"./index.571436fe.js";import{a as d,c as b}from"./index.6d4fa0a5.js";import{u as f,a as N,b as _,S as L,c as W,d as $,e as z,f as G,g as H,h as K,i as Q,j as Y}from"./SysDictTypeService.2273455a.js";import{P as J}from"./index.d59cc900.js";import{u as E}from"./useMutation.esm.e4f37aff.js";import"./useQuery.esm.fdf5e819.js";import"./utils.esm.4a49e06f.js";import"./SysLoginService.fb430cd0.js";import"./index.dca23798.js";import"./utils.ece672c2.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const U=()=>{var T;const e=y.exports.useRef(),{canAddSysDict:t,canEditSysDict:c}=d(),s=f(),{open:o,actionType:u,record:m}=N(),g=_(),F=()=>{var r;u==="edit"&&((r=e.current)==null||r.resetFields()),g()},{data:i}=b("sys_normal_disable");return y.exports.useEffect(()=>{if(o&&u==="edit"){const r=setTimeout(()=>{var h;(h=e.current)==null||h.setFieldsValue(m),clearTimeout(r)},0)}},[o]),a(n,{accessible:t||c,children:B(x,{formRef:e,width:500,title:u==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:o,modalProps:{onCancel:F,okText:"\u63D0\u4EA4"},onFinish:async r=>{var h;u==="add"?(await L(r),p.success("\u65B0\u589E\u6210\u529F")):(await W({...r,dictId:m.dictId}),p.success("\u7F16\u8F91\u6210\u529F")),s==null||s.reload(),g(),(h=e.current)==null||h.resetFields()},children:[a(A,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(j.Group,{name:"status",label:"\u72B6\u6001",valueEnum:(T=i==null?void 0:i.mapData)!=null?T:{},initialValue:i==null?void 0:i.defaultValue}),a(J,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const X=()=>{const{canAddSysDict:e}=d(),t=$();return a(n,{accessible:e,children:a(l,{icon:a(k,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Z=({dictType:e})=>{const t=S();return a(l,{type:"link",icon:a(M,{}),onClick:()=>t(e),children:"\u67E5\u770B"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=z(),{canEditSysDict:c}=d();return a(n,{accessible:c,children:a(l,{type:"link",icon:a(I,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=({searchParams:e})=>{const{canExportSysDict:t}=d(),{isLoading:c,mutate:s}=E(()=>G(e),{onSuccess:()=>{p.success("\u5BFC\u51FA\u6210\u529F")}});return a(n,{accessible:t,children:a(l,{ghost:!0,type:"primary",icon:a(w,{}),loading:c,onClick:()=>s(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{const{canRemoveSysDict:e}=d();return a(n,{accessible:e,children:a(l,{danger:!0,icon:a(P,{}),onClick:()=>{C.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await H(),p.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=({dictId:e,disabled:t,isBatch:c})=>{const s=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:o}=d(),u=f(),{mutateAsync:m,isLoading:g}=E(()=>K({dictIds:e}),{onSuccess:()=>{var i;u==null||u.reload(),(i=u==null?void 0:u.clearSelected)==null||i.call(u),p.success("\u5220\u9664\u6210\u529F")}});return a(n,{accessible:o,children:a(l,{type:"link",danger:!0,disabled:t,icon:a(v,{}),onClick:()=>{C.confirm({title:"\u5220\u9664\u5B57\u5178",content:`\u786E\u5B9A\u5220\u9664\u5B57\u5178\u7F16\u53F7\u4E3A ${e} \u7684\u5B57\u5178\u5417\uFF1F`,onOk:async()=>m(),okButtonProps:{loading:g}})},children:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const{data:e}=b("sys_normal_disable");return[{title:"\u5B57\u5178\u7F16\u53F7",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"\u5B57\u5178\u7C7B\u578B",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:e==null?void 0:e.mapData},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(t,c)=>B(V,{children:[a(Z,{dictType:c.dictType}),a(ee,{record:c}),a(D,{dictId:c.dictId})]})}]},ce=({selectedRows:e})=>a(D,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),se=()=>{const e=Q(),t=ue(),[c,s]=y.exports.useState({});return a(R,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:ce,request:async(...o)=>{const u=O(...o);return s(u),await Y(u)},toolbar:{actions:[a(ae,{},"ButtonRefresh"),a(te,{searchParams:c},"ButtonExport"),a(X,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=()=>B(q,{children:[a(se,{}),a(U,{})]});export{ye as default};
