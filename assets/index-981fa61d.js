import{r as n,A as P,_ as C,p as M,j as e,B as R,d as k,M as o,f as r,N as g,O as f,L as z}from"./index-cde0b745.js";import{descriptionsColumns as G,useCacheNameTableColumns as E,useCacheKeyTableColumns as _}from"./index-576ba583.js";import{a as $,b as q,d as I,e as F,f as J,g as Q}from"./Monitor-3a29fda8.js";import{u as i}from"./useRequest-41b27702.js";import{u as h}from"./useMutation-c6d67192.js";import{P as U}from"./index-b4acbad9.js";var W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};const X=W;var p=function(s,c){return n.createElement(P,C(C({},s),{},{ref:c,icon:X}))};p.displayName="ClearOutlined";const Y=n.forwardRef(p);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,s){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,s),s)}};const oe=()=>{const[a,s]=n.useState(),[c,y]=n.useState(),{message:l}=M.useApp(),{data:K,refresh:u,loading:N}=i($),{data:w,refresh:d,loading:V,mutate:v}=i(async()=>(await q(a)).map(j=>({cacheKey:j})),{ready:!!a,refreshDeps:[a]}),{data:x,mutate:m,loading:b}=i(()=>I(a,c),{ready:!!c,refreshDeps:[c]}),{mutate:S,isLoading:H}=h(async t=>{await F(t),t===a&&v([]),u(),l.success("操作成功")}),{mutate:L,isLoading:B}=h(async t=>{await J(a,t),t===c&&m({}),d(),l.success("操作成功")}),{mutate:D,isLoading:O}=h(async()=>{await Q(),m({}),l.success("操作成功")}),A=E(S),T=_(L);return e(R,{children:k(o,{ghost:!0,gutter:[8,8],children:[e(o,{title:"缓存列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:u,loading:H},"Button")],children:e(f,{rowKey:"cacheName",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:A,options:!1,dataSource:K,scroll:{},loading:N,onRow:t=>({onClick:()=>s(t.cacheName)})})}),e(o,{title:"键名列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:d,loading:B},"Button")],children:e(f,{rowKey:"cacheKey",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:T,options:!1,dataSource:w,scroll:{},loading:V,onRow:t=>({onClick:()=>y(t.cacheKey)})})}),e(o,{title:"缓存内容",extra:[e(r,{type:"text",icon:e(Y,{}),onClick:()=>D(),loading:O},"Button")],children:e(z,{spinning:b,children:e(U,{column:1,columns:G,dataSource:x})})})]})})};export{oe as default};
