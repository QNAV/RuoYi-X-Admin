import{u as m}from"./index.85f7a3f8.js";import{j as c,T as b,L as T,l as j,u as A,S as y,r as d,a as v,k,b as x,i as M,c as E,N as C,d as K,P as L,e as w,f as R}from"./index.7c81fac9.js";import{u as I,a as N,b as S}from"./index.2df64043.js";import"./useQuery.esm.c8244a57.js";import"./utils.esm.0bacd143.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=()=>c("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=()=>c(b,{title:"\u9000\u51FA\u767B\u5F55",children:c(T,{onClick:j})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const O=()=>{const e=A();return c(b,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:c(y,{onClick:()=>e("/settings")})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const H=()=>{const[e,t]=d.exports.useState(""),{pathname:l}=v(),a=A(),[u,i]=I(),h=o=>{i(r=>{const s={...r};return delete s[o],s})},p=d.exports.useMemo(()=>Object.entries(u).map(([o,r])=>{var s,n;return{label:(n=(s=k)==null?void 0:s[o])!=null?n:o,key:r.pathname}}),[u]);return d.exports.useEffect(()=>{t(l)},[l]),c(x,{hideAdd:!0,type:"editable-card",items:p,activeKey:e,onChange:a,onEdit:o=>{if(o===l){const r=p.map(n=>n.key),s=r.findIndex(n=>n===e);s===0&&r.length===1?a("/"):a(r[s>0?s-1:s+1])}h(o)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const U=(e,t)=>e!=null&&e.path?M(e.path)?c("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:t}):c(E,{to:e.path,children:t}):t;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=()=>{var o,r,s,n;const{pathname:e}=v(),t=A(),l=m(e),{data:a,isSuccess:u,isLoading:i}=N(),h=S(),p=d.exports.useMemo(()=>{var f;const g=(f=R)==null?void 0:f[e];return g===void 0?!0:!!(h!=null&&h[g])},[e,h]);return!i&&!u?c(C,{to:"/500",replace:!0}):!p&&!i&&u?c(C,{to:"/403",replace:!0}):K(L,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>t("/"),menu:{loading:i},loading:i,menuItemRender:U,menuDataRender:()=>{var g;return w((g=a==null?void 0:a.userRoutes)!=null?g:[])},footerRender:B,token:{pageContainer:{marginBlockPageContainerContent:0,marginInlinePageContainerContent:0}},avatarProps:{size:"small",src:(r=(o=a==null?void 0:a.userInfo)==null?void 0:o.user)==null?void 0:r.avatar,title:(n=(s=a==null?void 0:a.userInfo)==null?void 0:s.user)==null?void 0:n.nickName},actionsRender:()=>[c(O,{},"IconSetting"),c(F,{},"IconLogout")],children:[c(H,{}),l]})};export{D as default};
