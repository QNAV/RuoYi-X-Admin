import{aj as z}from"./index-cfa422f5.js";import{r as d}from"./jsx-runtime-06f68cbc.js";class K{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.push(t),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(n=>n!==t),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const Q=typeof window>"u"||"Deno"in window;function Y(){}function Z(e,t){return typeof e=="function"?e(t):e}function ee(e){return typeof e=="number"&&e>=0&&e!==1/0}function te(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ne(e,t,n){return b(e)?typeof t=="function"?{...n,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function re(e,t,n){return b(e)?typeof t=="function"?{...n,mutationKey:e,mutationFn:t}:{...t,mutationKey:e}:typeof e=="function"?{...t,mutationFn:e}:{...e}}function ie(e,t,n){return b(e)?[{...t,queryKey:e},n]:[e||{},t]}function se(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:u,queryKey:l,stale:f}=e;if(b(l)){if(r){if(t.queryHash!==H(l,t.options))return!1}else if(!A(t.queryKey,l))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof f=="boolean"&&t.isStale()!==f||typeof i<"u"&&i!==t.state.fetchStatus||u&&!u(t))}function oe(e,t){const{exact:n,fetching:r,predicate:i,mutationKey:u}=e;if(b(u)){if(!t.options.mutationKey)return!1;if(n){if(E(t.options.mutationKey)!==E(u))return!1}else if(!A(t.options.mutationKey,u))return!1}return!(typeof r=="boolean"&&t.state.status==="loading"!==r||i&&!i(t))}function H(e,t){return((t==null?void 0:t.queryKeyHashFn)||E)(e)}function E(e){return JSON.stringify(e,(t,n)=>F(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function A(e,t){return M(e,t)}function M(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!M(e[n],t[n])):!1}function R(e,t){if(e===t)return e;const n=x(e)&&x(t);if(n||F(e)&&F(t)){const r=n?e.length:Object.keys(e).length,i=n?t:Object.keys(t),u=i.length,l=n?[]:{};let f=0;for(let a=0;a<u;a++){const y=n?a:i[a];l[y]=R(e[y],t[y]),l[y]===e[y]&&f++}return r===u&&f===r?e:l}return t}function ue(e,t){if(e&&!t||t&&!e)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function x(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function F(e){if(!L(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!L(n)||!n.hasOwnProperty("isPrototypeOf"))}function L(e){return Object.prototype.toString.call(e)==="[object Object]"}function b(e){return Array.isArray(e)}function q(e){return new Promise(t=>{setTimeout(t,e)})}function j(e){q(0).then(e)}function le(){if(typeof AbortController=="function")return new AbortController}function ce(e,t,n){return n.isDataEqual!=null&&n.isDataEqual(e,t)?e:typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?R(e,t):t}class V extends K{constructor(){super(),this.setup=t=>{if(!Q&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.focused=t,t&&this.onFocus()}onFocus(){this.listeners.forEach(t=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const $=new V;class B extends K{constructor(){super(),this.setup=t=>{if(!Q&&window.addEventListener){const n=()=>t();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var n;this.setup=t,(n=this.cleanup)==null||n.call(this),this.cleanup=t(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(t){this.online=t,t&&this.onOnline()}onOnline(){this.listeners.forEach(t=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const D=new B;function J(e){return Math.min(1e3*2**e,3e4)}function _(e){return(e??"online")==="online"?D.isOnline():!0}class N{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function fe(e){return e instanceof N}function ae(e){let t=!1,n=0,r=!1,i,u,l;const f=new Promise((o,c)=>{u=o,l=c}),a=o=>{r||(w(new N(o)),e.abort==null||e.abort())},y=()=>{t=!0},s=()=>{t=!1},h=()=>!$.isFocused()||e.networkMode!=="always"&&!D.isOnline(),I=o=>{r||(r=!0,e.onSuccess==null||e.onSuccess(o),i==null||i(),u(o))},w=o=>{r||(r=!0,e.onError==null||e.onError(o),i==null||i(),l(o))},S=()=>new Promise(o=>{i=c=>{const p=r||!h();return p&&o(c),p},e.onPause==null||e.onPause()}).then(()=>{i=void 0,r||e.onContinue==null||e.onContinue()}),m=()=>{if(r)return;let o;try{o=e.fn()}catch(c){o=Promise.reject(c)}Promise.resolve(o).then(I).catch(c=>{var p,O;if(r)return;const v=(p=e.retry)!=null?p:3,C=(O=e.retryDelay)!=null?O:J,T=typeof C=="function"?C(n,c):C,g=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,c);if(t||!g){w(c);return}n++,e.onFail==null||e.onFail(n,c),q(T).then(()=>{if(h())return S()}).then(()=>{t?w(c):m()})})};return _(e.networkMode)?m():S().then(m),{promise:f,cancel:a,continue:()=>(i==null?void 0:i())?f:Promise.resolve(),cancelRetry:y,continueRetry:s}}function G(){let e=[],t=0,n=s=>{s()},r=s=>{s()};const i=s=>{let h;t++;try{h=s()}finally{t--,t||f()}return h},u=s=>{t?e.push(s):j(()=>{n(s)})},l=s=>(...h)=>{u(()=>{s(...h)})},f=()=>{const s=e;e=[],s.length&&j(()=>{r(()=>{s.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:l,schedule:u,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s}}}const he=G(),ye=z.useSyncExternalStore,P=d.createContext(void 0),k=d.createContext(!1);function U(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=P),window.ReactQueryClientContext):P)}const de=({context:e}={})=>{const t=d.useContext(U(e,d.useContext(k)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pe=({client:e,children:t,context:n,contextSharing:r=!1})=>{d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const i=U(n,r);return d.createElement(k.Provider,{value:!n&&r},d.createElement(i.Provider,{value:e},t))};function ve(e,t){return typeof e=="function"?e(...t):!!e}export{pe as Q,K as S,he as a,_ as b,ae as c,oe as d,ne as e,$ as f,le as g,H as h,fe as i,Z as j,E as k,A as l,se as m,Y as n,D as o,ie as p,Q as q,ce as r,ue as s,te as t,ee as u,ve as v,de as w,ye as x,re as y};
