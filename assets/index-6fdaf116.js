import{r as m,R as O,j as c,a as L,F as Ne}from"./jsx-runtime-5957e344.js";import{aO as We,V as J,aL as le,U as a,bu as Rt,bY as Pt,aM as Tt,aN as Nt,bo as At,ak as _t,Y as Ce,dL as Mt,a4 as Ke,dM as Dt,bs as Je,bX as Kt,cM as Le,dN as Bt,C as Ge,a2 as ot,a0 as Ve,a9 as Lt,_ as N,bl as ye,dO as zt,dP as kt,dQ as Ot,dR as jt,T as $t,dS as Ht,bH as Wt,bI as lt,aH as Gt,cD as st,dT as Vt,dU as Ft,dV as ct,dW as dt,dX as ut,aJ as qt,b5 as ze,dY as Xt,bJ as Ae,dZ as Yt,cu as Qt,cG as Fe,d_ as Ut,as as Jt,a_ as Te,d$ as Zt,ba as ea,bN as ta,e0 as aa,bL as na,aY as ra,b4 as ia,e1 as oa,bP as la,e2 as sa,b3 as ca,e3 as da,a8 as He,e4 as ua,bA as ma,cO as pa,cP as fa,b1 as mt,cR as pt,cL as qe,e5 as ha,e6 as ga,e7 as xa,aU as va}from"./index-b7804f37.js";import{a as ya,b as Ca}from"./index-cc007863.js";import{a as Sa,u as ba}from"./utils-c42d2940.js";import{u as Xe}from"./useMutation.esm-059e5dbf.js";import{P as Ze}from"./index-5f6608ed.js";import{S as et}from"./Skeleton-78b391a1.js";import{i as tt,u as wa}from"./useRequest-a28d98c7.js";import{P as Ia}from"./index-ee9e5ce2.js";import"./routes-2e00a88b.js";import"./mutation.esm-23401b57.js";var ft=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Ea=function(t){var n=t.prefixCls,r=t.className,o=t.avatar,l=t.title,i=t.description,d=ft(t,["prefixCls","className","avatar","title","description"]),s=m.exports.useContext(We),C=s.getPrefixCls,p=C("list",n),f=J(p+"-item-meta",r),h=O.createElement("div",{className:p+"-item-meta-content"},l&&O.createElement("h4",{className:p+"-item-meta-title"},l),i&&O.createElement("div",{className:p+"-item-meta-description"},i));return O.createElement("div",le({},d,{className:f}),o&&O.createElement("div",{className:p+"-item-meta-avatar"},o),(l||i)&&h)},Ra=function(t,n){var r=t.prefixCls,o=t.children,l=t.actions,i=t.extra,d=t.className,s=t.colStyle,C=ft(t,["prefixCls","children","actions","extra","className","colStyle"]),p=m.exports.useContext(Ye),f=p.grid,h=p.itemLayout,u=m.exports.useContext(We),y=u.getPrefixCls,B=function(){var _;return m.exports.Children.forEach(o,function(b){typeof b=="string"&&(_=!0)}),_&&m.exports.Children.count(o)>1},R=function(){return h==="vertical"?!!i:!B()},I=y("list",r),g=l&&l.length>0&&O.createElement("ul",{className:I+"-item-action",key:"actions"},l.map(function(A,_){return O.createElement("li",{key:I+"-item-action-"+_},A,_!==l.length-1&&O.createElement("em",{className:I+"-item-action-split"}))})),z=f?"div":"li",x=O.createElement(z,le({},C,f?{}:{ref:n},{className:J(I+"-item",a({},I+"-item-no-flex",!R()),d)}),h==="vertical"&&i?[O.createElement("div",{className:I+"-item-main",key:"content"},o,g),O.createElement("div",{className:I+"-item-extra",key:"extra"},i)]:[o,g,Rt(i,{key:"extra"})]);return f?O.createElement(Pt,{ref:n,flex:1,style:s},x):x},ht=m.exports.forwardRef(Ra);ht.Meta=Ea;const Pa=ht;var Ta=function(t){var n,r,o=t.listBorderedCls,l=t.componentCls,i=t.paddingLG,d=t.margin,s=t.padding,C=t.listItemPaddingSM,p=t.marginLG,f=t.borderRadiusLG;return r={},a(r,""+o,(n={border:t.lineWidth+"px "+t.lineType+" "+t.colorBorder,borderRadius:f},a(n,l+"-header,"+l+"-footer,"+l+"-item",{paddingInline:i}),a(n,l+"-pagination",{margin:d+"px "+p+"px"}),n)),a(r,""+o+l+"-sm",a({},l+"-item,"+l+"-header,"+l+"-footer",{padding:C})),a(r,""+o+l+"-lg",a({},l+"-item,"+l+"-header,"+l+"-footer",{padding:s+"px "+i+"px"})),r},Na=function(t){var n,r,o,l,i=t.componentCls,d=t.screenSM,s=t.screenMD,C=t.marginLG,p=t.marginSM,f=t.margin;return l={},a(l,"@media screen and (max-width:"+s+")",(n={},a(n,""+i,a({},i+"-item",a({},i+"-item-action",{marginInlineStart:C}))),a(n,i+"-vertical",a({},i+"-item",a({},i+"-item-extra",{marginInlineStart:C}))),n)),a(l,"@media screen and (max-width: "+d+")",(o={},a(o,""+i,a({},i+"-item",a({flexWrap:"wrap"},i+"-action",{marginInlineStart:p}))),a(o,i+"-vertical",a({},i+"-item",(r={flexWrap:"wrap-reverse"},a(r,i+"-item-main",{minWidth:t.contentWidth}),a(r,i+"-item-extra",{margin:"auto auto "+f+"px"}),r))),o)),l},Aa=function(t){var n,r,o,l,i,d,s=t.componentCls,C=t.antCls,p=t.controlHeight,f=t.minHeight,h=t.paddingSM,u=t.marginLG,y=t.padding,B=t.listItemPadding,R=t.colorPrimary,I=t.listItemPaddingSM,g=t.listItemPaddingLG,z=t.paddingXS,x=t.margin,A=t.colorText,_=t.colorTextDescription,b=t.motionDurationSlow,Z=t.lineWidth;return d={},a(d,""+s,le(le({},At(t)),(l={position:"relative","*":{outline:"none"}},a(l,s+"-header, "+s+"-footer",{background:"transparent",paddingBlock:h}),a(l,s+"-pagination",a({marginBlockStart:u,textAlign:"end"},C+"-pagination-options",{textAlign:"start"})),a(l,s+"-spin",{minHeight:f,textAlign:"center"}),a(l,s+"-items",{margin:0,padding:0,listStyle:"none"}),a(l,s+"-item",(o={display:"flex",alignItems:"center",justifyContent:"space-between",padding:B,color:A},a(o,s+"-item-meta",(n={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(n,s+"-item-meta-avatar",{marginInlineEnd:y}),a(n,s+"-item-meta-content",{flex:"1 0",width:0,color:A}),a(n,s+"-item-meta-title",{marginBottom:t.marginXXS,color:A,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":a({color:A,transition:"all "+b},"&:hover",{color:R})}),a(n,s+"-item-meta-description",{color:_,fontSize:t.fontSize,lineHeight:t.lineHeight}),n)),a(o,s+"-item-action",(r={flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(r,"& > li",a({position:"relative",display:"inline-block",padding:"0 "+z+"px",color:_,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(r,s+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:Z,height:Math.ceil(t.fontSize*t.lineHeight)-t.marginXXS*2,transform:"translateY(-50%)",backgroundColor:t.colorSplit}),r)),o)),a(l,s+"-empty",{padding:y+"px 0",color:_,fontSize:t.fontSizeSM,textAlign:"center"}),a(l,s+"-empty-text",{padding:y,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"}),a(l,s+"-item-no-flex",{display:"block"}),l))),a(d,s+"-grid "+C+"-col > "+s+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:x,paddingBlock:0,borderBlockEnd:"none"}),a(d,s+"-vertical "+s+"-item",(i={alignItems:"initial"},a(i,s+"-item-main",{display:"block",flex:1}),a(i,s+"-item-extra",{marginInlineStart:u}),a(i,s+"-item-meta",a({marginBlockEnd:y},s+"-item-meta-title",{marginBlockEnd:h,color:A,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG})),a(i,s+"-item-action",{marginBlockStart:y,marginInlineStart:"auto","> li":a({padding:"0 "+y+"px"},"&:first-child",{paddingInlineStart:0})}),i)),a(d,s+"-split "+s+"-item",a({borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit},"&:last-child",{borderBlockEnd:"none"})),a(d,s+"-split "+s+"-header",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(d,s+"-split"+s+"-empty "+s+"-footer",{borderTop:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(d,s+"-loading "+s+"-spin-nested-loading",{minHeight:p}),a(d,s+"-split"+s+"-something-after-last-item "+C+"-spin-container > "+s+"-items > "+s+"-item:last-child",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(d,s+"-lg "+s+"-item",{padding:g}),a(d,s+"-sm "+s+"-item",{padding:I}),a(d,s+":not("+s+"-vertical)",a({},s+"-item-no-flex",a({},s+"-item-action",{float:"right"}))),d};const _a=Tt("List",function(e){var t=Nt(e,{listBorderedCls:e.componentCls+"-bordered",minHeight:e.controlHeightLG,listItemPadding:e.paddingContentVertical+"px "+e.paddingContentHorizontalLG+"px",listItemPaddingSM:e.paddingContentVerticalSM+"px "+e.paddingContentHorizontal+"px",listItemPaddingLG:e.paddingContentVerticalLG+"px "+e.paddingContentHorizontalLG+"px"});return[Aa(t),Ta(t),Na(t)]},{contentWidth:220});var Ma=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n},Ye=m.exports.createContext({});Ye.Consumer;function Be(e){var t,n=e.pagination,r=n===void 0?!1:n,o=e.prefixCls,l=e.bordered,i=l===void 0?!1:l,d=e.split,s=d===void 0?!0:d,C=e.className,p=e.children,f=e.itemLayout,h=e.loadMore,u=e.grid,y=e.dataSource,B=y===void 0?[]:y,R=e.size,I=e.header,g=e.footer,z=e.loading,x=z===void 0?!1:z,A=e.rowKey,_=e.renderItem,b=e.locale,Z=Ma(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),w=r&&_t(r)==="object"?r:{},q=m.exports.useState(w.defaultCurrent||1),pe=Ce(q,2),ne=pe[0],G=pe[1],fe=m.exports.useState(w.defaultPageSize||10),se=Ce(fe,2),he=se[0],ee=se[1],te=m.exports.useContext(We),Q=te.getPrefixCls,M=te.renderEmpty,X=te.direction,k={current:1,total:0},T=function(P){return function(F,W){G(F),ee(W),r&&r[P]&&r[P](F,W)}},j=T("onChange"),$=T("onShowSizeChange"),ce=function(P,F){if(!_)return null;var W;return typeof A=="function"?W=A(P):A?W=P[A]:W=P.key,W||(W="list-item-"+F),m.exports.createElement(m.exports.Fragment,{key:W},_(P,F))},Y=function(){return!!(h||r||g)},de=function(P,F){return m.exports.createElement("div",{className:P+"-empty-text"},b&&b.emptyText||F("List"))},D=Q("list",o),Ee=_a(D),Se=Ce(Ee,2),ae=Se[0],Re=Se[1],U=x;typeof U=="boolean"&&(U={spinning:U});var H=U&&U.spinning,S="";switch(R){case"large":S="lg";break;case"small":S="sm";break}var K=J(D,(t={},a(t,D+"-vertical",f==="vertical"),a(t,D+"-"+S,S),a(t,D+"-split",s),a(t,D+"-bordered",i),a(t,D+"-loading",H),a(t,D+"-grid",!!u),a(t,D+"-something-after-last-item",Y()),a(t,D+"-rtl",X==="rtl"),t),C,Re),v=le(le(le({},k),{total:B.length,current:ne,pageSize:he}),r||{}),re=Math.ceil(v.total/v.pageSize);v.current>re&&(v.current=re);var ue=r?m.exports.createElement("div",{className:D+"-pagination"},m.exports.createElement(Mt,le({},v,{onChange:j,onShowSizeChange:$}))):null,ie=Ke(B);r&&B.length>(v.current-1)*v.pageSize&&(ie=Ke(B).splice((v.current-1)*v.pageSize,v.pageSize));var me=Object.keys(u||{}).some(function(E){return["xs","sm","md","lg","xl","xxl"].includes(E)}),be=Dt(me),oe=m.exports.useMemo(function(){for(var E=0;E<Je.length;E+=1){var P=Je[E];if(be[P])return P}},[be]),ge=m.exports.useMemo(function(){if(!!u){var E=oe&&u[oe]?u[oe]:u.column;if(E)return{width:100/E+"%",maxWidth:100/E+"%"}}},[u==null?void 0:u.column,oe]),xe=H&&m.exports.createElement("div",{style:{minHeight:53}});if(ie.length>0){var we=ie.map(function(E,P){return ce(E,P)});xe=u?m.exports.createElement(Kt,{gutter:u.gutter},m.exports.Children.map(we,function(E){return m.exports.createElement("div",{key:E==null?void 0:E.key,style:ge},E)})):m.exports.createElement("ul",{className:D+"-items"},we)}else!p&&!H&&(xe=de(D,M||Bt));var V=v.position||"bottom",ve=m.exports.useMemo(function(){return{grid:u,itemLayout:f}},[JSON.stringify(u),f]);return ae(m.exports.createElement(Ye.Provider,{value:ve},m.exports.createElement("div",le({className:K},Z),(V==="top"||V==="both")&&ue,I&&m.exports.createElement("div",{className:D+"-header"},I),m.exports.createElement(Le,le({},U),xe,p),g&&m.exports.createElement("div",{className:D+"-footer"},g),h||(V==="bottom"||V==="both")&&ue)))}Be.Item=Pa;var gt={};Object.defineProperty(gt,"__esModule",{value:!0});var Da=gt.default=Ka;function Ka(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}var Ba=["title","subTitle","avatar","description","extra","content","actions","type"],La=Ba.reduce(function(e,t){return e.set(t,!0),e},new Map),xt={};function Me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Me=function(n){return typeof n}:Me=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Me(e)}Object.defineProperty(xt,"__esModule",{value:!0});var za=xt.default=Ga,je=ka(m.exports);function vt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return vt=function(){return e},e}function ka(e){if(e&&e.__esModule)return e;if(e===null||Me(e)!=="object"&&typeof e!="function")return{default:e};var t=vt();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=r?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function Oa(e,t){return Wa(e)||Ha(e,t)||$a(e,t)||ja()}function ja(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $a(e,t){if(!!e){if(typeof e=="string")return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}}function at(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ha(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,l=void 0;try{for(var i=e[Symbol.iterator](),d;!(r=(d=i.next()).done)&&(n.push(d.value),!(t&&n.length===t));r=!0);}catch(s){o=!0,l=s}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw l}}return n}}function Wa(e){if(Array.isArray(e))return e}function Ga(e,t){var n=t||{},r=n.defaultValue,o=n.value,l=n.onChange,i=n.postState,d=je.useState(function(){return o!==void 0?o:r!==void 0?typeof r=="function"?r():r:typeof e=="function"?e():e}),s=Oa(d,2),C=s[0],p=s[1],f=o!==void 0?o:C;i&&(f=i(f));function h(y){p(y),f!==y&&l&&l(y,f)}var u=je.useRef(!0);return je.useEffect(function(){if(u.current){u.current=!1;return}o===void 0&&p(o)},[o]),[f,h]}var Va=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Fa(e){var t,n=e.prefixCls,r=e.expandIcon,o=r===void 0?c(zt,{}):r,l=e.onExpand,i=e.expanded,d=e.record,s=o,C="".concat(n,"-row-expand-icon"),p=function(h){l(!i),h.stopPropagation()};return typeof o=="function"&&(s=o({expanded:i,onExpand:l,record:d})),c("span",{className:J(C,(t={},a(t,"".concat(n,"-row-expanded"),i),a(t,"".concat(n,"-row-collapsed"),!i),t)),onClick:p,children:s})}function qa(e){var t,n,r,o,l,i=e.prefixCls,d=m.exports.useContext(Ge.ConfigContext),s=d.getPrefixCls,C=m.exports.useContext(ot),p=C.hashId,f=s("pro-list",i),h="".concat(f,"-row"),u=e.title,y=e.subTitle,B=e.content,R=e.itemTitleRender;e.prefixCls;var I=e.actions;e.item,e.recordKey;var g=e.avatar,z=e.cardProps,x=e.description,A=e.isEditable,_=e.checkbox,b=e.index,Z=e.selected,w=e.loading,q=e.expand,pe=e.onExpand,ne=e.expandable,G=e.rowSupportExpand,fe=e.showActions,se=e.showExtra,he=e.type,ee=e.style,te=e.className,Q=te===void 0?h:te,M=e.record,X=e.onRow,k=e.onItem,T=e.itemHeaderRender,j=e.cardActionProps,$=e.extra,ce=Ve(e,Va),Y=ne||{},de=Y.expandedRowRender,D=Y.expandIcon,Ee=Y.expandRowByClick,Se=Y.indentSize,ae=Se===void 0?8:Se,Re=Y.expandedRowClassName,U=za(!!q,{value:q,onChange:pe}),H=Ce(U,2),S=H[0],K=H[1],v=J((t={},a(t,"".concat(h,"-selected"),!z&&Z),a(t,"".concat(h,"-show-action-hover"),fe==="hover"),a(t,"".concat(h,"-type-").concat(he),!!he),a(t,"".concat(h,"-editable"),A),a(t,"".concat(h,"-show-extra-hover"),se==="hover"),t),p,h),re=J(p,a({},"".concat(Q,"-extra"),se==="hover")),ue=S||Object.values(ne||{}).length===0,ie=de&&de(M,b,ae,S),me=m.exports.useMemo(function(){if(!(!I||j==="actions"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:I},"action")]},[I,j]),be=m.exports.useMemo(function(){if(!(!I||!j||j==="extra"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:I},"action")]},[I,j]),oe=u||y?L("div",{className:"".concat(v,"-header-title ").concat(p),children:[u&&c("div",{className:"".concat(v,"-title ").concat(p),children:u}),y&&c("div",{className:"".concat(v,"-subTitle ").concat(p),children:y})]}):null,ge=(n=R&&(R==null?void 0:R(M,b,oe)))!==null&&n!==void 0?n:oe,xe=ge||g||y||x?c(Be.Item.Meta,{avatar:g,title:ge,description:x&&ue&&c("div",{className:"".concat(v,"-description ").concat(p),children:x})}):null,we=J(p,(r={},a(r,"".concat(v,"-item-has-checkbox"),_),a(r,"".concat(v,"-item-has-avatar"),g),a(r,v,v),r)),V=m.exports.useMemo(function(){return g||u?L(Ne,{children:[g&&c(Lt,{size:22,src:g,className:"".concat(s("list-item-meta-avatar")," ").concat(p)}),c("span",{className:"".concat(s("list-item-meta-title")," ").concat(p),children:u})]}):null},[g,s,p,u]),ve=z?c(ye,N(N(N({bordered:!0,loading:w,hoverable:!0},z),{},{title:V,subTitle:y,extra:me,actions:be,bodyStyle:N({padding:24},z.bodyStyle)},k==null?void 0:k(M,b)),{},{children:c(et,{avatar:!0,title:!1,loading:w,active:!0,children:L("div",{className:"".concat(v,"-header ").concat(p),children:[R&&(R==null?void 0:R(M,b,oe)),B]})})})):c(Be.Item,N(N(N(N({className:J(we,a({},Q,Q!==h))},ce),{},{actions:me,extra:!!$&&c("div",{className:re,children:$})},X==null?void 0:X(M,b)),k==null?void 0:k(M,b)),{},{onClick:function(P){var F,W,_e,Oe;X==null||(F=X(M,b))===null||F===void 0||(W=F.onClick)===null||W===void 0||W.call(F,P),k==null||(_e=k(M,b))===null||_e===void 0||(Oe=_e.onClick)===null||Oe===void 0||Oe.call(_e,P),Ee&&K(!S)},children:L(et,{avatar:!0,title:!1,loading:w,active:!0,children:[L("div",{className:"".concat(v,"-header ").concat(p),children:[L("div",{className:"".concat(v,"-header-option ").concat(p),children:[!!_&&c("div",{className:"".concat(v,"-checkbox ").concat(p),children:_}),Object.values(ne||{}).length>0&&G&&Fa({prefixCls:f,expandIcon:D,onExpand:K,expanded:S,record:M})]}),(o=T&&(T==null?void 0:T(M,b,xe)))!==null&&o!==void 0?o:xe]}),ue&&(B||ie)&&L("div",{className:"".concat(v,"-content ").concat(p),children:[B,de&&G&&c("div",{className:Re&&Re(M,b,ae),children:ie})]})]})}));return z?c("div",{className:J(p,(l={},a(l,"".concat(v,"-card"),z),a(l,Q,Q!==h),l)),style:ee,children:ve}):ve}var Xa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Ya(e){var t=e.dataSource,n=e.columns,r=e.rowKey,o=e.showActions,l=e.showExtra,i=e.prefixCls,d=e.actionRef,s=e.itemTitleRender,C=e.renderItem,p=e.itemCardProps,f=e.itemHeaderRender,h=e.expandable,u=e.rowSelection,y=e.pagination,B=e.onRow,R=e.onItem,I=e.rowClassName,g=Ve(e,Xa),z=m.exports.useContext(ot),x=z.hashId,A=m.exports.useContext(Ge.ConfigContext),_=A.getPrefixCls,b=O.useMemo(function(){return typeof r=="function"?r:function(H,S){return H[r]||S}},[r]),Z=kt(t,"children",b),w=Ce(Z,1),q=w[0],pe=Ot(t.length,N({responsive:!0},y),function(){}),ne=Ce(pe,1),G=ne[0],fe=O.useMemo(function(){if(y===!1||!G.pageSize||t.length<G.total)return t;var H=G.current,S=H===void 0?1:H,K=G.pageSize,v=K===void 0?10:K,re=t.slice((S-1)*v,S*v);return re},[t,G,y]),se=_("pro-list",i),he=jt(u,{getRowKey:b,getRecordByKey:q,prefixCls:se,data:t,pageData:fe,expandType:"row",childrenColumnName:"children",locale:{}}),ee=Ce(he,2),te=ee[0],Q=ee[1],M=h||{},X=M.expandedRowKeys,k=M.defaultExpandedRowKeys,T=M.defaultExpandAllRows,j=T===void 0?!0:T,$=M.onExpand,ce=M.onExpandedRowsChange,Y=M.rowExpandable,de=O.useState(function(){return k||(j!==!1?t.map(b):[])}),D=Ce(de,2),Ee=D[0],Se=D[1],ae=O.useMemo(function(){return new Set(X||Ee||[])},[X,Ee]),Re=O.useCallback(function(H){var S=b(H,t.indexOf(H)),K,v=ae.has(S);v?(ae.delete(S),K=Ke(ae)):K=[].concat(Ke(ae),[S]),Se(K),$&&$(!v,H),ce&&ce(K)},[b,ae,t,$,ce]),U=te([])[0];return c(Be,N(N({},g),{},{className:J(_("pro-list-container",i),x,g.className),dataSource:fe,pagination:y&&G,renderItem:function(S,K){var v,re,ue,ie={className:typeof I=="function"?I(S,K):I};n==null||n.forEach(function(V){var ve=V.listKey,E=V.cardActionProps;if(!!La.has(ve)){var P=V.dataIndex||ve||V.key,F=Array.isArray(P)?Da(S,P):S[P];E==="actions"&&ve==="actions"&&(ie.cardActionProps=E);var W=V.render?V.render(F,S,K):F;W!=="-"&&(ie[V.listKey]=W)}});var me;U&&U.render&&(me=U.render(S,S,K)||void 0);var be=((v=d.current)===null||v===void 0?void 0:v.isEditable(N(N({},S),{},{index:K})))||{},oe=be.isEditable,ge=be.recordKey,xe=Q.has(ge||K),we=c(qa,N(N({cardProps:g.grid?N(N(N({},p),g.grid),{},{checked:xe,onChecked:O.isValidElement(me)?(re=me)===null||re===void 0||(ue=re.props)===null||ue===void 0?void 0:ue.onChange:void 0}):void 0},ie),{},{recordKey:ge,isEditable:oe||!1,expandable:h,expand:ae.has(b(S,K)),onExpand:function(){Re(S)},index:K,record:S,item:S,showActions:o,showExtra:l,itemTitleRender:s,itemHeaderRender:f,rowSupportExpand:!Y||Y&&Y(S),selected:Q.has(b(S,K)),checkbox:me,onRow:B,onItem:R}),ge);return C?C(S,K,we):we}}))}var Qa=function(t){var n,r,o,l,i,d;return a({},t.componentCls,(d={backgroundColor:"transparent"},a(d,"".concat(t.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(d,"&-row",(i={borderBlockEnd:"1px solid ".concat(t.colorSplit)},a(i,"".concat(t.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(i,"&:last-child",a({borderBlockEnd:"none"},"".concat(t.antCls,"-list-item"),{borderBlockEnd:"none"})),a(i,"&:hover",(n={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(n,"".concat(t.antCls,"-list-item-action"),{display:"block"}),a(n,"".concat(t.antCls,"-list-item-extra"),{display:"flex"}),a(n,"".concat(t.componentCls,"-row-extra"),{display:"block"}),a(n,"".concat(t.componentCls,"-row-subheader-actions"),{display:"block"}),n)),a(i,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(t.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(i,"&".concat(t.componentCls,"-row-editable"),a({},"".concat(t.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(i,"&".concat(t.componentCls,"-row-selected"),{backgroundColor:t.colorPrimaryBgHover,"&:hover":{backgroundColor:t.colorPrimaryBgHover}}),a(i,"&".concat(t.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),a(i,"&".concat(t.componentCls,"-row-type-inline"),a({},"".concat(t.componentCls,"-row-title"),{fontWeight:"normal"})),a(i,"&".concat(t.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(i,"&-show-action-hover",(r={},a(r,"".concat(t.antCls,`-list-item-action,
            `).concat(t.proComponentsCls,`-card-extra,
            `).concat(t.proComponentsCls,"-card-actions"),{display:"none"}),a(r,"&:hover",a({},"".concat(t.proComponentsCls,"-card-extra,").concat(t.proComponentsCls,"-card-actions"),{display:"flex"})),r)),a(i,"&-show-extra-hover",a({},"".concat(t.antCls,"-list-item-extra"),{display:"none"})),a(i,"&-extra",{display:"none"}),a(i,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:t.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(i,"&-expand-icon",{marginInlineEnd:8,color:t.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(i,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(i,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:t.colorPrimary}}),a(i,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(i,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(i,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(i,"&-avatar",{display:"flex"}),a(i,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),a(i,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(i,"&-header-option",{display:"flex"}),a(i,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(i,"&-no-split",(o={},a(o,"".concat(t.componentCls,"-row"),{borderBlockEnd:"none"}),a(o,"".concat(t.antCls,"-list ").concat(t.antCls,"-list-item"),{borderBlockEnd:"none"}),o)),a(i,"&-bordered",a({},"".concat(t.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(t.colorSplit)})),a(i,"".concat(t.antCls,"-list-vertical"),(l={},a(l,"".concat(t.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(l,"&-content",{marginBlock:0,marginInline:0}),a(l,"&-subTitle",{marginBlockStart:8}),a(l,"".concat(t.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(t.componentCls,"-row-description"),{marginBlockStart:16})),a(l,"".concat(t.antCls,"-list-bordered ").concat(t.antCls,"-list-item"),{paddingInline:0}),a(l,"".concat(t.componentCls,"-row-show-extra-hover"),a({},"".concat(t.antCls,"-list-item-extra "),{display:"none"})),l)),a(i,"".concat(t.antCls,"-list-pagination"),{marginBlockEnd:t.marginLG}),a(i,"".concat(t.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(i,"".concat(t.antCls,"-list-vertical .").concat(t.proComponentsCls,"-list-row ").concat(t.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(t.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(i,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),i)),d))};function Ua(e){return $t("ProList",function(t){var n=N(N({},t),{},{componentCls:".".concat(e)});return[Qa(n)]})}var Ja=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Za(e){var t=e.metas,n=e.split,r=e.footer,o=e.rowKey,l=e.tooltip,i=e.className,d=e.options,s=d===void 0?!1:d,C=e.search,p=C===void 0?!1:C,f=e.expandable,h=e.showActions,u=e.showExtra,y=e.rowSelection,B=y===void 0?!1:y,R=e.pagination,I=R===void 0?!1:R,g=e.itemLayout,z=e.renderItem,x=e.grid,A=e.itemCardProps,_=e.onRow,b=e.onItem,Z=e.rowClassName,w=e.locale,q=e.itemHeaderRender,pe=e.itemTitleRender,ne=Ve(e,Ja),G=m.exports.useRef();m.exports.useImperativeHandle(ne.actionRef,function(){return G.current});var fe=m.exports.useContext(Ge.ConfigContext),se=fe.getPrefixCls,he=m.exports.useMemo(function(){var k=[];return Object.keys(t||{}).forEach(function(T){var j=t[T]||{},$=j.valueType;$||(T==="avatar"&&($="avatar"),T==="actions"&&($="option"),T==="description"&&($="textarea")),k.push(N(N({listKey:T,dataIndex:(j==null?void 0:j.dataIndex)||T},j),{},{valueType:$}))}),k},[t]),ee=se("pro-list",e.prefixCls),te=Ua(ee),Q=te.wrapSSR,M=te.hashId,X=J(ee,M,a({},"".concat(ee,"-no-split"),!n));return Q(c(Ht,N(N({tooltip:l},ne),{},{actionRef:G,pagination:I,type:"list",rowSelection:B,search:p,options:s,className:J(ee,i,X),columns:he,rowKey:o,tableViewRender:function(T){var j=T.columns,$=T.size,ce=T.pagination,Y=T.rowSelection,de=T.dataSource,D=T.loading;return c(Ya,{grid:x,itemCardProps:A,itemTitleRender:pe,prefixCls:e.prefixCls,columns:j,renderItem:z,actionRef:G,dataSource:de||[],size:$,footer:r,split:n,rowKey:o,expandable:f,rowSelection:B===!1?void 0:Y,showActions:h,showExtra:u,pagination:ce,itemLayout:g,loading:D,itemHeaderRender:q,onRow:_,onItem:b,rowClassName:Z,locale:w})}})))}var yt=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},en=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,l=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(d){i={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return l},De=new Set,Ie,nt={xs:0,sm:576,md:768,lg:992,xl:1200};function rt(){var e,t,n=Ie;if(Ct(),n!==Ie)try{for(var r=yt(De),o=r.next();!o.done;o=r.next()){var l=o.value;l()}}catch(i){e={error:i}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}var $e=!1;function Ct(){var e,t,n=window.innerWidth,r={},o=!1;try{for(var l=yt(Object.keys(nt)),i=l.next();!i.done;i=l.next()){var d=i.value;r[d]=n>=nt[d],r[d]!==Ie[d]&&(o=!0)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}o&&(Ie=r)}function tn(){tt&&!$e&&(Ie={},Ct(),window.addEventListener("resize",rt),$e=!0);var e=en(m.exports.useState(Ie),2),t=e[0],n=e[1];return m.exports.useEffect(function(){if(!!tt){var r=function(){n(Ie)};return De.add(r),function(){De.delete(r),De.size===0&&(window.removeEventListener("resize",rt),$e=!1)}}},[]),t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",Wt(void 0));Qe.debugLabel="atomRoleListActions";const Ue=()=>lt(Qe),an=()=>ya(Qe),ke=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",Sa({open:!1,roleId:0}));ke.debugLabel="atomRoleDetails";const nn=()=>ba(ke),rn=()=>{const e=Gt(ke);return t=>{e({open:!0,roleId:t})}},Pe=()=>lt(ke),St="sysRole",bt=[St,"details"],wt=e=>{const{roleId:t}=Pe(),n=st(bt,()=>Vt({roleId:t}),{onSuccess:e,enabled:!1});return m.exports.useEffect(()=>{t>0&&n.refetch()},[t]),n},It=[St,"tree"],on=e=>{const{roleId:t}=Pe(),n=st(It,async()=>{const{menus:r,checkedKeys:o}=await Ft({roleId:t});return{treeData:r,selectedMenuIds:o,selectedTreeData:ct(r,o),allMenuIds:dt(r),allExpandedKeys:ut(r)}},{onSuccess:r=>{e(r.selectedTreeData)},enabled:!1});return m.exports.useEffect(()=>{t>0&&n.refetch()},[t]),n},Et=e=>{const t=qt();return Xe(async n=>{const r=t.getQueryData(bt),o=t.getQueryData(It);await Xt({roleId:r.roleId,roleKey:r.roleKey,roleName:r.roleName,roleSort:r.roleSort,status:r.status,menuIds:o.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...n})},{onSuccess:async()=>{e(),ze.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ln=()=>{const{defaultValueSysNormalDisable:e,valueEnumSysNormalDisable:t}=Fe();return[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:t,valueType:"radio",formItemProps:{initialValue:e,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{initialValue:0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]},sn=()=>{const e=m.exports.useRef(),t=Ue(),n=ln();return c(Ae,{accessKey:"system:role:add",children:c(Yt,{title:"新增角色",trigger:c(Qt,{}),formRef:e,onFinish:async o=>{var l;return await Ut({...o,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),t==null||t.reload(),ze.success("新增成功"),(l=e.current)==null||l.resetFields(),!0},width:500,modalProps:{okText:"提交"},layoutType:"ModalForm",columns:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const cn=()=>{const e=Jt(),{roleId:t,open:n}=Pe();return c(Ae,{accessKey:"system:user:edit",children:c(Te,{type:"primary",ghost:!0,onClick:()=>e(Zt("/system/role-auth/:roleId",{roleId:t.toString()})),icon:c(ea,{}),disabled:!n,children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const dn=()=>{const e=Ue(),t=nn(),{roleId:n,open:r}=Pe(),{isLoading:o,mutateAsync:l}=Xe(aa,{onSuccess:()=>{var d;e==null||e.reload(),(d=e==null?void 0:e.clearSelected)==null||d.call(e),t(),ze.success("删除成功")}});return c(Ae,{accessKey:"system:role:remove",children:c(ta,{type:"primary",size:"middle",disabled:!r,onClick:()=>na.confirm({title:"操作确认",content:`确定删除角色编号为 ${n} 的角色吗？`,onOk:()=>l({roleIds:n}),okButtonProps:{loading:o}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const un=[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],mn=()=>{const{valueEnumSysNormalDisable:e}=Fe();return[{title:"状态",dataIndex:"status",key:"status",valueEnum:e,valueType:"radio"},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit"},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}]},pn=()=>{const[e,t]=m.exports.useState([]),[n]=ra.useForm(),r=mn(),o=Ue(),{data:l,isFetching:i,refetch:d}=wt(()=>{t([]),n.resetFields()}),{mutateAsync:s}=Et(()=>{d(),o==null||o.reload()}),p=Ca()("system:role:edit")?{form:n,editableKeys:e,onChange:(f,h)=>{if(t(f),f.length>0){const u=f[0];n.setFieldsValue({[u]:h[u]})}},onSave:async(f,h)=>{await s({[f]:h[f]})}}:void 0;return L(Le,{spinning:i,children:[c(Ze,{column:2,columns:un,dataSource:l}),c(ia,{}),c(Ze,{column:2,columns:r,dataSource:l,editable:p})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fn=()=>{const{valueEnumSysNormalDisable:e}=Fe();return{title:{title:"角色名称",dataIndex:"roleName",valueType:"text"},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:e},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text"}}},hn=()=>{const e=an(),t=rn(),n=fn();return c(Za,{ghost:!0,rowKey:"roleId",actionRef:e,metas:n,tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:r})=>{t(r)}},search:{filterType:"light"},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:(...r)=>oa(la(...r))})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const gn=()=>{const[e,t]=m.exports.useState([]),[n,r]=m.exports.useState(!1),[o,l]=m.exports.useState([]),[i,d]=m.exports.useState([]),[s,C]=m.exports.useState(!1),[p,f]=m.exports.useState(!0),[h,u]=m.exports.useState(),y=m.exports.useRef(),{open:B,roleId:R}=Pe(),{refetch:I}=wt(({dataScope:w})=>{var q;u(w),(q=y.current)==null||q.setFieldsValue({dataScope:w})}),{loading:g,refresh:z,data:x}=wa(async()=>{const{depts:w,checkedKeys:q}=await sa({roleId:R});return{treeData:w,selectedMenuIds:q,selectedTreeData:ct(w,q),allMenuIds:dt(w),allExpandedKeys:ut(w)}},{ready:B,refreshDeps:[R],onSuccess:w=>{r(!1),d(w.selectedTreeData)}}),{isLoading:A,mutate:_}=Xe(async()=>{await ha({roleId:R,dataScope:h,deptIds:e})},{onSuccess:()=>{z(),I(),ze.success("保存成功")}}),b=o.length===(x==null?void 0:x.allExpandedKeys.length),Z=w=>{if(w||p){t((x==null?void 0:x.allMenuIds)??[]);return}t([])};return m.exports.useEffect(()=>{if((x==null?void 0:x.allMenuIds.length)===e.length){C(!0),f(!1);return}if(e.length===0){C(!1),f(!1);return}f(!0)},[x==null?void 0:x.allMenuIds,e]),L(Ne,{children:[L("header",{className:"flex justify-between items-start flex-wrap",children:[c(ca,{formRef:y,submitter:!1,layout:"horizontal",children:c(Ia,{name:"dataScope",label:"数据权限范围",fieldProps:{options:da,onChange:w=>{u(w)}},readonly:!n})}),c(Ae,{accessKey:"system:role:edit",children:n?L(He,{children:[c(Te,{loading:A,onClick:()=>{r(!1),d((x==null?void 0:x.selectedTreeData)??[])},children:"取消编辑"}),c(Te,{type:"primary",ghost:!0,icon:c(ua,{}),loading:A,onClick:()=>_(),children:"保存"})]}):c(Te,{type:"primary",ghost:!0,icon:c(ma,{}),onClick:()=>{r(!0),t((x==null?void 0:x.selectedMenuIds)??[]),d((x==null?void 0:x.treeData)??[])},children:"编辑数据权限"})})]}),h==="2"&&L(Ne,{children:[L(He,{wrap:!0,className:"my-2",children:[i.length>0&&c(Te,{size:"small",icon:b?c(pa,{}):c(fa,{}),onClick:()=>l(b?[]:x.allExpandedKeys),children:b?"全部折叠":"全部展开"}),n&&c(mt,{indeterminate:p,onChange:w=>Z(w.target.checked),checked:s,children:"全选/全不选"})]}),c(Le,{spinning:g,children:i.length>0?c(pt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:n,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:w=>l(w),onCheck:w=>{t(w.checked)}}):c(qe,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xn=()=>{const[e,t]=m.exports.useState([]),[n,r]=m.exports.useState(!1),[o,l]=m.exports.useState([]),[i,d]=m.exports.useState([]),[s,C]=m.exports.useState(!1),[p,f]=m.exports.useState(!0),{isFetching:h,data:u,refetch:y}=on(g=>{r(!1),d(g)}),{isLoading:B,mutate:R}=Et(()=>{y()}),I=g=>{if(g||p){t((u==null?void 0:u.allMenuIds)??[]);return}t([])};return m.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===e.length){C(!0),f(!1);return}if(e.length===0){C(!1),f(!1);return}f(!0)},[u==null?void 0:u.allMenuIds,e]),L(Ne,{children:[L("header",{className:"flex justify-between items-end mb-2",children:[c(ga,{expanded:o.length===(u==null?void 0:u.allExpandedKeys.length),onChange:g=>{l(g?(u==null?void 0:u.allExpandedKeys)??[]:[])}}),c(Ae,{accessKey:"system:role:edit",children:c(xa,{editable:n,loading:B,onCancel:()=>{r(!1),d((u==null?void 0:u.selectedTreeData)??[])},onSave:()=>R({menuIds:e}),onStartEdit:()=>{r(!0),t((u==null?void 0:u.selectedMenuIds)??[]),d((u==null?void 0:u.treeData)??[])}})})]}),L(Le,{spinning:h,children:[c("div",{className:"pl-1 mb-1",children:n&&c(mt,{indeterminate:p,onChange:g=>I(g.target.checked),checked:s,children:"全选/全不选"})}),i.length>0?c(pt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:n,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:g=>l(g),onCheck:g=>{t(g.checked)},height:500}):c(qe,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const it={list:{xxl:7,xl:10,lg:13,md:24,sm:24,xs:24},details:{xxl:17,xl:14,lg:11,md:24,sm:24,xs:24}},Nn=()=>{const{xl:e}=tn(),{open:t}=Pe();return c(va,{children:L(ye,{ghost:!0,gutter:[16,16],wrap:!0,children:[c(ye,{title:"角色列表",colSpan:it.list,extra:c(sn,{}),children:c(hn,{})}),c(ye,{split:"horizontal",title:"角色详情",colSpan:it.details,extra:L(He,{children:[c(dn,{}),c(cn,{})]}),className:"h-full",children:t?L(Ne,{children:[c(ye,{children:c(pn,{})}),L(ye,{split:e?"vertical":"horizontal",children:[c(ye,{children:c(xn,{})}),c(ye,{children:c(gn,{})})]})]}):c(qe,{description:"点击选择左侧角色查看详情"})})]})})};export{Nn as default};
