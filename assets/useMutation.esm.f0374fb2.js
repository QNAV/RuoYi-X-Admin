import{p as E,s as x,b1 as d,C as h,b2 as M,E as b,r as l}from"./index.852b862f.js";import{u as f,s as v}from"./utils.esm.d5be3ad6.js";const O=new Map([["0",{text:"\u7537"}],["1",{text:"\u5973"}]]);var F=(e=>(e.M="M",e.C="C",e.F="F",e))(F||{});const w={M:{text:"\u76EE\u5F55"},C:{text:"\u83DC\u5355"},F:{text:"\u6309\u94AE"}};var R=(e=>(e.ENABLE="0",e.DISABLE="1",e))(R||{});const D=new Map([["0",{text:"\u542F\u7528",status:"Success"}],["1",{text:"\u7981\u7528",status:"Error"}]]);var S=(e=>(e.YES="0",e.NO="1",e))(S||{});const T=new Map([["0",{text:"\u662F",status:"Success"}],["1",{text:"\u5426",status:"Error"}]]),L=new Map([["String",{text:"\u5B57\u7B26\u4E32"}],["Integer",{text:"\u6574\u6570"}],["Long",{text:"\u957F\u6574\u6570"}],["Double",{text:"\u6D6E\u70B9\u6570"}],["Boolean",{text:"\u5E03\u5C14"}],["Date",{text:"\u65E5\u671F"}],["BigDecimal",{text:"\u91D1\u989D"}]]),A=new Map([["crud",{text:"\u5355\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"}],["tree",{text:"\u6811\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"}],["sub",{text:"\u4E3B\u5B50\u8868\uFF08\u589E\u5220\u6539\u67E5\uFF09"}]]),I=new Map([["EQ",{text:"="}],["NE",{text:"!="}],["GT",{text:">"}],["GE",{text:">="}],["LT",{text:"<"}],["LE",{text:"<="}],["LIKE",{text:"LIKE"}],["BETWEEN",{text:"BETWEEN"}]]);var y=(e=>(e.ZIP="0",e.CUSTOM="1",e))(y||{});const N=new Map([["0",{text:"zip\u538B\u7F29\u5305"}],["1",{text:"\u81EA\u5B9A\u4E49\u8DEF\u5F84"}]]);class C extends E{constructor(t,s){super(),this.client=t,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=this.client.defaultMutationOptions(t),x(s,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const s={listeners:!0};t.type==="success"?s.onSuccess=!0:t.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:d(),s={...t,isLoading:t.status==="loading",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=s}notify(t){h.batch(()=>{if(this.mutateOptions){if(t.onSuccess){var s,n,a,u;(s=(n=this.mutateOptions).onSuccess)==null||s.call(n,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(a=(u=this.mutateOptions).onSettled)==null||a.call(u,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var r,o,i,c;(r=(o=this.mutateOptions).onError)==null||r.call(o,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(i=(c=this.mutateOptions).onSettled)==null||i.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(p=>{p(this.currentResult)})})}}function Q(e,t,s){const n=M(e,t,s),a=b({context:n.context}),[u]=l.exports.useState(()=>new C(a,n));l.exports.useEffect(()=>{u.setOptions(n)},[u,n]);const r=f(l.exports.useCallback(i=>u.subscribe(h.batchCalls(i)),[u]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),o=l.exports.useCallback((i,c)=>{u.mutate(i,c).catch(m)},[u]);if(r.error&&v(u.options.useErrorBoundary,[r.error]))throw r.error;return{...r,mutate:o,mutateAsync:r.mutate}}function m(){}export{D as E,y as G,L as J,F as M,I as Q,O as S,A as T,T as Y,R as a,w as b,S as c,N as d,Q as u};
