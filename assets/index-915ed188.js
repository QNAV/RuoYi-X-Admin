import{Q as I,X as f,V as w,aj as M,r as m,bn as E,bo as v,j as a,Y as u,b as y,al as B,bp as R,bq as k,br as F,bs as N,p as C,ao as O,ap as V,bt as q,a1 as X,Z as Y,$ as K,a2 as L,bu as $,a3 as D,q as Q,B as W}from"./index-63c31f29.js";import{a as G,u as H}from"./utils-322c6316.js";import{P as Z}from"./index-8333d892.js";import{P as z}from"./index-87ae73f9.js";import{P as J}from"./index-c853cd60.js";import{u as U}from"./useMutation-f7b32502.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",I(void 0));p.debugLabel="atomMainTableActions";const S=()=>f(p),_=()=>w(p);var d=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(d||{});const ee={[0]:"新增",[1]:"编辑"},r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",G({open:!1,actionType:0}));r.debugLabel="atomAddOrEditModal";const te=()=>f(r),ae=()=>{const e=M(r);return()=>{e({open:!0,actionType:0})}},oe=()=>{const e=M(r);return t=>{e({open:!0,actionType:1,record:t})}},se=()=>H(r);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=m.useRef(),{defaultValueSysNoticeType:t,valueEnumSysNoticeType:c}=E(),{defaultValueSysNoticeStatus:o,valueEnumSysNoticeStatus:h}=v(),n=S(),{open:l,actionType:i,record:T}=te(),g=se(),x=()=>{var s;i===d.Edit&&((s=e.current)==null||s.resetFields()),g()},A=ee[i],P=async s=>{var b;i===d.Add?await F(s):await N({...s,noticeId:T.noticeId}),g(),(b=e.current)==null||b.resetFields(),n==null||n.reload(),C.success(`${A}成功`)};return m.useEffect(()=>{l&&d.Edit&&m.startTransition(()=>{var s;(s=e.current)==null||s.setFieldsValue(T)})},[l]),a(u,{accessKey:["system:notice:add","system:notice:edit"],children:y(B,{formRef:e,width:800,title:`${A}公告通知`,open:l,modalProps:{onCancel:x,okText:"提交"},grid:!0,onFinish:P,children:[a(Z,{name:"noticeTitle",label:"公告标题",rules:[{required:!0}],colProps:{span:12}}),a(z,{name:"noticeType",label:"公告类型",rules:[{required:!0}],valueEnum:c,initialValue:t,colProps:{span:12}}),a(J.Group,{name:"status",label:"状态",valueEnum:h,initialValue:o}),a(R,{name:"noticeContent",label:"内容",children:a(k,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const e=ae();return a(u,{accessKey:"system:notice:add",children:a(O,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({record:e})=>{const t=oe();return a(u,{accessKey:"system:notice:edit",children:a(V,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const j=({noticeId:e,disabled:t,batch:c})=>{const o=S(),{mutateAsync:h,isLoading:n}=U(q,{onSuccess:async()=>{var i;o==null||o.reload(),(i=o==null?void 0:o.clearSelected)==null||i.call(o),C.success("删除成功")}});return a(u,{accessKey:"system:notice:remove",children:a(X,{batch:c,disabled:t,icon:a(Y,{}),onClick:()=>{K.confirm({title:"操作确认",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>h({noticeIds:e}),okButtonProps:{loading:n}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const{valueEnumSysNoticeType:e}=E(),{valueEnumSysNoticeStatus:t}=v();return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:e},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:t},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(c,o)=>y(Q,{children:[a(ne,{record:o}),a(j,{noticeId:[o.noticeId]})]})}]},le=({selectedRowKeys:e})=>a(j,{batch:!0,disabled:e.length===0,noticeId:e}),de=()=>{const e=_(),t=re();return a(L,{rowKey:"noticeId",actionRef:e,columns:t,request:(...c)=>$(D(...c)),tableAlertOptionRender:le,toolbar:{actions:[a(ie,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>y(W,{children:[a(de,{}),a(ce,{})]});export{ge as default};
