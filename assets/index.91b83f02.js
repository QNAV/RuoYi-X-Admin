import{u as v,a as m}from"./index.45c98b86.js";import{j as o,T as C,L as j,u as d,S as T,i as k,a as y,r as p,b,k as E,c as L,N as A,d as f,e as M,P as K,f as x}from"./index.75d00ad2.js";import{u as w,a as R,b as I}from"./index.6c2b1d01.js";import"./useQuery.esm.dff733c8.js";import"./utils.esm.114f9fc4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const O=()=>{const e=v();return o(C,{title:"\u9000\u51FA\u767B\u5F55",children:o(j,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=()=>{const e=d();return o(C,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:o(T,{onClick:()=>e("/settings")})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const N=(e,t)=>e!=null&&e.path?k(e.path)?o("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:t}):o(y,{to:e.path,children:t}):t;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=()=>{const[e,t]=p.exports.useState(""),{pathname:r}=b(),s=d(),[h,l]=w(),g=n=>{l(i=>{const a={...i};return delete a[Object.keys(a).find(c=>a[c].pathname===n)],a})},u=p.exports.useMemo(()=>Object.entries(h).map(([n,i])=>{var a,c;return{label:(c=(a=E)==null?void 0:a[n])!=null?c:n,key:i.pathname}}),[h]);return p.exports.useEffect(()=>{t(r)},[r]),o(L,{hideAdd:!0,type:"editable-card",items:u,activeKey:e,onChange:s,onEdit:n=>{if(n===r){const i=u.map(c=>c.key),a=i.findIndex(c=>c===e);a===0&&i.length===1?s("/"):s(i[a>0?a-1:a+1])}g(n)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=()=>{var n,i,a,c;const{pathname:e}=b(),t=d(),r=m(e),{data:s,isSuccess:h,isLoading:l,isError:g}=R(),u=I();return g?o(A,{to:"/500",replace:!0}):h&&(f[e]===void 0?!1:!u[f[e]])?o(A,{to:"/403",replace:!0}):M(K,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>t("/"),menu:{loading:l},loading:l,menuDataRender:()=>x(s==null?void 0:s.userRoutes),menuItemRender:N,token:{pageContainer:{paddingBlockPageContainerContent:0,paddingInlinePageContainerContent:0}},avatarProps:{size:"small",src:(i=(n=s==null?void 0:s.userInfo)==null?void 0:n.user)==null?void 0:i.avatar,title:(c=(a=s==null?void 0:s.userInfo)==null?void 0:a.user)==null?void 0:c.nickName},actionsRender:()=>[o(B,{},"IconSetting"),o(O,{},"IconLogout")],children:[o(F,{}),r]})};export{V as default};
