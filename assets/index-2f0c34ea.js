import{al as R,v as i,R as p,a1 as h,a4 as M,a as b,F as f,j as x,aE as A,a3 as y,aF as S,aG as L,aH as j}from"./index-b5eebe28.js";import{bg as C,V as T}from"./antd-f7a9cbdb.js";import{u as F}from"./useMutation-cb32f323.js";import{a as l,u as m}from"./utils-2835fcdf.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g="systemMenu",r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomSelectedMenuData",l({hasSelected:!1,selectedMenuId:0,selectedMenuName:"根目录"}));r.debugLabel="atomSelectedMenuData";const O=()=>m(r),H=()=>R(r),N=()=>i(r),c=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomModalAdd",l(!1));c.debugLabel="atomModalAdd";const B=()=>m(c),K=()=>{const e=p(c);return()=>e(!0)},E=()=>i(c),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomDrawerSelectIcon",l({open:!1,onSelected:void 0}));d.debugLabel="atomDrawerSelectIcon";const G=()=>m(d),W=()=>{const e=p(d);return t=>e({open:!0,onSelected:t})},z=()=>i(d),I=[g,"list"],J=(e={},t)=>h(I,async()=>{const s=await A(e),a=y(s,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:S(a),map:s.reduce((n,o)=>n.set(o.menuId,o),new Map),parentIds:Array.from(s.reduce((n,o)=>n.add(o.parentId),new Set))}},{onSuccess:s=>{t(s.parentIds)}}),P=()=>{const e=M();return()=>e.invalidateQueries(I)},w=[g,"options"],U=()=>h(w,async()=>{const e=await A({}),t=y(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:L(S(t)),map:e.reduce((s,a)=>s.set(a.menuId,a),new Map)}}),Q=()=>{const e=M();return()=>e.invalidateQueries(w)},Z=()=>{const e=P(),t=Q(),s=O(),{message:a,modal:n}=C.useApp(),{mutateAsync:o,isLoading:D}=F(async u=>{await j({menuId:u})},{onSuccess:async()=>{s(),await Promise.all([e(),t()]),a.success("删除成功")}});return u=>{n.confirm({title:"操作确认",content:b(f,{children:["确定删除菜单",x(T.Text,{code:!0,children:u.menuName}),"吗？"]}),onOk:()=>o(u.menuId),okButtonProps:{loading:D}})}};export{H as useAtomStateSelectedMenuData,z as useAtomValueDrawerSelectIcon,E as useAtomValueModalAdd,N as useAtomValueSelectedMenuData,Z as useDeleteMenu,G as useHideDrawerSelectIcon,B as useHideModalAdd,J as useQueryMenuList,U as useQueryMenuOptions,P as useReFetchMenuList,Q as useReFetchMenuOptions,O as useResetSelectedMenuData,W as useShowDrawerSelectIcon,K as useShowModalAdd};
