import{aX as P,aY as C,aj as E,r as M,b9 as h,d as a,af as g,j as A,c0 as x,d4 as I,aH as p,d5 as w,d6 as k,d7 as R,aA as T,d8 as O,bT as B,d9 as F,aZ as _,a_ as V,b0 as q,da as X,b1 as Y,h as L,av as D}from"./index-5c11d285.js";import{a as H}from"./index-281a8450.js";import{a as W,u as G}from"./utils-224bc39a.js";import{P as K}from"./index-14b48008.js";import{P as Q}from"./index-55e44f7c.js";import{P as Z}from"./index-5d9c0771.js";import{u as $}from"./useMutation.esm-7a0820ec.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",P(void 0));b.debugLabel="atomMainTableActions";const j=()=>C(b),z=()=>H(b),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:"add"}));d.debugLabel="atomAddOrEditModal";const J=()=>C(d),U=()=>{const e=E(d);return()=>{e({open:!0,actionType:"add"})}},N=()=>{const e=E(d);return t=>{e({open:!0,actionType:"edit",record:t})}},S=()=>G(d);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{var y,f;const e=M.exports.useRef(),{data:t}=h("sys_notice_type"),{data:o}=h("sys_notice_status"),i=j(),{open:s,actionType:c,record:u}=J(),m=S(),n=()=>{var r;c==="edit"&&((r=e.current)==null||r.resetFields()),m()};return M.exports.useEffect(()=>{if(s&&c==="edit"){const r=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(u),clearTimeout(r)},0)}},[s]),a(g,{accessible:!0,children:A(x,{formRef:e,width:800,title:c==="add"?"新增公告":"编辑公告",open:s,modalProps:{onCancel:n,okText:"提交"},grid:!0,onFinish:async r=>{var l;return c==="add"?(await I(r),p.success("新增成功")):(await w({...r,noticeId:u.noticeId}),p.success("编辑成功")),i==null||i.reload(),m(),(l=e.current)==null||l.resetFields(),!0},children:[a(K,{name:"noticeTitle",label:"公告标题",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(Q,{name:"noticeType",label:"公告类型",required:!0,rules:[{required:!0}],valueEnum:(y=t==null?void 0:t.valueEnum)!=null?y:{},colProps:{span:12}}),a(Z.Group,{name:"status",label:"状态",valueEnum:(f=o==null?void 0:o.valueEnum)!=null?f:{},initialValue:o==null?void 0:o.defaultValue}),a(k,{name:"noticeContent",label:"内容",children:a(R,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=U();return a(g,{accessible:!0,children:a(T,{icon:a(O,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=N();return a(T,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"编辑"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=({noticeId:e,disabled:t,isBatch:o})=>{const i=o?"批量删除":"删除",s=j(),{mutateAsync:c,isLoading:u}=$(async n=>{await F({noticeIds:n})},{onSuccess:()=>{var n;s==null||s.reload(),(n=s==null?void 0:s.clearSelected)==null||n.call(s),p.success("删除成功")}});return a(g,{accessible:!0,children:a(T,{type:"link",danger:!0,disabled:t,icon:a(_,{}),onClick:()=>{V.confirm({title:"删除公告通知",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>c(e),okButtonProps:{loading:u}})},children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var o,i;const{data:e}=h("sys_notice_type"),{data:t}=h("sys_notice_status");return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:(o=e==null?void 0:e.valueEnum)!=null?o:{}},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(i=t==null?void 0:t.valueEnum)!=null?i:{}},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(s,c)=>A(L,{children:[a(ae,{record:c}),a(v,{noticeId:c.noticeId})]})}]},se=({selectedRows:e})=>a(v,{isBatch:!0,disabled:e.length===0,noticeId:e.map(t=>t.noticeId).join(",")}),ce=()=>{const e=z(),t=oe();return a(q,{rowKey:"noticeId",actionRef:e,columns:t,request:(...o)=>X(Y(...o)),tableAlertOptionRender:se,toolbar:{actions:[a(te,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me=()=>A(D,{children:[a(ce,{}),a(ee,{})]});export{me as default};
