import{r as h,j as a,a as f,F}from"./jsx-runtime-5957e344.js";import{bI as R,bJ as x,d2 as V,aH as S,cH as j,aE as L,cs as N,d3 as w,d4 as O,d5 as K,b5 as M,bK as C,cv as X,cw as Y,d6 as q,bN as H,d7 as Q,bO as $,bM as G,d8 as U,d9 as W,bP as J,bQ as P,da as z,cQ as Z,aU as _}from"./index-dc2e9f21.js";import{a as ee,c as te}from"./index-a4bf1032.js";import{a as ae,u as se}from"./utils-352c86cc.js";import{P as p}from"./index-47d80cea.js";import{P as oe}from"./index-a26f4d94.js";import{P as D}from"./index-6890f193.js";import{P as ce}from"./index-d1e51f1f.js";import{P as ie}from"./index-2d45b87a.js";import{u as k}from"./useMutation.esm-d1b0d680.js";import{u as re}from"./useRequest-cdf1d9f9.js";import"./routes-c9753197.js";import"./mutation.esm-cf287c5f.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",R(void 0));E.debugLabel="atomMainTableActions";const B=()=>x(E),de=()=>ee(E),v=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",R({dictType:"",dictName:""}));v.debugLabel="atomCurDictType";const ne=()=>x(v),le=()=>V(v);var A=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(A||{});const ue={[0]:"新增",[1]:"编辑"},y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",ae({actionType:0,open:!1}));y.debugLabel="atomAddOrEditModal";const he=()=>x(y),me=()=>se(y),pe=()=>{const e=S(y);return()=>{e({actionType:0,open:!0})}},ye=()=>{const e=S(y);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const e=h.exports.useRef(),t=B(),{open:o,actionType:s,record:u}=he(),n=me(),T=()=>{var c;s===A.Edit&&((c=e.current)==null||c.resetFields()),n()},d=ue[s],{dictType:g,dictName:b}=ne(),{defaultValueSysNormalDisable:i,valueEnumSysNormalDisable:r}=j(),l=async c=>{var m;s===A.Add?await O(c):await K({...c,dictCode:u.dictCode}),n(),(m=e.current)==null||m.resetFields(),M.success(`${d}成功`),t==null||t.reload()};return h.exports.useEffect(()=>{o&&h.exports.startTransition(()=>{var c,m;s===A.Add?(c=e.current)==null||c.setFieldsValue({dictType:g,dictName:b}):(m=e.current)==null||m.setFieldsValue({...u,dictName:b})})},[o]),a(L,{accessible:!0,children:f(N,{formRef:e,width:500,title:`${d}字典数据`,open:o,modalProps:{onCancel:T,okText:"提交"},onFinish:l,children:[a(p,{name:"dictName",label:"字典名称",readonly:!0}),a(p,{name:"dictType",label:"字典类型",hidden:!0}),a(p,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"样式属性"}),a(oe,{name:"dictSort",label:"显示排序",initialValue:0}),a(D,{name:"listClass",label:"回显样式",valueEnum:w,initialValue:"default"}),a(ce.Group,{name:"status",label:"状态",valueEnum:r,initialValue:i}),a(ie,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>{const e=pe();return a(C,{accessKey:"system:dict:edit",children:a(X,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=({record:e})=>{const t=ye();return a(C,{accessKey:"system:dict:edit",children:a(Y,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=({searchParams:e})=>{const{isLoading:t,mutate:o}=k(q,{onSuccess:()=>{M.success("导出成功")}});return a(C,{accessKey:"system:dict:export",children:a(H,{loading:t,onClick:()=>o(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const I=({dictCode:e,disabled:t,batch:o})=>{const s=B(),{mutateAsync:u,isLoading:n}=k(Q,{onSuccess:()=>{var d;s==null||s.reload(),(d=s==null?void 0:s.clearSelected)==null||d.call(s),M.success("删除成功")}});return a(C,{accessKey:"system:dict:edit",children:a($,{batch:o,disabled:t,onClick:()=>{G.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>u({dictCodes:e}),okButtonProps:{loading:n}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const{valueEnumSysNormalDisable:e}=j();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:w},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,o)=>f(F,{children:[a(be,{record:o}),a(I,{dictCode:o.dictCode})]})}]},fe=({selectedRows:e})=>a(I,{disabled:e.length===0,batch:!0,dictCode:e.map(t=>t.dictCode).join(",")}),xe=()=>{const e=U(),[t,o]=h.exports.useState({}),s=de(),u=Ce(),n=h.exports.useRef(),[T,d]=le(),{data:g,run:b}=re(async()=>(await W()).reduce((r,l)=>(r[l.dictType]=l.dictName,r),{}),{manual:!0,onSuccess:i=>{const r=e.dictType;d({dictType:r,dictName:i[r]}),h.exports.startTransition(()=>{var l,c;(l=n.current)==null||l.setFieldsValue({dictType:r}),(c=s.current)==null||c.reload()})}});return te(()=>{b()},!1),a(J,{rowKey:"dictCode",actionRef:s,columns:u,params:T,request:async(...i)=>{const r=P(...i);return o(r),await z(P(...i))},tableAlertOptionRender:fe,manualRequest:!0,toolbar:{actions:[a(Ae,{searchParams:t},"ButtonExport"),a(ge,{},"ButtonAdd")]},headerTitle:a(Z,{formRef:n,children:a(D,{name:"dictType",valueEnum:g??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:i=>{d({dictType:i,dictName:g[i]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ve=()=>f(_,{children:[a(xe,{}),a(Te,{})]});export{Ve as default};
