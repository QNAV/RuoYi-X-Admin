import{ad as T,af as I,d as o,b3 as r,aK as h,b4 as m,b5 as p,aR as l,b6 as A,r as C,aF as k,b7 as v,b8 as L}from"./index-324581e1.js";import{b as u}from"./index-0faee625.js";import{a as S}from"./index-8805c201.js";import{s as j,a as M,b as P,c as w}from"./Monitor-d80b40fc.js";import{u as d}from"./useMutation.esm-34ecafff.js";import"./System-c33174c5.js";import"./utils.esm-d0713da8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",T(void 0));g.debugLabel="atomMainTableActions";const f=()=>I(g),B=()=>S(g);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=()=>{const{canRemoveSysLogininfor:e}=u(),t=f(),{isLoading:s,mutate:n}=d(j,{onSuccess:()=>{t==null||t.reload(),l.success("清空访问记录成功")}});return o(r,{accessible:e,children:o(h,{danger:!0,icon:o(m,{}),onClick:()=>p.confirm({title:"清空访问记录",content:"确认清空访问记录吗？",okButtonProps:{loading:s},onOk:n}),children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const O=({searchParams:e})=>{const{canExportSysLogininfor:t}=u(),{isLoading:s,mutate:n}=d(()=>M(e),{onSuccess:()=>{l.success("导出成功")}});return o(r,{accessible:t,children:o(h,{ghost:!0,type:"primary",icon:o(A,{}),loading:s,onClick:()=>n(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=({infoId:e,disabled:t,isBatch:s})=>{const n=s?"批量删除":"删除",{canRemoveSysLogininfor:i}=u(),a=f(),{mutateAsync:b,isLoading:x}=d(async c=>{await P({infoIds:c})},{onSuccess:()=>{var c;a==null||a.reload(),(c=a==null?void 0:a.clearSelected)==null||c.call(a),l.success("删除成功")}});return o(r,{accessible:i,children:o(h,{type:"link",danger:!0,disabled:t,icon:o(m,{}),onClick:()=>{p.confirm({title:"删除访问记录",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:async()=>b(e),okButtonProps:{loading:x}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录日期",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(e,t)=>o(y,{infoId:t.infoId})}],V=({selectedRows:e})=>o(y,{isBatch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),$=()=>{const e=B(),[t,s]=C.exports.useState({});return o(k,{children:o(v,{rowKey:"infoId",actionRef:e,columns:E,request:async(...n)=>{const i=L(...n);return s(i),await w(i)},toolbar:{actions:[o(R,{},"ButtonCleanUp"),o(O,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:V})})};export{$ as default};
