import{r as d,j as a,ai as l,e as b,aH as C,q as n,a2 as A,aI as F,ao as f,aZ as y,aj as m,aL as T,ap as E,aN as M,al as j,aq as D,ar as P,O as S}from"./index.6303cbe3.js";import{d as h}from"./index.756d8881.js";import{u as w,a as x,b as R,S as O,c as k,d as q,e as I,f as N,g as V,t as L,h as v,B as H}from"./index.1f163618.js";import{P as W}from"./index.15120f7d.js";import{c as G}from"./index.8e9546ce.js";import{u as K}from"./useMutation.esm.c31470ec.js";import"./useQuery.esm.a80afff1.js";import"./utils.esm.26edfdff.js";import"./utils.8b5ee5e6.js";import"./index.300be371.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Z=()=>{const t=d.exports.useRef(),{canAddSysDict:e,canEditSysDict:o}=h(),s=w(),{open:u,actionType:c,record:i}=x(),p=R();return d.exports.useEffect(()=>{var r;u&&c==="edit"&&((r=t.current)==null||r.setFieldsValue(i))},[u]),a(l,{accessible:e||o,children:b(C,{formRef:t,width:500,title:c==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:u,modalProps:{onCancel:p,okText:"\u63D0\u4EA4"},onFinish:async r=>{var B;c==="add"?(await O(r),n.success("\u65B0\u589E\u6210\u529F")):(await k({...r,dictId:i.dictId}),n.success("\u7F16\u8F91\u6210\u529F")),s==null||s.reload(),p(),(B=t.current)==null||B.resetFields()},children:[a(A,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(F.Group,{name:"status",label:"\u72B6\u6001",valueEnum:f,initialValue:y.ENABLE}),a(W,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const z=()=>{const{canAddSysDict:t}=h(),e=q();return a(l,{accessible:t,children:a(m,{icon:a(T,{}),type:"primary",onClick:e,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const J=({searchParams:t})=>{const e=h(),{isLoading:o,mutate:s}=K(()=>I(t),{onSuccess:()=>{n.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:e.canExportSysPost,children:a(m,{ghost:!0,type:"primary",icon:a(E,{}),loading:o,onClick:()=>s(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Q=()=>{const{canRemoveSysDict:t}=h();return a(l,{accessible:t,children:a(m,{danger:!0,icon:a(M,{}),onClick:()=>{j.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await N(),n.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const g="dictId",U=({selectedRows:t})=>a(H,{disabled:t.length===0,isBatch:!0,dictId:t.map(e=>e.dictId).join(","),dictName:t.map(e=>e.dictName).join(",")}),X=()=>{const{rowSelection:t,onClick:e}=G(g),o=V(),[s,u]=d.exports.useState({});return a(D,{rowKey:g,actionRef:o,columns:L,tableAlertOptionRender:U,rowSelection:t,onRow:c=>({onClick:()=>{e(c)}}),request:async(...c)=>{const i=P(...c);return u(i),await v(i)},toolbar:{actions:[a(Q,{},"ButtonRefresh"),a(J,{searchParams:s},"ButtonExport"),a(z,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const it=()=>b(S,{children:[a(X,{}),a(Z,{})]});export{it as default};
