import{C as _,c as j,b as X}from"./common.3b9362bd.js";import{J as k,V as D,W as B,cT as Y,D as o,aH as N,cV as V,c5 as $,aG as m,aI as C,cv as q,cu as L,r as p,b5 as G,cC as R,U as T}from"./index.8f1c6cac.js";import{B as H}from"./index.182ea047.js";import{u as f,A as v,P as J}from"./useAccess.a86f34ac.js";import"./keepAlive.ea4aa5aa.js";import{u as U,c as W}from"./useInitActionType.e2f1f3fb.js";import{u as E,E as z,a as K}from"./useMutation.68745c0a.js";import{M as w}from"./Tree.050e6fe1.js";import{P as Q}from"./index.022d5c96.js";import{P as Z}from"./index.e9a1ce5a.js";import{P as ee}from"./Table.39616be6.js";import"./RouteContext.dd810695.js";import"./index.f8dae27b.js";import"./index.98fb7196.js";import"./index.c821283e.js";import"./unstated-next.543c3371.js";const oe={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},te={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},se={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},ue={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},M="systemPost",O=k({key:`${M}AtomMainTableActions`,default:void 0}),ne=()=>U(O),g=()=>D(O),b=k({key:`${M}AtomAddOrEditModal`,default:{open:!1,actionType:"add"}}),ie=()=>{const e=B(b);return()=>e({open:!0,actionType:"add"})},ae=()=>{const e=B(b);return t=>e({open:!0,actionType:"edit",record:t})},re=()=>Y(b),le=()=>D(b);var A="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/components/ButtonAdd.tsx";const de=()=>{const e=f(),t=ie();return o(v,{accessible:e.canAddSysPost,children:o(N,{type:"primary",icon:o(V,{},void 0,!1,{fileName:A,lineNumber:15,columnNumber:36},void 0),onClick:t,children:"\u65B0\u5EFA"},void 0,!1,{fileName:A,lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:A,lineNumber:14,columnNumber:5},void 0)};var h="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/components/ButtonEdit.tsx";const me=({record:e})=>{const t=f(),u=ae();return o(v,{accessible:t.canEditSysPost,children:o(N,{type:"link",icon:o($,{},void 0,!1,{fileName:h,lineNumber:15,columnNumber:33},void 0),onClick:()=>u(e),children:"\u7F16\u8F91"},void 0,!1,{fileName:h,lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:h,lineNumber:14,columnNumber:5},void 0)};async function ce(e,t){return m("/system/post/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function pe(e,t){return m("/system/post/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Ne(e,t){return m("/system/post/export",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function fe(e,t){return m("/system/post/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ve(e,t){return m("/system/post/remove",{method:"POST",params:{...e},...t||{}})}var P="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/components/ButtonExport.tsx";const be=({searchParams:e})=>{const t=f(),{isLoading:u,mutate:n}=E(()=>Ne(e),{onSuccess:()=>{C.success("\u5BFC\u51FA\u6210\u529F")}});return o(v,{accessible:t.canExportSysPost,children:o(N,{type:"link",icon:o(q,{},void 0,!1,{fileName:P,lineNumber:22,columnNumber:33},void 0),loading:u,onClick:()=>n(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"},void 0,!1,{fileName:P,lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:P,lineNumber:21,columnNumber:5},void 0)};var x="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/components/ButtonRemove.tsx";const I=({postId:e,isBatch:t,disabled:u})=>{const n=t?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",c=f(),s=g(),{mutateAsync:i,isLoading:F}=E(async l=>{await ve({postIds:l})},{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),C.success("\u5220\u9664\u6210\u529F")}}),y=()=>{w.confirm({title:"\u5220\u9664\u5C97\u4F4D",content:`\u786E\u5B9A\u5220\u9664 \u5C97\u4F4D\u7F16\u53F7 \u4E3A ${e} \u7684\u5C97\u4F4D\u5417\uFF1F`,onOk:async()=>i(e),okButtonProps:{loading:F}})};return o(v,{accessible:c.canRemoveSysPost,children:o(N,{type:"link",danger:!0,disabled:u,icon:o(L,{},void 0,!1,{fileName:x,lineNumber:46,columnNumber:60},void 0),onClick:y,children:n},void 0,!1,{fileName:x,lineNumber:46,columnNumber:7},void 0)},void 0,!1,{fileName:x,lineNumber:45,columnNumber:5},void 0)};var d="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/components/ModalAddOrEdit.tsx";const Fe=()=>{var l;const e=p.exports.useRef(),{open:t,actionType:u,record:n}=le(),c=re(),s=g(),i=()=>{var a;c(),(a=e.current)==null||a.resetFields()},{mutate:F,isLoading:y}=E(async()=>{var S;const a=await((S=e.current)==null?void 0:S.validateFields());if(!!a){if(u==="add"){await ce(a);return}await pe({...a,postId:n.postId})}},{onSuccess:()=>{s==null||s.reload(),i(),C.success(u==="add"?"\u65B0\u5EFA\u6210\u529F":"\u4FDD\u5B58\u6210\u529F")}});return p.exports.useEffect(()=>{var a;u==="edit"&&n&&((a=e.current)==null?void 0:a.setFieldsValue)&&e.current.setFieldsValue(n)},[u,(l=e.current)==null?void 0:l.setFieldsValue]),o(w,{open:t,onCancel:i,okText:"\u63D0\u4EA4",okButtonProps:{loading:y},onOk:()=>F(),title:u==="add"?"\u65B0\u5EFA\u5C97\u4F4D":"\u7F16\u8F91\u5C97\u4F4D\u4FE1\u606F",children:o(G,{submitter:!1,formRef:e,children:[o(R,{name:"postName",label:"\u5C97\u4F4D\u540D\u79F0",rules:[{required:!0}]},void 0,!1,{fileName:d,lineNumber:71,columnNumber:9},void 0),o(R,{name:"postCode",label:"\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0}]},void 0,!1,{fileName:d,lineNumber:73,columnNumber:9},void 0),o(Q,{name:"postSort",label:"\u663E\u793A\u987A\u5E8F",rules:[{required:!0}],initialValue:0},void 0,!1,{fileName:d,lineNumber:75,columnNumber:9},void 0),o(J.Group,{name:"status",label:"\u72B6\u6001",valueEnum:z,initialValue:K.ENABLE},void 0,!1,{fileName:d,lineNumber:77,columnNumber:9},void 0),o(Z,{name:"remark",label:"\u5907\u6CE8"},void 0,!1,{fileName:d,lineNumber:84,columnNumber:9},void 0)]},void 0,!0,{fileName:d,lineNumber:70,columnNumber:7},void 0)},void 0,!1,{fileName:d,lineNumber:60,columnNumber:5},void 0)};var r="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/index.tsx";const ye=[oe,te,se,ue,_,j,X,{title:"\u64CD\u4F5C",valueType:"option",render:(e,t)=>o(T,{children:[o(me,{record:t},void 0,!1,{fileName:r,lineNumber:32,columnNumber:11},void 0),o(I,{postId:t.postId},void 0,!1,{fileName:r,lineNumber:34,columnNumber:11},void 0)]},void 0,!0)}],Ie=()=>{const[e,t]=p.exports.useState({}),u=p.exports.useRef(),n=ne();return o(H,{children:[o(ee,{formRef:u,actionRef:n,rowKey:"postId",request:async(...s)=>{const i=W(...s);return t(i),await fe(i)},columns:ye,toolbar:{actions:[o(de,{},"ButtonAdd",!1,{fileName:r,lineNumber:73,columnNumber:21},void 0)]},rowSelection:{alwaysShowAlert:!0},tableAlertOptionRender:({selectedRowKeys:s})=>{const i=s.length===0;return o(T,{children:[o(I,{disabled:i,isBatch:!0,postId:s.join(",")},void 0,!1,{fileName:r,lineNumber:53,columnNumber:9},void 0),o(be,{searchParams:e},void 0,!1,{fileName:r,lineNumber:55,columnNumber:9},void 0)]},void 0,!0)}},void 0,!1,{fileName:r,lineNumber:62,columnNumber:7},void 0),o(Fe,{},void 0,!1,{fileName:r,lineNumber:81,columnNumber:7},void 0)]},void 0,!0,{fileName:r,lineNumber:61,columnNumber:5},void 0)};export{Ie as default};
