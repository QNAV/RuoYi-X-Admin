import{h as w,l as E,p as I,n as F,o as p,r as f,j as a,af as A,g as n,aB as P,Y as y,$ as x,aU as k,aC as v,aM as M,aN as O,ba as R,bb as D,ag as T,aF as N,aG as V,ah as q,ai as L,F as B,ak as W,al as Y,am as X,an as G,I as K}from"./index.a3b10609.js";import{h as _,a as g}from"./index.9ff746be.js";import{a as $}from"./index.a21d038a.js";import{a as H,u as Q}from"./utils.f2bf55f3.js";import{u as U}from"./useQuery.esm.b9a4022a.js";import{u as z}from"./index.c33c72d4.js";import{u as J}from"./useMutation.esm.e97a3035.js";import"./SysLoginService.0199ade1.js";import"./utils.esm.a790d830.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",w(void 0));b.debugLabel="atomMainTableActions";const Z=()=>E(b),ee=()=>$(b),l=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",H({open:!1,actionType:"add"}));l.debugLabel="atomAddOrEditModal";const te=()=>E(l),ae=()=>{const e=F(l);return()=>{e({open:!0,actionType:"add"})}},oe=()=>{const e=F(l);return t=>{e({open:!0,actionType:"edit",record:t})}},se=()=>Q(l),ce=["system","notice","dict"],j=()=>U(ce,async()=>{const e=await _({dictType:"sys_notice_type"});return I(e).mapData});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function ie(e,t){return p("/system/notice/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ne(e,t){return p("/system/notice/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ue(e,t){return p("/system/notice/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function re(e,t){return p("/system/notice/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const e=f.exports.useRef(),{data:t}=j(),{canAddSysNotice:i,canEditSysConfig:c}=g(),u=Z(),{open:r,actionType:o,record:h}=te(),m=se(),C=()=>{var s;o==="edit"&&((s=e.current)==null||s.resetFields()),m()};return f.exports.useEffect(()=>{if(r&&o==="edit"){const s=setTimeout(()=>{var d;(d=e.current)==null||d.setFieldsValue(h),clearTimeout(s)},0)}},[r]),a(A,{accessible:i||c,children:n(P,{formRef:e,width:800,title:o==="add"?"\u65B0\u589E\u516C\u544A":"\u7F16\u8F91\u516C\u544A",open:r,modalProps:{onCancel:C,okText:"\u63D0\u4EA4"},grid:!0,onFinish:async s=>{var d;o==="add"?(await ie(s),y.success("\u65B0\u589E\u6210\u529F")):(await ne({...s,noticeId:h.noticeId}),y.success("\u7F16\u8F91\u6210\u529F")),u==null||u.reload(),m(),(d=e.current)==null||d.resetFields()},children:[a(x,{name:"noticeTitle",label:"\u516C\u544A\u6807\u9898",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(k,{name:"noticeType",label:"\u516C\u544A\u7C7B\u578B",required:!0,rules:[{required:!0}],valueEnum:t!=null?t:{},colProps:{span:12}}),a(v.Group,{name:"status",label:"\u72B6\u6001",valueEnum:M,initialValue:O.ENABLE}),a(R,{name:"noticeContent",label:"\u5185\u5BB9",children:a(D,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const{canAddSysNotice:e}=g(),t=ae();return a(A,{accessible:e,children:a(T,{icon:a(N,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=({record:e})=>{const t=oe();return a(T,{type:"link",icon:a(V,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({noticeId:e,noticeTitle:t,disabled:i,isBatch:c})=>{const u=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:r}=g(),o=z(),{mutateAsync:h,isLoading:m}=J(async s=>{await re({noticeIds:s})},{onSuccess:()=>{var s;o==null||o.reload(),(s=o==null?void 0:o.clearSelected)==null||s.call(o),y.success("\u5220\u9664\u6210\u529F")}});return a(A,{accessible:r,children:a(T,{type:"link",danger:!0,disabled:i,icon:a(q,{}),onClick:()=>{L.confirm({title:"\u5220\u9664\u516C\u544A\u901A\u77E5",content:n(B,{children:["\u786E\u5B9A\u5220\u9664\u516C\u544A\u901A\u77E5",a(W.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>h(e),okButtonProps:{loading:m}})},children:u})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me="noticeId",pe=({selectedRows:e})=>n(G,{children:[n("span",{children:["\u5DF2\u9009\u62E9 ",e.length," \u9879"]}),a(S,{isBatch:!0,disabled:e.length===0,noticeTitle:e.map(t=>t.noticeTitle).join(","),noticeId:e.map(t=>t.noticeId).join(",")})]}),ye=()=>{const e=ee(),{data:t}=j();return a(Y,{rowKey:me,actionRef:e,columns:[{title:"\u5E8F\u53F7",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"\u516C\u544A\u6807\u9898",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"\u516C\u544A\u7C7B\u578B",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:t!=null?t:{}},{title:"\u521B\u5EFA\u8005",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:M},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(i,c)=>n(B,{children:[a(he,{record:c}),a(S,{noticeId:c.noticeId,noticeTitle:c.noticeTitle})]})}],request:async(...i)=>await ue(X(...i)),rowSelection:{alwaysShowAlert:!0},tableAlertRender:pe,toolbar:{actions:[a(le,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Be=()=>n(K,{children:[a(ye,{}),a(de,{})]});export{Be as default};
