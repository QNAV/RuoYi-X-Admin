import{h as x,l as F,aV as R,n as M,r as T,j as a,af as y,g as C,ay as v,Y as b,$ as p,aQ as P,aW as I,az as L,aH as V,aI as O,ag as E,aA as N,aB as X,aj as Y,ah as q,ai as W,F as j,aJ as G,aX as H,ak as Q,al as S,aP as _,I as $}from"./index.aa64b4a6.js";import{a as g,S as z,d as J,e as K,f as U,g as Z,c as ee}from"./index.c25df3d9.js";import{a as te,b as ae}from"./index.cc120afe.js";import{a as se,u as oe}from"./utils.91e87199.js";import{P as ie}from"./index.4ec728a9.js";import{P as ce}from"./index.e5b73361.js";import{u as k}from"./useMutation.esm.e4f8236f.js";import{u as ue,o as re}from"./SysDictTypeService.ec84fa34.js";import{u as ne}from"./useRequest.45d54a00.js";import"./useQuery.esm.7b8282b6.js";import"./utils.esm.bf49519b.js";import"./SysLoginService.8caca169.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",x(void 0));f.debugLabel="atomMainTableActions";const de=()=>F(f),le=()=>te(f),B=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",x({dictType:"",dictName:""}));B.debugLabel="atomCurDictType";const he=()=>F(B),me=()=>R(B),A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",se({actionType:"add",open:!1}));A.debugLabel="atomAddOrEditModal";const pe=()=>F(A),ye=()=>oe(A),ge=()=>{const e=M(A);return()=>{e({actionType:"add",open:!0})}},Ae=()=>{const e=M(A);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const e=T.exports.useRef(),{canEditSysDict:t}=g(),c=de(),{open:o,actionType:n,record:l}=pe(),i=ye(),{dictType:h,dictName:r}=he();return T.exports.useEffect(()=>{var d,s,u;o&&n==="add"&&((d=e.current)==null||d.setFieldsValue({dictType:h,dictName:r})),o&&n==="edit"&&((s=e.current)==null||s.setFieldsValue({...l,dictName:r})),o||(u=e.current)==null||u.resetFields()},[o]),a(y,{accessible:t,children:C(v,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:o,modalProps:{onCancel:i,okText:"\u63D0\u4EA4"},onFinish:async d=>{var s;n==="add"?(await z(d),b.success("\u65B0\u589E\u6210\u529F")):(await J({...d,dictCode:l.dictCode}),b.success("\u7F16\u8F91\u6210\u529F")),c==null||c.reload(),i(),(s=e.current)==null||s.resetFields()},children:[a(p,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(p,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(p,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(ie,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(P,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",fieldProps:{options:I},initialValue:"default"}),a(L.Group,{name:"status",label:"\u72B6\u6001",valueEnum:V,initialValue:O.ENABLE}),a(ce,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=()=>{const{canEditSysDict:e}=g(),t=ge();return a(y,{accessible:e,children:a(E,{icon:a(N,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=({record:e})=>{const{canEditSysDict:t}=g(),c=Ae();return a(y,{accessible:t,children:a(E,{type:"link",icon:a(X,{}),onClick:()=>c(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=({searchParams:e})=>{const{canExportSysPost:t}=g(),{isLoading:c,mutate:o}=k(()=>K(e),{onSuccess:()=>{b.success("\u5BFC\u51FA\u6210\u529F")}});return a(y,{accessible:t,children:a(E,{ghost:!0,type:"primary",icon:a(Y,{}),loading:c,onClick:()=>o(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({dictCode:e,dictLabel:t,disabled:c,isBatch:o})=>{const n=o?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:l}=g(),i=ue(),{mutateAsync:h,isLoading:r}=k(async s=>{await U({dictCodes:s})},{onSuccess:()=>{var s;i==null||i.reload(),(s=i==null?void 0:i.clearSelected)==null||s.call(i),b.success("\u5220\u9664\u6210\u529F")}});return a(y,{accessible:l,children:a(E,{type:"link",danger:!0,disabled:c,icon:a(q,{}),onClick:()=>{W.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:C(j,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178\u6570\u636E",a(G.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>h(e),okButtonProps:{loading:r}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>{var t;const{data:e}=ee("sys_normal_disable");return[{title:"\u5B57\u5178\u7F16\u7801",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6807\u7B7E",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"\u5B57\u5178\u952E\u503C",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6392\u5E8F",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(c,o)=>C(j,{children:[a(Ce,{record:o}),a(w,{dictCode:o.dictCode,dictLabel:o.dictLabel})]})}]},fe=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(","),dictLabel:e.map(t=>t.dictLabel).join(",")}),Be=()=>{const e=H(),[t,c]=T.exports.useState({}),o=le(),n=Fe(),l=T.exports.useRef(),[i,h]=me(),{data:r,run:d}=ne(async()=>(await re()).reduce((u,m)=>(u[m.dictType]=m.dictName,u),{}),{manual:!0,onSuccess:s=>{var m,D;const u=e.dictType;h({dictType:u,dictName:s[u]}),(m=l.current)==null||m.setFieldsValue({dictType:u}),(D=o==null?void 0:o.current)==null||D.reload()}});return ae("/system/dict/:dictType",()=>{d()}),a(Q,{rowKey:"dictCode",actionRef:o,columns:n,params:i,request:async(...s)=>{const u=S(...s);return c(u),await Z(S(...s))},tableAlertOptionRender:fe,manualRequest:!0,toolbar:{actions:[a(Ee,{searchParams:t},"ButtonExport"),a(be,{},"ButtonAdd")]},headerTitle:a(_,{formRef:l,children:a(P,{name:"dictType",valueEnum:r!=null?r:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:s=>{h({dictType:s,dictName:r[s]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ve=()=>C($,{children:[a(Be,{}),a(Te,{})]});export{Ve as default};
