import{j as a,ai as T,aC as L,q as g,aw as y,aG as O,aF as V,e as E,F as v,aH as N,aJ as q,s as j,v as F,x as W,g as P,r as A,ax as X,a1 as C,b1 as R,b6 as Y,ay as G,aN as H,aW as I,aB as K,aD as J,b7 as U,aI as $,aK as w,b0 as z,M as Q}from"./index.6c7226d6.js";import{d as D}from"./index.fe7b9df5.js";import{b as Z,c as _,d as ee}from"./index.0a2c7e81.js";import{a as te,u as ae}from"./utils.4c37bda9.js";import{m as se,n as oe,o as ce,p as ie,c as ue,C as re,a as ne,b as le}from"./index.627c7b29.js";import{u as de,o as he}from"./index.8b16e847.js";import{S as me,a as pe,b as Ce,c as be,d as ge}from"./SysDictDataService.f5c54f2f.js";import{u as x}from"./useMutation.esm.e2449bdd.js";import{P as Ae}from"./index.3e69c1e0.js";import{P as Te}from"./index.5226a14b.js";import{u as ye}from"./useRequest.b9524738.js";import"./useQuery.esm.a73c52bc.js";import"./utils.esm.4c076868.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=({record:e})=>{const t=Pe();return a(T,{type:"link",icon:a(L,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({dictCode:e,dictLabel:t,disabled:r,isBatch:i})=>{const l=i?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:n}=D(),s=de(),{mutateAsync:m,isLoading:h}=x(async c=>{await me({dictCodes:c})},{onSuccess:()=>{var c;s==null||s.reload(),(c=s==null?void 0:s.clearSelected)==null||c.call(s),g.success("\u5220\u9664\u6210\u529F")}});return a(y,{accessible:n,children:a(T,{type:"link",danger:!0,disabled:r,icon:a(O,{}),onClick:()=>{V.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:E(v,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178\u6570\u636E",a(N.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>m(e),okButtonProps:{loading:h}})},children:l})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=[se,oe,ce,ie,ue,re,ne,le,{title:"\u64CD\u4F5C",valueType:"option",render:(e,t)=>E(q,{children:[a(Ee,{record:t}),a(k,{dictCode:t.dictCode,dictLabel:t.dictLabel})]})}];globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",j(void 0));f.debugLabel="atomMainTableActions";const Fe=()=>F(f),fe=()=>Z(f),M=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",j({dictType:"",dictName:""}));M.debugLabel="atomCurDictType";const Me=()=>F(M),Be=()=>W(M),b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",te({actionType:"add",open:!1}));b.debugLabel="atomAddOrEditModal";const we=()=>F(b),Se=()=>ae(b),je=()=>{const e=P(b);return()=>{e({actionType:"add",open:!0})}},Pe=()=>{const e=P(b);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Re=()=>{const e=A.exports.useRef(),{canEditSysDict:t}=D(),r=Fe(),{open:i,actionType:l,record:n}=we(),s=Se(),{dictType:m,dictName:h}=Me();return A.exports.useEffect(()=>{var u,c,o;i&&l==="add"&&((u=e.current)==null||u.setFieldsValue({dictType:m,dictName:h})),i&&l==="edit"&&((c=e.current)==null||c.setFieldsValue({...n,dictName:h})),i||(o=e.current)==null||o.resetFields()},[i]),a(y,{accessible:t,children:E(X,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:i,modalProps:{onCancel:s,okText:"\u63D0\u4EA4"},onFinish:async u=>{var c;l==="add"?(await pe(u),g.success("\u65B0\u589E\u6210\u529F")):(await Ce({...u,dictCode:n.dictCode}),g.success("\u7F16\u8F91\u6210\u529F")),r==null||r.reload(),s(),(c=e.current)==null||c.resetFields()},children:[a(C,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(C,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(C,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(C,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(C,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(Ae,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(R,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",fieldProps:{options:Y},initialValue:"default"}),a(G.Group,{name:"status",label:"\u72B6\u6001",valueEnum:H,initialValue:I.ENABLE}),a(Te,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>{const{canEditSysDict:e}=D(),t=je();return a(y,{accessible:e,children:a(T,{icon:a(K,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ke=({searchParams:e})=>{const t=D(),{isLoading:r,mutate:i}=x(()=>be(e),{onSuccess:()=>{g.success("\u5BFC\u51FA\u6210\u529F")}});return a(y,{accessible:t.canExportSysPost,children:a(T,{ghost:!0,type:"primary",icon:a(J,{}),loading:r,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S="dictCode",Le=({selectedRows:e})=>a(k,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(","),dictLabel:e.map(t=>t.dictLabel).join(",")}),Oe=()=>{const{rowSelection:e,onClick:t}=_(S),r=U(),[i,l]=A.exports.useState({}),n=fe(),s=A.exports.useRef(),[m,h]=Be(),{data:u,run:c}=ye(async()=>(await he()).reduce((d,p)=>(d[p.dictType]=p.dictName,d),{}),{manual:!0,onSuccess:o=>{var p,B;const d=r.dictType;h({dictType:d,dictName:o[d]}),(p=s.current)==null||p.setFieldsValue({dictType:d}),(B=n==null?void 0:n.current)==null||B.reload()}});return ee("/system/dict/:dictType",()=>{c()}),a($,{rowKey:S,actionRef:n,columns:De,params:m,request:async(...o)=>{const d=w(...o);return l(d),await ge(w(...o))},tableAlertOptionRender:Le,rowSelection:e,onRow:o=>({onClick:()=>{t(o)}}),manualRequest:!0,toolbar:{actions:[a(ke,{searchParams:i},"ButtonExport"),a(xe,{},"ButtonAdd")]},headerTitle:a(z,{formRef:s,children:a(R,{name:"dictType",valueEnum:u!=null?u:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:o=>{h({dictType:o,dictName:u[o]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $e=()=>E(Q,{children:[a(Oe,{}),a(Re,{})]});export{$e as default};
