import{p as i,aB as d,w as g,s as l,R as A,J as m,aC as p,b7 as M,aF as D,d as I,F as R,j as F,aK as f,o as x,b0 as w}from"./index.7c81fac9.js";import{c as h,d as b}from"./SysMenuService.310549e0.js";import{u as y}from"./useQuery.esm.c8244a57.js";import{u as _}from"./useMutation.esm.173c6737.js";import"./utils.esm.0bacd143.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const o="systemMenu",T=e=>{const t=a=>a.filter(s=>s.menuType!==w.F).map(({menuId:s,menuName:n,children:u})=>({menuId:s,menuName:n,children:u?t(u):[]}));return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:e?t(e):[]}]},r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/AtomSelectedMenuData",i({key:`${o}SelectedMenuData`,default:{hasSelected:!1,selectedMenuId:0,selectedMenuName:"\u6839\u76EE\u5F55"}}));r.debugLabel="AtomSelectedMenuData";const O=()=>d(r),X=()=>g(r),Y=()=>l(r),c=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/AtomCreateModal",i({key:`${o}CreateModal`,default:!1}));c.debugLabel="AtomCreateModal";const v=()=>d(c),B=()=>{const e=A(c);return()=>e(!0)},K=()=>l(c),C=[o,"list"],j=()=>{const e=m();return()=>e.invalidateQueries(C)},N=(e={},t)=>y(C,async()=>{const a=await h(e),s=p(a,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:M(s),map:a.reduce((n,u)=>n.set(u.menuId,u),new Map),parentIds:Array.from(a.reduce((n,u)=>n.add(u.parentId),new Set))}},{onSuccess:a=>{t(a.parentIds)}}),S=[o,"options"],L=()=>{const e=m();return()=>e.invalidateQueries(S)},V=()=>y(S,async()=>{const e=await h({}),t=p(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:T(M(t)),map:e.reduce((a,s)=>a.set(s.menuId,s),new Map)}}),$=()=>{const e=j(),t=L(),a=O();return _(async({menuId:s,menuName:n})=>{D.confirm({title:"\u5220\u9664\u83DC\u5355",content:I(R,{children:["\u786E\u5B9A\u5220\u9664\u83DC\u5355",F(f.Text,{code:!0,children:n}),"\u5417\uFF1F"]}),onOk:async()=>{await b({menuId:s}),a(),await Promise.all([e(),t()]),x.success("\u5220\u9664\u6210\u529F")}})})};export{$ as useDeleteMenu,v as useHideCreateModal,N as useQueryMenuList,V as useQueryMenuOptions,j as useReFetchMenuList,L as useReFetchMenuOptions,O as useResetSelectedMenuData,B as useShowCreateModal,X as useStateSelectedMenuData,K as useValueCreateModal,Y as useValueSelectedMenuData};
