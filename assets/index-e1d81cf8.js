import{r as s,bm as X,n as H,bi as ye,bj as he,bl as Se,d5 as V,d6 as oe,dn as Le,T as Re,dp as Me,w as x,dq as Ne,c3 as ve,dr as $e,b_ as He,l as Ae,da as re,_ as ne,ds as Z,d as p,dt as Fe,bf as me,g as q,h as A,b as T,j as l,D as We,du as se,aQ as F,p as xe,a as de,c1 as ie,m as Ge,dv as Ke,dw as Ce,dx as _e,e as le,dy as qe,bV as Xe,o as we,dh as Ve,dz as k,P as ee,dA as Qe,bq as Je,dB as Ue}from"./index-8e79839f.js";var Ye=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};const Ze=e=>{var{prefixCls:t,className:a,hoverable:r=!0}=e,n=Ye(e,["prefixCls","className","hoverable"]);const{getPrefixCls:i}=s.useContext(X),o=i("card",t),f=H(`${o}-grid`,a,{[`${o}-grid-hoverable`]:r});return s.createElement("div",Object.assign({},n,{className:f}))},Ee=Ze,ke=e=>{const{antCls:t,componentCls:a,cardHeadHeight:r,cardPaddingBase:n,cardHeadTabsMarginBottom:i}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${n}px`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,background:"transparent",borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},V()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},oe),{[`
          > ${a}-typography,
          > ${a}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:i,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`}}})},et=e=>{const{cardPaddingBase:t,colorBorderSecondary:a,cardShadow:r,lineWidth:n}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${n}px 0 0 0 ${a},
      0 ${n}px 0 0 ${a},
      ${n}px ${n}px 0 0 ${a},
      ${n}px 0 0 0 ${a} inset,
      0 ${n}px 0 0 ${a} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},tt=e=>{const{componentCls:t,iconCls:a,cardActionsLiMargin:r,cardActionsIconSize:n,colorBorderSecondary:i}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:e.colorBgContainer,borderTop:`${e.lineWidth}px ${e.lineType} ${i}`,display:"flex",borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px `},V()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.cardActionsIconSize*2,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${a}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:`${e.fontSize*e.lineHeight}px`,transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${a}`]:{fontSize:n,lineHeight:`${n*e.lineHeight}px`}},"&:not(:last-child)":{borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${i}`}}})},at=e=>Object.assign(Object.assign({margin:`-${e.marginXXS}px 0`,display:"flex"},V()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},oe),"&-description":{color:e.colorTextDescription}}),rt=e=>{const{componentCls:t,cardPaddingBase:a,colorFillAlter:r}=e;return{[`${t}-head`]:{padding:`0 ${a}px`,background:r,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${e.padding}px ${a}px`}}},nt=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},it=e=>{const{componentCls:t,cardShadow:a,cardHeadPadding:r,colorBorderSecondary:n,boxShadowTertiary:i,cardPaddingBase:o}=e;return{[t]:Object.assign(Object.assign({},Se(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:i},[`${t}-head`]:ke(e),[`${t}-extra`]:{marginInlineStart:"auto",color:"",fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:o,borderRadius:` 0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},V()),[`${t}-grid`]:et(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%"},img:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`}},[`${t}-actions`]:tt(e),[`${t}-meta`]:at(e)}),[`${t}-bordered`]:{border:`${e.lineWidth}px ${e.lineType} ${n}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:a}},[`${t}-contain-grid`]:{[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:-e.lineWidth,marginInlineStart:-e.lineWidth,padding:0}},[`${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:rt(e),[`${t}-loading`]:nt(e),[`${t}-rtl`]:{direction:"rtl"}}},lt=e=>{const{componentCls:t,cardPaddingSM:a,cardHeadHeightSM:r}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:r,padding:`0 ${a}px`,fontSize:e.fontSize,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:a}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{minHeight:r,paddingTop:0,display:"flex",alignItems:"center"}}}}},ot=ye("Card",e=>{const t=he(e,{cardShadow:e.boxShadowCard,cardHeadHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,cardHeadHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardHeadTabsMarginBottom:-e.padding-e.lineWidth,cardActionsLiMargin:`${e.paddingSM}px 0`,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[it(t),lt(t)]});var st=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function dt(e){return e.map((a,r)=>s.createElement("li",{style:{width:`${100/e.length}%`},key:`action-${r}`},s.createElement("span",null,a)))}const ct=s.forwardRef((e,t)=>{const{getPrefixCls:a,direction:r}=s.useContext(X),n=s.useContext(Le),i=N=>{var R;(R=e.onTabChange)===null||R===void 0||R.call(e,N)},o=()=>{let N;return s.Children.forEach(e.children,R=>{R&&R.type&&R.type===Ee&&(N=!0)}),N},{prefixCls:f,className:c,rootClassName:m,extra:b,headStyle:P={},bodyStyle:y={},title:C,loading:z,bordered:E=!0,size:I,type:d,cover:v,actions:S,tabList:h,children:w,activeTabKey:$,defaultActiveTabKey:O,tabBarExtraContent:j,hoverable:L,tabProps:g={}}=e,D=st(e,["prefixCls","className","rootClassName","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),u=a("card",f),[B,J]=ot(u),U=s.createElement(x,{loading:!0,active:!0,paragraph:{rows:4},title:!1},w),W=$!==void 0,Y=Object.assign(Object.assign({},g),{[W?"activeKey":"defaultActiveKey"]:W?$:O,tabBarExtraContent:j});let G;const K=h&&h.length?s.createElement(Re,Object.assign({size:"large"},Y,{className:`${u}-head-tabs`,onChange:i,items:h.map(N=>{var R;return{label:N.tab,key:N.key,disabled:(R=N.disabled)!==null&&R!==void 0?R:!1}})})):null;(C||b||K)&&(G=s.createElement("div",{className:`${u}-head`,style:P},s.createElement("div",{className:`${u}-head-wrapper`},C&&s.createElement("div",{className:`${u}-head-title`},C),b&&s.createElement("div",{className:`${u}-extra`},b)),K));const Be=v?s.createElement("div",{className:`${u}-cover`},v):null,Oe=s.createElement("div",{className:`${u}-body`,style:y},z?U:w),ze=S&&S.length?s.createElement("ul",{className:`${u}-actions`},dt(S)):null,je=Me(D,["onTabChange"]),fe=I||n,De=H(u,{[`${u}-loading`]:z,[`${u}-bordered`]:E,[`${u}-hoverable`]:L,[`${u}-contain-grid`]:o(),[`${u}-contain-tabs`]:h&&h.length,[`${u}-${fe}`]:fe,[`${u}-type-${d}`]:!!d,[`${u}-rtl`]:r==="rtl"},c,m,J);return B(s.createElement("div",Object.assign({ref:t},je,{className:De}),G,Be,Oe,ze))}),ut=ct;var gt=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};const ft=e=>{const{prefixCls:t,className:a,avatar:r,title:n,description:i}=e,o=gt(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:f}=s.useContext(X),c=f("card",t),m=H(`${c}-meta`,a),b=r?s.createElement("div",{className:`${c}-meta-avatar`},r):null,P=n?s.createElement("div",{className:`${c}-meta-title`},n):null,y=i?s.createElement("div",{className:`${c}-meta-description`},i):null,C=P||y?s.createElement("div",{className:`${c}-meta-detail`},P,y):null;return s.createElement("div",Object.assign({},o,{className:m}),b,C)},vt=ft,ce=ut;ce.Grid=Ee;ce.Meta=vt;const M=ce,mt=e=>{let{children:t}=e;return t},pt=mt;function _(e){return e!=null}const bt=e=>{let{itemPrefixCls:t,component:a,span:r,className:n,style:i,labelStyle:o,contentStyle:f,bordered:c,label:m,content:b,colon:P}=e;const y=a;return c?s.createElement(y,{className:H({[`${t}-item-label`]:_(m),[`${t}-item-content`]:_(b)},n),style:i,colSpan:r},_(m)&&s.createElement("span",{style:o},m),_(b)&&s.createElement("span",{style:f},b)):s.createElement(y,{className:H(`${t}-item`,n),style:i,colSpan:r},s.createElement("div",{className:`${t}-item-container`},(m||m===0)&&s.createElement("span",{className:H(`${t}-item-label`,{[`${t}-item-no-colon`]:!P}),style:o},m),(b||b===0)&&s.createElement("span",{className:H(`${t}-item-content`),style:f},b)))},te=bt;function ae(e,t,a){let{colon:r,prefixCls:n,bordered:i}=t,{component:o,type:f,showLabel:c,showContent:m,labelStyle:b,contentStyle:P}=a;return e.map((y,C)=>{let{props:{label:z,children:E,prefixCls:I=n,className:d,style:v,labelStyle:S,contentStyle:h,span:w=1},key:$}=y;return typeof o=="string"?s.createElement(te,{key:`${f}-${$||C}`,className:d,style:v,labelStyle:Object.assign(Object.assign({},b),S),contentStyle:Object.assign(Object.assign({},P),h),span:w,colon:r,component:o,itemPrefixCls:I,bordered:i,label:c?z:null,content:m?E:null}):[s.createElement(te,{key:`label-${$||C}`,className:d,style:Object.assign(Object.assign(Object.assign({},b),v),S),span:1,colon:r,component:o[0],itemPrefixCls:I,bordered:i,label:z}),s.createElement(te,{key:`content-${$||C}`,className:d,style:Object.assign(Object.assign(Object.assign({},P),v),h),span:w*2-1,component:o[1],itemPrefixCls:I,bordered:i,content:E})]})}const yt=e=>{const t=s.useContext(Te),{prefixCls:a,vertical:r,row:n,index:i,bordered:o}=e;return r?s.createElement(s.Fragment,null,s.createElement("tr",{key:`label-${i}`,className:`${a}-row`},ae(n,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),s.createElement("tr",{key:`content-${i}`,className:`${a}-row`},ae(n,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):s.createElement("tr",{key:i,className:`${a}-row`},ae(n,e,Object.assign({component:o?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},ht=yt,St=e=>{const{componentCls:t,descriptionsSmallPadding:a,descriptionsDefaultPadding:r,descriptionsMiddlePadding:n,descriptionsBg:i}=e;return{[`&${t}-bordered`]:{[`${t}-view`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto",borderCollapse:"collapse"}},[`${t}-item-label, ${t}-item-content`]:{padding:r,borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:i,"&::after":{display:"none"}},[`${t}-row`]:{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBottom:"none"}},[`&${t}-middle`]:{[`${t}-item-label, ${t}-item-content`]:{padding:n}},[`&${t}-small`]:{[`${t}-item-label, ${t}-item-content`]:{padding:a}}}}},$t=e=>{const{componentCls:t,descriptionsExtraColor:a,descriptionItemPaddingBottom:r,descriptionsItemLabelColonMarginRight:n,descriptionsItemLabelColonMarginLeft:i,descriptionsTitleMarginBottom:o}=e;return{[t]:Object.assign(Object.assign(Object.assign({},Se(e)),St(e)),{["&-rtl"]:{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:o},[`${t}-title`]:Object.assign(Object.assign({},oe),{flex:"auto",color:e.colorText,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed"}},[`${t}-row`]:{"> th, > td":{paddingBottom:r},"&:last-child":{borderBottom:"none"}},[`${t}-item-label`]:{color:e.colorTextTertiary,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${i}px ${n}px`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},xt=ye("Descriptions",e=>{const t=e.colorFillAlter,a=e.fontSizeSM*e.lineHeightSM,r=e.colorText,n=`${e.paddingXS}px ${e.padding}px`,i=`${e.padding}px ${e.paddingLG}px`,o=`${e.paddingSM}px ${e.paddingLG}px`,f=e.padding,c=e.marginXS,m=e.marginXXS/2,b=he(e,{descriptionsBg:t,descriptionsTitleMarginBottom:a,descriptionsExtraColor:r,descriptionItemPaddingBottom:f,descriptionsSmallPadding:n,descriptionsDefaultPadding:i,descriptionsMiddlePadding:o,descriptionsItemLabelColonMarginRight:c,descriptionsItemLabelColonMarginLeft:m});return[$t(b)]});var Ct=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};const Te=s.createContext({}),Pe={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function wt(e,t){if(typeof e=="number")return e;if(typeof e=="object")for(let a=0;a<ve.length;a++){const r=ve[a];if(t[r]&&e[r]!==void 0)return e[r]||Pe[r]}return 3}function pe(e,t,a){let r=e;return(a===void 0||a>t)&&(r=He(e,{span:t})),r}function Et(e,t){const a=$e(e).filter(o=>o),r=[];let n=[],i=t;return a.forEach((o,f)=>{var c;const m=(c=o.props)===null||c===void 0?void 0:c.span,b=m||1;if(f===a.length-1){n.push(pe(o,i,m)),r.push(n);return}b<i?(i-=b,n.push(o)):(n.push(pe(o,i,b)),r.push(n),i=t,n=[])}),r}function Q(e){var{prefixCls:t,title:a,extra:r,column:n=Pe,colon:i=!0,bordered:o,layout:f,children:c,className:m,rootClassName:b,style:P,size:y,labelStyle:C,contentStyle:z}=e,E=Ct(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle"]);const{getPrefixCls:I,direction:d}=s.useContext(X),v=I("descriptions",t),[S,h]=s.useState({}),w=wt(n,S),[$,O]=xt(v),j=Ne();s.useEffect(()=>{const D=j.subscribe(u=>{typeof n=="object"&&h(u)});return()=>{j.unsubscribe(D)}},[]);const L=Et(c,w),g=s.useMemo(()=>({labelStyle:C,contentStyle:z}),[C,z]);return $(s.createElement(Te.Provider,{value:g},s.createElement("div",Object.assign({className:H(v,{[`${v}-${y}`]:y&&y!=="default",[`${v}-bordered`]:!!o,[`${v}-rtl`]:d==="rtl"},m,b,O),style:P},E),(a||r)&&s.createElement("div",{className:`${v}-header`},a&&s.createElement("div",{className:`${v}-title`},a),r&&s.createElement("div",{className:`${v}-extra`},r)),s.createElement("div",{className:`${v}-view`},s.createElement("table",null,s.createElement("tbody",null,L.map((D,u)=>s.createElement(ht,{key:u,index:u,colon:i,prefixCls:v,vertical:f==="vertical",bordered:o,row:D}))))))))}Q.Item=pt;var Tt=function(t){return(me.warn||me.warning)(t)};function Pt(e){var t=e.data,a=e.row;return p(p({},t),a)}function It(e){var t=e.type||"single",a=Ae(),r=re([],{value:e.editableKeys,onChange:e.onChange?function(d){var v;e==null||(v=e.onChange)===null||v===void 0||v.call(e,d,e.dataSource)}:void 0}),n=ne(r,2),i=n[0],o=n[1],f=s.useMemo(function(){var d=t==="single"?i==null?void 0:i.slice(0,1):i;return new Set(d)},[(i||[]).join(","),t]),c=s.useCallback(function(d){return!!(i!=null&&i.includes(Z(d)))},[(i||[]).join(",")]),m=function(v){return f.size>0&&t==="single"?(Tt(e.onlyOneLineEditorAlertMessage||a.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(f.add(Z(v)),o(Array.from(f)),!0)},b=function(v){return f.delete(Z(v)),o(Array.from(f)),!0},P=function(){var d=q(A().mark(function v(S,h,w,$){var O,j;return A().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e==null||(O=e.onCancel)===null||O===void 0?void 0:O.call(e,S,h,w,$);case 2:if(j=g.sent,j!==!1){g.next=5;break}return g.abrupt("return",!1);case 5:return g.abrupt("return",!0);case 6:case"end":return g.stop()}},v)}));return function(S,h,w,$){return d.apply(this,arguments)}}(),y=function(){var d=q(A().mark(function v(S,h,w){var $,O,j;return A().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,e==null||($=e.onSave)===null||$===void 0?void 0:$.call(e,S,h,w);case 2:if(O=g.sent,O!==!1){g.next=5;break}return g.abrupt("return",!1);case 5:return b(S),j={data:e.dataSource,row:h,key:S,childrenColumnName:e.childrenColumnName||"children"},e.setDataSource(Pt(j)),g.abrupt("return",!0);case 9:case"end":return g.stop()}},v)}));return function(S,h,w){return d.apply(this,arguments)}}(),C=a.getMessage("editableTable.action.save","保存"),z=a.getMessage("editableTable.action.delete","删除"),E=a.getMessage("editableTable.action.cancel","取消"),I=s.useCallback(function(d,v){var S=p({recordKey:d,cancelEditable:b,onCancel:P,onSave:y,editableKeys:i,setEditableRowKeys:o,saveText:C,cancelText:E,deleteText:z,deletePopconfirmMessage:"".concat(a.getMessage("deleteThisLine","删除此行"),"?"),editorType:"Map"},v),h=Fe(e.dataSource,S);return e.actionRender?e.actionRender(e.dataSource,S,{save:h.save,delete:h.delete,cancel:h.cancel}):[h.save,h.delete,h.cancel]},[i&&i.join(","),e.dataSource]);return{editableKeys:i,setEditableRowKeys:o,isEditable:c,actionRender:I,startEditable:m,cancelEditable:b}}var ue=function(t){var a=t.padding;return l("div",{style:{padding:a||"0 24px"},children:l(We,{style:{margin:0}})})},Bt={xs:2,sm:2,md:4,lg:4,xl:6,xxl:6},Ot=function(t){var a=t.size,r=t.active,n=se(),i=a===void 0?Bt[n]||6:a,o=function(c){return c===0?0:i>2?42:16};return l(M,{bordered:!1,style:{marginBlockEnd:16},children:l("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(i).fill(null).map(function(f,c){return T("div",{style:{borderInlineStart:i>2&&c===1?"1px solid rgba(0,0,0,0.06)":void 0,paddingInlineStart:o(c),flex:1,marginInlineEnd:c===0?16:0},children:[l(x,{active:r,paragraph:!1,title:{width:100,style:{marginBlockStart:0}}}),l(x.Button,{active:r,style:{height:48}})]},c)})})})},zt=function(t){var a=t.active;return T(xe,{children:[l(M,{bordered:!1,style:{borderRadius:0},bodyStyle:{padding:24},children:T("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[l("div",{style:{maxWidth:"100%",flex:1},children:l(x,{active:a,title:{width:100,style:{marginBlockStart:0}},paragraph:{rows:1,style:{margin:0}}})}),l(x.Button,{active:a,size:"small",style:{width:165,marginBlockStart:12}})]})}),l(ue,{})]})},jt=function(t){var a=t.size,r=t.active,n=r===void 0?!0:r,i=t.actionButton;return T(M,{bordered:!1,bodyStyle:{padding:0},children:[new Array(a).fill(null).map(function(o,f){return l(zt,{active:!!n},f)}),i!==!1&&l(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"center"},children:l(x.Button,{style:{width:102},active:n,size:"small"})})]})},ge=function(t){var a=t.active;return T("div",{style:{marginBlockEnd:16},children:[l(x,{paragraph:!1,title:{width:185}}),l(x.Button,{active:a,size:"small"})]})},Dt=function(t){var a=t.active;return l(M,{bordered:!1,style:{borderBottomRightRadius:0,borderBottomLeftRadius:0},bodyStyle:{paddingBlockEnd:8},children:T(F,{style:{width:"100%",justifyContent:"space-between"},children:[l(x.Button,{active:a,style:{width:200},size:"small"}),T(F,{children:[l(x.Button,{active:a,size:"small",style:{width:120}}),l(x.Button,{active:a,size:"small",style:{width:80}})]})]})})},Lt=function(t){var a=t.active,r=a===void 0?!0:a,n=t.statistic,i=t.actionButton,o=t.toolbar,f=t.pageHeader,c=t.list,m=c===void 0?5:c;return T("div",{style:{width:"100%"},children:[f!==!1&&l(ge,{active:r}),n!==!1&&l(Ot,{size:n,active:r}),(o!==!1||m!==!1)&&T(M,{bordered:!1,bodyStyle:{padding:0},children:[o!==!1&&l(Dt,{active:r}),m!==!1&&l(jt,{size:m,active:r,actionButton:i})]})]})};const Rt=Lt;var Ie={xs:1,sm:2,md:3,lg:3,xl:3,xxl:4},Mt=function(t){var a=t.active;return T("div",{style:{marginBlockStart:32},children:[l(x.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),T("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:[T("div",{style:{flex:1,marginInlineEnd:24,maxWidth:300},children:[l(x,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),l(x,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}}),l(x,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]}),l("div",{style:{flex:1,alignItems:"center",justifyContent:"center"},children:T("div",{style:{maxWidth:300,margin:"auto"},children:[l(x,{active:a,paragraph:!1,title:{style:{marginBlockStart:0}}}),l(x,{active:a,paragraph:!1,title:{style:{marginBlockStart:8}}})]})})]})]})},Nt=function(t){var a=t.size,r=t.active,n=se(),i=a===void 0?Ie[n]||3:a;return l("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(i).fill(null).map(function(o,f){return T("div",{style:{flex:1,paddingInlineStart:f===0?0:24,paddingInlineEnd:f===i-1?0:24},children:[l(x,{active:r,paragraph:!1,title:{style:{marginBlockStart:0}}}),l(x,{active:r,paragraph:!1,title:{style:{marginBlockStart:8}}}),l(x,{active:r,paragraph:!1,title:{style:{marginBlockStart:8}}})]},f)})})},be=function(t){var a=t.active,r=t.header,n=r===void 0?!1:r,i=se(),o=Ie[i]||3;return T(xe,{children:[T("div",{style:{display:"flex",background:n?"rgba(0,0,0,0.02)":"none",padding:"24px 8px"},children:[new Array(o).fill(null).map(function(f,c){return l("div",{style:{flex:1,paddingInlineStart:n&&c===0?0:20,paddingInlineEnd:32},children:l(x,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:n?"75px":"100%"}}})},c)}),l("div",{style:{flex:3,paddingInlineStart:32},children:l(x,{active:a,paragraph:!1,title:{style:{margin:0,height:24,width:n?"75px":"100%"}}})})]}),l(ue,{padding:"0px 0px"})]})},Ht=function(t){var a=t.active,r=t.size,n=r===void 0?4:r;return T(M,{bordered:!1,children:[l(x.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),l(be,{header:!0,active:a}),new Array(n).fill(null).map(function(i,o){return l(be,{active:a},o)}),l("div",{style:{display:"flex",justifyContent:"flex-end",paddingBlockStart:16},children:l(x,{active:a,paragraph:!1,title:{style:{margin:0,height:32,float:"right",maxWidth:"630px"}}})})]})},At=function(t){var a=t.active;return T(M,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},children:[l(x.Button,{active:a,size:"small",style:{width:100,marginBlockEnd:16}}),l(Nt,{active:a}),l(Mt,{active:a})]})},Ft=function(t){var a=t.active,r=a===void 0?!0:a,n=t.pageHeader,i=t.list;return T("div",{style:{width:"100%"},children:[n!==!1&&l(ge,{active:r}),l(At,{active:r}),i!==!1&&l(ue,{}),i!==!1&&l(Ht,{active:r,size:i})]})};const Wt=Ft;var Gt=function(t){var a=t.active,r=a===void 0?!0:a,n=t.pageHeader;return T("div",{style:{width:"100%"},children:[n!==!1&&l(ge,{active:r}),l(M,{children:T("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:128},children:[l(x.Avatar,{size:64,style:{marginBlockEnd:32}}),l(x.Button,{active:r,style:{width:214,marginBlockEnd:8}}),l(x.Button,{active:r,style:{width:328},size:"small"}),T(F,{style:{marginBlockStart:24},children:[l(x.Button,{active:r,style:{width:116}}),l(x.Button,{active:r,style:{width:116}})]})]})})]})};const Kt=Gt;var _t=["type"],qt=function(t){var a=t.type,r=a===void 0?"list":a,n=de(t,_t);return r==="result"?l(Kt,p({},n)):r==="descriptions"?l(Wt,p({},n)):l(Rt,p({},n))};const Xt=qt;var Vt=function(t,a){var r=a||{},n=r.onRequestError,i=r.effects,o=r.manual,f=r.dataSource,c=r.defaultDataSource,m=r.onDataSourceChange,b=re(c,{value:f,onChange:m}),P=ne(b,2),y=P[0],C=P[1],z=re(a==null?void 0:a.loading,{value:a==null?void 0:a.loading,onChange:a==null?void 0:a.onLoadingChange}),E=ne(z,2),I=E[0],d=E[1],v=function(w){C(w),d(!1)},S=function(){var h=q(A().mark(function w(){var $,O,j;return A().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!I){g.next=2;break}return g.abrupt("return");case 2:return d(!0),g.prev=3,g.next=6,t();case 6:if(g.t0=g.sent,g.t0){g.next=9;break}g.t0={};case 9:$=g.t0,O=$.data,j=$.success,j!==!1&&v(O),g.next=23;break;case 15:if(g.prev=15,g.t1=g.catch(3),n!==void 0){g.next=21;break}throw new Error(g.t1);case 21:n(g.t1);case 22:d(!1);case 23:return g.prev=23,d(!1),g.finish(23);case 26:case"end":return g.stop()}},w,null,[[3,15,23,26]])}));return function(){return h.apply(this,arguments)}}();return s.useEffect(function(){o||S()},[].concat(ie(i||[]),[o])),{dataSource:y,setDataSource:C,loading:I,reload:function(){return S()}}};const Qt=Vt;var Jt=["valueEnum","render","renderText","mode","plain","dataIndex","request","params","editable"],Ut=["request","columns","params","dataSource","onDataSourceChange","formProps","editable","loading","onLoadingChange","actionRef","onRequestError"],Yt=function(t,a){var r=t.dataIndex;if(r){var n=Array.isArray(r)?Ve(a,r):a[r];if(n!==void 0||n!==null)return n}return t.children},Zt=function(t){var a=t.valueEnum,r=t.action,n=t.index,i=t.text,o=t.entity,f=t.mode,c=t.render,m=t.editableUtils,b=t.valueType,P=t.plain,y=t.dataIndex,C=t.request,z=t.renderFormItem,E=t.params,I=we.useFormInstance(),d={text:i,valueEnum:a,mode:f||"read",proFieldProps:{render:c?function(){return c==null?void 0:c(i,o,n,r,p(p({},t),{},{type:"descriptions"}))}:void 0},ignoreFormItem:!0,valueType:b,request:C,params:E,plain:P};if(f==="read"||!f||b==="option"){var v=k(t.fieldProps,void 0,p(p({},t),{},{rowKey:y,isEditable:!1}));return l(ee,p(p({name:y},d),{},{fieldProps:v}))}var S=function(){var w,$=k(t.formItemProps,I,p(p({},t),{},{rowKey:y,isEditable:!0})),O=k(t.fieldProps,I,p(p({},t),{},{rowKey:y,isEditable:!0})),j=z?z==null?void 0:z(p(p({},t),{},{type:"descriptions"}),{isEditable:!0,recordKey:y,record:I.getFieldValue([y].flat(1)),defaultRender:function(){return l(ee,p(p({},d),{},{fieldProps:O}))},type:"descriptions"},I):void 0;return T(F,{style:{alignItems:"baseline"},children:[l(Qe,p(p({name:y},$),{},{style:p({margin:0},($==null?void 0:$.style)||{}),initialValue:i||($==null?void 0:$.initialValue),children:j||l(ee,p(p({},d),{},{proFieldProps:p({},d.proFieldProps),fieldProps:O}))})),m==null||(w=m.actionRender)===null||w===void 0?void 0:w.call(m,y||n,{cancelText:l(Je,{}),saveText:l(Ue,{}),deleteText:!1})]})};return l("div",{style:{marginTop:-5,marginBottom:-5,marginLeft:0,marginRight:0},children:S()})},kt=function(t,a,r,n){var i,o=[],f=t==null||(i=t.map)===null||i===void 0?void 0:i.call(t,function(c,m){var b,P;if(le.isValidElement(c))return c;var y=c;y.valueEnum,y.render;var C=y.renderText,z=y.mode;y.plain;var E=y.dataIndex;y.request,y.params;var I=y.editable,d=de(y,Jt),v=(b=Yt(c,a))!==null&&b!==void 0?b:d.children,S=C?C(v,a,m,r):v,h=typeof d.title=="function"?d.title(c,"descriptions",null):d.title,w=typeof d.valueType=="function"?d.valueType(a||{},"descriptions"):d.valueType,$=n==null?void 0:n.isEditable(E||m),O=z||$?"edit":"read",j=n&&O==="read"&&I!==!1&&(I==null?void 0:I(S,a,m))!==!1,L=j?F:le.Fragment,g=O==="edit"?S:qe(S,c,S),D=s.createElement(Q.Item,p(p({},d),{},{key:d.key||((P=d.label)===null||P===void 0?void 0:P.toString())||m,label:(h||d.label||d.tooltip||d.tip)&&l(Ce,{label:h||d.label,tooltip:d.tooltip||d.tip,ellipsis:c.ellipsis})}),T(L,{children:[l(Zt,p(p({},c),{},{dataIndex:c.dataIndex||m,mode:O,text:g,valueType:w,entity:a,index:m,action:r,editableUtils:n})),j&&w!=="option"&&l(Xe,{onClick:function(){n==null||n.startEditable(E||m)}})]}));return w==="option"?(o.push(D),null):D}).filter(function(c){return c});return{options:o!=null&&o.length?o:null,children:f}},ea=function(t){return l(Q.Item,p(p({},t),{},{children:t.children}))},ta=function(t){return t.children},aa=function(t){var a,r=t.request,n=t.columns,i=t.params,o=i===void 0?{}:i,f=t.dataSource,c=t.onDataSourceChange,m=t.formProps,b=t.editable,P=t.loading,y=t.onLoadingChange,C=t.actionRef,z=t.onRequestError,E=de(t,Ut),I=s.useContext(Ge.ConfigContext),d=Qt(q(A().mark(function g(){var D;return A().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!r){B.next=6;break}return B.next=3,r(o);case 3:B.t0=B.sent,B.next=7;break;case 6:B.t0={data:{}};case 7:return D=B.t0,B.abrupt("return",D);case 9:case"end":return B.stop()}},g)})),{onRequestError:z,effects:[Ke(o)],manual:!r,dataSource:f,loading:P,onLoadingChange:y,onDataSourceChange:c}),v=It(p(p({},t.editable),{},{childrenColumnName:void 0,dataSource:d.dataSource,setDataSource:d.setDataSource}));if(s.useEffect(function(){C&&(C.current=p({reload:d.reload},v))},[d,C,v]),d.loading||d.loading===void 0&&r)return l(Xt,{type:"descriptions",list:!1,pageHeader:!1});var S=function(){var D=$e(t.children).filter(Boolean).map(function(u){if(!le.isValidElement(u))return u;var B=u==null?void 0:u.props,J=B.valueEnum,U=B.valueType,W=B.dataIndex,Y=B.ellipsis,G=B.copyable,K=B.request;return!U&&!J&&!W&&!K&&!Y&&!G?u:p(p({},u==null?void 0:u.props),{},{entity:f})});return[].concat(ie(n||[]),ie(D)).filter(function(u){return!u||u!=null&&u.valueType&&["index","indexBorder"].includes(u==null?void 0:u.valueType)?!1:!(u!=null&&u.hideInDescriptions)}).sort(function(u,B){return B.order||u.order?(B.order||0)-(u.order||0):(B.index||0)-(u.index||0)})},h=kt(S(),d.dataSource||{},(C==null?void 0:C.current)||d,b?v:void 0),w=h.options,$=h.children,O=b?we:ta,j=null;(E.title||E.tooltip||E.tip)&&(j=l(Ce,{label:E.title,tooltip:E.tooltip||E.tip}));var L=I.getPrefixCls("pro-descriptions");return l(_e,{children:l(O,p(p({form:(a=t.editable)===null||a===void 0?void 0:a.form,component:!1,submitter:!1},m),{},{onFinish:void 0,children:l(Q,p(p({className:L},E),{},{extra:E.extra?T(F,{children:[w,E.extra]}):w,title:j,children:$}))}),"form")})};aa.Item=ea;export{aa as P};
