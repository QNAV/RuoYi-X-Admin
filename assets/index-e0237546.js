import{ad as v,af as I,ag as P,r as j,d as a,b3 as A,j as b,bZ as w,aR as g,ct as R,cu as O,aK as y,b_ as B,bS as F,b4 as _,b5 as D,b7 as V,b8 as q,k as L,aF as X}from"./index-c1e79eac.js";import{d as m,b as T}from"./index-79c92d7c.js";import{a as Y}from"./index-6b4dd17a.js";import{G as S,H as G,I as H,J as K}from"./System-b2753a68.js";import{a as N,u as W}from"./utils-43a92cc6.js";import{P as J}from"./index-cd920aef.js";import{P as Q}from"./index-0451323f.js";import{P as Z}from"./index-ed572c8c.js";import{u as $}from"./useMutation.esm-db7dfe63.js";import"./utils.esm-bf1583a2.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",v(void 0));f.debugLabel="atomMainTableActions";const x=()=>I(f),z=()=>Y(f),u=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",N({open:!1,actionType:"add"}));u.debugLabel="atomAddOrEditModal";const U=()=>I(u),ee=()=>{const e=P(u);return()=>{e({open:!0,actionType:"add"})}},te=()=>{const e=P(u);return t=>{e({open:!0,actionType:"edit",record:t})}},ae=()=>W(u);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var M,C;const e=j.exports.useRef(),{data:t}=m("sys_notice_type"),{data:s}=m("sys_notice_status"),{canAddSysNotice:r,canEditSysNotice:h}=T(),o=x(),{open:d,actionType:n,record:p}=U(),c=ae(),k=()=>{var i;n==="edit"&&((i=e.current)==null||i.resetFields()),c()};return j.exports.useEffect(()=>{if(d&&n==="edit"){const i=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(p),clearTimeout(i)},0)}},[d]),a(A,{accessible:r||h,children:b(w,{formRef:e,width:800,title:n==="add"?"新增公告":"编辑公告",open:d,modalProps:{onCancel:k,okText:"提交"},grid:!0,onFinish:async i=>{var l;return n==="add"?(await S(i),g.success("新增成功")):(await G({...i,noticeId:p.noticeId}),g.success("编辑成功")),o==null||o.reload(),c(),(l=e.current)==null||l.resetFields(),!0},children:[a(J,{name:"noticeTitle",label:"公告标题",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(Q,{name:"noticeType",label:"公告类型",required:!0,rules:[{required:!0}],valueEnum:(M=t==null?void 0:t.mapData)!=null?M:{},colProps:{span:12}}),a(Z.Group,{name:"status",label:"状态",valueEnum:(C=s==null?void 0:s.mapData)!=null?C:{},initialValue:s==null?void 0:s.defaultValue}),a(R,{name:"noticeContent",label:"内容",children:a(O,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const{canAddSysNotice:e}=T(),t=ee();return a(A,{accessible:e,children:a(y,{icon:a(B,{}),type:"primary",onClick:t,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=({record:e})=>{const t=te();return a(y,{type:"link",icon:a(F,{}),onClick:()=>t(e),children:"编辑"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({noticeId:e,disabled:t,isBatch:s})=>{const r=s?"批量删除":"删除",{canRemoveSysDict:h}=T(),o=x(),{mutateAsync:d,isLoading:n}=$(async c=>{await H({noticeIds:c})},{onSuccess:()=>{var c;o==null||o.reload(),(c=o==null?void 0:o.clearSelected)==null||c.call(o),g.success("删除成功")}});return a(A,{accessible:h,children:a(y,{type:"link",danger:!0,disabled:t,icon:a(_,{}),onClick:()=>{D.confirm({title:"删除公告通知",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>d(e),okButtonProps:{loading:n}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{var s,r;const{data:e}=m("sys_notice_type"),{data:t}=m("sys_notice_status");return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:(s=e==null?void 0:e.mapData)!=null?s:{}},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(r=t==null?void 0:t.mapData)!=null?r:{}},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(h,o)=>b(L,{children:[a(ce,{record:o}),a(E,{noticeId:o.noticeId})]})}]},re=({selectedRows:e})=>a(E,{isBatch:!0,disabled:e.length===0,noticeId:e.map(t=>t.noticeId).join(",")}),ne=()=>{const e=z(),t=ie();return a(V,{rowKey:"noticeId",actionRef:e,columns:t,request:(...s)=>K(q(...s)),tableAlertOptionRender:re,toolbar:{actions:[a(se,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>b(X,{children:[a(ne,{}),a(oe,{})]});export{Te as default};
