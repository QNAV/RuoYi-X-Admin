import{u as L,k as O,m as g,r as h,j as m,F as E,a as s,b as v,D as K,M as k,S as N,A as R,l as C,c as y,d as f,T as F,L as w,N as x,P as j,e as M,f as T}from"./index.48dcc039.js";import{u as D,a as H,b as _,c as B}from"./keepAlive.027b53a9.js";import{u as A}from"./initialState.0260f2ab.js";import"./useQuery.esm.8d9e68c0.js";import"./utils.esm.d8677889.js";const S=e=>e.startsWith("http://")||e.startsWith("https://"),U=e=>{const[n,u]=D(),r=L(),o=O.some(t=>g(t,e));return h.exports.useEffect(()=>{o&&u({...n,[e]:r})},[e]),m(E,{children:[Object.entries(n).map(([t,i])=>s("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout",hidden:!g(e,t),children:i},`${t}:${n[t]||"_"}`)),s("div",{hidden:o,style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout-no",children:!o&&r})]})},W=()=>s("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"}),I=[{key:"PROFILE",label:"\u4E2A\u4EBA\u4E2D\u5FC3"},{type:"divider"},{key:"LOGOUT",label:"\u9000\u51FA\u767B\u5F55"}],$=()=>{var r,o,t,i,c,a;const e=A(),n=v(),u={PROFILE:()=>n("/settings"),LOGOUT:C};return s("div",{className:"cursor-pointer hover:bg-[rgba(0,0,0,0.065)] px-3",children:s(K,{overlay:s(k,{items:I,onClick:({key:l})=>{var d;return(d=u[l])==null?void 0:d.call(u)}}),children:m(N,{children:[s(R,{src:(t=(o=(r=e==null?void 0:e.data)==null?void 0:r.userInfo)==null?void 0:o.user)==null?void 0:t.avatar}),s("span",{children:(a=(c=(i=e==null?void 0:e.data)==null?void 0:i.userInfo)==null?void 0:c.user)==null?void 0:a.nickName})]})})})},q=()=>{const[e,n]=h.exports.useState(""),{pathname:u}=y(),r=v(),o=H(),t=_(),i=h.exports.useMemo(()=>{const c=Object.keys(o);return c.length>5&&(t(c[0]),c.shift()),c.map(a=>{var l,d,p;return{label:(p=(d=f)==null?void 0:d[(l=Object.keys(f).find(b=>b===a))!=null?l:""])!=null?p:a,key:a}})},[o]);return h.exports.useEffect(()=>{n(u)},[u]),s(F,{hideAdd:!0,type:"editable-card",items:i,activeKey:e,onChange:r,onEdit:c=>{var a;if(c===u){const l=i.map(p=>p.key),d=l.findIndex(p=>p===e);r((a=l==null?void 0:l[d>0?d-1:d+1])!=null?a:"/")}t(c)}})},G=h.exports.memo(q),X=()=>m("div",{className:"flex justify-between items-end pl-5",children:[s(G,{}),s($,{})]}),Y=(e,n)=>e!=null&&e.path?S(e.path)?s("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:n}):s(w,{to:e.path,children:n}):n,P=()=>{const{pathname:e}=y(),n=v(),u=U(e),{data:r,isSuccess:o,isLoading:t}=A(),i=B(),c=h.exports.useMemo(()=>{var l;const a=(l=T)==null?void 0:l[e];return a===void 0?!0:!!(i!=null&&i[a])},[e,i]);return!t&&!o?s(x,{to:"/500",replace:!0}):!c&&!t&&o?s(x,{to:"/403",replace:!0}):s(j,{title:"RuoYi X Admin",layout:"mix",location:{pathname:e},onMenuHeaderClick:()=>n("/"),menu:{loading:t},loading:t,headerContentRender:X,menuItemRender:Y,menuDataRender:()=>{var a;return M((a=r==null?void 0:r.userRoutes)!=null?a:[])},footerRender:W,bgLayoutImgList:[{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",left:85,bottom:100,height:"303px"},{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",bottom:-68,right:-45,height:"303px"},{src:"https://img.alicdn.com/imgextra/i3/O1CN018NxReL1shX85Yz6Cx_!!6000000005798-2-tps-884-496.png",bottom:0,left:0,width:"331px"}],children:u})};export{P as default};
