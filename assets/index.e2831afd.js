import{r as h,Q as Be,Z as U,j as T,a as n,$ as a,a4 as dt,aY as ut,O as mt,as as ye,U as Ae,br as pt,_ as Ne,bs as ft,bt as je,aX as ht,bc as Qe,bu as xt,a8 as _e,bv as Ye,a7 as Ke,bw as vt,F as Fe,A as gt,a6 as I,aM as He,b1 as Pe,bx as Ct,aw as Se,by as yt,bz as bt,bA as wt,bB as St,bC as Rt,a5 as Et,aW as It,bk as Pt,aC as De,R as Xe,g as Ze,b5 as Nt,h as kt,aE as Ee,bD as Dt,at as Re,b6 as Tt,aG as Ve,b8 as At,b9 as Bt,b7 as _t,ba as We,S as qe,bd as Kt,be as Ft,bE as Mt,bh as Ot,bb as $t,b0 as Ge,aB as Ue,bi as Je}from"./index.40ca1dac.js";import{B as zt}from"./index.f4399fa9.js";import{A as Me}from"./index.a25ed95c.js";import{P as Lt}from"./index.7656d7ed.js";import{P as jt}from"./index.943c3426.js";import{E as Ht,a as et,u as tt}from"./useMutation.esm.fec124a8.js";import{c as Oe}from"./keepAlive.c494c0dc.js";import{u as Vt,c as Wt}from"./useInitActionType.146d3873.js";import{b as qt,C as Gt,c as Ut}from"./common.d57089d7.js";import{E as at}from"./index.95be4635.js";import{e as Jt}from"./SysMenuService.e20bfa04.js";import{f as Qt,g as Yt}from"./tree.d283f591.js";import{u as nt}from"./useRequest.fc1800d5.js";import"./utils.esm.f8f537b8.js";var ot=globalThis&&globalThis.__rest||function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(s[o[i]]=e[o[i]]);return s},Xt=function(t){var s=t.prefixCls,o=t.className,i=t.avatar,l=t.title,r=t.description,f=ot(t,["prefixCls","className","avatar","title","description"]),S=h.exports.useContext(Be),k=S.getPrefixCls,m=k("list",s),v=U("".concat(m,"-item-meta"),o),c=T("div",{className:"".concat(m,"-item-meta-content"),children:[l&&n("h4",{className:"".concat(m,"-item-meta-title"),children:l}),r&&n("div",{className:"".concat(m,"-item-meta-description"),children:r})]});return T("div",{...f,className:v,children:[i&&n("div",{className:"".concat(m,"-item-meta-avatar"),children:i}),(l||r)&&c]})},Zt=function(t,s){var o=t.prefixCls,i=t.children,l=t.actions,r=t.extra,f=t.className,S=t.colStyle,k=ot(t,["prefixCls","children","actions","extra","className","colStyle"]),m=h.exports.useContext($e),v=m.grid,c=m.itemLayout,u=h.exports.useContext(Be),d=u.getPrefixCls,A=function(){var p;return h.exports.Children.forEach(i,function(x){typeof x=="string"&&(p=!0)}),p&&h.exports.Children.count(i)>1},B=function(){return c==="vertical"?!!r:!A()},w=d("list",o),b=l&&l.length>0&&n("ul",{className:"".concat(w,"-item-action"),children:l.map(function($,p){return T("li",{children:[$,p!==l.length-1&&n("em",{className:"".concat(w,"-item-action-split")})]},"".concat(w,"-item-action-").concat(p))})},"actions"),K=v?"div":"li",j=n(K,{...k,...v?{}:{ref:s},className:U("".concat(w,"-item"),a({},"".concat(w,"-item-no-flex"),!B()),f),children:c==="vertical"&&r?[T("div",{className:"".concat(w,"-item-main"),children:[i,b]},"content"),n("div",{className:"".concat(w,"-item-extra"),children:r},"extra")]:[i,b,dt(r,{key:"extra"})]});return v?n(ut,{ref:s,flex:1,style:S,children:j}):j},rt=h.exports.forwardRef(Zt);rt.Meta=Xt;const ea=rt;var ta=globalThis&&globalThis.__rest||function(e,t){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(s[o[i]]=e[o[i]]);return s},$e=h.exports.createContext({});$e.Consumer;function ke(e){var t,s=e.pagination,o=s===void 0?!1:s,i=e.prefixCls,l=e.bordered,r=l===void 0?!1:l,f=e.split,S=f===void 0?!0:f,k=e.className,m=e.children,v=e.itemLayout,c=e.loadMore,u=e.grid,d=e.dataSource,A=d===void 0?[]:d,B=e.size,w=e.header,b=e.footer,K=e.loading,j=K===void 0?!1:K,$=e.rowKey,p=e.renderItem,x=e.locale,ve=ta(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),Z=o&&mt(o)==="object"?o:{},ce=h.exports.useState(Z.defaultCurrent||1),de=ye(ce,2),ee=de[0],L=de[1],ue=h.exports.useState(Z.defaultPageSize||10),te=ye(ue,2),me=te[0],J=te[1],Q=h.exports.useContext(Be),G=Q.getPrefixCls,D=Q.renderEmpty,V=Q.direction,M={current:1,total:0},R={},O=function(N){return function(H,_){L(H),J(_),o&&o[N]&&o[N](H,_)}},z=O("onChange"),ae=O("onShowSizeChange"),W=function(N,H){if(!p)return null;var _;return typeof $=="function"?_=$(N):$?_=N[$]:_=N.key,_||(_="list-item-".concat(H)),R[H]=_,p(N,H)},ne=function(){return!!(c||o||b)},pe=function(N,H){return n("div",{className:"".concat(N,"-empty-text"),children:x&&x.emptyText||H("List")})},F=G("list",i),Y=j;typeof Y=="boolean"&&(Y={spinning:Y});var q=Y&&Y.spinning,oe="";switch(B){case"large":oe="lg";break;case"small":oe="sm";break}var ge=U(F,(t={},a(t,"".concat(F,"-vertical"),v==="vertical"),a(t,"".concat(F,"-").concat(oe),oe),a(t,"".concat(F,"-split"),S),a(t,"".concat(F,"-bordered"),r),a(t,"".concat(F,"-loading"),q),a(t,"".concat(F,"-grid"),!!u),a(t,"".concat(F,"-something-after-last-item"),ne()),a(t,"".concat(F,"-rtl"),V==="rtl"),t),k),E=Ae(Ae(Ae({},M),{total:A.length,current:ee,pageSize:me}),o||{}),g=Math.ceil(E.total/E.pageSize);E.current>g&&(E.current=g);var P=o?n("div",{className:"".concat(F,"-pagination"),children:n(pt,{...E,onChange:z,onShowSizeChange:ae})}):null,C=Ne(A);o&&A.length>(E.current-1)*E.pageSize&&(C=Ne(A).splice((E.current-1)*E.pageSize,E.pageSize));var re=Object.keys(u||{}).some(function(y){return["xs","sm","md","lg","xl","xxl"].includes(y)}),ie=ft(re),X=h.exports.useMemo(function(){for(var y=0;y<je.length;y+=1){var N=je[y];if(ie[N])return N}},[ie]),se=h.exports.useMemo(function(){if(!!u){var y=X&&u[X]?u[X]:u.column;if(y)return{width:"".concat(100/y,"%"),maxWidth:"".concat(100/y,"%")}}},[u==null?void 0:u.column,X]),fe=q&&n("div",{style:{minHeight:53}});if(C.length>0){var he=C.map(function(y,N){return W(y,N)}),xe=h.exports.Children.map(he,function(y,N){return n("div",{style:se,children:y},R[N])});fe=u?n(ht,{gutter:u.gutter,children:xe}):n("ul",{className:"".concat(F,"-items"),children:he})}else!m&&!q&&(fe=pe(F,D||xt));var le=E.position||"bottom",be=h.exports.useMemo(function(){return{grid:u,itemLayout:v}},[JSON.stringify(u),v]);return n($e.Provider,{value:be,children:T("div",{className:ge,...ve,children:[(le==="top"||le==="both")&&P,w&&n("div",{className:"".concat(F,"-header"),children:w}),T(Qe,{...Y,children:[fe,m]}),b&&n("div",{className:"".concat(F,"-footer"),children:b}),c||(le==="bottom"||le==="both")&&P]})})}ke.Item=ea;var aa=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function na(e){var t,s=e.prefixCls,o=e.expandIcon,i=o===void 0?n(Ct,{}):o,l=e.onExpand,r=e.expanded,f=e.record,S=i,k="".concat(s,"-row-expand-icon"),m=function(c){l(!r),c.stopPropagation()};return typeof i=="function"&&(S=i({expanded:r,onExpand:l,record:f})),n("span",{className:U(k,(t={},a(t,"".concat(s,"-row-expanded"),r),a(t,"".concat(s,"-row-collapsed"),!r),t)),onClick:m,children:S})}function oa(e){var t,s,o,i,l,r=e.prefixCls,f=h.exports.useContext(_e.ConfigContext),S=f.getPrefixCls,k=Ye(),m=k.hashId,v=S("pro-list",r),c="".concat(v,"-row"),u=e.title,d=e.subTitle,A=e.content,B=e.itemTitleRender;e.prefixCls;var w=e.actions;e.item,e.recordKey;var b=e.avatar,K=e.cardProps,j=e.description,$=e.isEditable,p=e.checkbox,x=e.index,ve=e.selected,Z=e.loading,ce=e.expand,de=e.onExpand,ee=e.expandable,L=e.rowSupportExpand,ue=e.showActions,te=e.showExtra,me=e.type,J=e.style,Q=e.className,G=Q===void 0?c:Q,D=e.record,V=e.onRow,M=e.onItem,R=e.itemHeaderRender,O=e.cardActionProps,z=e.extra,ae=Ke(e,aa),W=ee||{},ne=W.expandedRowRender,pe=W.expandIcon,F=W.expandRowByClick,Y=W.indentSize,q=Y===void 0?8:Y,oe=W.expandedRowClassName,ge=vt(!!ce,{value:ce,onChange:de}),E=ye(ge,2),g=E[0],P=E[1],C=U((t={},a(t,"".concat(c,"-selected"),!K&&ve),a(t,"".concat(c,"-show-action-hover"),ue==="hover"),a(t,"".concat(c,"-type-").concat(me),!!me),a(t,"".concat(c,"-editable"),$),a(t,"".concat(c,"-show-extra-hover"),te==="hover"),t),m,c),re=U(m,a({},"".concat(G,"-extra"),te==="hover")),ie=g||Object.values(ee||{}).length===0,X=ne&&ne(D,x,q,g),se=h.exports.useMemo(function(){if(!(!w||O==="actions"))return[n("div",{onClick:function(_){return _.stopPropagation()},children:w},"action")]},[w,O]),fe=h.exports.useMemo(function(){if(!(!w||!O||O==="extra"))return[n("div",{onClick:function(_){return _.stopPropagation()},children:w},"action")]},[w,O]),he=u||d?T("div",{className:"".concat(C,"-header-title ").concat(m),children:[u&&n("div",{className:"".concat(C,"-title ").concat(m),children:u}),d&&n("div",{className:"".concat(C,"-subTitle ").concat(m),children:d})]}):null,xe=(s=B&&(B==null?void 0:B(D,x,he)))!==null&&s!==void 0?s:he,le=xe||b||d||j?n(ke.Item.Meta,{avatar:b,title:xe,description:j&&ie&&n("div",{className:"".concat(C,"-description ").concat(m),children:j})}):null,be=U(m,(o={},a(o,"".concat(C,"-item-has-checkbox"),p),a(o,"".concat(C,"-item-has-avatar"),b),a(o,C,C),o)),y=h.exports.useMemo(function(){return b||u?T(Fe,{children:[b&&n(gt,{size:22,src:b,className:"".concat(S("list-item-meta-avatar")," ").concat(m)}),n("span",{className:"".concat(S("list-item-meta-title")," ").concat(m),children:u})]}):null},[b,S,m,u]),N=K?n(Pe,I(I(I({bordered:!0,loading:Z,hoverable:!0},K),{},{title:y,subTitle:d,extra:se,actions:fe,bodyStyle:I({padding:24},K.bodyStyle)},M==null?void 0:M(D,x)),{},{children:n(He,{avatar:!0,title:!1,loading:Z,active:!0,children:T("div",{className:"".concat(C,"-header ").concat(m),children:[B&&(B==null?void 0:B(D,x,he)),A]})})})):n(ke.Item,I(I(I(I({className:U(be,a({},G,G!==c))},ae),{},{actions:se,extra:!!z&&n("div",{className:re,children:z})},V==null?void 0:V(D,x)),M==null?void 0:M(D,x)),{},{onClick:function(_){var Ce,we,Ie,Te;V==null||(Ce=V(D,x))===null||Ce===void 0||(we=Ce.onClick)===null||we===void 0||we.call(Ce,_),M==null||(Ie=M(D,x))===null||Ie===void 0||(Te=Ie.onClick)===null||Te===void 0||Te.call(Ie,_),F&&P(!g)},children:T(He,{avatar:!0,title:!1,loading:Z,active:!0,children:[T("div",{className:"".concat(C,"-header ").concat(m),children:[T("div",{className:"".concat(C,"-header-option ").concat(m),children:[!!p&&n("div",{className:"".concat(C,"-checkbox ").concat(m),children:p}),Object.values(ee||{}).length>0&&L&&na({prefixCls:v,expandIcon:pe,onExpand:P,expanded:g,record:D})]}),(i=R&&(R==null?void 0:R(D,x,le)))!==null&&i!==void 0?i:le]}),ie&&(A||X)&&T("div",{className:"".concat(C,"-content ").concat(m),children:[A,ne&&L&&n("div",{className:oe&&oe(D,x,q),children:X})]})]})}));return K?n("div",{className:U(m,(l={},a(l,"".concat(C,"-card"),K),a(l,G,G!==c),l)),style:J,children:N}):N}var ra=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function ia(e){var t=e.dataSource,s=e.columns,o=e.rowKey,i=e.showActions,l=e.showExtra,r=e.prefixCls,f=e.actionRef,S=e.itemTitleRender,k=e.renderItem,m=e.itemCardProps,v=e.itemHeaderRender,c=e.expandable,u=e.rowSelection,d=e.pagination,A=e.onRow,B=e.onItem,w=e.rowClassName,b=Ke(e,ra),K=Ye(),j=K.hashId,$=h.exports.useContext(_e.ConfigContext),p=$.getPrefixCls,x=Se.useMemo(function(){return typeof o=="function"?o:function(E,g){return E[o]||g}},[o]),ve=yt(t,"children",x),Z=ye(ve,1),ce=Z[0],de=bt(t.length,I({responsive:!0},d),function(){}),ee=ye(de,1),L=ee[0],ue=Se.useMemo(function(){if(d===!1||!L.pageSize||t.length<L.total)return t;var E=L.current,g=E===void 0?1:E,P=L.pageSize,C=P===void 0?10:P,re=t.slice((g-1)*C,g*C);return re},[t,L,d]),te=p("pro-list",r),me=wt(u,{getRowKey:x,getRecordByKey:ce,prefixCls:te,data:t,pageData:ue,expandType:"row",childrenColumnName:"children",locale:{}}),J=ye(me,2),Q=J[0],G=J[1],D=c||{},V=D.expandedRowKeys,M=D.defaultExpandedRowKeys,R=D.defaultExpandAllRows,O=R===void 0?!0:R,z=D.onExpand,ae=D.onExpandedRowsChange,W=D.rowExpandable,ne=Se.useState(function(){return M||(O!==!1?t.map(x):[])}),pe=ye(ne,2),F=pe[0],Y=pe[1],q=Se.useMemo(function(){return new Set(V||F||[])},[V,F]),oe=Se.useCallback(function(E){var g=x(E,t.indexOf(E)),P,C=q.has(g);C?(q.delete(g),P=Ne(q)):P=[].concat(Ne(q),[g]),Y(P),z&&z(!C,E),ae&&ae(P)},[x,q,t,z,ae]),ge=Q([])[0];return n(ke,I(I({},b),{},{className:U(p("pro-list-container",r),j,b.className),dataSource:ue,pagination:d&&L,renderItem:function(g,P){var C,re,ie,X={className:typeof w=="function"?w(g,P):w};s==null||s.forEach(function(y){var N=y.listKey,H=y.cardActionProps;if(!!St.has(N)){var _=y.dataIndex||N||y.key,Ce=Array.isArray(_)?Rt(g,_):g[_];H==="actions"&&N==="actions"&&(X.cardActionProps=H);var we=y.render?y.render(Ce,g,P):Ce;we!=="-"&&(X[y.listKey]=we)}});var se;ge&&ge.render&&(se=ge.render(g,g,P)||void 0);var fe=((C=f.current)===null||C===void 0?void 0:C.isEditable(I(I({},g),{},{index:P})))||{},he=fe.isEditable,xe=fe.recordKey,le=G.has(xe||P),be=n(oa,I(I({cardProps:b.grid?I(I(I({},m),b.grid),{},{checked:le,onChecked:Se.isValidElement(se)?(re=se)===null||re===void 0||(ie=re.props)===null||ie===void 0?void 0:ie.onChange:void 0}):void 0},X),{},{recordKey:xe,isEditable:he||!1,expandable:c,expand:q.has(x(g,P)),onExpand:function(){oe(g)},index:P,record:g,item:g,showActions:i,showExtra:l,itemTitleRender:S,itemHeaderRender:v,rowSupportExpand:!W||W&&W(g),selected:G.has(x(g,P)),checkbox:se,onRow:A,onItem:B}),xe);return k?k(g,P,be):be}}))}var sa=function(t){var s,o,i,l,r,f;return a({},t.componentCls,(f={backgroundColor:"transparent"},a(f,"".concat(t.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(f,"&-row",(r={borderBlockEnd:"1px solid ".concat(t.colorSplit)},a(r,"".concat(t.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(r,"&:last-child",a({borderBlockEnd:"none"},"".concat(t.antCls,"-list-item"),{borderBlockEnd:"none"})),a(r,"&:hover",(s={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(s,"".concat(t.antCls,"-list-item-action"),{display:"block"}),a(s,"".concat(t.antCls,"-list-item-extra"),{display:"flex"}),a(s,"".concat(t.componentCls,"-row-extra"),{display:"block"}),a(s,"".concat(t.componentCls,"-row-subheader-actions"),{display:"block"}),s)),a(r,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(t.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(r,"&".concat(t.componentCls,"-row-editable"),a({},"".concat(t.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(r,"&".concat(t.componentCls,"-row-selected"),{backgroundColor:t.colorPrimaryBgHover,"&:hover":{backgroundColor:t.colorPrimaryBgHover}}),a(r,"&".concat(t.componentCls,"-row-type-new"),{animation:"techUiListActive 3s"}),a(r,"&".concat(t.componentCls,"-row-type-inline"),a({},"".concat(t.componentCls,"-row-title"),{fontWeight:"normal"})),a(r,"&".concat(t.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(r,"&-show-action-hover",(o={},a(o,"".concat(t.antCls,`-list-item-action,
            `).concat(t.proComponentsCls,`-card-extra,
            `).concat(t.proComponentsCls,"-card-actions"),{display:"none"}),a(o,"&:hover",a({},"".concat(t.proComponentsCls,"-card-extra,").concat(t.proComponentsCls,"-card-actions"),{display:"flex"})),o)),a(r,"&-show-extra-hover",a({},"".concat(t.antCls,"-list-item-extra"),{display:"none"})),a(r,"&-extra",{display:"none"}),a(r,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:t.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(r,"&-expand-icon",{marginInlineEnd:8,color:t.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(r,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(r,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:t.colorPrimary}}),a(r,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(r,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(r,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(r,"&-avatar",{display:"flex"}),a(r,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start"}),a(r,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(r,"&-header-option",{display:"flex"}),a(r,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(r,"&-no-split",(i={},a(i,"".concat(t.componentCls,"-row"),{borderBlockEnd:"none"}),a(i,"".concat(t.antCls,"-list ").concat(t.antCls,"-list-item"),{borderBlockEnd:"none"}),i)),a(r,"&-bordered",a({},"".concat(t.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(t.colorSplit)})),a(r,"".concat(t.antCls,"-list-vertical"),(l={},a(l,"".concat(t.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(l,"&-content",{marginBlock:0,marginInline:0}),a(l,"&-subTitle",{marginBlockStart:8}),a(l,"".concat(t.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(t.componentCls,"-row-description"),{marginBlockStart:16})),a(l,"".concat(t.antCls,"-list-bordered ").concat(t.antCls,"-list-item"),{paddingInline:0}),a(l,"".concat(t.componentCls,"-row-show-extra-hover"),a({},"".concat(t.antCls,"-list-item-extra "),{display:"none"})),l)),a(r,"".concat(t.antCls,"-list-pagination"),{marginBlockEnd:t.marginLG}),a(r,"".concat(t.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(r,"".concat(t.antCls,"-list-vertical .").concat(t.proComponentsCls,"-list-row ").concat(t.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(t.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(r,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),r)),f))};function la(e){return Et("ProList",function(t){var s=I(I({},t),{},{componentCls:".".concat(e)});return[sa(s)]})}var ca=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function da(e){var t=e.metas,s=e.split,o=e.footer,i=e.rowKey,l=e.tooltip,r=e.className,f=e.options,S=f===void 0?!1:f,k=e.search,m=k===void 0?!1:k,v=e.expandable,c=e.showActions,u=e.showExtra,d=e.rowSelection,A=d===void 0?!1:d,B=e.pagination,w=B===void 0?!1:B,b=e.itemLayout,K=e.renderItem,j=e.grid,$=e.itemCardProps,p=e.onRow,x=e.onItem,ve=e.rowClassName,Z=e.locale,ce=e.itemHeaderRender,de=e.itemTitleRender,ee=Ke(e,ca),L=h.exports.useRef();h.exports.useImperativeHandle(ee.actionRef,function(){return L.current});var ue=h.exports.useContext(_e.ConfigContext),te=ue.getPrefixCls,me=h.exports.useMemo(function(){var M=[];return Object.keys(t||{}).forEach(function(R){var O=t[R]||{},z=O.valueType;z||(R==="avatar"&&(z="avatar"),R==="actions"&&(z="option"),R==="description"&&(z="textarea")),M.push(I(I({listKey:R,dataIndex:(O==null?void 0:O.dataIndex)||R},O),{},{valueType:z}))}),M},[t]),J=te("pro-list",e.prefixCls),Q=la(J),G=Q.wrapSSR,D=Q.hashId,V=U(J,D,a({},"".concat(J,"-no-split"),!s));return G(n(It,I(I({tooltip:l},ee),{},{actionRef:L,pagination:w,type:"list",rowSelection:A,search:m,options:S,className:U(J,r,V),columns:me,rowKey:i,tableViewRender:function(R){var O=R.columns,z=R.size,ae=R.pagination,W=R.rowSelection,ne=R.dataSource,pe=R.loading;return n(ia,{grid:j,itemCardProps:$,itemTitleRender:de,prefixCls:e.prefixCls,columns:O,renderItem:K,actionRef:L,dataSource:ne||[],size:z,footer:o,split:s,rowKey:i,expandable:v,rowSelection:A===!1?void 0:W,showActions:c,showExtra:u,pagination:ae,itemLayout:b,loading:pe,itemHeaderRender:ce,onRow:p,onItem:x,rowClassName:ve,locale:Z})}})))}const ua=(e,t="checkbox",s=!1)=>{const[o,i]=h.exports.useState([]),[l,r]=h.exports.useState([]);return{selectedRows:l,selectedRowKeys:o,rowSelection:{alwaysShowAlert:s,type:t,selectedRowKeys:o,onChange:(v,c)=>{r(c),i(v)}},onClick:v=>{const c=v[e];let u=[v],d=[c];if(t==="checkbox")if(d=[...o],u=Pt(l),d.includes(c)){const A=o.indexOf(c);d.splice(A,1),u.splice(A,1)}else u.push(v),d.push(c);r(u),i(d)},clearSelection:()=>{r([]),i([])},setSelectedRowKeys:i,checkRowSelection:async(v="\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61")=>(l==null?void 0:l.length)===0?(De.warning(v),Promise.reject(v)):Promise.resolve(l)}},ma={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},pa={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},fa={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},ha={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},it="systemRole",st=Xe({key:`${it}AtomRoleListActions`,default:void 0}),ze=()=>Ze(st),xa=()=>Vt(st),Le=Xe({key:`${it}AtomRoleDetails`,default:{visible:!1,roleId:0,roleName:""}}),va=()=>Nt(Le),ga=()=>kt(Le),lt=()=>Ze(Le);async function Ca(e,t){return Ee("/system/role/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ya(e,t){return Ee("/system/role/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ba(e,t){return Ee("/system/role/info",{method:"GET",params:{...e},...t||{}})}async function wa(e,t){return Ee("/system/role/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Sa(e,t){return Ee("/system/role/remove",{method:"POST",params:{...e},...t||{}})}const Ra=()=>{const e=Oe(),t=h.exports.useRef(),s=ze();return n(Me,{accessible:e.canAddSysRole,children:T(Dt,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:n(Re,{type:"primary",icon:n(Tt,{}),children:"\u65B0\u5EFA"}),formRef:t,onFinish:async o=>{var i;return await Ca({...o,menuIds:[],menuCheckStrictly:!0}),s==null||s.reload(),(i=t.current)==null||i.resetFields(),De.success("\u65B0\u5EFA\u6210\u529F"),!0},width:500,children:[n(Ve,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),n(Ve,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),n(Lt,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),n(At.Group,{name:"status",label:"\u72B6\u6001",valueEnum:Ht,initialValue:et.ENABLE}),n(jt,{name:"remark",label:"\u5907\u6CE8"})]})})},Ea=()=>{const e=Oe(),t=ze(),s=va(),{roleId:o,roleName:i}=lt(),l=()=>_t.confirm({title:"\u5220\u9664\u786E\u8BA4",content:T(Fe,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",n(We.Text,{code:!0,children:i}),"\u8FDB\u884C",n(We.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:async()=>{var r;await Sa({roleIds:o}),t==null||t.reload(),(r=t==null?void 0:t.clearSelected)==null||r.call(t),s(),De.success("\u5220\u9664\u6210\u529F")}});return n(Me,{accessible:e.canRemoveSysRole,children:n(Re,{danger:!0,ghost:!0,icon:n(Bt,{}),onClick:l,children:"\u5220\u9664"})})},Ia={title:"label",key:"id",children:"children"},ct=e=>{const t=[];return e.forEach(({id:s,children:o})=>{t.push(s),o&&t.push(...ct(o))}),t},Pa=({roleId:e,handleEdit:t})=>{var $;const[s,o]=h.exports.useState([]),[i,l]=h.exports.useState(!1),[r,f]=h.exports.useState([]),[S,k]=h.exports.useState([]),[m,v]=h.exports.useState(!1),[c,u]=h.exports.useState(!0),{data:d,refresh:A}=nt(async()=>{const{menus:p,checkedKeys:x}=await Jt({roleId:e});return{treeData:p,selectedMenuIds:x,selectedTreeData:Qt(p,x),allMenuIds:Yt(p)}},{ready:e>0,refreshDeps:[e],onSuccess:p=>{l(!1),k(p.selectedTreeData)}}),{isLoading:B,mutate:w}=tt(async()=>{await t({menuIds:s}),A()}),b=ct(($=d==null?void 0:d.treeData)!=null?$:[]),K=(r==null?void 0:r.length)!==0&&(r==null?void 0:r.length)===(b==null?void 0:b.length),j=p=>{var x;if(p||c){o((x=d==null?void 0:d.allMenuIds)!=null?x:[]);return}o([])};return h.exports.useEffect(()=>{if((d==null?void 0:d.allMenuIds.length)===s.length){v(!0),u(!1);return}if(s.length===0){v(!1),u(!1);return}u(!0)},[d==null?void 0:d.allMenuIds,s]),T(Fe,{children:[T("header",{className:"flex justify-between mb-2",children:[T(qe,{children:[S.length>0&&n(Re,{size:"small",icon:K?n(Kt,{}):n(Ft,{}),onClick:()=>f(K?[]:b),children:K?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),i&&n(Mt,{indeterminate:c,onChange:p=>j(p.target.checked),checked:m,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),n(Me,{accessible:!0,children:i?T(qe,{children:[n(Re,{loading:B,onClick:()=>{var p;l(!1),k((p=d==null?void 0:d.selectedTreeData)!=null?p:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),n(Re,{type:"primary",ghost:!0,loading:B,onClick:()=>w(),children:"\u4FDD\u5B58"})]}):n(Re,{type:"primary",ghost:!0,onClick:()=>{var p,x;l(!0),o((p=d==null?void 0:d.selectedMenuIds)!=null?p:[]),k((x=d==null?void 0:d.treeData)!=null?x:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),n("div",{className:"h-[390px] overflow-y-auto",children:S.length>0?n(Ot,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:i,checkStrictly:!0,fieldNames:Ia,checkedKeys:s,treeData:S,expandedKeys:r,onExpand:p=>f(p),onCheck:p=>{o(p.checked)}}):n(at,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},Na=()=>{const[e,t]=h.exports.useState([]),[s]=$t.useForm(),o=Oe(),i=ze(),{roleId:l,visible:r}=lt(),{data:f,loading:S,refresh:k}=nt(()=>ba({roleId:l}),{ready:r&&l>0,refreshDeps:[l],onSuccess:()=>{t([])}}),{mutateAsync:m}=tt(async c=>{var u;await ya({roleId:l,menuIds:(u=f==null?void 0:f.menuIds)!=null?u:[],roleKey:f.roleKey,roleName:f.roleName,roleSort:f.roleSort,status:f.status,...c})},{onSuccess:()=>{k(),i==null||i.reload(),De.success("\u4FDD\u5B58\u6210\u529F")}}),v=o.canEditSysRole&&f?{form:s,editableKeys:e,onChange:(c,u)=>{t(c),c.length===1&&!Array.isArray(u)&&s.setFieldsValue({[c[0]]:u[c[0]]})},onSave:async(c,u)=>{await m({[c]:u[c]})}}:void 0;return r?T(Qe,{spinning:S,children:[n(Ge,{column:2,columns:[pa,qt],dataSource:f}),n(Ue,{}),n(Ge,{column:2,columns:[Gt,ha,ma,Ut,fa],dataSource:f,editable:v}),n(Ue,{}),n(Pa,{roleId:l,handleEdit:c=>m(c)})]}):n(at,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},ka=()=>{const e=xa(),t=ga(),{onClick:s,rowSelection:o,selectedRows:i}=ua("roleId","radio");return h.exports.useEffect(()=>{i.length===1&&t({roleId:i[0].roleId,roleName:i[0].roleName,visible:!0})},[i]),n(da,{ghost:!0,rowKey:"roleId",actionRef:e,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:l=>l===et.ENABLE?n(Je,{color:"success",children:"\u542F\u7528\u4E2D"}):n(Je,{color:"error",children:"\u5DF2\u7981\u7528"})}},tableAlertRender:!1,onRow:l=>({onClick:()=>s(l)}),rowSelection:o,pagination:{pageSize:10},request:(...l)=>wa(Wt(...l))})},Va=()=>n(zt,{children:T(Pe,{ghost:!0,gutter:24,children:[n(Pe,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:n(Ra,{}),children:n(ka,{})}),n(Pe,{title:"\u89D2\u8272\u8BE6\u60C5",extra:n(Ea,{}),children:n(Na,{})})]})});export{Va as default};
