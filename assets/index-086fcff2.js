import{q as x,v as C,t as w,R as b,j as a,A as g,T as B,aI as R,y as P,p as i,a as I,F as N,aJ as F,aK as O,aL as k,W as L,aM as V,aN as q,Z as K,o as W,aO as X,z as Y,B as $}from"./index-b5eebe28.js";import{a as D,u as Q}from"./utils-2835fcdf.js";import{bg as f,r as T}from"./antd-f7a9cbdb.js";import{u as z}from"./useMutation-cb32f323.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",x(void 0));A.debugLabel="atomMainTableActions";const M=()=>C(A),H=()=>w(A);var h=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(h||{});const J={[0]:"新增",[1]:"编辑"},n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",D({open:!1,actionType:0}));n.debugLabel="atomAddOrEditModal";const Z=()=>C(n),G=()=>{const e=b(n);return()=>{e({open:!0,actionType:0})}},U=()=>{const e=b(n);return t=>{e({open:!0,actionType:1,record:t})}},_=()=>Q(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=U();return a(g,{accessKey:"system:notice:edit",children:a(B,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=({noticeIds:e,disabled:t,batch:s})=>{const o=M(),{message:r,modal:l}=f.useApp(),{mutate:u,isLoading:m}=z(R,{onSuccess:()=>{var d;o==null||o.reload(),(d=o==null?void 0:o.clearSelected)==null||d.call(o),r.success("删除成功")}});return a(g,{accessKey:"system:notice:remove",children:a(P,{batch:s,disabled:t,onClick:()=>{l.confirm({title:"操作确认",content:`确定删除公告编号为 ${e.join(",")} 的公告通知吗？`,onOk:()=>u({noticeIds:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const[te]=i({title:"公告编号",dataIndex:"noticeId",table:{valueType:"text",hideInSearch:!0}}),[oe,,ae]=i({title:"公告标题",dataIndex:"noticeTitle",table:{valueType:"text"},form:{valueType:"text",formItemProps:{rules:[{required:!0}]}}}),E=()=>{const{valueEnumSysNoticeType:e}=O();return i({title:"公告类型",dataIndex:"noticeType",valueEnum:e,table:{valueType:"select"},form:{valueType:"select",formItemProps:{rules:[{required:!0}]}}})},se="NORMAL",j=()=>{const{valueEnumSysNoticeStatus:e}=k();return i({title:"状态",dataIndex:"status",valueEnum:e,table:{valueType:"select",hideInSearch:!0},form:{valueType:"radio",formItemProps:{rules:[{required:!0}]},initialValue:se}})},[ce]=i({title:"创建者",dataIndex:"createBy",table:{valueType:"text"}}),[ie]=i({title:"创建时间",dataIndex:"createTime",table:{valueType:"dateTime",hideInSearch:!0,sorter:!0}}),re=()=>{const[e]=E(),[t]=j();return[te,oe,e,t,ce,ie,{title:"操作",valueType:"option",render:(s,o)=>I(N,{children:[a(ee,{record:o}),a(v,{noticeIds:[o.noticeId]})]})}]},ne=()=>{const[,,e]=E(),[,,t]=j();return[ae,e,t,{name:"noticeContent",title:"内容",colProps:{span:24},renderFormItem:()=>a(F,{})}]};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const e=T.useRef(),{message:t}=f.useApp(),s=M(),{open:o,actionType:r,record:l}=Z(),u=_(),m=()=>{var c;r===h.Edit&&((c=e.current)==null||c.resetFields()),u()},p=J[r],d=async c=>{var y;r===h.Add?await V(c):await q({...c,noticeId:l.noticeId}),u(),(y=e.current)==null||y.resetFields(),s==null||s.reload(),t.success(`${p}成功`)},S=ne();return T.useEffect(()=>{o&&h.Edit&&T.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(l)})},[o]),a(L,{title:`${p}公告通知`,layoutType:"ModalForm",grid:!0,colProps:{span:12},open:o,modalProps:{onCancel:m,okText:"提交"},columns:S,formRef:e,width:800,onFinish:d})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const e=G();return a(g,{accessKey:"system:notice:add",children:a(K,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({selectedRowKeys:e})=>a(v,{batch:!0,disabled:e.length===0,noticeIds:e}),he=()=>{const e=H(),t=re();return a(W,{rowKey:"noticeId",actionRef:e,columns:t,request:(...s)=>X(Y(...s)),tableAlertOptionRender:de,toolbar:{actions:[a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>I($,{children:[a(he,{}),a(le,{})]});export{Ce as default};
