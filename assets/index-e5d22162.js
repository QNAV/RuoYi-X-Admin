import{aV as p,j as e,W as C,aW as T,aX as b,A as M,Z as y,o as O,aY as j,z as B,a as w,B as E}from"./index-b5eebe28.js";import{u as F,a as P,O as x,b as R,c as h,d as S,e as I,f as V,g as W,B as k}from"./index-434eb92b.js";import{u as q}from"./useRequest-238e95e7.js";import{bg as $,r as u}from"./antd-f7a9cbdb.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";import"./useMutation-cb32f323.js";import"./utils-2835fcdf.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const v=()=>{const{message:s}=$.useApp(),t=u.useRef(),o=F(),{open:c,actionType:r,ossConfigId:n}=P(),d=x[r],l=R(),g=()=>{var a;r===h.Edit&&((a=t.current)==null||a.resetFields()),l()},[,f]=u.useTransition();q(()=>p({ossConfigId:n}),{ready:c&&h.Edit&&!!n,onSuccess:a=>{f(()=>{var i;(i=t.current)==null||i.setFieldsValue(a)})},refreshDeps:[c]});const m=async a=>{var i;r===h.Add?await T(a):await b({ossConfigId:n,...a}),o==null||o.reload(),(i=t.current)==null||i.resetFields(),l(),s.success(`${d}成功`)},A=S();return e(C,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:g},width:680,open:c,onFinish:m,columns:A})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const z=()=>{const s=I();return e(M,{accessKey:"system:oss:add",children:e(y,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const D=({selectedRowKeys:s})=>e(k,{disabled:s.length===0,batch:!0,ossConfigIds:s}),G=()=>{const s=V(),t=W();return e(O,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...o)=>j(B(...o)),toolbar:{actions:[e(z,{},"ButtonAdd")]},tableAlertOptionRender:D})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const Q=()=>w(E,{children:[e(G,{}),e(v,{})]});export{Q as default};
