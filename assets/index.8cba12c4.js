import{h as S,l as f,n as E,r as y,j as a,af as n,g as T,ay as R,Y as m,$ as C,az as w,ag as d,aA as I,a as v,b1 as P,aB as O,aj as V,aC as q,ai as M,ah as L,ak as Y,al as N,F as X,I as _}from"./index.ebe13ed3.js";import{b as l,j}from"./index.9b3a8785.js";import{a as W}from"./index.022bcd27.js";import{a as $,u as z}from"./utils.012ec8bb.js";import{S as G,a as H,b as K,c as Q,d as J,e as U}from"./SysDictTypeService.bcfb5d09.js";import{P as Z}from"./index.45c0f348.js";import{u as x}from"./useMutation.esm.e430accd.js";import"./useQuery.esm.2b8bd1a5.js";import"./utils.esm.01c9ab5c.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomMainTableActions",S(void 0));B.debugLabel="atomMainTableActions";const D=()=>f(B),ee=()=>W(B),p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomAddOrEditModal",$({actionType:"add",open:!1}));p.debugLabel="atomAddOrEditModal";const te=()=>f(p),ae=()=>z(p),se=()=>{const e=E(p);return()=>{e({actionType:"add",open:!0})}},ce=()=>{const e=E(p);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var b;const e=y.exports.useRef(),{canAddSysDict:t,canEditSysDict:c}=l(),o=D(),{open:i,actionType:s,record:g}=te(),A=ae(),F=()=>{var r;s==="edit"&&((r=e.current)==null||r.resetFields()),A()},{data:u}=j("sys_normal_disable");return y.exports.useEffect(()=>{if(i&&s==="edit"){const r=setTimeout(()=>{var h;(h=e.current)==null||h.setFieldsValue(g),clearTimeout(r)},0)}},[i]),a(n,{accessible:t||c,children:T(R,{formRef:e,width:500,title:s==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:i,modalProps:{onCancel:F,okText:"\u63D0\u4EA4"},onFinish:async r=>{var h;s==="add"?(await G(r),m.success("\u65B0\u589E\u6210\u529F")):(await H({...r,dictId:g.dictId}),m.success("\u7F16\u8F91\u6210\u529F")),o==null||o.reload(),A(),(h=e.current)==null||h.resetFields()},children:[a(C,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(C,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(w.Group,{name:"status",label:"\u72B6\u6001",valueEnum:(b=u==null?void 0:u.mapData)!=null?b:{},initialValue:u==null?void 0:u.defaultValue}),a(Z,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const{canAddSysDict:e}=l(),t=se();return a(n,{accessible:e,children:a(d,{icon:a(I,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=({dictType:e})=>{const t=v();return a(d,{type:"link",icon:a(P,{}),onClick:()=>t(e),children:"\u67E5\u770B"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({record:e})=>{const t=ce(),{canEditSysDict:c}=l();return a(n,{accessible:c,children:a(d,{type:"link",icon:a(O,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({searchParams:e})=>{const{canExportSysDict:t}=l(),{isLoading:c,mutate:o}=x(()=>K(e),{onSuccess:()=>{m.success("\u5BFC\u51FA\u6210\u529F")}});return a(n,{accessible:t,children:a(d,{ghost:!0,type:"primary",icon:a(V,{}),loading:c,onClick:()=>o(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const{canRemoveSysDict:e}=l();return a(n,{accessible:e,children:a(d,{danger:!0,icon:a(q,{}),onClick:()=>{M.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await Q(),m.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({dictId:e,disabled:t,isBatch:c})=>{const o=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:i}=l(),s=D(),{mutateAsync:g,isLoading:A}=x(()=>J({dictIds:e}),{onSuccess:()=>{var u;s==null||s.reload(),(u=s==null?void 0:s.clearSelected)==null||u.call(s),m.success("\u5220\u9664\u6210\u529F")}});return a(n,{accessible:i,children:a(d,{type:"link",danger:!0,disabled:t,icon:a(L,{}),onClick:()=>{M.confirm({title:"\u5220\u9664\u5B57\u5178",content:`\u786E\u5B9A\u5220\u9664\u5B57\u5178\u7F16\u53F7\u4E3A ${e} \u7684\u5B57\u5178\u5417\uFF1F`,onOk:async()=>g(),okButtonProps:{loading:A}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const{data:e}=j("sys_normal_disable");return[{title:"\u5B57\u5178\u7F16\u53F7",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"\u5B57\u5178\u7C7B\u578B",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:e==null?void 0:e.mapData},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(t,c)=>T(X,{children:[a(ie,{dictType:c.dictType}),a(re,{record:c}),a(k,{dictId:c.dictId})]})}]},he=({selectedRows:e})=>a(k,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),me=()=>{const e=ee(),t=le(),[c,o]=y.exports.useState({});return a(Y,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:he,request:async(...i)=>{const s=N(...i);return o(s),await U(s)},toolbar:{actions:[a(de,{},"ButtonRefresh"),a(ne,{searchParams:c},"ButtonExport"),a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>T(_,{children:[a(me,{}),a(oe,{})]});export{fe as default};
