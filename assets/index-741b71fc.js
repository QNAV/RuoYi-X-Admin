import{a,r as d}from"./jsx-runtime-f6344dff.js";import{a9 as m,bg as g,bh as h,aw as c,bi as y,bj as T,aC as x,bk as I}from"./index-0cc72bc5.js";import{b,c as v}from"./index-3011f4b1.js";import{A as i}from"./index-65db7775.js";import{b as C}from"./index-166a336f.js";import{a as f,b as k}from"./index-88ffc593.js";import{g as j,h as S,i as A,j as M}from"./Monitor-1c947017.js";import{u as R}from"./useMutation.esm-345c3001.js";import{j as B}from"./index-f7881e43.js";import"./vanilla-3fa884d6.js";import"./utils.esm-376a1e3d.js";import"./mutation.esm-786b6dc1.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/operlog/model/index.ts/atomMainTableActions",f(void 0));n.debugLabel="atomMainTableActions";const u=()=>k(n),O=()=>C(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=()=>{const e=u();return a(i,{accessKey:"monitor:operlog:remove",children:a(m,{danger:!0,icon:a(g,{}),onClick:()=>{h.confirm({title:"操作确认",content:"确认清空操作日志吗？",onOk:async()=>{var s;await j(),(s=e==null?void 0:e.reloadAndRest)==null||s.call(e),e==null||e.reload(),c.success("清空成功")}})},children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const P=({searchParams:e})=>{const{isLoading:t,mutate:s}=R(S,{onSuccess:()=>{c.success("导出成功")}});return a(i,{accessKey:"monitor:operlog:export",children:a(y,{loading:t,onClick:()=>s(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const p=({operId:e,disabled:t=!1,batch:s=!1})=>{const o=u();return a(i,{accessKey:"monitor:operlog:remove",children:a(T,{disabled:t,batch:s,onClick:()=>{h.confirm({title:"操作确认",content:`确定删除日志编号为 ${e} 的操作日志吗?`,onOk:async()=>{var r;await A({operIds:e}),(r=o==null?void 0:o.clearSelected)==null||r.call(o),o==null||o.reload(),c.success("删除成功")}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=()=>{const{valueEnumSysCommonStatus:e}=b(),{valueEnumSysOperType:t}=v();return[{title:"日志编号",dataIndex:"operId",key:"operId",valueType:"text",hideInSearch:!0},{title:"系统模块",dataIndex:"title",key:"title",valueType:"text"},{title:"操作类型",dataIndex:"businessType",key:"businessType",valueType:"select",valueEnum:t},{title:"请求方式",dataIndex:"requestMethod",key:"requestMethod",valueType:"text",hideInSearch:!0},{title:"操作人员",dataIndex:"operName",key:"operName",valueType:"text"},{title:"操作地址",dataIndex:"operIp",key:"operIp",valueType:"text",hideInSearch:!0},{title:"操作地点",dataIndex:"operLocation",key:"operLocation",valueType:"text",hideInSearch:!0},{title:"操作状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"操作时间",dataIndex:"operTime",key:"operTime",valueType:"dateTime",hideInSearch:!0},{title:"操作时间",dataIndex:"dateTimeRange",key:"dateTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(s,o)=>a(p,{operId:o.operId})}]},L=({selectedRows:e})=>a(p,{batch:!0,disabled:e.length===0,operId:e.map(t=>t.operId).join(",")}),F=()=>{const e=O(),t=E(),[s,o]=d.useState({});return a(x,{children:a(I,{rowKey:"operId",actionRef:e,columns:t,request:async(...l)=>{const r=B(...l);return o(r),await M(r)},toolbar:{actions:[a(w,{},"ButtonCleanUp"),a(P,{searchParams:s},"ButtonExport")]},tableAlertOptionRender:L})})};export{F as default};
