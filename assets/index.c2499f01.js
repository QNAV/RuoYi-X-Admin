import{u as L,k as O,m as g,r as h,j as m,F as E,a,b as v,D as K,M as k,S as N,A as R,l as C,c as y,d as f,T as F,L as w,N as x,P as j,e as D,f as M}from"./index.61283f81.js";import{u as T,a as H,b as _,c as B}from"./keepAlive.7de48baa.js";import{u as A}from"./initialState.5caa98d3.js";import"./useQuery.esm.985b9ba7.js";import"./utils.esm.a02caf24.js";const I=e=>e.startsWith("http://")||e.startsWith("https://"),S=e=>{const[n,u]=T(),o=L(),r=O.some(t=>g(t,e));return h.exports.useEffect(()=>{r&&u({...n,[e]:o})},[e]),m(E,{children:[Object.entries(n).map(([t,i])=>a("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout",hidden:!g(e,t),children:i},`${t}:${n[t]||"_"}`)),a("div",{hidden:r,style:{height:"100%",width:"100%",position:"relative",overflow:"hidden auto"},className:"runtime-keep-alive-layout-no",children:!r&&o})]})},U=()=>a("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"}),W=[{key:"PROFILE",label:"\u4E2A\u4EBA\u4E2D\u5FC3"},{type:"divider"},{key:"LOGOUT",label:"\u9000\u51FA\u767B\u5F55"}],$=()=>{var o,r,t,i,c,s;const e=A(),n=v(),u={PROFILE:()=>n("/settings"),LOGOUT:C};return a("div",{className:"cursor-pointer hover:bg-[rgba(0,0,0,0.065)] px-3",children:a(K,{overlay:a(k,{items:W,onClick:({key:l})=>{var d;return(d=u[l])==null?void 0:d.call(u)}}),children:m(N,{children:[a(R,{src:(t=(r=(o=e==null?void 0:e.data)==null?void 0:o.userInfo)==null?void 0:r.user)==null?void 0:t.avatar}),a("span",{children:(s=(c=(i=e==null?void 0:e.data)==null?void 0:i.userInfo)==null?void 0:c.user)==null?void 0:s.nickName})]})})})},q=()=>{const[e,n]=h.exports.useState(""),{pathname:u}=y(),o=v(),r=H(),t=_(),i=h.exports.useMemo(()=>{const c=Object.keys(r);return c.length>5&&(t(c[0]),c.shift()),c.map(s=>{var l,d,p;return{label:(p=(d=f)==null?void 0:d[(l=Object.keys(f).find(b=>b===s))!=null?l:""])!=null?p:s,key:s}})},[r]);return h.exports.useEffect(()=>{n(u)},[u]),a(F,{hideAdd:!0,type:"editable-card",items:i,activeKey:e,onChange:o,onEdit:c=>{var s;if(c===u){const l=i.map(p=>p.key),d=l.findIndex(p=>p===e);o((s=l==null?void 0:l[d>0?d-1:d+1])!=null?s:"/")}t(c)}})},G=h.exports.memo(q),X=()=>m("div",{className:"flex justify-between items-end pl-5",children:[a(G,{}),a($,{})]}),Y=(e,n)=>e!=null&&e.path?a(w,{to:e.path,target:I(e.path)?"_blank":"_self",rel:"noopener noreferrer",children:n}):n,P=()=>{const{pathname:e}=y(),n=v(),u=S(e),{data:o,isSuccess:r,isLoading:t}=A(),i=B(),c=h.exports.useMemo(()=>{var l;const s=(l=M)==null?void 0:l[e];return s===void 0?!0:!!(i!=null&&i[s])},[e,i]);return!t&&!r?a(x,{to:"/500",replace:!0}):!c&&!t&&r?a(x,{to:"/403",replace:!0}):a(j,{title:"RuoYi X Admin",layout:"mix",location:{pathname:e},onMenuHeaderClick:()=>n("/"),menu:{loading:t},loading:t,headerContentRender:X,menuItemRender:Y,menuDataRender:()=>{var s;return D((s=o==null?void 0:o.userRoutes)!=null?s:[])},footerRender:U,bgLayoutImgList:[{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",left:85,bottom:100,height:"303px"},{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",bottom:-68,right:-45,height:"303px"},{src:"https://img.alicdn.com/imgextra/i3/O1CN018NxReL1shX85Yz6Cx_!!6000000005798-2-tps-884-496.png",bottom:0,left:0,width:"331px"}],children:u})};export{P as default};
