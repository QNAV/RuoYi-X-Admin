import{al as B,am as D,an as k,ao as x,ap as A,aq as K,ar as j,as as N,at as F,au as q,av as S,r as P,aj as V,aw as W,ai as r,ax as o}from"./index-c1e79eac.js";import{s as z,u as H}from"./utils.esm-bf1583a2.js";class X extends B{constructor(e,s){super(),this.client=e,this.options=s,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(s)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),L(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return E(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return E(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,s){const n=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),D(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const a=this.hasListeners();a&&w(this.currentQuery,u,this.options,n)&&this.executeFetch(),this.updateResult(s),a&&(this.currentQuery!==u||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const c=this.computeRefetchInterval();a&&(this.currentQuery!==u||this.options.enabled!==n.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)}getOptimisticResult(e){const s=this.client.getQueryCache().build(this.client,e);return this.createResult(s,e)}getCurrentResult(){return this.currentResult}trackResult(e){const s={};return Object.keys(e).forEach(n=>{Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),s}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...s}={}){return this.fetch({...s,meta:{refetchPage:e}})}fetchOptimistic(e){const s=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,s);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,s))}fetch(e){var s;return this.executeFetch({...e,cancelRefetch:(s=e.cancelRefetch)!=null?s:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let s=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(k)),s}updateStaleTimeout(){if(this.clearStaleTimeout(),x||this.currentResult.isStale||!A(this.options.staleTime))return;const s=K(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},s)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(x||this.options.enabled===!1||!A(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,s){const n=this.currentQuery,u=this.options,a=this.currentResult,c=this.currentResultState,h=this.currentResultOptions,p=e!==n,m=p?e.state:this.currentQueryInitialState,f=p?this.currentResult:this.previousQueryResult,{state:i}=e;let{dataUpdatedAt:T,error:Q,errorUpdatedAt:I,fetchStatus:R,status:y}=i,U=!1,J=!1,d;if(s._optimisticResults){const l=this.hasListeners(),g=!l&&L(e,s),G=l&&w(e,n,s,u);(g||G)&&(R=N(e.options.networkMode)?"fetching":"paused",T||(y="loading")),s._optimisticResults==="isRestoring"&&(R="idle")}if(s.keepPreviousData&&!i.dataUpdatedAt&&f!=null&&f.isSuccess&&y!=="error")d=f.data,T=f.dataUpdatedAt,y=f.status,U=!0;else if(s.select&&typeof i.data<"u")if(a&&i.data===(c==null?void 0:c.data)&&s.select===this.selectFn)d=this.selectResult;else try{this.selectFn=s.select,d=s.select(i.data),d=F(a==null?void 0:a.data,d,s),this.selectResult=d,this.selectError=null}catch(l){this.selectError=l}else d=i.data;if(typeof s.placeholderData<"u"&&typeof d>"u"&&y==="loading"){let l;if(a!=null&&a.isPlaceholderData&&s.placeholderData===(h==null?void 0:h.placeholderData))l=a.data;else if(l=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof l<"u")try{l=s.select(l),this.selectError=null}catch(g){this.selectError=g}typeof l<"u"&&(y="success",d=F(a==null?void 0:a.data,l,s),J=!0)}this.selectError&&(Q=this.selectError,d=this.selectResult,I=Date.now(),y="error");const b=R==="fetching",v=y==="loading",O=y==="error";return{status:y,fetchStatus:R,isLoading:v,isSuccess:y==="success",isError:O,isInitialLoading:v&&b,data:d,dataUpdatedAt:T,error:Q,errorUpdatedAt:I,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>m.dataUpdateCount||i.errorUpdateCount>m.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:O&&i.dataUpdatedAt===0,isPaused:R==="paused",isPlaceholderData:J,isPreviousData:U,isRefetchError:O&&i.dataUpdatedAt!==0,isStale:C(e,s),refetch:this.refetch,remove:this.remove}}updateResult(e){const s=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,D(n,s))return;this.currentResult=n;const u={cache:!0},a=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options;if(c==="all"||!c&&!this.trackedProps.size)return!0;const h=new Set(c!=null?c:this.trackedProps);return this.options.useErrorBoundary&&h.add("error"),Object.keys(this.currentResult).some(p=>{const m=p;return this.currentResult[m]!==s[m]&&h.has(m)})};(e==null?void 0:e.listeners)!==!1&&a()&&(u.listeners=!0),this.notify({...u,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const s=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const s={};e.type==="success"?s.onSuccess=!e.manual:e.type==="error"&&!q(e.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()}notify(e){S.batch(()=>{if(e.onSuccess){var s,n,u,a;(s=(n=this.options).onSuccess)==null||s.call(n,this.currentResult.data),(u=(a=this.options).onSettled)==null||u.call(a,this.currentResult.data,null)}else if(e.onError){var c,h,p,m;(c=(h=this.options).onError)==null||c.call(h,this.currentResult.error),(p=(m=this.options).onSettled)==null||p.call(m,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(f=>{f(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Y(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function L(t,e){return Y(t,e)||t.state.dataUpdatedAt>0&&E(t,e,e.refetchOnMount)}function E(t,e,s){if(e.enabled!==!1){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&C(t,e)}return!1}function w(t,e,s,n){return s.enabled!==!1&&(t!==e||n.enabled===!1)&&(!s.suspense||t.state.status!=="error")&&C(t,s)}function C(t,e){return t.isStaleByTime(e.staleTime)}const M=P.exports.createContext(!1),Z=()=>P.exports.useContext(M);M.Provider;function _(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const $=P.exports.createContext(_()),ee=()=>P.exports.useContext($),te=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},se=t=>{P.exports.useEffect(()=>{t.clearReset()},[t])},re=({result:t,errorResetBoundary:e,useErrorBoundary:s,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&z(s,[t.error,n]),oe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},ne=(t,e)=>t.isLoading&&t.isFetching&&!e,ae=(t,e,s)=>(t==null?void 0:t.suspense)&&ne(e,s),ce=(t,e,s)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{s.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function ue(t,e){const s=V({context:t.context}),n=Z(),u=ee(),a=s.defaultQueryOptions(t);a._optimisticResults=n?"isRestoring":"optimistic",a.onError&&(a.onError=S.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=S.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=S.batchCalls(a.onSettled)),oe(a),te(a,u),se(u);const[c]=P.exports.useState(()=>new e(s,a)),h=c.getOptimisticResult(a);if(H(P.exports.useCallback(p=>n?()=>{}:c.subscribe(S.batchCalls(p)),[c,n]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.exports.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),ae(a,h,n))throw ce(a,c,u);if(re({result:h,errorResetBoundary:u,useErrorBoundary:a.useErrorBoundary,query:c.getCurrentQuery()}))throw h.error;return a.notifyOnChangeProps?h:c.trackResult(h)}function de(t,e,s){const n=W(t,e,s);return ue(n,X)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ye=(t,e={})=>r({path:"/system/config/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),pe=(t,e={})=>r({path:"/system/config/configKey",method:"GET",query:t,secure:!0,...e}),me=(t,e={})=>r({path:"/system/config/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),fe=(t,e={})=>r({path:"/system/config/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),Pe=(t={})=>r({path:"/system/config/refreshCache",method:"POST",secure:!0,...t}),Re=(t,e={})=>r({path:"/system/config/remove",method:"POST",query:t,secure:!0,...e}),Se=(t,e={})=>r({path:"/system/config/updateByKey",method:"POST",body:t,secure:!0,type:o.Json,...e}),Te=(t,e={})=>r({path:"/system/dept/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),be=(t,e={})=>r({path:"/system/dept/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),ve=(t,e={})=>r({path:"/system/dept/info",method:"GET",query:t,secure:!0,...e}),Oe=(t,e={})=>r({path:"/system/dept/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),ge=(t,e={})=>r({path:"/system/dept/remove",method:"POST",query:t,secure:!0,...e}),Ee=(t,e={})=>r({path:"/system/dept/roleDeptTreeSelect",method:"GET",query:t,secure:!0,...e}),Ce=(t,e={})=>r({path:"/system/dept/treeSelect",method:"POST",body:t,secure:!0,type:o.Json,...e}),Qe=(t,e={})=>r({path:"/system/dict/data/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),Ie=(t,e={})=>r({path:"/system/dict/data/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),Ue=(t,e={})=>r({path:"/system/dict/data/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),Je=(t,e={})=>r({path:"/system/dict/data/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),De=(t,e={})=>r({path:"/system/dict/data/remove",method:"POST",query:t,secure:!0,...e}),xe=(t,e={})=>r({path:"/system/dict/data/type",method:"GET",query:t,secure:!0,...e}),Ae=(t,e={})=>r({path:"/system/dict/type/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),Fe=(t,e={})=>r({path:"/system/dict/type/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),Le=(t,e={})=>r({path:"/system/dict/type/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),we=(t,e={})=>r({path:"/system/dict/type/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),Me=(t={})=>r({path:"/system/dict/type/optionSelect",method:"GET",secure:!0,...t}),Ge=(t={})=>r({path:"/system/dict/type/refreshCache",method:"POST",secure:!0,...t}),Be=(t,e={})=>r({path:"/system/dict/type/remove",method:"POST",query:t,secure:!0,...e}),ke=(t,e={})=>r({path:"/system/menu/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),Ke=(t,e={})=>r({path:"/system/menu/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),je=(t,e={})=>r({path:"/system/menu/info",method:"GET",query:t,secure:!0,...e}),Ne=(t,e={})=>r({path:"/system/menu/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),qe=(t,e={})=>r({path:"/system/menu/remove",method:"POST",query:t,secure:!0,...e}),Ve=(t,e={})=>r({path:"/system/menu/roleMenuTreeSelect",method:"GET",query:t,secure:!0,...e}),We=(t,e={})=>r({path:"/system/notice/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),ze=(t,e={})=>r({path:"/system/notice/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),He=(t,e={})=>r({path:"/system/notice/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),Xe=(t,e={})=>r({path:"/system/notice/remove",method:"POST",query:t,secure:!0,...e}),Ye=(t,e={})=>r({path:"/system/oss/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),Ze=(t,e={})=>r({path:"/system/post/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),_e=(t,e={})=>r({path:"/system/post/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),$e=(t,e={})=>r({path:"/system/post/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),et=(t,e={})=>r({path:"/system/post/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),tt=(t,e={})=>r({path:"/system/post/remove",method:"POST",query:t,secure:!0,...e}),st=(t,e={})=>r({path:"/system/user/profile",method:"POST",body:t,secure:!0,type:o.Json,...e}),rt=(t,e={})=>r({path:"/system/user/profile/updatePwd",method:"POST",body:t,secure:!0,type:o.Json,...e}),ot=(t,e={})=>r({path:"/system/role/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),nt=(t,e={})=>r({path:"/system/role/authUser/allocatedList",method:"POST",body:t,secure:!0,type:o.Json,...e}),at=(t,e={})=>r({path:"/system/role/authUser/cancel",method:"POST",body:t,secure:!0,type:o.Json,...e}),ct=(t,e={})=>r({path:"/system/role/authUser/cancelAll",method:"POST",body:t,secure:!0,type:o.Json,...e}),ut=(t,e={})=>r({path:"/system/role/authUser/selectAll",method:"POST",body:t,secure:!0,type:o.Json,...e}),it=(t,e={})=>r({path:"/system/role/authUser/unallocatedList",method:"POST",body:t,secure:!0,type:o.Json,...e}),ht=(t,e={})=>r({path:"/system/role/dataScope",method:"POST",body:t,secure:!0,type:o.Json,...e}),lt=(t,e={})=>r({path:"/system/role/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),dt=(t,e={})=>r({path:"/system/role/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),yt=(t,e={})=>r({path:"/system/role/info",method:"GET",query:t,secure:!0,...e}),pt=(t,e={})=>r({path:"/system/role/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),mt=(t,e={})=>r({path:"/system/role/remove",method:"POST",query:t,secure:!0,...e}),ft=(t,e={})=>r({path:"/system/user/",method:"GET",query:t,secure:!0,...e}),Pt=(t,e={})=>r({path:"/system/user/add",method:"POST",body:t,secure:!0,type:o.Json,...e}),Rt=(t,e={})=>r({path:"/system/user/edit",method:"POST",body:t,secure:!0,type:o.Json,...e}),St=(t,e={})=>r({path:"/system/user/export",method:"POST",body:t,secure:!0,type:o.Json,...e}),Tt=(t={})=>r({path:"/system/user/importTemplate",method:"POST",secure:!0,...t}),bt=(t,e={})=>r({path:"/system/user/info",method:"GET",query:t,secure:!0,...e}),vt=(t,e={})=>r({path:"/system/user/list",method:"POST",body:t,secure:!0,type:o.Json,...e}),Ot=(t,e={})=>r({path:"/system/user/remove",method:"POST",query:t,secure:!0,...e}),gt=(t,e={})=>r({path:"/system/user/resetPwd",method:"POST",body:t,secure:!0,type:o.Json,...e});export{ut as $,Je as A,je as B,Ke as C,ke as D,Ne as E,qe as F,We as G,ze as H,Xe as I,He as J,Ye as K,Ze as L,_e as M,$e as N,tt as O,et as P,yt as Q,Ve as R,lt as S,ot as T,mt as U,dt as V,pt as W,Ee as X,ht as Y,ct as Z,at as _,st as a,it as a0,nt as a1,ft as a2,pe as a3,Ce as a4,bt as a5,Pt as a6,Rt as a7,gt as a8,St as a9,Tt as aa,Ot as ab,vt as ac,rt as b,ye as c,Se as d,me as e,Pe as f,Re as g,fe as h,Oe as i,Te as j,ge as k,ve as l,be as m,Ae as n,Fe as o,Le as p,Ge as q,Be as r,xe as s,we as t,de as u,Qe as v,Ie as w,Ue as x,De as y,Me as z};
