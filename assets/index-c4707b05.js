import{aX as v,aY as f,aj as C,r as u,cs as M,d as a,ct as n,j as g,b_ as k,cu as w,aH as d,cv as I,cw as P,cx as S,cy as O,cz as D,a0 as F,cA as N,cB as K,aA as L,c3 as V,a_ as x,cC as X,cD as Y,b0 as q,b1 as Q,cE as H,h as W,av as _}from"./index-0e74c1a5.js";import{a as $}from"./index-cb481ff5.js";import{a as z,u as G}from"./utils-0457335e.js";import{P as b}from"./index-5fa9d77e.js";import{P as J}from"./index-520b3ee6.js";import{P as U}from"./index-e65fbe64.js";import{u as p}from"./useMutation.esm-f67c8f77.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomMainTableActions",v(void 0));y.debugLabel="atomMainTableActions";const j=()=>f(y),Z=()=>$(y);var m=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(m||{});const ee={[0]:"新增",[1]:"编辑"},h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomAddOrEditModal",z({actionType:0,open:!1}));h.debugLabel="atomAddOrEditModal";const te=()=>f(h),ae=()=>G(h),se=()=>{const e=C(h);return()=>{e({actionType:0,open:!0})}},oe=()=>{const e=C(h);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=u.exports.useRef(),t=j(),{open:o,actionType:s,record:r}=te(),i=ae(),T=()=>{var c;s===m.Edit&&((c=e.current)==null||c.resetFields()),i()},l=async c=>{var A;s===m.Add?(await w(c),d.success("新增成功")):(await I({...c,dictId:r.dictId}),d.success("编辑成功")),t==null||t.reload(),i(),(A=e.current)==null||A.resetFields()},{defaultValueSysNormalDisable:B,valueEnumSysNormalDisable:R}=M();return u.exports.useEffect(()=>{o&&s===m.Edit&&u.exports.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(r)})},[o]),a(n,{accessKey:["system:dict:add","system:dict:edit"],children:g(k,{formRef:e,width:500,title:`${ee[s]}字典类型`,open:o,modalProps:{onCancel:T,okText:"提交"},onFinish:l,children:[a(b,{name:"dictName",label:"字典名称",rules:[{required:!0}]}),a(b,{name:"dictType",label:"字典类型",rules:[{required:!0}]}),a(J.Group,{name:"status",label:"状态",valueEnum:R,initialValue:B}),a(U,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const e=se();return a(n,{accessKey:"system:dict:add",children:a(P,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({record:e})=>{const t=oe();return a(n,{accessKey:"system:dict:edit",children:a(S,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({searchParams:e})=>{const{isLoading:t,mutate:o}=p(O,{onSuccess:()=>{d.success("导出成功")}});return a(n,{accessKey:"system:dict:export",children:a(D,{loading:t,onClick:()=>o(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({dictType:e})=>{const t=F();return a(n,{accessKey:"system:dict:query",children:a(N,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=()=>{const{mutateAsync:e,isLoading:t}=p(K,{onSuccess:()=>d.success("刷新成功")});return a(L,{danger:!0,icon:a(V,{}),onClick:()=>{x.confirm({title:"操作确认",content:"刷新缓存后，所有字典数据将重新加载",onOk:()=>e({}),okButtonProps:{loading:t}})},children:"刷新缓存"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({dictId:e,disabled:t,batch:o})=>{const s=j(),{mutateAsync:r,isLoading:i}=p(X,{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),d.success("删除成功")}});return a(n,{accessKey:"system:dict:remove",children:a(Y,{batch:o,disabled:t,onClick:()=>{x.confirm({title:"操作确认",content:`确定删除字典编号为 ${e} 的字典吗？`,onOk:()=>r({dictIds:e}),okButtonProps:{loading:i}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const{valueEnumSysNormalDisable:e}=M();return[{title:"字典编号",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"字典名称",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"字典类型",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,o)=>g(W,{children:[a(de,{dictType:o.dictType}),a(re,{record:o}),a(E,{dictId:o.dictId})]})}]},ue=({selectedRows:e})=>a(E,{disabled:e.length===0,batch:!0,dictId:e.map(t=>t.dictId).join(",")}),me=()=>{const e=Z(),t=le(),[o,s]=u.exports.useState({});return a(q,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:ue,request:async(...r)=>{const i=Q(...r);return s(i),await H(i)},toolbar:{actions:[a(he,{},"ButtonRefresh"),a(ne,{searchParams:o},"ButtonExport"),a(ie,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>g(_,{children:[a(me,{}),a(ce,{})]});export{Ce as default};
