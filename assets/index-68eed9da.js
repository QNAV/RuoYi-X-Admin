import{r as d,aB as We,c as ee,g as j,ay as ce,a as n,bs as Dt,bc as Kt,az as Lt,aA as Bt,bC as zt,N as kt,h as Se,cy as Ot,s as Be,cz as jt,bL as tt,bb as $t,c5 as Oe,cA as Ht,b as Ge,p as st,l as Ve,d as c,j as L,k as ze,A as qt,_,bh as he,cB as Wt,cC as Gt,cD as Vt,cE as Ft,u as Xt,cF as Qt,ad as ct,af as Fe,ag as dt,cG as ut,cH as mt,cI as pt,aj as Yt,aR as Me,a0 as Ut,b3 as Ne,aK as te,aW as Jt,cJ as Zt,b_ as ea,b4 as ta,b5 as aa,b6 as ra,aI as na,aQ as ia,b8 as oa,aP as la,cK as sa,w as Ae,cL as ft,bS as ht,c6 as gt,c7 as xt,aN as vt,c9 as yt,c4 as Xe,aF as ca}from"./index-c1e79eac.js";import{b as Ee,d as Qe}from"./index-79c92d7c.js";import{a as da}from"./index-6b4dd17a.js";import{u as Ct,Q as ua,R as ma,S as pa,T as fa,U as ha,V as ga,W as xa,X as va,Y as ya}from"./System-b2753a68.js";import{a as Ca,u as Sa}from"./utils-43a92cc6.js";import{u as Ye}from"./useMutation.esm-db7dfe63.js";import{P as at}from"./index-78e3242e.js";import{S as rt}from"./Skeleton-219c248f.js";import{i as nt,u as ba}from"./useRequest-b4998106.js";import{P as wa}from"./index-0451323f.js";import"./utils.esm-bf1583a2.js";var St=globalThis&&globalThis.__rest||function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(r[a[o]]=t[a[o]]);return r},Ia=function(e){var r=e.prefixCls,a=e.className,o=e.avatar,l=e.title,i=e.description,u=St(e,["prefixCls","className","avatar","title","description"]),s=d.exports.useContext(We),y=s.getPrefixCls,p=y("list",r),g=ee(p+"-item-meta",a),x=j.createElement("div",{className:p+"-item-meta-content"},l&&j.createElement("h4",{className:p+"-item-meta-title"},l),i&&j.createElement("div",{className:p+"-item-meta-description"},i));return j.createElement("div",ce({},u,{className:g}),o&&j.createElement("div",{className:p+"-item-meta-avatar"},o),(l||i)&&x)},Ra=function(e,r){var a=e.prefixCls,o=e.children,l=e.actions,i=e.extra,u=e.className,s=e.colStyle,y=St(e,["prefixCls","children","actions","extra","className","colStyle"]),p=d.exports.useContext(Ue),g=p.grid,x=p.itemLayout,h=d.exports.useContext(We),m=h.getPrefixCls,B=function(){var A;return d.exports.Children.forEach(o,function(R){typeof R=="string"&&(A=!0)}),A&&d.exports.Children.count(o)>1},T=function(){return x==="vertical"?!!i:!B()},w=m("list",a),I=l&&l.length>0&&j.createElement("ul",{className:w+"-item-action",key:"actions"},l.map(function(f,A){return j.createElement("li",{key:w+"-item-action-"+A},f,A!==l.length-1&&j.createElement("em",{className:w+"-item-action-split"}))})),z=g?"div":"li",b=j.createElement(z,ce({},y,g?{}:{ref:r},{className:ee(w+"-item",n({},w+"-item-no-flex",!T()),u)}),x==="vertical"&&i?[j.createElement("div",{className:w+"-item-main",key:"content"},o,I),j.createElement("div",{className:w+"-item-extra",key:"extra"},i)]:[o,I,Dt(i,{key:"extra"})]);return g?j.createElement(Kt,{ref:r,flex:1,style:s},b):b},bt=d.exports.forwardRef(Ra);bt.Meta=Ia;const Ea=bt;var Pa=function(e){var r,a,o=e.listBorderedCls,l=e.componentCls,i=e.paddingLG,u=e.margin,s=e.padding,y=e.listItemPaddingSM,p=e.marginLG,g=e.borderRadiusLG;return a={},n(a,""+o,(r={border:e.lineWidth+"px "+e.lineType+" "+e.colorBorder,borderRadius:g},n(r,l+"-header,"+l+"-footer,"+l+"-item",{paddingInline:i}),n(r,l+"-pagination",{margin:u+"px "+p+"px"}),r)),n(a,""+o+l+"-sm",n({},l+"-item,"+l+"-header,"+l+"-footer",{padding:y})),n(a,""+o+l+"-lg",n({},l+"-item,"+l+"-header,"+l+"-footer",{padding:s+"px "+i+"px"})),a},Ta=function(e){var r,a,o,l,i=e.componentCls,u=e.screenSM,s=e.screenMD,y=e.marginLG,p=e.marginSM,g=e.margin;return l={},n(l,"@media screen and (max-width:"+s+")",(r={},n(r,""+i,n({},i+"-item",n({},i+"-item-action",{marginInlineStart:y}))),n(r,i+"-vertical",n({},i+"-item",n({},i+"-item-extra",{marginInlineStart:y}))),r)),n(l,"@media screen and (max-width: "+u+")",(o={},n(o,""+i,n({},i+"-item",n({flexWrap:"wrap"},i+"-action",{marginInlineStart:p}))),n(o,i+"-vertical",n({},i+"-item",(a={flexWrap:"wrap-reverse"},n(a,i+"-item-main",{minWidth:e.contentWidth}),n(a,i+"-item-extra",{margin:"auto auto "+g+"px"}),a))),o)),l},Aa=function(e){var r,a,o,l,i,u,s=e.componentCls,y=e.antCls,p=e.controlHeight,g=e.minHeight,x=e.paddingSM,h=e.marginLG,m=e.padding,B=e.listItemPadding,T=e.colorPrimary,w=e.listItemPaddingSM,I=e.listItemPaddingLG,z=e.paddingXS,b=e.margin,f=e.colorText,A=e.colorTextDescription,R=e.motionDurationSlow,X=e.lineWidth;return u={},n(u,""+s,ce(ce({},zt(e)),(l={position:"relative","*":{outline:"none"}},n(l,s+"-header, "+s+"-footer",{background:"transparent",paddingBlock:x}),n(l,s+"-pagination",n({marginBlockStart:h,textAlign:"end"},y+"-pagination-options",{textAlign:"start"})),n(l,s+"-spin",{minHeight:g,textAlign:"center"}),n(l,s+"-items",{margin:0,padding:0,listStyle:"none"}),n(l,s+"-item",(o={display:"flex",alignItems:"center",justifyContent:"space-between",padding:B,color:f},n(o,s+"-item-meta",(r={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},n(r,s+"-item-meta-avatar",{marginInlineEnd:m}),n(r,s+"-item-meta-content",{flex:"1 0",width:0,color:f}),n(r,s+"-item-meta-title",{marginBottom:e.marginXXS,color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":n({color:f,transition:"all "+R},"&:hover",{color:T})}),n(r,s+"-item-meta-description",{color:A,fontSize:e.fontSize,lineHeight:e.lineHeight}),r)),n(o,s+"-item-action",(a={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},n(a,"& > li",n({position:"relative",display:"inline-block",padding:"0 "+z+"px",color:A,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),n(a,s+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:X,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),a)),o)),n(l,s+"-empty",{padding:m+"px 0",color:A,fontSize:e.fontSizeSM,textAlign:"center"}),n(l,s+"-empty-text",{padding:m,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),n(l,s+"-item-no-flex",{display:"block"}),l))),n(u,s+"-grid "+y+"-col > "+s+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:b,paddingBlock:0,borderBlockEnd:"none"}),n(u,s+"-vertical "+s+"-item",(i={alignItems:"initial"},n(i,s+"-item-main",{display:"block",flex:1}),n(i,s+"-item-extra",{marginInlineStart:h}),n(i,s+"-item-meta",n({marginBlockEnd:m},s+"-item-meta-title",{marginBlockEnd:x,color:f,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),n(i,s+"-item-action",{marginBlockStart:m,marginInlineStart:"auto","> li":n({padding:"0 "+m+"px"},"&:first-child",{paddingInlineStart:0})}),i)),n(u,s+"-split "+s+"-item",n({borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit},"&:last-child",{borderBlockEnd:"none"})),n(u,s+"-split "+s+"-header",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),n(u,s+"-split"+s+"-empty "+s+"-footer",{borderTop:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),n(u,s+"-loading "+s+"-spin-nested-loading",{minHeight:p}),n(u,s+"-split"+s+"-something-after-last-item "+y+"-spin-container > "+s+"-items > "+s+"-item:last-child",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),n(u,s+"-lg "+s+"-item",{padding:I}),n(u,s+"-sm "+s+"-item",{padding:w}),n(u,s+":not("+s+"-vertical)",n({},s+"-item-no-flex",n({},s+"-item-action",{float:"right"}))),u};const Na=Lt("List",function(t){var e=Bt(t,{listBorderedCls:t.componentCls+"-bordered",minHeight:t.controlHeightLG,listItemPadding:t.paddingContentVertical+"px "+t.paddingContentHorizontalLG+"px",listItemPaddingSM:t.paddingContentVerticalSM+"px "+t.paddingContentHorizontal+"px",listItemPaddingLG:t.paddingContentVerticalLG+"px "+t.paddingContentHorizontalLG+"px"});return[Aa(e),Pa(e),Ta(e)]},{contentWidth:220});var _a=globalThis&&globalThis.__rest||function(t,e){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(r[a[o]]=t[a[o]]);return r},Ue=d.exports.createContext({});Ue.Consumer;function ke(t){var e,r=t.pagination,a=r===void 0?!1:r,o=t.prefixCls,l=t.bordered,i=l===void 0?!1:l,u=t.split,s=u===void 0?!0:u,y=t.className,p=t.children,g=t.itemLayout,x=t.loadMore,h=t.grid,m=t.dataSource,B=m===void 0?[]:m,T=t.size,w=t.header,I=t.footer,z=t.loading,b=z===void 0?!1:z,f=t.rowKey,A=t.renderItem,R=t.locale,X=_a(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),U=a&&kt(a)==="object"?a:{},C=d.exports.useState(U.defaultCurrent||1),k=Se(C,2),ie=k[0],G=k[1],ge=d.exports.useState(U.defaultPageSize||10),de=Se(ge,2),xe=de[0],ae=de[1],re=d.exports.useContext(We),J=re.getPrefixCls,M=re.renderEmpty,Q=re.direction,O={current:1,total:0},N=function(P){return function(F,W){G(F),ae(W),a&&a[P]&&a[P](F,W)}},$=N("onChange"),H=N("onShowSizeChange"),ue=function(P,F){if(!A)return null;var W;return typeof f=="function"?W=f(P):f?W=P[f]:W=P.key,W||(W="list-item-"+F),d.exports.createElement(d.exports.Fragment,{key:W},A(P,F))},Y=function(){return!!(x||a||I)},me=function(P,F){return d.exports.createElement("div",{className:P+"-empty-text"},R&&R.emptyText||F("List"))},D=J("list",o),Pe=Na(D),be=Se(Pe,2),ne=be[0],Te=be[1],Z=b;typeof Z=="boolean"&&(Z={spinning:Z});var q=Z&&Z.spinning,S="";switch(T){case"large":S="lg";break;case"small":S="sm";break}var K=ee(D,(e={},n(e,D+"-vertical",g==="vertical"),n(e,D+"-"+S,S),n(e,D+"-split",s),n(e,D+"-bordered",i),n(e,D+"-loading",q),n(e,D+"-grid",!!h),n(e,D+"-something-after-last-item",Y()),n(e,D+"-rtl",Q==="rtl"),e),y,Te),v=ce(ce(ce({},O),{total:B.length,current:ie,pageSize:xe}),a||{}),oe=Math.ceil(v.total/v.pageSize);v.current>oe&&(v.current=oe);var pe=a?d.exports.createElement("div",{className:D+"-pagination"},d.exports.createElement(Ot,ce({},v,{onChange:$,onShowSizeChange:H}))):null,le=Be(B);a&&B.length>(v.current-1)*v.pageSize&&(le=Be(B).splice((v.current-1)*v.pageSize,v.pageSize));var fe=Object.keys(h||{}).some(function(E){return["xs","sm","md","lg","xl","xxl"].includes(E)}),we=jt(fe),se=d.exports.useMemo(function(){for(var E=0;E<tt.length;E+=1){var P=tt[E];if(we[P])return P}},[we]),ve=d.exports.useMemo(function(){if(!!h){var E=se&&h[se]?h[se]:h.column;if(E)return{width:100/E+"%",maxWidth:100/E+"%"}}},[h==null?void 0:h.column,se]),ye=q&&d.exports.createElement("div",{style:{minHeight:53}});if(le.length>0){var Ie=le.map(function(E,P){return ue(E,P)});ye=h?d.exports.createElement($t,{gutter:h.gutter},d.exports.Children.map(Ie,function(E){return d.exports.createElement("div",{key:E==null?void 0:E.key,style:ve},E)})):d.exports.createElement("ul",{className:D+"-items"},Ie)}else!p&&!q&&(ye=me(D,M||Ht));var V=v.position||"bottom",Ce=d.exports.useMemo(function(){return{grid:h,itemLayout:g}},[JSON.stringify(h),g]);return ne(d.exports.createElement(Ue.Provider,{value:Ce},d.exports.createElement("div",ce({className:K},X),(V==="top"||V==="both")&&pe,w&&d.exports.createElement("div",{className:D+"-header"},w),d.exports.createElement(Oe,ce({},Z),ye,p),I&&d.exports.createElement("div",{className:D+"-footer"},I),x||(V==="bottom"||V==="both")&&pe)))}ke.Item=Ea;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});var Ma=wt.default=Da;function Da(t,e){for(var r=t,a=0;a<e.length;a+=1){if(r==null)return;r=r[e[a]]}return r}var Ka=["title","subTitle","avatar","description","extra","content","actions","type"],La=Ka.reduce(function(t,e){return t.set(e,!0),t},new Map),It={};function Ke(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ke=function(r){return typeof r}:Ke=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ke(t)}Object.defineProperty(It,"__esModule",{value:!0});var Ba=It.default=qa,He=za(d.exports);function Rt(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return Rt=function(){return t},t}function za(t){if(t&&t.__esModule)return t;if(t===null||Ke(t)!=="object"&&typeof t!="function")return{default:t};var e=Rt();if(e&&e.has(t))return e.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var l=a?Object.getOwnPropertyDescriptor(t,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function ka(t,e){return Ha(t)||$a(t,e)||ja(t,e)||Oa()}function Oa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ja(t,e){if(!!t){if(typeof t=="string")return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(t,e)}}function it(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function $a(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,o=!1,l=void 0;try{for(var i=t[Symbol.iterator](),u;!(a=(u=i.next()).done)&&(r.push(u.value),!(e&&r.length===e));a=!0);}catch(s){o=!0,l=s}finally{try{!a&&i.return!=null&&i.return()}finally{if(o)throw l}}return r}}function Ha(t){if(Array.isArray(t))return t}function qa(t,e){var r=e||{},a=r.defaultValue,o=r.value,l=r.onChange,i=r.postState,u=He.useState(function(){return o!==void 0?o:a!==void 0?typeof a=="function"?a():a:typeof t=="function"?t():t}),s=ka(u,2),y=s[0],p=s[1],g=o!==void 0?o:y;i&&(g=i(g));function x(m){p(m),g!==m&&l&&l(m,g)}var h=He.useRef(!0);return He.useEffect(function(){if(h.current){h.current=!1;return}o===void 0&&p(o)},[o]),[g,x]}var Wa=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Ga(t){var e,r=t.prefixCls,a=t.expandIcon,o=a===void 0?c(Wt,{}):a,l=t.onExpand,i=t.expanded,u=t.record,s=o,y="".concat(r,"-row-expand-icon"),p=function(x){l(!i),x.stopPropagation()};return typeof o=="function"&&(s=o({expanded:i,onExpand:l,record:u})),c("span",{className:ee(y,(e={},n(e,"".concat(r,"-row-expanded"),i),n(e,"".concat(r,"-row-collapsed"),!i),e)),onClick:p,children:s})}function Va(t){var e,r,a,o,l,i=t.prefixCls,u=d.exports.useContext(Ge.ConfigContext),s=u.getPrefixCls,y=d.exports.useContext(st),p=y.hashId,g=s("pro-list",i),x="".concat(g,"-row"),h=t.title,m=t.subTitle,B=t.content,T=t.itemTitleRender;t.prefixCls;var w=t.actions;t.item,t.recordKey;var I=t.avatar,z=t.cardProps,b=t.description,f=t.isEditable,A=t.checkbox,R=t.index,X=t.selected,U=t.loading,C=t.expand,k=t.onExpand,ie=t.expandable,G=t.rowSupportExpand,ge=t.showActions,de=t.showExtra,xe=t.type,ae=t.style,re=t.className,J=re===void 0?x:re,M=t.record,Q=t.onRow,O=t.onItem,N=t.itemHeaderRender,$=t.cardActionProps,H=t.extra,ue=Ve(t,Wa),Y=ie||{},me=Y.expandedRowRender,D=Y.expandIcon,Pe=Y.expandRowByClick,be=Y.indentSize,ne=be===void 0?8:be,Te=Y.expandedRowClassName,Z=Ba(!!C,{value:C,onChange:k}),q=Se(Z,2),S=q[0],K=q[1],v=ee((e={},n(e,"".concat(x,"-selected"),!z&&X),n(e,"".concat(x,"-show-action-hover"),ge==="hover"),n(e,"".concat(x,"-type-").concat(xe),!!xe),n(e,"".concat(x,"-editable"),f),n(e,"".concat(x,"-show-extra-hover"),de==="hover"),e),p,x),oe=ee(p,n({},"".concat(J,"-extra"),de==="hover")),pe=S||Object.values(ie||{}).length===0,le=me&&me(M,R,ne,S),fe=d.exports.useMemo(function(){if(!(!w||$==="actions"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:w},"action")]},[w,$]),we=d.exports.useMemo(function(){if(!(!w||!$||$==="extra"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:w},"action")]},[w,$]),se=h||m?L("div",{className:"".concat(v,"-header-title ").concat(p),children:[h&&c("div",{className:"".concat(v,"-title ").concat(p),children:h}),m&&c("div",{className:"".concat(v,"-subTitle ").concat(p),children:m})]}):null,ve=(r=T&&(T==null?void 0:T(M,R,se)))!==null&&r!==void 0?r:se,ye=ve||I||m||b?c(ke.Item.Meta,{avatar:I,title:ve,description:b&&pe&&c("div",{className:"".concat(v,"-description ").concat(p),children:b})}):null,Ie=ee(p,(a={},n(a,"".concat(v,"-item-has-checkbox"),A),n(a,"".concat(v,"-item-has-avatar"),I),n(a,v,v),a)),V=d.exports.useMemo(function(){return I||h?L(ze,{children:[I&&c(qt,{size:22,src:I,className:"".concat(s("list-item-meta-avatar")," ").concat(p)}),c("span",{className:"".concat(s("list-item-meta-title")," ").concat(p),children:h})]}):null},[I,s,p,h]),Ce=z?c(he,_(_(_({bordered:!0,loading:U,hoverable:!0},z),{},{title:V,subTitle:m,extra:fe,actions:we,bodyStyle:_({padding:24},z.bodyStyle)},O==null?void 0:O(M,R)),{},{children:c(rt,{avatar:!0,title:!1,loading:U,active:!0,children:L("div",{className:"".concat(v,"-header ").concat(p),children:[T&&(T==null?void 0:T(M,R,se)),B]})})})):c(ke.Item,_(_(_(_({className:ee(Ie,n({},J,J!==x))},ue),{},{actions:fe,extra:!!H&&c("div",{className:oe,children:H})},Q==null?void 0:Q(M,R)),O==null?void 0:O(M,R)),{},{onClick:function(P){var F,W,De,$e;Q==null||(F=Q(M,R))===null||F===void 0||(W=F.onClick)===null||W===void 0||W.call(F,P),O==null||(De=O(M,R))===null||De===void 0||($e=De.onClick)===null||$e===void 0||$e.call(De,P),Pe&&K(!S)},children:L(rt,{avatar:!0,title:!1,loading:U,active:!0,children:[L("div",{className:"".concat(v,"-header ").concat(p),children:[L("div",{className:"".concat(v,"-header-option ").concat(p),children:[!!A&&c("div",{className:"".concat(v,"-checkbox ").concat(p),children:A}),Object.values(ie||{}).length>0&&G&&Ga({prefixCls:g,expandIcon:D,onExpand:K,expanded:S,record:M})]}),(o=N&&(N==null?void 0:N(M,R,ye)))!==null&&o!==void 0?o:ye]}),pe&&(B||le)&&L("div",{className:"".concat(v,"-content ").concat(p),children:[B,me&&G&&c("div",{className:Te&&Te(M,R,ne),children:le})]})]})}));return z?c("div",{className:ee(p,(l={},n(l,"".concat(v,"-card"),z),n(l,J,J!==x),l)),style:ae,children:Ce}):Ce}var Fa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Xa(t){var e=t.dataSource,r=t.columns,a=t.rowKey,o=t.showActions,l=t.showExtra,i=t.prefixCls,u=t.actionRef,s=t.itemTitleRender,y=t.renderItem,p=t.itemCardProps,g=t.itemHeaderRender,x=t.expandable,h=t.rowSelection,m=t.pagination,B=t.onRow,T=t.onItem,w=t.rowClassName,I=Ve(t,Fa),z=d.exports.useContext(st),b=z.hashId,f=d.exports.useContext(Ge.ConfigContext),A=f.getPrefixCls,R=j.useMemo(function(){return typeof a=="function"?a:function(q,S){return q[a]||S}},[a]),X=Gt(e,"children",R),U=Se(X,1),C=U[0],k=Vt(e.length,_({responsive:!0},m),function(){}),ie=Se(k,1),G=ie[0],ge=j.useMemo(function(){if(m===!1||!G.pageSize||e.length<G.total)return e;var q=G.current,S=q===void 0?1:q,K=G.pageSize,v=K===void 0?10:K,oe=e.slice((S-1)*v,S*v);return oe},[e,G,m]),de=A("pro-list",i),xe=Ft(h,{getRowKey:R,getRecordByKey:C,prefixCls:de,data:e,pageData:ge,expandType:"row",childrenColumnName:"children",locale:{}}),ae=Se(xe,2),re=ae[0],J=ae[1],M=x||{},Q=M.expandedRowKeys,O=M.defaultExpandedRowKeys,N=M.defaultExpandAllRows,$=N===void 0?!0:N,H=M.onExpand,ue=M.onExpandedRowsChange,Y=M.rowExpandable,me=j.useState(function(){return O||($!==!1?e.map(R):[])}),D=Se(me,2),Pe=D[0],be=D[1],ne=j.useMemo(function(){return new Set(Q||Pe||[])},[Q,Pe]),Te=j.useCallback(function(q){var S=R(q,e.indexOf(q)),K,v=ne.has(S);v?(ne.delete(S),K=Be(ne)):K=[].concat(Be(ne),[S]),be(K),H&&H(!v,q),ue&&ue(K)},[R,ne,e,H,ue]),Z=re([])[0];return c(ke,_(_({},I),{},{className:ee(A("pro-list-container",i),b,I.className),dataSource:ge,pagination:m&&G,renderItem:function(S,K){var v,oe,pe,le={className:typeof w=="function"?w(S,K):w};r==null||r.forEach(function(V){var Ce=V.listKey,E=V.cardActionProps;if(!!La.has(Ce)){var P=V.dataIndex||Ce||V.key,F=Array.isArray(P)?Ma(S,P):S[P];E==="actions"&&Ce==="actions"&&(le.cardActionProps=E);var W=V.render?V.render(F,S,K):F;W!=="-"&&(le[V.listKey]=W)}});var fe;Z&&Z.render&&(fe=Z.render(S,S,K)||void 0);var we=((v=u.current)===null||v===void 0?void 0:v.isEditable(_(_({},S),{},{index:K})))||{},se=we.isEditable,ve=we.recordKey,ye=J.has(ve||K),Ie=c(Va,_(_({cardProps:I.grid?_(_(_({},p),I.grid),{},{checked:ye,onChecked:j.isValidElement(fe)?(oe=fe)===null||oe===void 0||(pe=oe.props)===null||pe===void 0?void 0:pe.onChange:void 0}):void 0},le),{},{recordKey:ve,isEditable:se||!1,expandable:x,expand:ne.has(R(S,K)),onExpand:function(){Te(S)},index:K,record:S,item:S,showActions:o,showExtra:l,itemTitleRender:s,itemHeaderRender:g,rowSupportExpand:!Y||Y&&Y(S),selected:J.has(R(S,K)),checkbox:fe,onRow:B,onItem:T}),ve);return y?y(S,K,Ie):Ie}}))}var Qa=function(e){var r,a,o,l,i,u;return n({},e.componentCls,(u={backgroundColor:"transparent"},n(u,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),n(u,"&-row",(i={borderBlockEnd:"1px solid ".concat(e.colorSplit)},n(i,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),n(i,"&:last-child",n({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),n(i,"&:hover",(r={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},n(r,"".concat(e.antCls,"-list-item-action"),{display:"block"}),n(r,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),n(r,"".concat(e.componentCls,"-row-extra"),{display:"block"}),n(r,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),r)),n(i,"&-card",n({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),n(i,"&".concat(e.componentCls,"-row-editable"),n({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),n(i,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),n(i,"&".concat(e.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),n(i,"&".concat(e.componentCls,"-row-type-inline"),n({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),n(i,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),n(i,"&-show-action-hover",(a={},n(a,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),n(a,"&:hover",n({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),a)),n(i,"&-show-extra-hover",n({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),n(i,"&-extra",{display:"none"}),n(i,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),n(i,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),n(i,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),n(i,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),n(i,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),n(i,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),n(i,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),n(i,"&-avatar",{display:"flex"}),n(i,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),n(i,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),n(i,"&-header-option",{display:"flex"}),n(i,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),n(i,"&-no-split",(o={},n(o,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),n(o,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),o)),n(i,"&-bordered",n({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),n(i,"".concat(e.antCls,"-list-vertical"),(l={},n(l,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),n(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),n(l,"&-content",{marginBlock:0,marginInline:0}),n(l,"&-subTitle",{marginBlockStart:8}),n(l,"".concat(e.antCls,"-list-item-extra"),n({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),n(l,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),n(l,"".concat(e.componentCls,"-row-show-extra-hover"),n({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),l)),n(i,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),n(i,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),n(i,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),n({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),n(i,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),i)),u))};function Ya(t){return Xt("ProList",function(e){var r=_(_({},e),{},{componentCls:".".concat(t)});return[Qa(r)]})}var Ua=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Ja(t){var e=t.metas,r=t.split,a=t.footer,o=t.rowKey,l=t.tooltip,i=t.className,u=t.options,s=u===void 0?!1:u,y=t.search,p=y===void 0?!1:y,g=t.expandable,x=t.showActions,h=t.showExtra,m=t.rowSelection,B=m===void 0?!1:m,T=t.pagination,w=T===void 0?!1:T,I=t.itemLayout,z=t.renderItem,b=t.grid,f=t.itemCardProps,A=t.onRow,R=t.onItem,X=t.rowClassName,U=t.locale,C=t.itemHeaderRender,k=t.itemTitleRender,ie=Ve(t,Ua),G=d.exports.useRef();d.exports.useImperativeHandle(ie.actionRef,function(){return G.current});var ge=d.exports.useContext(Ge.ConfigContext),de=ge.getPrefixCls,xe=d.exports.useMemo(function(){var O=[];return Object.keys(e||{}).forEach(function(N){var $=e[N]||{},H=$.valueType;H||(N==="avatar"&&(H="avatar"),N==="actions"&&(H="option"),N==="description"&&(H="textarea")),O.push(_(_({listKey:N,dataIndex:($==null?void 0:$.dataIndex)||N},$),{},{valueType:H}))}),O},[e]),ae=de("pro-list",t.prefixCls),re=Ya(ae),J=re.wrapSSR,M=re.hashId,Q=ee(ae,M,n({},"".concat(ae,"-no-split"),!r));return J(c(Qt,_(_({tooltip:l},ie),{},{actionRef:G,pagination:w,type:"list",rowSelection:B,search:p,options:s,className:ee(ae,i,Q),columns:xe,rowKey:o,tableViewRender:function(N){var $=N.columns,H=N.size,ue=N.pagination,Y=N.rowSelection,me=N.dataSource,D=N.loading;return c(Xa,{grid:b,itemCardProps:f,itemTitleRender:k,prefixCls:t.prefixCls,columns:$,renderItem:z,actionRef:G,dataSource:me||[],size:H,footer:a,split:r,rowKey:o,expandable:g,rowSelection:B===!1?void 0:Y,showActions:x,showExtra:h,pagination:ue,itemLayout:I,loading:D,itemHeaderRender:C,onRow:A,onItem:R,rowClassName:X,locale:U})}})))}var Et=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],a=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Za=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var a=r.call(t),o,l=[],i;try{for(;(e===void 0||e-- >0)&&!(o=a.next()).done;)l.push(o.value)}catch(u){i={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return l},Le=new Set,Re,ot={xs:0,sm:576,md:768,lg:992,xl:1200};function lt(){var t,e,r=Re;if(Pt(),r!==Re)try{for(var a=Et(Le),o=a.next();!o.done;o=a.next()){var l=o.value;l()}}catch(i){t={error:i}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}var qe=!1;function Pt(){var t,e,r=window.innerWidth,a={},o=!1;try{for(var l=Et(Object.keys(ot)),i=l.next();!i.done;i=l.next()){var u=i.value;a[u]=r>=ot[u],a[u]!==Re[u]&&(o=!0)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}o&&(Re=a)}function er(){nt&&!qe&&(Re={},Pt(),window.addEventListener("resize",lt),qe=!0);var t=Za(d.exports.useState(Re),2),e=t[0],r=t[1];return d.exports.useEffect(function(){if(!!nt){var a=function(){r(Re)};return Le.add(a),function(){Le.delete(a),Le.size===0&&(window.removeEventListener("resize",lt),qe=!1)}}},[]),e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",ct(void 0));Je.debugLabel="atomRoleListActions";const Ze=()=>Fe(Je),tr=()=>da(Je),je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",Ca({open:!1,roleId:0}));je.debugLabel="atomRoleDetails";const ar=()=>Sa(je),rr=()=>{const t=dt(je);return e=>{t({open:!0,roleId:e})}},_e=()=>Fe(je),et=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomSearchParams",ct({}));et.debugLabel="atomSearchParams";const nr=()=>Fe(et),ir=()=>dt(et),Tt="sysRole",At=[Tt,"details"],Nt=t=>{const{roleId:e}=_e(),r=Ct(At,()=>ua({roleId:e}),{onSuccess:t,enabled:!1});return d.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},_t=[Tt,"tree"],or=t=>{const{roleId:e}=_e(),r=Ct(_t,async()=>{const{menus:a,checkedKeys:o}=await ma({roleId:e});return{treeData:a,selectedMenuIds:o,selectedTreeData:ut(a,o),allMenuIds:mt(a),allExpandedKeys:pt(a)}},{onSuccess:a=>{t(a.selectedTreeData)},enabled:!1});return d.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},Mt=t=>{const e=Yt();return Ye(async r=>{const a=e.getQueryData(At),o=e.getQueryData(_t);await pa({roleId:a.roleId,roleKey:a.roleKey,roleName:a.roleName,roleSort:a.roleSort,status:a.status,menuIds:o.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...r})},{onSuccess:()=>{t(),Me.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const lr=()=>{const{canEditSysRole:t}=Ee(),e=Ut(),{roleId:r}=_e();return c(Ne,{accessible:t,children:c(te,{type:"primary",ghost:!0,onClick:()=>e(`/system/role-auth/${r}`),icon:c(Jt,{}),children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const sr=()=>{var o;const{canAddSysRole:t}=Ee(),e=d.exports.useRef(),r=Ze(),{data:a}=Qe("sys_normal_disable");return c(Ne,{accessible:t,children:c(Zt,{title:"新增角色",trigger:c(te,{type:"primary",icon:c(ea,{}),children:"新增"}),formRef:e,onFinish:async l=>{var i;return await fa({...l,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),r==null||r.reload(),Me.success("新增成功"),(i=e.current)==null||i.resetFields(),!0},width:500,layoutType:"ModalForm",columns:[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:(o=a==null?void 0:a.mapData)!=null?o:{},valueType:"radio",formItemProps:{initialValue:a==null?void 0:a.defaultValue,required:!0,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const cr=()=>{const{canRemoveSysRole:t}=Ee(),e=Ze(),r=ar(),{roleId:a}=_e();return c(Ne,{accessible:t,children:c(te,{danger:!0,ghost:!0,icon:c(ta,{}),onClick:()=>aa.confirm({title:"删除角色",content:`确定删除角色编号为 ${a} 的数据吗？`,onOk:async()=>{var l;await ha({roleIds:a}),e==null||e.reload(),(l=e==null?void 0:e.clearSelected)==null||l.call(e),r(),Me.success("删除成功")}}),children:"删除"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const dr=()=>{const{canExportSysRole:t}=Ee(),e=nr(),{isLoading:r,mutate:a}=Ye(()=>ga(e),{onSuccess:()=>{Me.success("导出成功")}});return c(Ne,{accessible:t,children:c(te,{ghost:!0,type:"primary",icon:c(ra,{}),loading:r,onClick:()=>a(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ur=()=>{var g;const[t,e]=d.exports.useState([]),[r]=na.useForm(),a=Ee(),{data:o}=Qe("sys_normal_disable"),l=Ze(),{data:i,isFetching:u,refetch:s}=Nt(()=>{e([]),r.resetFields()}),{mutateAsync:y}=Mt(()=>{s(),l==null||l.reload()}),p=a.canEditSysRole&&i?{form:r,editableKeys:t,onChange:(x,h)=>{e(x);const m=x[0];r.setFieldsValue({[m]:h[m]})},onSave:async(x,h)=>{await y({[x]:h[x]})}}:void 0;return L(Oe,{spinning:u,children:[c(at,{column:2,columns:[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],dataSource:i}),c(ia,{}),c(at,{column:2,columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:(g=o==null?void 0:o.mapData)!=null?g:{},valueType:"radio",formItemProps:{initialValue:o==null?void 0:o.defaultValue,required:!0,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"请输入显示排序"}]}},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}],dataSource:i,editable:p})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const mr=()=>{var o;const t=tr(),e=rr(),r=ir(),{data:a}=Qe("sys_normal_disable");return c(Ja,{ghost:!0,rowKey:"roleId",actionRef:t,metas:{title:{title:"角色名称",dataIndex:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:(o=a==null?void 0:a.mapData)!=null?o:{}},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}},tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:l})=>{e(l)}},search:{filterType:"light"},options:{setting:!1,fullScreen:!1,density:!1,reload:!0},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:async(...l)=>{const i=oa(...l);return r(i),await xa(i)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const pr=()=>{const[t,e]=d.exports.useState([]),[r,a]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,u]=d.exports.useState([]),[s,y]=d.exports.useState(!1),[p,g]=d.exports.useState(!0),[x,h]=d.exports.useState(),m=d.exports.useRef(),{canEditSysRole:B}=Ee(),{open:T,roleId:w}=_e(),{refetch:I}=Nt(({dataScope:C})=>{var k;h(C),(k=m.current)==null||k.setFieldsValue({dataScope:C})}),{loading:z,refresh:b,data:f}=ba(async()=>{const{depts:C,checkedKeys:k}=await va({roleId:w});return{treeData:C,selectedMenuIds:k,selectedTreeData:ut(C,k),allMenuIds:mt(C),allExpandedKeys:pt(C)}},{ready:T,refreshDeps:[w],onSuccess:C=>{a(!1),u(C.selectedTreeData)}}),{isLoading:A,mutate:R}=Ye(async()=>{await ya({roleId:w,dataScope:x,deptIds:t})},{onSuccess:()=>{b(),I(),Me.success("保存成功")}}),X=o.length===(f==null?void 0:f.allExpandedKeys.length),U=C=>{var k;if(C||p){e((k=f==null?void 0:f.allMenuIds)!=null?k:[]);return}e([])};return d.exports.useEffect(()=>{if((f==null?void 0:f.allMenuIds.length)===t.length){y(!0),g(!1);return}if(t.length===0){y(!1),g(!1);return}g(!0)},[f==null?void 0:f.allMenuIds,t]),L(ze,{children:[L("header",{className:"flex justify-between items-start flex-wrap",children:[c(la,{formRef:m,submitter:!1,layout:"horizontal",children:c(wa,{name:"dataScope",label:"数据权限范围",fieldProps:{options:sa,onChange:C=>{h(C)}},readonly:!r})}),c(Ne,{accessible:B,children:r?L(Ae,{children:[c(te,{loading:A,onClick:()=>{var C;a(!1),u((C=f==null?void 0:f.selectedTreeData)!=null?C:[])},children:"取消编辑"}),c(te,{type:"primary",ghost:!0,icon:c(ft,{}),loading:A,onClick:()=>R(),children:"保存"})]}):c(te,{type:"primary",ghost:!0,icon:c(ht,{}),onClick:()=>{var C,k;a(!0),e((C=f==null?void 0:f.selectedMenuIds)!=null?C:[]),u((k=f==null?void 0:f.treeData)!=null?k:[])},children:"编辑数据权限"})})]}),x==="2"&&L(ze,{children:[L(Ae,{wrap:!0,className:"mb-2",children:[i.length>0&&c(te,{size:"small",icon:X?c(gt,{}):c(xt,{}),onClick:()=>l(X?[]:f.allExpandedKeys),children:X?"全部折叠":"全部展开"}),r&&c(vt,{indeterminate:p,onChange:C=>U(C.target.checked),checked:s,children:"全选/全不选"})]}),c(Oe,{spinning:z,children:i.length>0?c(yt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:i,expandedKeys:o,onExpand:C=>l(C),onCheck:C=>{e(C.checked)}}):c(Xe,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const fr=()=>{const[t,e]=d.exports.useState([]),[r,a]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,u]=d.exports.useState([]),[s,y]=d.exports.useState(!1),[p,g]=d.exports.useState(!0),{canEditSysRole:x}=Ee(),{isFetching:h,data:m,refetch:B}=or(b=>{a(!1),u(b)}),{isLoading:T,mutate:w}=Mt(()=>{B()}),I=o.length===(m==null?void 0:m.allExpandedKeys.length),z=b=>{var f;if(b||p){e((f=m==null?void 0:m.allMenuIds)!=null?f:[]);return}e([])};return d.exports.useEffect(()=>{if((m==null?void 0:m.allMenuIds.length)===t.length){y(!0),g(!1);return}if(t.length===0){y(!1),g(!1);return}g(!0)},[m==null?void 0:m.allMenuIds,t]),L(ze,{children:[L("header",{className:"flex justify-between mb-2",children:[c(Ae,{wrap:!0,children:i.length>0&&c(te,{size:"small",icon:I?c(gt,{}):c(xt,{}),onClick:()=>l(I?[]:m.allExpandedKeys),children:I?"全部折叠":"全部展开"})}),c(Ne,{accessible:x,children:r?L(Ae,{wrap:!0,children:[c(te,{loading:T,onClick:()=>{var b;a(!1),u((b=m==null?void 0:m.selectedTreeData)!=null?b:[])},children:"取消编辑"}),c(te,{type:"primary",ghost:!0,icon:c(ft,{}),loading:T,onClick:()=>w({menuIds:t}),children:"保存"})]}):c(te,{type:"primary",ghost:!0,icon:c(ht,{}),onClick:()=>{var b,f;a(!0),e((b=m==null?void 0:m.selectedMenuIds)!=null?b:[]),u((f=m==null?void 0:m.treeData)!=null?f:[])},children:"编辑菜单权限"})})]}),L(Oe,{spinning:h,children:[c("div",{className:"pl-1 mb-2",children:r&&c(vt,{indeterminate:p,onChange:b=>z(b.target.checked),checked:s,children:"全选/全不选"})}),i.length>0?c(yt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:i,expandedKeys:o,onExpand:b=>l(b),onCheck:b=>{e(b.checked)}}):c(Xe,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Er=()=>{const{md:t,xl:e}=er(),{open:r}=_e();return c(ca,{children:L(he,{ghost:!0,gutter:[16,16],wrap:!t,children:[c(he,{title:"角色列表",colSpan:"450px",extra:L(Ae,{children:[c(dr,{}),c(sr,{})]}),children:c(mr,{})}),r?L(he,{split:"horizontal",title:"角色详情",extra:L(Ae,{children:[c(cr,{}),c(lr,{})]}),children:[c(he,{children:c(ur,{})}),L(he,{split:e?"vertical":"horizontal",children:[c(he,{children:c(fr,{})}),c(he,{children:c(pr,{})})]})]}):c(he,{title:"角色详情",className:"h-full",children:c(Xe,{description:"点击选择左侧角色查看详情"})})]})})};export{Er as default};
