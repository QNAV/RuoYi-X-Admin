import{j as e,B as A,b as C}from"./antdProComponents-adac7b3f.js";import{aF as T,aG as b,aH as M,A as y,L as O,d as j,aI as B,m as w,B as F}from"./index-3a0ef4a4.js";import{u as E,a as P,O as x,b as R,c as h,d as I,e as S,f as V,g as k,B as q}from"./index-2dd22555.js";import{u as G}from"./useRequest-7829beda.js";import{bm as H,r as u}from"./antd-aee96f72.js";import"./iconPark-395d73b8.js";import"./wangEditor-93aafe29.js";import"./useMutation-8cb3539a.js";import"./utils-a67a12c8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const L=()=>{const{message:s}=H.useApp(),t=u.useRef(),o=E(),{open:c,actionType:r,ossConfigId:n}=P(),d=x[r],l=R(),m=()=>{var a;r===h.Edit&&((a=t.current)==null||a.resetFields()),l()},[,f]=u.useTransition();G(()=>T({ossConfigId:n}),{ready:c&&h.Edit&&!!n,onSuccess:a=>{f(()=>{var i;(i=t.current)==null||i.setFieldsValue(a)})},refreshDeps:[c]});const g=async a=>{var i;r===h.Add?await b(a):await M({ossConfigId:n,...a}),o==null||o.reload(),(i=t.current)==null||i.resetFields(),l(),s.success(`${d}成功`)},p=I();return e(A,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:m},width:680,open:c,onFinish:g,columns:p})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const $=()=>{const s=S();return e(y,{accessKey:"system:oss:add",children:e(O,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const v=({selectedRowKeys:s})=>e(q,{disabled:s.length===0,batch:!0,ossConfigIds:s}),D=()=>{const s=V(),t=k();return e(j,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...o)=>B(w(...o)),toolbar:{actions:[e($,{},"ButtonAdd")]},tableAlertOptionRender:v})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const Z=()=>C(F,{children:[e(D,{}),e(L,{})]});export{Z as default};
