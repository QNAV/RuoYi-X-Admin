import{ad as P,af as x,ag as j,r as T,d as a,b3 as d,j as b,bZ as D,aR as m,aK as l,b_ as v,a0 as S,bm as O,bS as B,b6 as F,b$ as V,b5 as k,b4 as q,b7 as L,b8 as _,k as N,aF as X}from"./index-324581e1.js";import{b as h,d as R}from"./index-0faee625.js";import{a as Y}from"./index-8805c201.js";import{a as K,u as $}from"./utils-abad75c4.js";import{n as G,o as H,p as Q,q as W,r as Z,t as z}from"./System-c33174c5.js";import{P as M}from"./index-1ac72251.js";import{P as J}from"./index-8e1b5495.js";import{P as U}from"./index-a615f312.js";import{u as w}from"./useMutation.esm-34ecafff.js";import"./utils.esm-d0713da8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomMainTableActions",P(void 0));A.debugLabel="atomMainTableActions";const E=()=>x(A),ee=()=>Y(A),p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomAddOrEditModal",K({actionType:"add",open:!1}));p.debugLabel="atomAddOrEditModal";const te=()=>x(p),ae=()=>$(p),se=()=>{const e=j(p);return()=>{e({actionType:"add",open:!0})}},ce=()=>{const e=j(p);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var C;const e=T.exports.useRef(),{canAddSysDict:t,canEditSysDict:c}=h(),o=E(),{open:r,actionType:s,record:g}=te(),y=ae(),f=()=>{var n;s==="edit"&&((n=e.current)==null||n.resetFields()),y()},{data:i}=R("sys_normal_disable");return T.exports.useEffect(()=>{if(r&&s==="edit"){const n=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(g),clearTimeout(n)},0)}},[r]),a(d,{accessible:t||c,children:b(D,{formRef:e,width:500,title:s==="add"?"新增字典类型":"编辑字典类型",open:r,modalProps:{onCancel:f,okText:"提交"},onFinish:async n=>{var u;s==="add"?(await G(n),m.success("新增成功")):(await H({...n,dictId:g.dictId}),m.success("编辑成功")),o==null||o.reload(),y(),(u=e.current)==null||u.resetFields()},children:[a(M,{name:"dictName",label:"字典名称",required:!0,rules:[{required:!0}]}),a(M,{name:"dictType",label:"字典类型",required:!0,rules:[{required:!0}]}),a(J.Group,{name:"status",label:"状态",valueEnum:(C=i==null?void 0:i.mapData)!=null?C:{},initialValue:i==null?void 0:i.defaultValue}),a(U,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const{canAddSysDict:e}=h(),t=se();return a(d,{accessible:e,children:a(l,{icon:a(v,{}),type:"primary",onClick:t,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({dictType:e})=>{const t=S();return a(l,{type:"link",icon:a(O,{}),onClick:()=>t(e),children:"查看"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({record:e})=>{const t=ce(),{canEditSysDict:c}=h();return a(d,{accessible:c,children:a(l,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({searchParams:e})=>{const{canExportSysDict:t}=h(),{isLoading:c,mutate:o}=w(()=>Q(e),{onSuccess:()=>{m.success("导出成功")}});return a(d,{accessible:t,children:a(l,{ghost:!0,type:"primary",icon:a(F,{}),loading:c,onClick:()=>o(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const{canRemoveSysDict:e}=h();return a(d,{accessible:e,children:a(l,{danger:!0,icon:a(V,{}),onClick:()=>{k.confirm({title:"确定要刷新缓存吗？",content:"刷新缓存后，所有字典数据将重新加载",onOk:async()=>{await W(),m.success("刷新成功")}})},children:"刷新缓存"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const I=({dictId:e,disabled:t,isBatch:c})=>{const o=c?"批量删除":"删除",{canRemoveSysDict:r}=h(),s=E(),{mutateAsync:g,isLoading:y}=w(()=>Z({dictIds:e}),{onSuccess:()=>{var i;s==null||s.reload(),(i=s==null?void 0:s.clearSelected)==null||i.call(s),m.success("删除成功")}});return a(d,{accessible:r,children:a(l,{type:"link",danger:!0,disabled:t,icon:a(q,{}),onClick:()=>{k.confirm({title:"删除字典",content:`确定删除字典编号为 ${e} 的字典吗？`,onOk:async()=>g(),okButtonProps:{loading:y}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=()=>{const{data:e}=R("sys_normal_disable");return[{title:"字典编号",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"字典名称",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"字典类型",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e==null?void 0:e.mapData},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,c)=>b(N,{children:[a(re,{dictType:c.dictType}),a(ne,{record:c}),a(I,{dictId:c.dictId})]})}]},ue=({selectedRows:e})=>a(I,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),me=()=>{const e=ee(),t=he(),[c,o]=T.exports.useState({});return a(L,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:ue,request:async(...r)=>{const s=_(...r);return o(s),await z(s)},toolbar:{actions:[a(le,{},"ButtonRefresh"),a(de,{searchParams:c},"ButtonExport"),a(ie,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const je=()=>b(X,{children:[a(me,{}),a(oe,{})]});export{je as default};
