import{Q as P,X as x,V as N,aS as O,aj as k,r as m,a4 as R,j as a,aT as X,f as Y,b as M,al as q,aU as $,aV as K,p as E,Y as f,ao as W,ap as G,aW as Q,a0 as H,aX as U,a1 as Z,$ as _,aY as z,aZ as J,a_ as ee,a2 as te,a3 as w,a$ as ae,aI as se,q as oe,B as ce}from"./index-25c53959.js";import{a as ie,u as re}from"./utils-5f568976.js";import{P as p}from"./index-17b7e420.js";import{P as le}from"./index-8e2d7170.js";import{P as B}from"./index-c552e3f7.js";import{P as ne}from"./index-b383028a.js";import{P as de}from"./index-fe768a44.js";import{u as I}from"./useMutation-8db3a36b.js";import{u as ue}from"./useRequest-4d550859.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=new Map([["none",{text:"无"}],["default",{text:"默认",status:"Default"}],["error",{text:"错误",status:"Error"}],["success",{text:"成功",status:"Success"}],["processing",{text:"进行中",status:"Processing"}],["warning",{text:"警告",status:"Warning"}]]);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",P(void 0));S.debugLabel="atomMainTableActions";const F=()=>x(S),he=()=>N(S),j=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",P({dictType:"",dictName:""}));j.debugLabel="atomCurDictType";const me=()=>x(j),pe=()=>O(j);var C=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(C||{});const Te={[0]:"新增",[1]:"编辑"},T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",ie({actionType:0,open:!1}));T.debugLabel="atomAddOrEditModal";const ge=()=>x(T),ye=()=>re(T),Ae=()=>{const e=k(T);return()=>{e({actionType:0,open:!0})}},be=()=>{const e=k(T);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const e=m.useRef(),t=F(),{open:i,actionType:s,record:h}=ge(),u=ye(),g=()=>{var o;s===C.Edit&&((o=e.current)==null||o.resetFields()),u()},d=Te[s],{dictType:y,dictName:A}=me(),{defaultValueSysNormalDisable:l,valueEnumSysNormalDisable:c}=R(),n=async o=>{var r;s===C.Add?await $(o):await K({...o,dictCode:h.dictCode}),u(),(r=e.current)==null||r.resetFields(),E.success(`${d}成功`),t==null||t.reload()};return m.useEffect(()=>{i&&m.startTransition(()=>{var o,r;s===C.Add?(o=e.current)==null||o.setFieldsValue({dictType:y,dictName:A}):(r=e.current)==null||r.setFieldsValue({...h,dictName:A})})},[i]),a(X,{accessible:!0,fallback:a(Y,{children:"111"}),children:M(q,{formRef:e,width:500,title:`${d}字典数据`,open:i,modalProps:{onCancel:g,okText:"提交"},onFinish:n,children:[a(p,{name:"dictName",label:"字典名称",readonly:!0}),a(p,{name:"dictType",label:"字典类型",hidden:!0}),a(p,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"样式属性"}),a(le,{name:"dictSort",label:"显示排序",initialValue:0}),a(B,{name:"listClass",label:"回显样式",valueEnum:V,initialValue:"default"}),a(ne.Group,{name:"status",label:"状态",valueEnum:c,initialValue:l}),a(de,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>{const e=Ae();return a(f,{accessKey:"system:dict:edit",children:a(W,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=({record:e})=>{const t=be();return a(f,{accessKey:"system:dict:edit",children:a(G,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=({searchParams:e})=>{const{isLoading:t,mutate:i}=I(Q,{onSuccess:()=>{E.success("导出成功")}});return a(f,{accessKey:"system:dict:export",children:a(H,{loading:t,onClick:()=>i(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=({dictCode:e,disabled:t,batch:i})=>{const s=F(),{mutateAsync:h,isLoading:u}=I(U,{onSuccess:()=>{var d;s==null||s.reload(),(d=s==null?void 0:s.clearSelected)==null||d.call(s),E.success("删除成功")}});return a(f,{accessKey:"system:dict:edit",children:a(Z,{batch:i,disabled:t,onClick:()=>{_.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>h({dictCodes:e}),okButtonProps:{loading:u}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=()=>{const{valueEnumSysNormalDisable:e}=R();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:V},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,i)=>M(oe,{children:[a(xe,{record:i}),a(L,{dictCode:[i.dictCode]})]})}]},Se=({selectedRowKeys:e})=>a(L,{disabled:e.length===0,batch:!0,dictCode:e});let D;const je=()=>{const e=z(),[t,i]=m.useState({}),s=he(),h=Ee(),u=m.useRef(),[g,d]=pe(),{data:y,run:A}=ue(async()=>(await J()).reduce((c,n)=>(c[n.dictType]=n.dictName,c),{}),{ready:!!e.dictType,onSuccess:l=>{const c=e.dictType;d({dictType:c,dictName:l[c]}),m.startTransition(()=>{var n,o,r,b,v;(n=u.current)==null||n.setFieldsValue({dictType:c}),(r=(o=s==null?void 0:s.current)==null?void 0:o.clearSelected)==null||r.call(o),(v=(b=s.current)==null?void 0:b.reloadAndRest)==null||v.call(b)})}});return ee(()=>{e.dictType===void 0||e.dictType===D||(D=e.dictType,A())}),a(te,{rowKey:"dictCode",actionRef:s,columns:h,params:g,request:async(...l)=>{const c=w(...l);return i(c),await ae(w(...l))},tableAlertOptionRender:Se,manualRequest:!0,toolbar:{actions:[a(Me,{searchParams:t},"ButtonExport"),a(fe,{},"ButtonAdd")]},headerTitle:a(se,{formRef:u,children:a(B,{name:"dictType",valueEnum:y??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:l=>{var c,n,o,r;(n=(c=s==null?void 0:s.current)==null?void 0:c.clearSelected)==null||n.call(c),(r=(o=s.current)==null?void 0:o.reset)==null||r.call(o),d({dictType:l,dictName:y[l]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>M(ce,{children:[a(je,{}),a(Ce,{})]});export{Fe as default};
