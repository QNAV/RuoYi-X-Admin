import{Q as v,X as x,V as P,aj as M,r as l,ak as E,j as a,Y as d,b as p,al as w,am as S,an as O,p as g,ao as K,ap as V,aq as F,a0 as Y,ar as N,f as q,as as L,$ as j,at as X,a1 as $,a2 as D,a3 as Q,au as W,q as G,B as H}from"./index-25c53959.js";import{D as C}from"./index-46e8e5b4.js";import{a as U,u as z}from"./utils-5f568976.js";import{P as J}from"./index-b383028a.js";import{P as Z}from"./index-fe768a44.js";import{P as f}from"./index-17b7e420.js";import{u as y}from"./useMutation-8db3a36b.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",v(void 0));A.debugLabel="atomMainTableActions";const k=()=>x(A),_=()=>P(A);var u=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(u||{});const ee={[C.Add]:"新增",[C.Edit]:"编辑"},h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",U({open:!1,actionType:0}));h.debugLabel="atomAddOrEditModal";const te=()=>x(h),ae=()=>{const e=M(h);return()=>{e({open:!0,actionType:0})}},oe=()=>{const e=M(h);return t=>{e({open:!0,actionType:1,record:t})}},se=()=>z(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=l.useRef(),t=k(),{defaultValueSysYesNo:s,valueEnumSysYesNo:o}=E(),{open:n,actionType:c,record:m}=te(),r=se(),I=()=>{var i;c===u.Edit&&((i=e.current)==null||i.resetFields()),r()},T=ee[c],R=async i=>{var b;c===u.Add?await S(i):await O({...i,configId:m.configId}),r(),(b=e.current)==null||b.resetFields(),t==null||t.reload(),g.success(`${T}成功`)};return l.useEffect(()=>{n&&c===u.Edit&&l.startTransition(()=>{var i;(i=e.current)==null||i.setFieldsValue(m)})},[n]),a(d,{accessKey:["system:config:add","system:config:edit"],children:p(w,{formRef:e,width:500,title:`${T}参数设置`,open:n,modalProps:{onCancel:I,okText:"提交"},onFinish:R,children:[a(f,{name:"configName",label:"参数名称",rules:[{required:!0}]}),a(f,{name:"configKey",label:"参数键名",rules:[{required:!0}]}),a(f,{name:"configValue",label:"参数键值",rules:[{required:!0}]}),a(J.Group,{name:"configType",label:"系统内置",valueEnum:o,initialValue:s}),a(Z,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const e=ae();return a(d,{accessKey:"system:config:add",children:a(K,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({record:e})=>{const t=oe();return a(d,{accessKey:"system:config:edit",children:a(V,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({searchParams:e})=>{const{isLoading:t,mutate:s}=y(()=>F(e),{onSuccess:()=>{g.success("导出成功")}});return a(d,{accessKey:"system:config:export",children:a(Y,{loading:t,onClick:()=>s()})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const{isLoading:e,mutateAsync:t}=y(N,{onSuccess:()=>{g.success("刷新成功")}});return a(q,{danger:!0,icon:a(L,{}),onClick:()=>{j.confirm({title:"操作确认",content:"确定刷新缓存吗？",onOk:()=>t({}),okButtonProps:{loading:e}})},children:"刷新缓存"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=({configId:e,disabled:t,batch:s})=>{const o=k(),{mutateAsync:n,isLoading:c}=y(X,{onSuccess:()=>{var r;o==null||o.reload(),(r=o==null?void 0:o.clearSelected)==null||r.call(o),g.success("删除成功")}});return a(d,{accessKey:"system:config:remove",children:a($,{batch:s,disabled:t,onClick:()=>{j.confirm({title:"操作确认",content:`确定删除参数编号为 ${e} 的参数吗？`,onOk:()=>n({configIds:e}),okButtonProps:{loading:c}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=()=>{const{valueEnumSysYesNo:e}=E();return[{title:"参数主键",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},{title:"参数名称",dataIndex:"configName",key:"configName",valueType:"text"},{title:"参数键名",dataIndex:"configKey",key:"configKey",valueType:"text"},{title:"参数键值",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},{title:"系统内置",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",fixed:"right",render:(t,s)=>p(G,{children:[a(ne,{record:s}),a(B,{configId:[s.configId]})]})}]},le=({selectedRows:e})=>a(B,{disabled:e.length===0,batch:!0,configId:e.map(t=>t.configId)}),ue=()=>{const e=_(),t=he(),[s,o]=l.useState({});return a(D,{rowKey:"configId",actionRef:e,columns:t,tableAlertOptionRender:le,request:async(...n)=>{const c=Q(...n);return o(c),await W(c)},toolbar:{actions:[a(de,{},"ButtonRefresh"),a(re,{searchParams:s},"ButtonExport"),a(ie,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=()=>p(H,{children:[a(ue,{}),a(ce,{})]});export{be as default};
