import{aX as v,aY as f,aj as C,r as u,cs as M,d as a,ct as r,j as g,b_ as k,cu as R,aH as n,cv as w,cw as I,cx as P,cy as S,cz as O,a0 as D,cA as F,cB as K,aA as N,c3 as q,a_ as x,cC as L,cD as V,b0 as X,b1 as Y,cE as Q,h as H,av as W}from"./index-42a1b8df.js";import{a as _}from"./index-d292b3b8.js";import{a as $,u as z}from"./utils-909b34c4.js";import{P as b}from"./index-dc31d23d.js";import{P as G}from"./index-9aebdedb.js";import{P as J}from"./index-98245e16.js";import{u as p}from"./useMutation.esm-447aa131.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomMainTableActions",v(void 0));y.debugLabel="atomMainTableActions";const j=()=>f(y),U=()=>_(y);var m=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(m||{});const Z={[0]:"新增",[1]:"编辑"},h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomAddOrEditModal",$({actionType:0,open:!1}));h.debugLabel="atomAddOrEditModal";const ee=()=>f(h),te=()=>z(h),ae=()=>{const e=C(h);return()=>{e({actionType:0,open:!0})}},se=()=>{const e=C(h);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{const e=u.exports.useRef(),t=j(),{open:o,actionType:s,record:d}=ee(),i=te(),T=()=>{var c;s===m.Edit&&((c=e.current)==null||c.resetFields()),i()},{defaultValueSysNormalDisable:l,valueEnumSysNormalDisable:B}=M();return u.exports.useEffect(()=>{o&&s===m.Edit&&u.exports.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(d)})},[o]),a(r,{accessKey:["system:dict:add","system:dict:edit"],children:g(k,{formRef:e,width:500,title:`${Z[s]}字典类型`,open:o,modalProps:{onCancel:T,okText:"提交"},onFinish:async c=>{var A;s===m.Add?(await R(c),n.success("新增成功")):(await w({...c,dictId:d.dictId}),n.success("编辑成功")),t==null||t.reload(),i(),(A=e.current)==null||A.resetFields()},children:[a(b,{name:"dictName",label:"字典名称",required:!0,rules:[{required:!0}]}),a(b,{name:"dictType",label:"字典类型",required:!0,rules:[{required:!0}]}),a(G.Group,{name:"status",label:"状态",valueEnum:B,initialValue:l}),a(J,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=ae();return a(r,{accessKey:"system:dict:add",children:a(I,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=({record:e})=>{const t=se();return a(r,{accessKey:"system:dict:edit",children:a(P,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({searchParams:e})=>{const{isLoading:t,mutate:o}=p(()=>S(e),{onSuccess:()=>{n.success("导出成功")}});return a(r,{accessKey:"system:dict:export",children:a(O,{loading:t,onClick:()=>o()})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({dictType:e})=>{const t=D();return a(r,{accessKey:"system:dict:query",children:a(F,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{const{mutateAsync:e,isLoading:t}=p(()=>K(),{onSuccess:()=>n.success("刷新成功")});return a(r,{accessKey:"system:post:edit",children:a(N,{danger:!0,icon:a(q,{}),onClick:()=>{x.confirm({title:"操作确认",content:"刷新缓存后，所有字典数据将重新加载",onOk:()=>e(),okButtonProps:{loading:t}})},children:"刷新缓存"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({dictId:e,disabled:t,batch:o})=>{const s=j(),{mutateAsync:d,isLoading:i}=p(()=>L({dictIds:e}),{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),n.success("删除成功")}});return a(r,{accessKey:"system:dict:remove",children:a(V,{batch:o,disabled:t,onClick:()=>{x.confirm({title:"操作确认",content:`确定删除字典编号为 ${e} 的字典吗？`,onOk:async()=>d(),okButtonProps:{loading:i}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=()=>{const{valueEnumSysNormalDisable:e}=M();return[{title:"字典编号",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"字典名称",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"字典类型",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,o)=>g(H,{children:[a(de,{dictType:o.dictType}),a(ie,{record:o}),a(E,{dictId:o.dictId})]})}]},le=({selectedRows:e})=>a(E,{disabled:e.length===0,batch:!0,dictId:e.map(t=>t.dictId).join(",")}),ue=()=>{const e=U(),t=he(),[o,s]=u.exports.useState({});return a(X,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:le,request:async(...d)=>{const i=Y(...d);return s(i),await Q(i)},toolbar:{actions:[a(ne,{},"ButtonRefresh"),a(re,{searchParams:o},"ButtonExport"),a(ce,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>g(W,{children:[a(ue,{}),a(oe,{})]});export{fe as default};
