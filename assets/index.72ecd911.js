import{h as k,l as T,n as E,r as y,j as a,af as l,g as p,aA as I,Y as d,$ as A,aB as R,aC as B,aD as w,ag as h,aE as P,aF as v,aj as D,aG as O,ai as b,ah as N,F as x,ak as V,al as Y,am as q,I as K}from"./index.4997ceb8.js";import{a as g}from"./index.c653f67a.js";import{a as L}from"./index.55550221.js";import{a as X,u as W}from"./utils.d4102d58.js";import{S as G,a as H,b as U,c as $,d as z,e as J}from"./SysConfigService.c9be3df1.js";import{P as Q}from"./index.e34f98ef.js";import{u as M}from"./useMutation.esm.b5520a87.js";import"./useQuery.esm.d56494f0.js";import"./utils.esm.ee17070a.js";import"./SysLoginService.6fba7e7d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",k(void 0));F.debugLabel="atomMainTableActions";const S=()=>T(F),Z=()=>L(F),m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",X({open:!1,actionType:"add"}));m.debugLabel="atomAddOrEditModal";const _=()=>T(m),ee=()=>{const e=E(m);return()=>{e({open:!0,actionType:"add"})}},te=()=>{const e=E(m);return t=>{e({open:!0,actionType:"edit",record:t})}},ae=()=>W(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{const e=y.exports.useRef(),{canAddSysConfig:t,canEditSysConfig:n}=g(),c=S(),{open:o,actionType:r,record:u}=_(),f=ae(),C=()=>{var i;r==="edit"&&((i=e.current)==null||i.resetFields()),f()};return y.exports.useEffect(()=>{if(o&&r==="edit"){const i=setTimeout(()=>{var s;(s=e.current)==null||s.setFieldsValue(u),clearTimeout(i)},0)}},[o]),a(l,{accessible:t||n,children:p(I,{formRef:e,width:500,title:r==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:o,modalProps:{onCancel:C,okText:"\u63D0\u4EA4"},onFinish:async i=>{var s;r==="add"?(await G(i),d.success("\u65B0\u589E\u6210\u529F")):(await H({...i,configId:u.configId}),d.success("\u7F16\u8F91\u6210\u529F")),c==null||c.reload(),f(),(s=e.current)==null||s.resetFields()},children:[a(A,{name:"configName",label:"\u53C2\u6570\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"configKey",label:"\u53C2\u6570\u952E\u540D",required:!0,rules:[{required:!0}]}),a(A,{name:"configValue",label:"\u53C2\u6570\u952E\u503C",required:!0,rules:[{required:!0}]}),a(R.Group,{name:"configType",label:"\u7CFB\u7EDF\u5185\u7F6E",valueEnum:B,initialValue:w.YES}),a(Q,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const{canAddSysConfig:e}=g(),t=ee();return a(l,{accessible:e,children:a(h,{icon:a(P,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=({record:e})=>{const t=te();return a(h,{type:"link",icon:a(v,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({searchParams:e})=>{const{canExportSysConfig:t}=g(),{isLoading:n,mutate:c}=M(()=>U(e),{onSuccess:()=>{d.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:t,children:a(h,{ghost:!0,type:"primary",icon:a(D,{}),loading:n,onClick:()=>c(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const{canRemoveSysConfig:e}=g();return a(l,{accessible:e,children:a(h,{danger:!0,icon:a(O,{}),onClick:()=>{b.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u53C2\u6570\u8BBE\u7F6E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await $(),d.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const j=({configId:e,configName:t,disabled:n,isBatch:c})=>{const o=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:r}=g(),u=S(),{mutateAsync:f,isLoading:C}=M(async s=>{await z({configIds:s})},{onSuccess:()=>{var s;u==null||u.reload(),(s=u==null?void 0:u.clearSelected)==null||s.call(u),d.success("\u5220\u9664\u6210\u529F")}});return a(l,{accessible:r,children:a(h,{type:"link",danger:!0,disabled:n,icon:a(N,{}),onClick:()=>{b.confirm({title:"\u5220\u9664\u53C2\u6570",content:p(x,{children:["\u786E\u5B9A\u5220\u9664\u53C2\u6570",a(V.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>f(e),okButtonProps:{loading:C}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne="configId",re=({selectedRows:e})=>a(j,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(","),configName:e.map(t=>t.configName).join(",")}),de=()=>{const e=Z(),[t,n]=y.exports.useState({});return a(Y,{rowKey:ne,actionRef:e,columns:[{title:"\u53C2\u6570\u4E3B\u952E",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"configName",key:"configName",valueType:"text"},{title:"\u53C2\u6570\u952E\u540D",dataIndex:"configKey",key:"configKey",valueType:"text"},{title:"\u53C2\u6570\u952E\u503C",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},{title:"\u7CFB\u7EDF\u5185\u7F6E",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:B},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",fixed:"right",render:(c,o)=>p(x,{children:[a(ce,{record:o}),a(j,{configId:o.configId,configName:o.configName})]})}],tableAlertOptionRender:re,rowSelection:{},request:async(...c)=>{const o=q(...c);return n(o),await J(o)},toolbar:{actions:[a(ie,{},"ButtonRefresh"),a(se,{searchParams:t},"ButtonExport"),a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>p(K,{children:[a(de,{}),a(oe,{})]});export{Te as default};
