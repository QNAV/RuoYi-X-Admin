import{u as f,s as T,g as v,a as S}from"./vanilla-74082e55.js";import{e as w,a as g,g as E,f as R}from"./index-3d8204b8.js";import{r as a,R as _}from"./jsx-runtime-f6344dff.js";import{w as V}from"./utils.esm-0d150205.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const o=e=>f(["global","dict",e],async()=>{const t=await T({dictType:e});return w(t)},{cacheTime:1/0,staleTime:1/0}),x=()=>{const{data:e}=o("sys_normal_disable"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysNormalDisable:t,valueEnumSysNormalDisable:s}},H=()=>{const{data:e}=o("sys_show_hide"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysShowHide:t,valueEnumSysShowHide:s}},G=()=>{const{data:e}=o("sys_yes_no"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysYesNo:t,valueEnumSysYesNo:s}},L=()=>{const{data:e}=o("sys_notice_type"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysNoticeType:t,valueEnumSysNoticeType:s}},X=()=>{const{data:e}=o("sys_notice_status"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysNoticeStatus:t,valueEnumSysNoticeStatus:s}},q=()=>{const{data:e}=o("sys_oper_type"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysOperType:t,valueEnumSysOperType:s}},F=()=>{const{data:e}=o("sys_common_status"),t=(e==null?void 0:e.defaultValue)??null,s=(e==null?void 0:e.valueEnum)??new Map;return{defaultValueSysCommonStatus:t,valueEnumSysCommonStatus:s}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C=(e={})=>g({path:"/info",method:"GET",secure:!0,skipErrorHandler:!1,...e});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=(e={})=>g({path:"/routers",method:"GET",secure:!0,skipErrorHandler:!1,...e}),j=a.createContext(void 0),A=e=>{const t=a.useContext(j);return(e==null?void 0:e.store)||t||v()},M=e=>e instanceof Promise,N=_.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)});function Q(e,t){const s=A(t),[[c,u,l],r]=a.useReducer(n=>{const m=s.get(e);return Object.is(n[0],m)&&n[1]===s&&n[2]===e?n:[m,s,e]},void 0,()=>[s.get(e),s,e]);let i=c;(u!==s||l!==e)&&(r(),i=s.get(e));const h=t==null?void 0:t.delay;return a.useEffect(()=>{const n=s.sub(e,()=>{if(typeof h=="number"){setTimeout(r,h);return}r()});return r(),n},[s,e,h]),a.useDebugValue(i),M(i)?N(i):i}function d(e,t){const s=A(t);return a.useCallback((...u)=>{if(({VITE_API_HOST:"https://test-ryx-admin-api.p.quicknav.cn",VITE_TOKEN_KEY:"RUOYI_TOKEN_GH",BASE_URL:"/RuoYi-X-Admin/",MODE:"gh",DEV:!1,PROD:!0}&&"gh")!=="production"&&!("write"in e))throw new Error("not writable atom");return s.set(e,...u)},[s,e])}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const p=["global","initialState"],b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/models/initialState.ts/atomPermissions",S(new Set([])));b.debugLabel="atomPermissions";const I=()=>d(b),y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/models/initialState.ts/atomKeepAliveRoutes",S([]));y.debugLabel="atomKeepAliveRoutes";const K=()=>d(y),U=()=>Q(y),B=()=>{const e=I(),t=K();return f(p,async()=>{const[s,c]=await Promise.all([C(),D()]);e(new Set(s.permissions));const u=E(c);return t(Object.keys(u).filter(l=>u[l].isKeepAlive)),{userInfo:s,routeSettingMap:u,menus:R(c)}},{cacheTime:1/0,staleTime:1/0})},z=()=>{const e=V();return()=>e.invalidateQueries(p)};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{U as a,z as b,F as c,q as d,o as e,G as f,x as g,H as h,L as i,X as j,B as u};
