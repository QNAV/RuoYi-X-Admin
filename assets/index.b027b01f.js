import{az as v,V as U,j as s,aA as O,_ as B,p as P,s as w,R as D,aB as L,aF as C,d as u,Z as y,a3 as n,a1 as b,r as F,o as x,aD as d,al as l,aE as _,aG as q,b8 as W,b9 as X,bx as Y,by as V,aJ as z,F as $,aK as G,bz as K,ak as H,ba as J,bA as Z,aM as Q,aN as ee,bB as te,aS as se,O as ae,aw as T}from"./index.7c81fac9.js";import{a as oe,b as ce}from"./index.85f7a3f8.js";import{y as re,z as ie,A as ue,B as ne,D as le,C as he,b as de,E as me}from"./index.5e39d783.js";import{b as m}from"./index.2df64043.js";import{u as I}from"./index.53977021.js";import{u as R}from"./useMutation.esm.173c6737.js";import{e as pe}from"./SysDeptService.e20db8c2.js";import{u as ge}from"./useRequest.fbda2368.js";import"./useQuery.esm.c8244a57.js";import"./utils.esm.0bacd143.js";var Ce=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],be=v.forwardRef(function(e,t){var a=e.fieldProps,o=e.unCheckedChildren,i=e.checkedChildren,c=e.proFieldProps,r=U(e,Ce);return s(O,B({valueType:"switch",fieldProps:B({unCheckedChildren:o,checkedChildren:i},a),ref:t,valuePropName:"checked",proFieldProps:c,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},r))});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S="systemUser",j=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomMainTableActions",P({key:`${S}AtomMainTableActions`,default:void 0}));j.debugLabel="AtomMainTableActions";const N=()=>w(j),Ae=()=>oe(j),k=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomSelectedDeptId",P({key:`${S}AtomSelectedDeptId`,default:0}));k.debugLabel="AtomSelectedDeptId";const fe=()=>w(k),Te=()=>D(k),A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomResetPasswordModal",P({key:`${S}AtomResetPasswordModal`,default:{open:!1,userId:0,userName:""}}));A.debugLabel="AtomResetPasswordModal";const Pe=()=>{const e=D(A);return(t,a)=>{e({open:!0,userId:t,userName:a})}},we=()=>L(A),ye=()=>w(A);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>{const e=we(),{open:t,userId:a,userName:o}=ye();return s(C,{title:"\u91CD\u7F6E\u5BC6\u7801",open:t,onCancel:e,children:u(y,{children:[s(n,{}),s(n.Password,{})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function Re(e,t){return b("/system/user/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Se(e){return b("/system/user/importTemplate",{method:"POST",...e||{}})}async function je(e,t){return b("/system/user/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ke(e,t){return b("/system/user/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Be=()=>{const e=m(),[t,{toggle:a}]=I(),o=F.exports.useRef(),i=N(),{isLoading:c,mutate:r}=R(async()=>{var h,p;const f=await((p=(h=o.current)==null?void 0:h.validateFieldsReturnFormatValue)==null?void 0:p.call(h));await Re(f)},{onSuccess:()=>{i==null||i.reload(),x.success("\u6DFB\u52A0\u6210\u529F")}});return u(d,{accessible:e.canAddSysUser,children:[s(l,{type:"primary",icon:s(_,{}),onClick:a,children:"\u65B0\u589E"}),s(C,{title:"\u6DFB\u52A0\u7528\u6237",open:t,onCancel:a,confirmLoading:c,okText:"\u63D0\u4EA4",onOk:()=>r(),children:u(y,{submitter:!1,formRef:o,grid:!0,colProps:{span:12},children:[s(n,{name:"nickName",label:"\u7528\u6237\u6635\u79F0",rules:[{required:!0}]}),s(n,{name:"phoneNumber",label:"\u624B\u673A\u53F7\u7801"}),s(n,{name:"email",label:"\u90AE\u7BB1"}),s(n,{name:"userName",label:"\u7528\u6237\u540D\u79F0",rules:[{required:!0}]}),s(n.Password,{name:"password",label:"\u7528\u6237\u5BC6\u7801",rules:[{required:!0}]}),s(q.Group,{name:"status",label:"\u72B6\u6001"})]})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=()=>{const e=m();return s(d,{accessible:e.canEditSysUser,children:s(l,{type:"link",icon:s(W,{}),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=()=>{const e=m();return s(d,{accessible:e.canExportSysUser,children:s(l,{icon:s(X,{}),children:"\u5BFC\u51FA"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>{const e=m(),t=F.exports.useRef(),[a,{toggle:o}]=I(),{mutate:i,isLoading:c}=R(Se);return u(d,{accessible:e.canImportSysUser,children:[s(l,{icon:s(Y,{}),onClick:o,children:"\u5BFC\u5165"}),u(C,{title:"\u5BFC\u5165\u7528\u6237",open:a,onCancel:o,children:[s("div",{className:"text-right",children:s(l,{type:"link",onClick:i,loading:c,children:"\u4E0B\u8F7D\u6A21\u677F"})}),u(y,{layout:"horizontal",submitter:!1,formRef:t,children:[s(be,{name:"isCover",label:"\u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u7528\u6237\u6570\u636E"}),s(V,{name:"list"})]})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({userId:e,userName:t,isBatch:a,disabled:o})=>{const i=a?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",c=m(),r=N(),{mutateAsync:f,isLoading:h}=R(async g=>{await ke({userIds:g})},{onSuccess:()=>{var g;r==null||r.reload(),(g=r==null?void 0:r.clearSelected)==null||g.call(r),x.success("\u5220\u9664\u6210\u529F")}}),p=()=>{C.confirm({title:"\u5220\u9664\u7528\u6237",content:u($,{children:["\u786E\u5B9A\u5220\u9664\u7528\u6237",s(G.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>f(e),okButtonProps:{loading:h}})};return s(d,{accessible:c.canRemoveSysUser,children:s(l,{type:"link",danger:!0,disabled:o,icon:s(z,{}),onClick:p,children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ie=({userId:e,userName:t})=>{const a=m(),o=Pe();return s(d,{accessible:a.canResetSysUserPwd,children:s(l,{type:"link",danger:!0,icon:s(K,{}),onClick:()=>o(e,t),children:"\u91CD\u7F6E\u5BC6\u7801"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ne=[re,ie,ue,ne,le,he,de,me,{title:"\u64CD\u4F5C",valueType:"option",width:290,render:(e,t)=>u(Z,{children:[s(Me,{}),s(E,{userId:t.userId,userName:t.userName}),s(Ie,{userId:t.userId,userName:t.userName})]})}],M="userId",Ee=({selectedRows:e})=>{const t=e.length===0;return s(E,{disabled:t,isBatch:!0,userId:e.map(a=>a.userId).join(","),userName:e.map(a=>a.userName).join(",")})},ve=()=>{const e=Ae(),t=fe(),a=t>0?{deptId:t}:{},{rowSelection:o,onClick:i}=ce(M);return s(H,{rowKey:M,actionRef:e,columns:Ne,params:a,search:{span:{xs:24,sm:24,md:12,lg:12,xl:12,xxl:6}},onRow:c=>({onClick:()=>i(c)}),rowSelection:o,tableAlertOptionRender:Ee,request:(...c)=>je(J(...c)),toolbar:{actions:[s(De,{},"ButtonExport"),s(xe,{},"ButtonImport"),s(Be,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ue=()=>{const[e,t]=F.exports.useState(""),a=Te(),{data:o,loading:i}=ge(()=>pe({deptName:e}),{refreshDeps:[e]});return o?u(ee,{spinning:i,children:[s(te.Search,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",className:"mb-3",onSearch:c=>{t(c)}}),s(se,{treeData:o,defaultExpandAll:!0,fieldNames:{title:"label",key:"id"},onSelect:(c,{node:{key:r}})=>{a(r)}})]}):s(Q,{})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ge=()=>u(ae,{children:[u(T,{ghost:!0,gutter:24,children:[s(T,{colSpan:"300px",className:"h-full",children:s(Ue,{})}),s(T,{ghost:!0,className:"h-full",children:s(ve,{})})]}),s(Fe,{})]});export{Ge as default};
