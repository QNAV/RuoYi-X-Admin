import{j as e,B as k,a as R,n as o,o as d}from"./index-b5eebe28.js";import{descriptionsColumns as G,useCacheNameTableColumns as M,useCacheKeyTableColumns as O}from"./index-d703cf60.js";import{a as q,b as E,d as v,e as z,f as F,g as H}from"./Monitor-fc837709.js";import{u as n}from"./useRequest-238e95e7.js";import{r as C,bg as I,B as r,b7 as g,bm as J,ai as Q}from"./antd-f7a9cbdb.js";import{u as l}from"./useMutation-cb32f323.js";import{P as U}from"./index-b65ca6ac.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};const te=()=>{const[a,t]=C.useState(),[c,p]=C.useState(),{message:i}=I.useApp(),{data:f,refresh:h,loading:y}=n(q),{data:K,refresh:u,loading:N,mutate:b}=n(async()=>(await E(a)).map(A=>({cacheKey:A})),{ready:!!a,refreshDeps:[a]}),{data:w,mutate:m,loading:x}=n(()=>v(a,c),{ready:!!c,refreshDeps:[c]}),{mutate:B,isLoading:D}=l(async s=>{await z(s),s===a&&b([]),h(),i.success("操作成功")}),{mutate:L,isLoading:S}=l(async s=>{await F(a,s),s===c&&m({}),u(),i.success("操作成功")}),{mutate:T,isLoading:P}=l(async()=>{await H(),m({}),i.success("操作成功")}),V=M(B),j=O(L);return e(k,{children:R(o,{ghost:!0,gutter:[8,8],children:[e(o,{title:"缓存列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:h,loading:D},"Button")],children:e(d,{rowKey:"cacheName",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:V,options:!1,dataSource:f,scroll:{},loading:y,onRow:s=>({onClick:()=>t(s.cacheName)})})}),e(o,{title:"键名列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:u,loading:S},"Button")],children:e(d,{rowKey:"cacheKey",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:j,options:!1,dataSource:K,scroll:{},loading:N,onRow:s=>({onClick:()=>p(s.cacheKey)})})}),e(o,{title:"缓存内容",extra:[e(r,{type:"text",icon:e(J,{}),onClick:()=>T(),loading:P},"Button")],children:e(Q,{spinning:x,children:e(U,{column:1,columns:G,dataSource:w})})})]})})};export{te as default};
