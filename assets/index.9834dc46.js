import{u as x,k as K,m as C,r as g,j as m,F as b,a as n,T as k,L,l as R,b as v,S as M,c as y,d as O,e as j,f as F,N as A,P as S,g as T,h as B}from"./index.9ab0876b.js";import{u as E,a as I}from"./keepAlive.e84d3901.js";import{u as N}from"./initialState.1acde7dc.js";import"./useQuery.esm.f2392cff.js";import"./utils.esm.0b591295.js";const w=e=>e.startsWith("http://")||e.startsWith("https://"),H=5,U=e=>{const[u,p]=E(),t=x(),d=K.find(o=>C(o,e)),c=d!==void 0;return g.exports.useEffect(()=>{c&&p(o=>{const a={...o,[d]:{children:t,pathname:e}},s=Object.keys(a);return s.length>H&&delete a[s[0]],a})},[e]),m(b,{children:[Object.entries(u).map(([o,a])=>n("div",{hidden:e!==a.pathname,children:a.children},o)),n("div",{hidden:c,children:!c&&t})]})},W=()=>n("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"}),X=()=>n(k,{title:"\u9000\u51FA\u767B\u5F55",children:n(L,{onClick:R})}),_=()=>{const e=v();return n(k,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:n(M,{onClick:()=>e("/settings")})})},z=()=>{const[e,u]=g.exports.useState(""),{pathname:p}=y(),t=v(),[d,c]=E(),o=s=>{c(i=>{const r={...i};return delete r[s],r})},a=g.exports.useMemo(()=>Object.entries(d).map(([s,i])=>{var r,l;return{label:(l=(r=O)==null?void 0:r[s])!=null?l:s,key:i.pathname}}),[d]);return g.exports.useEffect(()=>{u(p)},[p]),n(j,{hideAdd:!0,type:"editable-card",items:a,activeKey:e,onChange:t,onEdit:s=>{if(s===p){const i=a.map(l=>l.key),r=i.findIndex(l=>l===e);r===0&&i.length===1?t("/"):t(i[r>0?r-1:r+1])}o(s)}})},Y=(e,u)=>e!=null&&e.path?w(e.path)?n("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:u}):n(F,{to:e.path,children:u}):u,V=()=>{var s,i,r,l;const{pathname:e}=y(),u=v(),p=U(e),{data:t,isSuccess:d,isLoading:c}=N(),o=I(),a=g.exports.useMemo(()=>{var f;const h=(f=B)==null?void 0:f[e];return h===void 0?!0:!!(o!=null&&o[h])},[e,o]);return!c&&!d?n(A,{to:"/500",replace:!0}):!a&&!c&&d?n(A,{to:"/403",replace:!0}):m(S,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>u("/"),menu:{loading:c},loading:c,menuItemRender:Y,menuDataRender:()=>{var h;return T((h=t==null?void 0:t.userRoutes)!=null?h:[])},footerRender:W,token:{pageContainer:{marginBlockPageContainerContent:0,marginInlinePageContainerContent:0}},avatarProps:{size:"small",src:(i=(s=t==null?void 0:t.userInfo)==null?void 0:s.user)==null?void 0:i.avatar,title:(l=(r=t==null?void 0:t.userInfo)==null?void 0:r.user)==null?void 0:l.nickName},actionsRender:()=>[n(_,{},"IconSetting"),n(X,{},"IconLogout")],children:[n(z,{}),p]})};export{V as default};
