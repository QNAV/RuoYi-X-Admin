import{A as p,r as u,bM as C,j as e,as as b,bN as T,bO as M,a3 as y,av as O,X as j,bP as B,a7 as w,b as P,B as E}from"./index-07498b91.js";import{u as F,a as x,O as R,b as S,c as h,d as I,e as V,f as k,g as q,B as v}from"./index-7f66a4e0.js";import{u as $}from"./useRequest-f7a1ec32.js";import"./useMutation-fd2fd3eb.js";import"./utils-ba590b6c.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const D=()=>{const{message:s}=p.useApp(),t=u.useRef(),o=F(),{open:i,actionType:n,ossConfigId:r}=x(),d=R[n],l=S(),g=()=>{var a;n===h.Edit&&((a=t.current)==null||a.resetFields()),l()},[,f]=u.useTransition();$(()=>C({ossConfigId:r}),{ready:i&&h.Edit&&!!r,onSuccess:a=>{f(()=>{var c;(c=t.current)==null||c.setFieldsValue(a)})},refreshDeps:[i]});const A=async a=>{var c;n===h.Add?await T(a):await M({ossConfigId:r,...a}),o==null||o.reload(),(c=t.current)==null||c.resetFields(),l(),s.success(`${d}成功`)},m=I();return e(b,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:g},width:680,open:i,onFinish:A,columns:m})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const G=()=>{const s=V();return e(y,{accessKey:"system:oss:add",children:e(O,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const H=({selectedRowKeys:s})=>e(v,{disabled:s.length===0,batch:!0,ossConfigIds:s}),K=()=>{const s=k(),t=q();return e(j,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...o)=>B(w(...o)),toolbar:{actions:[e(G,{},"ButtonAdd")]},tableAlertOptionRender:H})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const J=()=>P(E,{children:[e(K,{}),e(D,{})]});export{J as default};
