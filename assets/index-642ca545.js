import{r as s,e as z,a as l,j as M,F as $e}from"./jsx-runtime-06f68cbc.js";import{as as We,d as F,a$ as It,bh as $t,ak as Et,al as Rt,am as Pt,c5 as Tt,c6 as Nt,l as De,c7 as At,aZ as Je,bg as kt,c8 as _t,aT as Me,g as Ve,j as ot,b as qe,h as we,e as i,_ as T,aU as se,c9 as Dt,ca as Kt,cb as Mt,cc as Bt,K as zt,f as Ot,L as Lt,cd as jt,ag as Be,ce as Ht,bI as Wt,W as Vt,Y as Ie,cf as qt,Z as Ft,be as Gt,bc as Xt,aC as Yt,aJ as Qt,aI as Ut,q as He,cg as Jt,b5 as Zt,bO as ea,bP as ta,aG as it,bR as lt,bN as Fe,ch as aa,ci as na,ay as ra}from"./index-cfa422f5.js";import{A as Ee}from"./index-3843b45f.js";import{g as Ge}from"./index-3617daed.js";import{b as oa,a as ia}from"./index-bd3b6218.js";import{b as la,c as st,u as sa,a as ct,V as ca,W as da,X as ua,Y as ma,Z as ha,_ as pa,$ as fa,a0 as ga}from"./react-41640cc9.js";import{x as dt,y as ut,z as mt,j as ya,O as xa}from"./index-af26fcec.js";import{w as va}from"./utils-5d43c803.js";import{u as Xe}from"./useMutation-5f3bb3c3.js";import{a as Ca,u as ba}from"./utils-ba78e398.js";import{P as Ze}from"./index-e4244303.js";import{S as et}from"./Skeleton-067f3fee.js";import{i as tt,u as Sa}from"./useRequest-07d5dce4.js";import{P as wa}from"./index-9b41d0f1.js";import"./mutation-b69dd84e.js";import"./index-92527557.js";var ht=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};const Ia=e=>{var{prefixCls:t,className:a,avatar:n,title:r,description:c}=e,o=ht(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:m}=s.useContext(We),x=m("list",t),b=F(`${x}-item-meta`,a),h=z.createElement("div",{className:`${x}-item-meta-content`},r&&z.createElement("h4",{className:`${x}-item-meta-title`},r),c&&z.createElement("div",{className:`${x}-item-meta-description`},c));return z.createElement("div",Object.assign({},o,{className:b}),n&&z.createElement("div",{className:`${x}-item-meta-avatar`},n),(r||c)&&h)},$a=(e,t)=>{var{prefixCls:a,children:n,actions:r,extra:c,className:o,colStyle:m}=e,x=ht(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:b,itemLayout:h}=s.useContext(Ye),{getPrefixCls:u}=s.useContext(We),v=()=>{let y;return s.Children.forEach(n,A=>{typeof A=="string"&&(y=!0)}),y&&s.Children.count(n)>1},d=()=>h==="vertical"?!!c:!v(),g=u("list",a),N=r&&r.length>0&&z.createElement("ul",{className:`${g}-item-action`,key:"actions"},r.map((y,A)=>z.createElement("li",{key:`${g}-item-action-${A}`},y,A!==r.length-1&&z.createElement("em",{className:`${g}-item-action-split`})))),R=b?"div":"li",$=z.createElement(R,Object.assign({},x,b?{}:{ref:t},{className:F(`${g}-item`,{[`${g}-item-no-flex`]:!d()},o)}),h==="vertical"&&c?[z.createElement("div",{className:`${g}-item-main`,key:"content"},n,N),z.createElement("div",{className:`${g}-item-extra`,key:"extra"},c)]:[n,N,It(c,{key:"extra"})]);return b?z.createElement($t,{ref:t,flex:1,style:m},$):$},pt=s.forwardRef($a);pt.Meta=Ia;const Ea=pt,Ra=e=>{const{listBorderedCls:t,componentCls:a,paddingLG:n,margin:r,padding:c,listItemPaddingSM:o,marginLG:m,borderRadiusLG:x}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:x,[`${a}-header,${a}-footer,${a}-item`]:{paddingInline:n},[`${a}-pagination`]:{margin:`${r}px ${m}px`}},[`${t}${a}-sm`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:o}},[`${t}${a}-lg`]:{[`${a}-item,${a}-header,${a}-footer`]:{padding:`${c}px ${n}px`}}}},Pa=e=>{const{componentCls:t,screenSM:a,screenMD:n,marginLG:r,marginSM:c,margin:o}=e;return{[`@media screen and (max-width:${n})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:r}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:r}}}},[`@media screen and (max-width: ${a})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:c}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${o}px`}}}}}},Ta=e=>{const{componentCls:t,antCls:a,controlHeight:n,minHeight:r,paddingSM:c,marginLG:o,padding:m,listItemPadding:x,colorPrimary:b,listItemPaddingSM:h,listItemPaddingLG:u,paddingXS:v,margin:d,colorText:g,colorTextDescription:N,motionDurationSlow:R,lineWidth:$}=e,y={};return["start","center","end"].forEach(A=>{y[`&-align-${A}`]={textAlign:A}}),{[`${t}`]:Object.assign(Object.assign({},Pt(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:c},[`${t}-pagination`]:Object.assign(Object.assign({marginBlockStart:o},y),{[`${a}-pagination-options`]:{textAlign:"start"}}),[`${t}-spin`]:{minHeight:r,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:x,color:g,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:m},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:g,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:g,transition:`all ${R}`,["&:hover"]:{color:b}}},[`${t}-item-meta-description`]:{color:N,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${v}px`,color:N,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:$,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${m}px 0`,color:N,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:m,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${a}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:d,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:o},[`${t}-item-meta`]:{marginBlockEnd:m,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:c,color:g,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:m,marginInlineStart:"auto","> li":{padding:`0 ${m}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:n},[`${t}-split${t}-something-after-last-item ${a}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:u},[`${t}-sm ${t}-item`]:{padding:h},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Na=Et("List",e=>{const t=Rt(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[Ta(t),Ra(t),Pa(t)]},{contentWidth:220});var Aa=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};const Ye=s.createContext({});Ye.Consumer;function Ke(e){var t,{pagination:a=!1,prefixCls:n,bordered:r=!1,split:c=!0,className:o,rootClassName:m,children:x,itemLayout:b,loadMore:h,grid:u,dataSource:v=[],size:d,header:g,footer:N,loading:R=!1,rowKey:$,renderItem:y,locale:A}=e,C=Aa(e,["pagination","prefixCls","bordered","split","className","rootClassName","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const X=a&&typeof a=="object"?a:{},[G,E]=s.useState(X.defaultCurrent||1),[te,w]=s.useState(X.defaultPageSize||10),{getPrefixCls:H,renderEmpty:ae,direction:Q}=s.useContext(We),j={current:1,total:0},ne=f=>(p,B)=>{E(p),w(B),a&&a[f]&&a[f](p,B)},ie=ne("onChange"),le=ne("onShowSizeChange"),Y=(f,p)=>{if(!y)return null;let B;return typeof $=="function"?B=$(f):$?B=f[$]:B=f.key,B||(B=`list-item-${p}`),s.createElement(s.Fragment,{key:B},y(f,p))},re=()=>!!(h||a||N),I=H("list",n),[_,q]=Na(I);let k=R;typeof k=="boolean"&&(k={spinning:k});const P=k&&k.spinning;let K="";switch(d){case"large":K="lg";break;case"small":K="sm";break}const L=F(I,{[`${I}-vertical`]:b==="vertical",[`${I}-${K}`]:K,[`${I}-split`]:c,[`${I}-bordered`]:r,[`${I}-loading`]:P,[`${I}-grid`]:!!u,[`${I}-something-after-last-item`]:re(),[`${I}-rtl`]:Q==="rtl"},o,m,q),D=Tt(j,{total:v.length,current:G,pageSize:te},a||{}),W=Math.ceil(D.total/D.pageSize);D.current>W&&(D.current=W);const U=a?s.createElement("div",{className:F(`${I}-pagination`,`${I}-pagination-align-${(t=D==null?void 0:D.align)!==null&&t!==void 0?t:"end"}`)},s.createElement(Nt,Object.assign({},D,{onChange:ie,onShowSizeChange:le}))):null;let J=De(v);a&&v.length>(D.current-1)*D.pageSize&&(J=De(v).splice((D.current-1)*D.pageSize,D.pageSize));const he=Object.keys(u||{}).some(f=>["xs","sm","md","lg","xl","xxl"].includes(f)),ce=At(he),V=s.useMemo(()=>{for(let f=0;f<Je.length;f+=1){const p=Je[f];if(ce[p])return p}},[ce]),pe=s.useMemo(()=>{if(!u)return;const f=V&&u[V]?u[V]:u.column;if(f)return{width:`${100/f}%`,maxWidth:`${100/f}%`}},[u==null?void 0:u.column,V]);let oe=P&&s.createElement("div",{style:{minHeight:53}});if(J.length>0){const f=J.map((p,B)=>Y(p,B));oe=u?s.createElement(kt,{gutter:u.gutter},s.Children.map(f,p=>s.createElement("div",{key:p==null?void 0:p.key,style:pe},p))):s.createElement("ul",{className:`${I}-items`},f)}else!x&&!P&&(oe=s.createElement("div",{className:`${I}-empty-text`},A&&A.emptyText||(ae==null?void 0:ae("List"))||s.createElement(_t,{componentName:"List"})));const O=D.position||"bottom",S=s.useMemo(()=>({grid:u,itemLayout:b}),[JSON.stringify(u),b]);return _(s.createElement(Ye.Provider,{value:S},s.createElement("div",Object.assign({className:L},C),(O==="top"||O==="both")&&U,g&&s.createElement("div",{className:`${I}-header`},g),s.createElement(Me,Object.assign({},k),oe,x),N&&s.createElement("div",{className:`${I}-footer`},N),h||(O==="bottom"||O==="both")&&U)))}Ke.Item=Ea;var ft={};Object.defineProperty(ft,"__esModule",{value:!0});var ka=ft.default=_a;function _a(e,t){for(var a=e,n=0;n<t.length;n+=1){if(a==null)return;a=a[t[n]]}return a}var Da=["title","subTitle","avatar","description","extra","content","actions","type"],Ka=Da.reduce(function(e,t){return e.set(t,!0),e},new Map),gt={};function ke(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ke=function(a){return typeof a}:ke=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ke(e)}Object.defineProperty(gt,"__esModule",{value:!0});var Ma=gt.default=Wa,Le=Ba(s);function yt(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return yt=function(){return e},e}function Ba(e){if(e&&e.__esModule)return e;if(e===null||ke(e)!=="object"&&typeof e!="function")return{default:e};var t=yt();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var c=n?Object.getOwnPropertyDescriptor(e,r):null;c&&(c.get||c.set)?Object.defineProperty(a,r,c):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}function za(e,t){return Ha(e)||ja(e,t)||La(e,t)||Oa()}function Oa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function La(e,t){if(e){if(typeof e=="string")return at(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return at(e,t)}}function at(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ja(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],n=!0,r=!1,c=void 0;try{for(var o=e[Symbol.iterator](),m;!(n=(m=o.next()).done)&&(a.push(m.value),!(t&&a.length===t));n=!0);}catch(x){r=!0,c=x}finally{try{!n&&o.return!=null&&o.return()}finally{if(r)throw c}}return a}}function Ha(e){if(Array.isArray(e))return e}function Wa(e,t){var a=t||{},n=a.defaultValue,r=a.value,c=a.onChange,o=a.postState,m=Le.useState(function(){return r!==void 0?r:n!==void 0?typeof n=="function"?n():n:typeof e=="function"?e():e}),x=za(m,2),b=x[0],h=x[1],u=r!==void 0?r:b;o&&(u=o(u));function v(g){h(g),u!==g&&c&&c(g,u)}var d=Le.useRef(!0);return Le.useEffect(function(){if(d.current){d.current=!1;return}r===void 0&&h(r)},[r]),[u,v]}var Va=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function qa(e){var t,a=e.prefixCls,n=e.expandIcon,r=n===void 0?l(Dt,{}):n,c=e.onExpand,o=e.expanded,m=e.record,x=e.hashId,b=r,h="".concat(a,"-row-expand-icon"),u=function(d){c(!o),d.stopPropagation()};return typeof r=="function"&&(b=r({expanded:o,onExpand:c,record:m})),l("span",{className:F(h,x,(t={},i(t,"".concat(a,"-row-expanded"),o),i(t,"".concat(a,"-row-collapsed"),!o),t)),onClick:u,children:b})}function Fa(e){var t,a,n,r,c,o=e.prefixCls,m=s.useContext(Ve.ConfigContext),x=m.getPrefixCls,b=s.useContext(ot),h=b.hashId,u=x("pro-list",o),v="".concat(u,"-row"),d=e.title,g=e.subTitle,N=e.content,R=e.itemTitleRender;e.prefixCls;var $=e.actions;e.item,e.recordKey;var y=e.avatar,A=e.cardProps,C=e.description,X=e.isEditable,G=e.checkbox,E=e.index,te=e.selected,w=e.loading,H=e.expand,ae=e.onExpand,Q=e.expandable,j=e.rowSupportExpand,ne=e.showActions,ie=e.showExtra,le=e.type,Y=e.style,re=e.className,I=re===void 0?v:re,_=e.record,q=e.onRow,k=e.onItem,P=e.itemHeaderRender,K=e.cardActionProps,L=e.extra,D=qe(e,Va),W=Q||{},U=W.expandedRowRender,J=W.expandIcon,he=W.expandRowByClick,ce=W.indentSize,V=ce===void 0?8:ce,pe=W.expandedRowClassName,oe=Ma(!!H,{value:H,onChange:ae}),O=we(oe,2),S=O[0],f=O[1],p=F((t={},i(t,"".concat(v,"-selected"),!A&&te),i(t,"".concat(v,"-show-action-hover"),ne==="hover"),i(t,"".concat(v,"-type-").concat(le),!!le),i(t,"".concat(v,"-editable"),X),i(t,"".concat(v,"-show-extra-hover"),ie==="hover"),t),h,v),B=F(h,i({},"".concat(I,"-extra"),ie==="hover")),fe=S||Object.values(Q||{}).length===0,ge=U&&U(_,E,V,S),de=s.useMemo(function(){if(!(!$||K==="actions"))return[l("div",{onClick:function(ee){return ee.stopPropagation()},children:$},"action")]},[$,K]),Re=s.useMemo(function(){if(!(!$||!K||K==="extra"))return[l("div",{className:"".concat(p,"-actions ").concat(h),onClick:function(ee){return ee.stopPropagation()},children:$},"action")]},[$,K,p,h]),be=d||g?M("div",{className:"".concat(p,"-header-title ").concat(h),children:[d&&l("div",{className:"".concat(p,"-title ").concat(h),children:d}),g&&l("div",{className:"".concat(p,"-subTitle ").concat(h),children:g})]}):null,ye=(a=R&&(R==null?void 0:R(_,E,be)))!==null&&a!==void 0?a:be,Pe=ye||y||g||C?l(Ke.Item.Meta,{avatar:y,title:ye,description:C&&fe&&l("div",{className:"".concat(p,"-description ").concat(h),children:C})}):null,Te=F(h,(n={},i(n,"".concat(p,"-item-has-checkbox"),G),i(n,"".concat(p,"-item-has-avatar"),y),i(n,p,p),n)),Z=s.useMemo(function(){return y||d?M($e,{children:[y,l("span",{className:"".concat(x("list-item-meta-title")," ").concat(h),children:d})]}):null},[y,x,h,d]),xe=A?l(se,T(T(T({bordered:!0,loading:w,hoverable:!0},A),{},{title:Z,subTitle:g,extra:de,actions:Re,bodyStyle:T({padding:24},A.bodyStyle)},k==null?void 0:k(_,E)),{},{children:l(et,{avatar:!0,title:!1,loading:w,active:!0,children:M("div",{className:"".concat(p,"-header ").concat(h),children:[R&&(R==null?void 0:R(_,E,be)),N]})})})):l(Ke.Item,T(T(T(T({className:F(Te,h,i({},I,I!==v))},D),{},{actions:de,extra:!!L&&l("div",{className:B,children:L})},q==null?void 0:q(_,E)),k==null?void 0:k(_,E)),{},{onClick:function(ee){var ue,ve,Ne,Oe;q==null||(ue=q(_,E))===null||ue===void 0||(ve=ue.onClick)===null||ve===void 0||ve.call(ue,ee),k==null||(Ne=k(_,E))===null||Ne===void 0||(Oe=Ne.onClick)===null||Oe===void 0||Oe.call(Ne,ee),he&&f(!S)},children:M(et,{avatar:!0,title:!1,loading:w,active:!0,children:[M("div",{className:"".concat(p,"-header ").concat(h),children:[M("div",{className:"".concat(p,"-header-option ").concat(h),children:[!!G&&l("div",{className:"".concat(p,"-checkbox ").concat(h),children:G}),Object.values(Q||{}).length>0&&j&&qa({prefixCls:u,hashId:h,expandIcon:J,onExpand:f,expanded:S,record:_})]}),(r=P&&(P==null?void 0:P(_,E,Pe)))!==null&&r!==void 0?r:Pe]}),fe&&(N||ge)&&M("div",{className:"".concat(p,"-content ").concat(h),children:[N,U&&j&&l("div",{className:pe&&pe(_,E,V),children:ge})]})]})}));return A?l("div",{className:F(h,(c={},i(c,"".concat(p,"-card"),A),i(c,I,I!==v),c)),style:Y,children:xe}):xe}var Ga=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Xa(e){var t=e.dataSource,a=e.columns,n=e.rowKey,r=e.showActions,c=e.showExtra,o=e.prefixCls,m=e.actionRef,x=e.itemTitleRender,b=e.renderItem,h=e.itemCardProps,u=e.itemHeaderRender,v=e.expandable,d=e.rowSelection,g=e.pagination,N=e.onRow,R=e.onItem,$=e.rowClassName,y=qe(e,Ga),A=s.useContext(ot),C=A.hashId,X=s.useContext(Ve.ConfigContext),G=X.getPrefixCls,E=z.useMemo(function(){return typeof n=="function"?n:function(O,S){return O[n]||S}},[n]),te=Kt(t,"children",E),w=we(te,1),H=w[0],ae=Mt(t.length,T({responsive:!0},g),function(){}),Q=we(ae,1),j=Q[0],ne=z.useMemo(function(){if(g===!1||!j.pageSize||t.length<j.total)return t;var O=j.current,S=O===void 0?1:O,f=j.pageSize,p=f===void 0?10:f,B=t.slice((S-1)*p,S*p);return B},[t,j,g]),ie=G("pro-list",o),le=Bt(d,{getRowKey:E,getRecordByKey:H,prefixCls:ie,data:t,pageData:ne,expandType:"row",childrenColumnName:"children",locale:{}}),Y=we(le,2),re=Y[0],I=Y[1],_=v||{},q=_.expandedRowKeys,k=_.defaultExpandedRowKeys,P=_.defaultExpandAllRows,K=P===void 0?!0:P,L=_.onExpand,D=_.onExpandedRowsChange,W=_.rowExpandable,U=z.useState(function(){return k||(K!==!1?t.map(E):[])}),J=we(U,2),he=J[0],ce=J[1],V=z.useMemo(function(){return new Set(q||he||[])},[q,he]),pe=z.useCallback(function(O){var S=E(O,t.indexOf(O)),f,p=V.has(S);p?(V.delete(S),f=De(V)):f=[].concat(De(V),[S]),ce(f),L&&L(!p,O),D&&D(f)},[E,V,t,L,D]),oe=re([])[0];return l(Ke,T(T({},y),{},{className:F(G("pro-list-container",o),C,y.className),dataSource:ne,pagination:g&&j,renderItem:function(S,f){var p,B,fe,ge={className:typeof $=="function"?$(S,f):$};a==null||a.forEach(function(Z){var xe=Z.listKey,Se=Z.cardActionProps;if(Ka.has(xe)){var ee=Z.dataIndex||xe||Z.key,ue=Array.isArray(ee)?ka(S,ee):S[ee];Se==="actions"&&xe==="actions"&&(ge.cardActionProps=Se);var ve=Z.render?Z.render(ue,S,f):ue;ve!=="-"&&(ge[Z.listKey]=ve)}});var de;oe&&oe.render&&(de=oe.render(S,S,f)||void 0);var Re=((p=m.current)===null||p===void 0?void 0:p.isEditable(T(T({},S),{},{index:f})))||{},be=Re.isEditable,ye=Re.recordKey,Pe=I.has(ye||f),Te=l(Fa,T(T({cardProps:y.grid?T(T(T({},h),y.grid),{},{checked:Pe,onChecked:z.isValidElement(de)?(B=de)===null||B===void 0||(fe=B.props)===null||fe===void 0?void 0:fe.onChange:void 0}):void 0},ge),{},{recordKey:ye,isEditable:be||!1,expandable:v,expand:V.has(E(S,f)),onExpand:function(){pe(S)},index:f,record:S,item:S,showActions:r,showExtra:c,itemTitleRender:x,itemHeaderRender:u,rowSupportExpand:!W||W&&W(S),selected:I.has(E(S,f)),checkbox:de,onRow:N,onItem:R}),ye);return b?b(S,f,Te):Te}}))}var Ya=new zt("techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),Qa=function(t){var a,n,r,c,o,m;return i({},t.componentCls,(m={backgroundColor:"transparent"},i(m,"".concat(t.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),i(m,"&-row",(o={borderBlockEnd:"1px solid ".concat(t.colorSplit)},i(o,"".concat(t.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),i(o,"&:last-child",i({borderBlockEnd:"none"},"".concat(t.antCls,"-list-item"),{borderBlockEnd:"none"})),i(o,"&:hover",(a={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},i(a,"".concat(t.antCls,"-list-item-action"),{display:"block"}),i(a,"".concat(t.antCls,"-list-item-extra"),{display:"flex"}),i(a,"".concat(t.componentCls,"-row-extra"),{display:"block"}),i(a,"".concat(t.componentCls,"-row-subheader-actions"),{display:"block"}),a)),i(o,"&-card",i({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(t.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),i(o,"&".concat(t.componentCls,"-row-editable"),i({},"".concat(t.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),i(o,"&".concat(t.componentCls,"-row-selected"),{backgroundColor:t.colorPrimaryBgHover,"&:hover":{backgroundColor:t.colorPrimaryBgHover}}),i(o,"&".concat(t.componentCls,"-row-type-new"),{animationName:Ya,animationDuration:"3s"}),i(o,"&".concat(t.componentCls,"-row-type-inline"),i({},"".concat(t.componentCls,"-row-title"),{fontWeight:"normal"})),i(o,"&".concat(t.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),i(o,"&-show-action-hover",i({},"".concat(t.antCls,`-list-item-action,
            `).concat(t.proComponentsCls,`-card-extra,
            `).concat(t.proComponentsCls,"-card-actions"),{display:"flex"})),i(o,"&-show-extra-hover",i({},"".concat(t.antCls,"-list-item-extra"),{display:"none"})),i(o,"&-extra",{display:"none"}),i(o,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:t.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),i(o,"&-expand-icon",{marginInlineEnd:8,display:"flex",fontSize:12,cursor:"pointer",height:"24px",marginRight:4,color:t.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),i(o,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),i(o,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:t.colorPrimary}}),i(o,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),i(o,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),i(o,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),i(o,"&-avatar",{display:"flex"}),i(o,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),i(o,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),i(o,"&-header-option",{display:"flex"}),i(o,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),i(o,"&-no-split",(n={},i(n,"".concat(t.componentCls,"-row"),{borderBlockEnd:"none"}),i(n,"".concat(t.antCls,"-list ").concat(t.antCls,"-list-item"),{borderBlockEnd:"none"}),n)),i(o,"&-bordered",i({},"".concat(t.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(t.colorSplit)})),i(o,"".concat(t.antCls,"-list-vertical"),(r={},i(r,"".concat(t.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),i(r,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),i(r,"&-content",{marginBlock:0,marginInline:0}),i(r,"&-subTitle",{marginBlockStart:8}),i(r,"".concat(t.antCls,"-list-item-extra"),i({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(t.componentCls,"-row-description"),{marginBlockStart:16})),i(r,"".concat(t.antCls,"-list-bordered ").concat(t.antCls,"-list-item"),{paddingInline:0}),i(r,"".concat(t.componentCls,"-row-show-extra-hover"),i({},"".concat(t.antCls,"-list-item-extra "),{display:"none"})),r)),i(o,"".concat(t.antCls,"-list-pagination"),{marginBlockStart:t.margin,marginBlockEnd:t.margin}),i(o,"".concat(t.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),i(o,"".concat(t.antCls,"-list-vertical ").concat(t.proComponentsCls,"-list-row"),i({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(t.antCls,"-list-item"),(c={width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18},i(c,"".concat(t.antCls,"-list-item-meta-avatar"),{display:"flex",alignItems:"center",marginInlineEnd:8}),i(c,"".concat(t.antCls,"-list-item-action-split"),{display:"none"}),i(c,"".concat(t.antCls,"-list-item-meta-title"),{marginBlock:0,marginInline:0}),c))),o)),m))};function Ua(e){return Ot("ProList",function(t){var a=T(T({},t),{},{componentCls:".".concat(e)});return[Qa(a)]})}var Ja=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Za(e){var t=e.metas,a=e.split,n=e.footer,r=e.rowKey,c=e.tooltip,o=e.className,m=e.options,x=m===void 0?!1:m,b=e.search,h=b===void 0?!1:b,u=e.expandable,v=e.showActions,d=e.showExtra,g=e.rowSelection,N=g===void 0?!1:g,R=e.pagination,$=R===void 0?!1:R,y=e.itemLayout,A=e.renderItem,C=e.grid,X=e.itemCardProps,G=e.onRow,E=e.onItem,te=e.rowClassName,w=e.locale,H=e.itemHeaderRender,ae=e.itemTitleRender,Q=qe(e,Ja),j=s.useRef();s.useImperativeHandle(Q.actionRef,function(){return j.current});var ne=s.useContext(Ve.ConfigContext),ie=ne.getPrefixCls,le=s.useMemo(function(){var k=[];return Object.keys(t||{}).forEach(function(P){var K=t[P]||{},L=K.valueType;L||(P==="avatar"&&(L="avatar"),P==="actions"&&(L="option"),P==="description"&&(L="textarea")),k.push(T(T({listKey:P,dataIndex:(K==null?void 0:K.dataIndex)||P},K),{},{valueType:L}))}),k},[t]),Y=ie("pro-list",e.prefixCls),re=Ua(Y),I=re.wrapSSR,_=re.hashId,q=F(Y,_,i({},"".concat(Y,"-no-split"),!a));return I(l(jt,T(T({tooltip:c},Q),{},{actionRef:j,pagination:$,type:"list",rowSelection:N,search:h,options:x,className:F(Y,o,q),columns:le,rowKey:r,tableViewRender:function(P){var K=P.columns,L=P.size,D=P.pagination,W=P.rowSelection,U=P.dataSource,J=P.loading;return l(Xa,{grid:C,itemCardProps:X,itemTitleRender:ae,prefixCls:e.prefixCls,columns:K,renderItem:A,actionRef:j,dataSource:U||[],size:L,footer:n,split:a,rowKey:r,expandable:u,rowSelection:N===!1?void 0:W,showActions:v,showExtra:d,pagination:D,itemLayout:y,loading:J,itemHeaderRender:H,onRow:G,onItem:E,rowClassName:te,locale:w})}})))}function en(e){return l(Lt,{needDeps:!0,children:l(Za,T({},e))})}const _e=new Set;let me,nt={xs:0,sm:576,md:768,lg:992,xl:1200};function je(){const e=me;if(xt(),e!==me)for(const t of _e)t()}let Ae=!1;function xt(){const e=window.innerWidth,t={};let a=!1;for(const n of Object.keys(nt))t[n]=e>=nt[n],t[n]!==me[n]&&(a=!0);a&&(me=t)}function tn(){tt&&!Ae&&(me={},xt(),window.addEventListener("resize",je),Ae=!0);const[e,t]=s.useState(me);return s.useEffect(()=>{if(!tt)return;Ae||window.addEventListener("resize",je);const a=()=>{t(me)};return _e.add(a),()=>{_e.delete(a),_e.size===0&&(window.removeEventListener("resize",je),Ae=!1)}},[]),e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",la(void 0));Qe.debugLabel="atomRoleListActions";const Ue=()=>st(Qe),an=()=>oa(Qe),ze=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",Ca({open:!1,roleId:0}));ze.debugLabel="atomRoleDetails";const nn=()=>ba(ze),rn=()=>{const e=sa(ze);return t=>{e({open:!0,roleId:t})}},Ce=()=>st(ze),vt="sysRole",Ct=[vt,"details"],bt=e=>{const{roleId:t}=Ce(),a=ct(Ct,()=>ca({roleId:t}),{onSuccess:e,enabled:!1});return s.useEffect(()=>{t>0&&a.refetch()},[t]),a},St=[vt,"tree"],on=e=>{const{roleId:t}=Ce(),a=ct(St,async()=>{const{menus:n,checkedKeys:r}=await da({roleId:t});return{treeData:n,selectedMenuIds:r,selectedTreeData:dt(n,r),allMenuIds:ut(n),allExpandedKeys:mt(n)}},{onSuccess:n=>{e(n.selectedTreeData)},enabled:!1});return s.useEffect(()=>{t>0&&a.refetch()},[t]),a},wt=e=>{const t=va();return Xe(async a=>{const n=t.getQueryData(Ct),r=t.getQueryData(St);await ua({roleId:n.roleId,roleKey:n.roleKey,roleName:n.roleName,roleSort:n.roleSort,status:n.status,menuIds:r.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...a})},{onSuccess:async()=>{e(),Be.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ln=()=>{const{defaultValueSysNormalDisable:e,valueEnumSysNormalDisable:t}=Ge();return[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:t,valueType:"radio",formItemProps:{initialValue:e,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{initialValue:0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]},sn=()=>{const e=s.useRef(),t=Ue(),a=ln();return l(Ee,{accessKey:"system:role:add",children:l(Ht,{title:"新增角色",trigger:l(Wt,{}),formRef:e,onFinish:async r=>{var c;return await ma({...r,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),t==null||t.reload(),Be.success("新增成功"),(c=e.current)==null||c.resetFields(),!0},width:500,modalProps:{okText:"提交"},layoutType:"ModalForm",columns:a})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const cn=()=>{const e=Vt(),{roleId:t,open:a}=Ce();return l(Ee,{accessKey:"system:user:edit",children:l(Ie,{type:"primary",ghost:!0,onClick:()=>e(qt("/system/role-auth/:roleId",{roleId:t.toString()})),icon:l(Ft,{}),disabled:!a,children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const dn=()=>{const e=Ue(),t=nn(),{roleId:a,open:n}=Ce(),{isLoading:r,mutateAsync:c}=Xe(ha,{onSuccess:()=>{var m;e==null||e.reload(),(m=e==null?void 0:e.clearSelected)==null||m.call(e),t(),Be.success("删除成功")}});return l(Ee,{accessKey:"system:role:remove",children:l(Gt,{type:"primary",size:"middle",disabled:!n,onClick:()=>Xt.confirm({title:"操作确认",content:`确定删除角色编号为 ${a} 的角色吗？`,onOk:()=>c({roleIds:[a]}),okButtonProps:{loading:r}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const un=[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],mn=()=>{const{valueEnumSysNormalDisable:e}=Ge();return[{title:"状态",dataIndex:"status",key:"status",valueEnum:e,valueType:"radio"},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit"},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}]},hn=()=>{const[e,t]=s.useState([]),[a]=Yt.useForm(),n=mn(),r=Ue(),{data:c,isFetching:o,refetch:m}=bt(()=>{t([]),a.resetFields()}),{mutateAsync:x}=wt(()=>{m(),r==null||r.reload()}),h=ia()("system:role:edit")?{form:a,editableKeys:e,onChange:(u,v)=>{if(t(u),u.length>0){const d=u[0];a.setFieldsValue({[d]:v[d]})}},onSave:async(u,v)=>{await x({[u]:v[u]})}}:void 0;return M(Me,{spinning:o,children:[l(Ze,{column:2,columns:un,dataSource:c}),l(Qt,{}),l(Ze,{column:2,columns:n,dataSource:c,editable:h})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pn=()=>{const{valueEnumSysNormalDisable:e}=Ge();return{title:{title:"角色名称",dataIndex:"roleName",valueType:"text"},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:e},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text"}}},fn=()=>{const e=an(),t=rn(),a=pn();return l(en,{ghost:!0,rowKey:"roleId",actionRef:e,metas:a,tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:n})=>{t(n)}},search:{filterType:"light"},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:(...n)=>pa(ya(...n))})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const gn=()=>{const[e,t]=s.useState([]),[a,n]=s.useState(!1),[r,c]=s.useState([]),[o,m]=s.useState([]),[x,b]=s.useState(!1),[h,u]=s.useState(!0),[v,d]=s.useState(),g=s.useRef(),{open:N,roleId:R}=Ce(),{refetch:$}=bt(({dataScope:w})=>{var H;d(w),(H=g.current)==null||H.setFieldsValue({dataScope:w})}),{loading:y,refresh:A,data:C}=Sa(async()=>{const{depts:w,checkedKeys:H}=await fa(R);return{treeData:w,selectedMenuIds:H,selectedTreeData:dt(w,H),allMenuIds:ut(w),allExpandedKeys:mt(w)}},{ready:N,refreshDeps:[R],onSuccess:w=>{n(!1),m(w.selectedTreeData)}}),{isLoading:X,mutate:G}=Xe(async()=>{await ga({roleId:R,dataScope:v,deptIds:e})},{onSuccess:()=>{A(),$(),Be.success("保存成功")}}),E=r.length===(C==null?void 0:C.allExpandedKeys.length),te=w=>{if(w||h){t((C==null?void 0:C.allMenuIds)??[]);return}t([])};return s.useEffect(()=>{if((C==null?void 0:C.allMenuIds.length)===e.length){b(!0),u(!1);return}if(e.length===0){b(!1),u(!1);return}u(!0)},[C==null?void 0:C.allMenuIds,e]),M($e,{children:[M("header",{className:"flex justify-between items-start flex-wrap",children:[l(Ut,{formRef:g,submitter:!1,layout:"horizontal",children:l(wa,{name:"dataScope",label:"数据权限范围",fieldProps:{options:xa,onChange:w=>{d(w)}},readonly:!a})}),l(Ee,{accessKey:"system:role:edit",children:a?M(He,{children:[l(Ie,{loading:X,onClick:()=>{n(!1),m((C==null?void 0:C.selectedTreeData)??[])},children:"取消编辑"}),l(Ie,{type:"primary",ghost:!0,icon:l(Jt,{}),loading:X,onClick:()=>G(),children:"保存"})]}):l(Ie,{type:"primary",ghost:!0,icon:l(Zt,{}),onClick:()=>{n(!0),t((C==null?void 0:C.selectedMenuIds)??[]),m((C==null?void 0:C.treeData)??[])},children:"编辑数据权限"})})]}),v==="2"&&M($e,{children:[M(He,{wrap:!0,className:"my-2",children:[o.length>0&&l(Ie,{size:"small",icon:E?l(ea,{}):l(ta,{}),onClick:()=>c(E?[]:C.allExpandedKeys),children:E?"全部折叠":"全部展开"}),a&&l(it,{indeterminate:h,onChange:w=>te(w.target.checked),checked:x,children:"全选/全不选"})]}),l(Me,{spinning:y,children:o.length>0?l(lt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:a,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:o,expandedKeys:r,onExpand:w=>c(w),onCheck:w=>{t(w.checked)}}):l(Fe,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const yn=()=>{const[e,t]=s.useState([]),[a,n]=s.useState(!1),[r,c]=s.useState([]),[o,m]=s.useState([]),[x,b]=s.useState(!1),[h,u]=s.useState(!0),{isFetching:v,data:d,refetch:g}=on(y=>{n(!1),m(y)}),{isLoading:N,mutate:R}=wt(()=>{g()}),$=y=>{if(y||h){t((d==null?void 0:d.allMenuIds)??[]);return}t([])};return s.useEffect(()=>{if((d==null?void 0:d.allMenuIds.length)===e.length){b(!0),u(!1);return}if(e.length===0){b(!1),u(!1);return}u(!0)},[d==null?void 0:d.allMenuIds,e]),M($e,{children:[M("header",{className:"flex justify-between items-end mb-2",children:[l(aa,{expanded:r.length===(d==null?void 0:d.allExpandedKeys.length),onChange:y=>{c(y?(d==null?void 0:d.allExpandedKeys)??[]:[])}}),l(Ee,{accessKey:"system:role:edit",children:l(na,{editable:a,loading:N,onCancel:()=>{n(!1),m((d==null?void 0:d.selectedTreeData)??[])},onSave:()=>R({menuIds:e}),onStartEdit:()=>{n(!0),t((d==null?void 0:d.selectedMenuIds)??[]),m((d==null?void 0:d.treeData)??[])}})})]}),M(Me,{spinning:v,children:[l("div",{className:"pl-1 mb-1",children:a&&l(it,{indeterminate:h,onChange:y=>$(y.target.checked),checked:x,children:"全选/全不选"})}),o.length>0?l(lt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:a,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:o,expandedKeys:r,onExpand:y=>c(y),onCheck:y=>{t(y.checked)},height:500}):l(Fe,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const rt={list:{xxl:7,xl:10,lg:13,md:24,sm:24,xs:24},details:{xxl:17,xl:14,lg:11,md:24,sm:24,xs:24}},Dn=()=>{const{xl:e}=tn(),{open:t}=Ce();return l(ra,{children:M(se,{ghost:!0,gutter:[16,16],wrap:!0,children:[l(se,{title:"角色列表",colSpan:rt.list,extra:l(sn,{}),children:l(fn,{})}),l(se,{split:"horizontal",title:"角色详情",colSpan:rt.details,extra:M(He,{children:[l(dn,{}),l(cn,{})]}),className:"h-full",children:t?M($e,{children:[l(se,{children:l(hn,{})}),M(se,{split:e?"vertical":"horizontal",children:[l(se,{children:l(yn,{})}),l(se,{children:l(gn,{})})]})]}):l(Fe,{description:"点击选择左侧角色查看详情"})})]})})};export{Dn as default};
