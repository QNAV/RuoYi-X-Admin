import{j as a,b as C,F as S,B as w}from"./antdProComponents-6d1fcf7e.js";import{e as B,h as b,f as R,F as f,A as g,G as P,as as F,l as N,g as i,at as O,au as k,av as L,aw as V,ax as q,L as X,d as Y,ay as K,m as W,B as $}from"./index-a86b6c11.js";import{a as D,u as Q}from"./utils-9116f136.js";import{bm as I,r as T}from"./antd-2eaa2d43.js";import{u as G}from"./useMutation-d4b1dbbc.js";import"./iconPark-5401014c.js";import"./wangEditor-6b8c9df0.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",B(void 0));A.debugLabel="atomMainTableActions";const M=()=>b(A),H=()=>R(A);var h=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(h||{});const z={[0]:"新增",[1]:"编辑"},n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",D({open:!1,actionType:0}));n.debugLabel="atomAddOrEditModal";const J=()=>b(n),U=()=>{const e=f(n);return()=>{e({open:!0,actionType:0})}},Z=()=>{const e=f(n);return t=>{e({open:!0,actionType:1,record:t})}},_=()=>Q(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=Z();return a(g,{accessKey:"system:notice:edit",children:a(P,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=({noticeIds:e,disabled:t,batch:s})=>{const o=M(),{message:r,modal:l}=I.useApp(),{mutate:u,isLoading:m}=G(F,{onSuccess:()=>{var d;o==null||o.reload(),(d=o==null?void 0:o.clearSelected)==null||d.call(o),r.success("删除成功")}});return a(g,{accessKey:"system:notice:remove",children:a(N,{batch:s,disabled:t,onClick:()=>{l.confirm({title:"操作确认",content:`确定删除公告编号为 ${e.join(",")} 的公告通知吗？`,onOk:()=>u({noticeIds:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const[te]=i({title:"公告编号",dataIndex:"noticeId",table:{valueType:"text",hideInSearch:!0}}),[oe,,ae]=i({title:"公告标题",dataIndex:"noticeTitle",table:{valueType:"text"},form:{valueType:"text",formItemProps:{rules:[{required:!0}]}}}),E=()=>{const{valueEnumSysNoticeType:e}=k();return i({title:"公告类型",dataIndex:"noticeType",valueEnum:e,table:{valueType:"select"},form:{valueType:"select",formItemProps:{rules:[{required:!0}]}}})},se="NORMAL",j=()=>{const{valueEnumSysNoticeStatus:e}=L();return i({title:"状态",dataIndex:"status",valueEnum:e,table:{valueType:"select",hideInSearch:!0},form:{valueType:"radio",formItemProps:{rules:[{required:!0}]},initialValue:se}})},[ce]=i({title:"创建者",dataIndex:"createBy",table:{valueType:"text"}}),[ie]=i({title:"创建时间",dataIndex:"createTime",table:{valueType:"dateTime",hideInSearch:!0,sorter:!0}}),re=()=>{const[e]=E(),[t]=j();return[te,oe,e,t,ce,ie,{title:"操作",valueType:"option",render:(s,o)=>C(S,{children:[a(ee,{record:o}),a(v,{noticeIds:[o.noticeId]})]})}]},ne=()=>{const[,,e]=E(),[,,t]=j();return[ae,e,t,{name:"noticeContent",title:"内容",colProps:{span:24},renderFormItem:()=>a(O,{})}]};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const e=T.useRef(),{message:t}=I.useApp(),s=M(),{open:o,actionType:r,record:l}=J(),u=_(),m=()=>{var c;r===h.Edit&&((c=e.current)==null||c.resetFields()),u()},p=z[r],d=async c=>{var y;r===h.Add?await V(c):await q({...c,noticeId:l.noticeId}),u(),(y=e.current)==null||y.resetFields(),s==null||s.reload(),t.success(`${p}成功`)},x=ne();return T.useEffect(()=>{o&&h.Edit&&T.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(l)})},[o]),a(w,{title:`${p}公告通知`,layoutType:"ModalForm",grid:!0,colProps:{span:12},open:o,modalProps:{onCancel:m,okText:"提交"},columns:x,formRef:e,width:800,onFinish:d})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const e=U();return a(g,{accessKey:"system:notice:add",children:a(X,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({selectedRowKeys:e})=>a(v,{batch:!0,disabled:e.length===0,noticeIds:e}),he=()=>{const e=H(),t=re();return a(Y,{rowKey:"noticeId",actionRef:e,columns:t,request:(...s)=>K(W(...s)),tableAlertOptionRender:de,toolbar:{actions:[a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=()=>C($,{children:[a(he,{}),a(le,{})]});export{be as default};
