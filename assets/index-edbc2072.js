import{r as m,a as o,j as b,F as E}from"./jsx-runtime-f6344dff.js";import{bg as M,aM as v,aw as A,ai as p,a9 as g,c8 as I,b9 as R,bs as S,bf as O,bj as B,aC as F}from"./index-0c3aa956.js";import{e as P}from"./index-86803b74.js";import{b as V}from"./index-50913369.js";import{a as L,b as C,u as x}from"./index-aa8a0b50.js";import{a as q,u as D}from"./utils-315af40b.js";import{N,O as X,P as Y,Q as _,R as Q}from"./vanilla-3b876cff.js";import{u as f}from"./useMutation.esm-d4468cf0.js";import{P as T}from"./index-049566ba.js";import{P as G}from"./index-99e3a44e.js";import{P as H}from"./index-1cebb741.js";import{P as K}from"./index-9b10f2ce.js";import{i as W}from"./index-bff1ebcb.js";import"./utils.esm-17456083.js";import"./mutation.esm-ec5a0170.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",L(void 0));y.debugLabel="atomMainTableActions";const $=()=>V(y),j=()=>C(y),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",q({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const z=()=>{const e=x(h);return()=>e({open:!0,actionType:"add"})},J=()=>{const e=x(h);return t=>e({open:!0,actionType:"edit",record:t})},U=()=>D(h),Z=()=>C(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{const e=m.useRef(),{open:t,actionType:a,record:n}=Z(),s=U(),l=()=>{var i;a==="edit"&&((i=e.current)==null||i.resetFields()),s()},r=j(),{data:c}=P("sys_normal_disable"),{mutate:d,isLoading:w}=f(async()=>{var u;const i=await((u=e.current)==null?void 0:u.validateFields());if(i){if(a==="add"){await N(i);return}await X({...i,postId:n.postId})}},{onSuccess:()=>{r==null||r.reload(),l(),A.success(a==="add"?"新增成功":"保存成功")}});return m.useEffect(()=>{if(t&&a==="edit"){const i=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(n),clearTimeout(i)},0)}},[t]),o(M,{open:t,onCancel:l,okText:"提交",okButtonProps:{loading:w},onOk:()=>d(),title:a==="add"?"新增岗位":"编辑岗位信息",children:b(v,{submitter:!1,formRef:e,children:[o(T,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),o(T,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),o(G,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),o(H.Group,{name:"status",label:"状态",valueEnum:(c==null?void 0:c.valueEnum)??{},initialValue:c==null?void 0:c.defaultValue}),o(K,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=z();return o(p,{accessible:!0,children:o(g,{type:"primary",icon:o(I,{}),onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({record:e})=>{const t=J();return o(p,{accessible:!0,children:o(g,{type:"link",icon:o(R,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({searchParams:e})=>{const{isLoading:t,mutate:a}=f(()=>Y(e),{onSuccess:()=>{A.success("导出成功")}});return o(p,{accessible:!0,children:o(g,{type:"primary",ghost:!0,icon:o(S,{}),loading:t,onClick:()=>a(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({postId:e,isBatch:t,disabled:a})=>{const n=t?"批量删除":"删除",s=j(),{mutateAsync:l,isLoading:r}=f(async d=>{await _({postIds:d})},{onSuccess:()=>{var d;s==null||s.reload(),(d=s==null?void 0:s.clearSelected)==null||d.call(s),A.success("删除成功")}});return o(p,{accessible:!0,children:o(g,{type:"link",danger:!0,disabled:a,icon:o(O,{}),onClick:()=>{M.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>l(e),okButtonProps:{loading:r}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const{data:e}=P("sys_normal_disable");return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(e==null?void 0:e.valueEnum)??{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(t,a)=>b(E,{children:[o(oe,{record:a}),o(k,{postId:a.postId})]})}]},re=({selectedRows:e})=>o(k,{disabled:e.length===0,isBatch:!0,postId:e.map(t=>t.postId).join(",")}),ie=()=>{const[e,t]=m.useState({}),a=m.useRef(),n=$(),s=se();return o(B,{formRef:a,actionRef:n,rowKey:"postId",request:async(...l)=>{const r=W(...l);return t(r),await Q(r)},columns:s,toolbar:{actions:[o(ae,{searchParams:e},"ButtonExport"),o(te,{},"ButtonAdd")]},tableAlertOptionRender:re})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Pe=()=>b(F,{children:[o(ie,{}),o(ee,{})]});export{Pe as default};
