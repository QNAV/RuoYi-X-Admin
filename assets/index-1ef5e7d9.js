import{aU as x,aV as T,d as a,ac as c,ax as r,aW as d,aX as g,aE as h,aY as b,r as I,as as A,aZ as C,a_ as k}from"./index-e849e64b.js";import{a as v}from"./index-dc48f86e.js";import{s as j,a as L,b as M,c as P}from"./Monitor-c7114ffc.js";import{u as l}from"./useMutation.esm-c090d795.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const u=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",x(void 0));u.debugLabel="atomMainTableActions";const m=()=>T(u),w=()=>v(u);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=()=>{const e=m(),{isLoading:t,mutate:s}=l(j,{onSuccess:()=>{e==null||e.reload(),h.success("清空访问记录成功")}});return a(c,{accessible:!0,children:a(r,{danger:!0,icon:a(d,{}),onClick:()=>g.confirm({title:"清空访问记录",content:"确认清空访问记录吗？",okButtonProps:{loading:t},onOk:s}),children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({searchParams:e})=>{const{isLoading:t,mutate:s}=l(()=>L(e),{onSuccess:()=>{h.success("导出成功")}});return a(c,{accessible:!0,children:a(r,{ghost:!0,type:"primary",icon:a(b,{}),loading:t,onClick:()=>s(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const p=({infoId:e,disabled:t,isBatch:s})=>{const n=s?"批量删除":"删除",o=m(),{mutateAsync:y,isLoading:f}=l(async i=>{await M({infoIds:i})},{onSuccess:()=>{var i;o==null||o.reload(),(i=o==null?void 0:o.clearSelected)==null||i.call(o),h.success("删除成功")}});return a(c,{accessible:!0,children:a(r,{type:"link",danger:!0,disabled:t,icon:a(d,{}),onClick:()=>{g.confirm({title:"删除访问记录",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:async()=>y(e),okButtonProps:{loading:f}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录日期",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(e,t)=>a(p,{infoId:t.infoId})}],O=({selectedRows:e})=>a(p,{isBatch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),D=()=>{const e=w(),[t,s]=I.exports.useState({});return a(A,{children:a(C,{rowKey:"infoId",actionRef:e,columns:R,request:async(...n)=>{const o=k(...n);return s(o),await P(o)},toolbar:{actions:[a(B,{},"ButtonCleanUp"),a(S,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:O})})};export{D as default};
