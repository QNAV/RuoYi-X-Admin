import{r as d,aX as Oe,V as ae,aD as H,aV as de,M as a,bk as Pt,ap as At,aS as Dt,aT as Tt,aW as Bt,bl as Ft,aY as we,bm as Nt,bn as _e,bo as Mt,bp as Ze,ao as Kt,aK as ke,bq as _t,U as He,br as rt,O as qe,bs as zt,j as l,g as M,F as ze,aq as Lt,_ as B,a8 as et,ax as fe,bt as kt,bu as jt,bv as $t,bw as Ot,bx as Ht,by as qt,K as Gt,bz as Vt,h as it,l as Ge,n as ct,bA as lt,bB as st,bC as dt,q as Wt,Y as Me,a as Xt,af as Fe,ag as ne,a4 as Yt,bD as Qt,aA as Ut,ah as Jt,ai as Zt,aj as ea,aI as ta,au as tt,X as aa,al as na,W as oa,aO as ra,bE as ia,aQ as Be,bF as ut,aB as mt,aL as pt,aM as ht,bG as gt,aP as ft,aJ as Ve,I as ca}from"./index.82fca14a.js";import{b as Re,j as We}from"./index.325812ac.js";import{a as la}from"./index.de598671.js";import{e as sa}from"./SysMenuService.364d852c.js";import{S as da,a as ua,b as ma,c as pa,d as ha,e as ga,f as fa}from"./SysRoleService.4be38a55.js";import{a as xa,u as va}from"./utils.a0eb1f2f.js";import{u as xt}from"./useQuery.esm.a64abd47.js";import{u as Xe}from"./useMutation.esm.d46f3ad9.js";import{e as ya}from"./SysDeptService.ae6b4ce5.js";import{i as at,u as Ca}from"./useRequest.5976c31c.js";import"./utils.esm.41c15342.js";var vt=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Sa=function(e){var r=e.prefixCls,n=e.className,i=e.avatar,c=e.title,o=e.description,u=vt(e,["prefixCls","className","avatar","title","description"]),s=d.exports.useContext(Oe),y=s.getPrefixCls,h=y("list",r),x=ae("".concat(h,"-item-meta"),n),g=H.createElement("div",{className:"".concat(h,"-item-meta-content")},c&&H.createElement("h4",{className:"".concat(h,"-item-meta-title")},c),o&&H.createElement("div",{className:"".concat(h,"-item-meta-description")},o));return H.createElement("div",de({},u,{className:x}),i&&H.createElement("div",{className:"".concat(h,"-item-meta-avatar")},i),(c||o)&&g)},ba=function(e,r){var n=e.prefixCls,i=e.children,c=e.actions,o=e.extra,u=e.className,s=e.colStyle,y=vt(e,["prefixCls","children","actions","extra","className","colStyle"]),h=d.exports.useContext(Ye),x=h.grid,g=h.itemLayout,f=d.exports.useContext(Oe),m=f.getPrefixCls,K=function(){var D;return d.exports.Children.forEach(i,function(E){typeof E=="string"&&(D=!0)}),D&&d.exports.Children.count(i)>1},A=function(){return g==="vertical"?!!o:!K()},b=m("list",n),w=c&&c.length>0&&H.createElement("ul",{className:"".concat(b,"-item-action"),key:"actions"},c.map(function(p,D){return H.createElement("li",{key:"".concat(b,"-item-action-").concat(D)},p,D!==c.length-1&&H.createElement("em",{className:"".concat(b,"-item-action-split")}))})),_=x?"div":"li",C=H.createElement(_,de({},y,x?{}:{ref:r},{className:ae("".concat(b,"-item"),a({},"".concat(b,"-item-no-flex"),!A()),u)}),g==="vertical"&&o?[H.createElement("div",{className:"".concat(b,"-item-main"),key:"content"},i,w),H.createElement("div",{className:"".concat(b,"-item-extra"),key:"extra"},o)]:[i,w,Pt(o,{key:"extra"})]);return x?H.createElement(At,{ref:r,flex:1,style:s},C):C},yt=d.exports.forwardRef(ba);yt.Meta=Sa;const wa=yt;var Ea=function(e){var r,n,i=e.listBorderedCls,c=e.componentCls,o=e.paddingLG,u=e.margin,s=e.padding,y=e.listItemPaddingSM,h=e.marginLG,x=e.borderRadiusLG;return n={},a(n,"".concat(i),(r={border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:x},a(r,"".concat(c,"-header,").concat(c,"-footer,").concat(c,"-item"),{paddingInline:o}),a(r,"".concat(c,"-pagination"),{margin:"".concat(u,"px ").concat(h,"px")}),r)),a(n,"".concat(i).concat(c,"-sm"),a({},"".concat(c,"-item,").concat(c,"-header,").concat(c,"-footer"),{padding:y})),a(n,"".concat(i).concat(c,"-lg"),a({},"".concat(c,"-item,").concat(c,"-header,").concat(c,"-footer"),{padding:"".concat(s,"px ").concat(o,"px")})),n},Ia=function(e){var r,n,i,c,o=e.componentCls,u=e.screenSM,s=e.screenMD,y=e.marginLG,h=e.marginSM,x=e.margin;return c={},a(c,"@media screen and (max-width:".concat(s,")"),(r={},a(r,"".concat(o),a({},"".concat(o,"-item"),a({},"".concat(o,"-item-action"),{marginInlineStart:y}))),a(r,"".concat(o,"-vertical"),a({},"".concat(o,"-item"),a({},"".concat(o,"-item-extra"),{marginInlineStart:y}))),r)),a(c,"@media screen and (max-width: ".concat(u,")"),(i={},a(i,"".concat(o),a({},"".concat(o,"-item"),a({flexWrap:"wrap"},"".concat(o,"-action"),{marginInlineStart:h}))),a(i,"".concat(o,"-vertical"),a({},"".concat(o,"-item"),(n={flexWrap:"wrap-reverse"},a(n,"".concat(o,"-item-main"),{minWidth:e.contentWidth}),a(n,"".concat(o,"-item-extra"),{margin:"auto auto ".concat(x,"px")}),n))),i)),c},Ra=function(e){var r,n,i,c,o,u,s=e.componentCls,y=e.antCls,h=e.controlHeight,x=e.minHeight,g=e.paddingSM,f=e.marginLG,m=e.padding,K=e.listItemPadding,A=e.colorPrimary,b=e.listItemPaddingSM,w=e.listItemPaddingLG,_=e.paddingXS,C=e.margin,p=e.colorText,D=e.colorTextDescription,E=e.motionDurationSlow,V=e.lineWidth;return u={},a(u,"".concat(s),de(de({},Bt(e)),(c={position:"relative","*":{outline:"none"}},a(c,"".concat(s,"-header, ").concat(s,"-footer"),{background:"transparent",paddingBlock:g}),a(c,"".concat(s,"-pagination"),a({marginBlockStart:f,textAlign:"end"},"".concat(y,"-pagination-options"),{textAlign:"start"})),a(c,"".concat(s,"-spin"),{minHeight:x,textAlign:"center"}),a(c,"".concat(s,"-items"),{margin:0,padding:0,listStyle:"none"}),a(c,"".concat(s,"-item"),(i={display:"flex",alignItems:"center",justifyContent:"space-between",padding:K,color:p},a(i,"".concat(s,"-item-meta"),(r={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(r,"".concat(s,"-item-meta-avatar"),{marginInlineEnd:m}),a(r,"".concat(s,"-item-meta-content"),{flex:"1 0",width:0,color:p}),a(r,"".concat(s,"-item-meta-title"),{marginBottom:e.marginXXS,color:p,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":a({color:p,transition:"all ".concat(E)},"&:hover",{color:A})}),a(r,"".concat(s,"-item-meta-description"),{color:D,fontSize:e.fontSize,lineHeight:e.lineHeight}),r)),a(i,"".concat(s,"-item-action"),(n={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(n,"& > li",a({position:"relative",display:"inline-block",padding:"0 ".concat(_,"px"),color:D,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(n,"".concat(s,"-item-action-split"),{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:V,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),n)),i)),a(c,"".concat(s,"-empty"),{padding:"".concat(m,"px 0"),color:D,fontSize:e.fontSizeSM,textAlign:"center"}),a(c,"".concat(s,"-empty-text"),{padding:m,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),a(c,"".concat(s,"-item-no-flex"),{display:"block"}),c))),a(u,"".concat(s,"-grid ").concat(y,"-col > ").concat(s,"-item"),{display:"block",maxWidth:"100%",marginBlockEnd:C,paddingBlock:0,borderBlockEnd:"none"}),a(u,"".concat(s,"-vertical ").concat(s,"-item"),(o={alignItems:"initial"},a(o,"".concat(s,"-item-main"),{display:"block",flex:1}),a(o,"".concat(s,"-item-extra"),{marginInlineStart:f}),a(o,"".concat(s,"-item-meta"),a({marginBlockEnd:m},"".concat(s,"-item-meta-title"),{marginBlockEnd:g,color:p,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),a(o,"".concat(s,"-item-action"),{marginBlockStart:m,marginInlineStart:"auto","> li":a({padding:"0 ".concat(m,"px")},"&:first-child",{paddingInlineStart:0})}),o)),a(u,"".concat(s,"-split ").concat(s,"-item"),a({borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&:last-child",{borderBlockEnd:"none"})),a(u,"".concat(s,"-split ").concat(s,"-header"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(u,"".concat(s,"-split").concat(s,"-empty ").concat(s,"-footer"),{borderTop:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(u,"".concat(s,"-loading ").concat(s,"-spin-nested-loading"),{minHeight:h}),a(u,"".concat(s,"-split").concat(s,"-something-after-last-item ").concat(y,"-spin-container > ").concat(s,"-items > ").concat(s,"-item:last-child"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(u,"".concat(s,"-lg ").concat(s,"-item"),{padding:w}),a(u,"".concat(s,"-sm ").concat(s,"-item"),{padding:b}),a(u,"".concat(s,":not(").concat(s,"-vertical)"),a({},"".concat(s,"-item-no-flex"),a({},"".concat(s,"-item-action"),{float:"right"}))),u};const Pa=Dt("List",function(t){var e=Tt(t,{listBorderedCls:"".concat(t.componentCls,"-bordered"),minHeight:t.controlHeightLG,listItemPadding:"".concat(t.paddingContentVertical,"px ").concat(t.paddingContentHorizontalLG,"px"),listItemPaddingSM:"".concat(t.paddingContentVerticalSM,"px ").concat(t.paddingContentHorizontal,"px"),listItemPaddingLG:"".concat(t.paddingContentVerticalLG,"px ").concat(t.paddingContentHorizontalLG,"px")});return[Ra(e),Ea(e),Ia(e)]},{contentWidth:220});var Aa=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},Ye=d.exports.createContext({});Ye.Consumer;function Le(t){var e,r=t.pagination,n=r===void 0?!1:r,i=t.prefixCls,c=t.bordered,o=c===void 0?!1:c,u=t.split,s=u===void 0?!0:u,y=t.className,h=t.children,x=t.itemLayout,g=t.loadMore,f=t.grid,m=t.dataSource,K=m===void 0?[]:m,A=t.size,b=t.header,w=t.footer,_=t.loading,C=_===void 0?!1:_,p=t.rowKey,D=t.renderItem,E=t.locale,V=Aa(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),J=n&&Ft(n)==="object"?n:{},v=d.exports.useState(J.defaultCurrent||1),z=we(v,2),le=z[0],G=z[1],xe=d.exports.useState(J.defaultPageSize||10),ue=we(xe,2),ve=ue[0],oe=ue[1],re=d.exports.useContext(Oe),Z=re.getPrefixCls,N=re.renderEmpty,W=re.direction,$={current:1,total:0},T={},O=function(F){return function(Q,U){G(Q),oe(U),n&&n[F]&&n[F](Q,U)}},q=O("onChange"),me=O("onShowSizeChange"),X=function(F,Q){if(!D)return null;var U;return typeof p=="function"?U=p(F):p?U=F[p]:U=F.key,U||(U="list-item-".concat(Q)),T[Q]=U,D(F,Q)},pe=function(){return!!(g||n||w)},ye=function(F,Q){return d.exports.createElement("div",{className:"".concat(F,"-empty-text")},E&&E.emptyText||Q("List"))},L=Z("list",i),Pe=Pa(L),ee=we(Pe,2),Ae=ee[0],Ee=ee[1],k=C;typeof k=="boolean"&&(k={spinning:k});var S=k&&k.spinning,R="";switch(A){case"large":R="lg";break;case"small":R="sm";break}var I=ae(L,(e={},a(e,"".concat(L,"-vertical"),x==="vertical"),a(e,"".concat(L,"-").concat(R),R),a(e,"".concat(L,"-split"),s),a(e,"".concat(L,"-bordered"),o),a(e,"".concat(L,"-loading"),S),a(e,"".concat(L,"-grid"),!!f),a(e,"".concat(L,"-something-after-last-item"),pe()),a(e,"".concat(L,"-rtl"),W==="rtl"),e),y,Ee),j=de(de(de({},$),{total:K.length,current:le,pageSize:ve}),n||{}),he=Math.ceil(j.total/j.pageSize);j.current>he&&(j.current=he);var ge=n?d.exports.createElement("div",{className:"".concat(L,"-pagination")},d.exports.createElement(Nt,de({},j,{onChange:q,onShowSizeChange:me}))):null,ie=_e(K);n&&K.length>(j.current-1)*j.pageSize&&(ie=_e(K).splice((j.current-1)*j.pageSize,j.pageSize));var De=Object.keys(f||{}).some(function(P){return["xs","sm","md","lg","xl","xxl"].includes(P)}),Ce=Mt(De),ce=d.exports.useMemo(function(){for(var P=0;P<Ze.length;P+=1){var F=Ze[P];if(Ce[F])return F}},[Ce]),Te=d.exports.useMemo(function(){if(!!f){var P=ce&&f[ce]?f[ce]:f.column;if(P)return{width:"".concat(100/P,"%"),maxWidth:"".concat(100/P,"%")}}},[f==null?void 0:f.column,ce]),Se=S&&d.exports.createElement("div",{style:{minHeight:53}});if(ie.length>0){var Y=ie.map(function(P,F){return X(P,F)}),be=d.exports.Children.map(Y,function(P,F){return d.exports.createElement("div",{key:T[F],style:Te},P)});Se=f?d.exports.createElement(Kt,{gutter:f.gutter},be):d.exports.createElement("ul",{className:"".concat(L,"-items")},Y)}else!h&&!S&&(Se=ye(L,N||_t));var se=j.position||"bottom",te=d.exports.useMemo(function(){return{grid:f,itemLayout:x}},[JSON.stringify(f),x]);return Ae(d.exports.createElement(Ye.Provider,{value:te},d.exports.createElement("div",de({className:I},V),(se==="top"||se==="both")&&ge,b&&d.exports.createElement("div",{className:"".concat(L,"-header")},b),d.exports.createElement(ke,de({},k),Se,h),w&&d.exports.createElement("div",{className:"".concat(L,"-footer")},w),g||(se==="bottom"||se==="both")&&ge)))}Le.Item=wa;var Da=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Ta(t){var e,r=t.prefixCls,n=t.expandIcon,i=n===void 0?l(kt,{}):n,c=t.onExpand,o=t.expanded,u=t.record,s=i,y="".concat(r,"-row-expand-icon"),h=function(g){c(!o),g.stopPropagation()};return typeof i=="function"&&(s=i({expanded:o,onExpand:c,record:u})),l("span",{className:ae(y,(e={},a(e,"".concat(r,"-row-expanded"),o),a(e,"".concat(r,"-row-collapsed"),!o),e)),onClick:h,children:s})}function Ba(t){var e,r,n,i,c,o=t.prefixCls,u=d.exports.useContext(He.ConfigContext),s=u.getPrefixCls,y=d.exports.useContext(rt),h=y.hashId,x=s("pro-list",o),g="".concat(x,"-row"),f=t.title,m=t.subTitle,K=t.content,A=t.itemTitleRender;t.prefixCls;var b=t.actions;t.item,t.recordKey;var w=t.avatar,_=t.cardProps,C=t.description,p=t.isEditable,D=t.checkbox,E=t.index,V=t.selected,J=t.loading,v=t.expand,z=t.onExpand,le=t.expandable,G=t.rowSupportExpand,xe=t.showActions,ue=t.showExtra,ve=t.type,oe=t.style,re=t.className,Z=re===void 0?g:re,N=t.record,W=t.onRow,$=t.onItem,T=t.itemHeaderRender,O=t.cardActionProps,q=t.extra,me=qe(t,Da),X=le||{},pe=X.expandedRowRender,ye=X.expandIcon,L=X.expandRowByClick,Pe=X.indentSize,ee=Pe===void 0?8:Pe,Ae=X.expandedRowClassName,Ee=zt(!!v,{value:v,onChange:z}),k=we(Ee,2),S=k[0],R=k[1],I=ae((e={},a(e,"".concat(g,"-selected"),!_&&V),a(e,"".concat(g,"-show-action-hover"),xe==="hover"),a(e,"".concat(g,"-type-").concat(ve),!!ve),a(e,"".concat(g,"-editable"),p),a(e,"".concat(g,"-show-extra-hover"),ue==="hover"),e),h,g),j=ae(h,a({},"".concat(Z,"-extra"),ue==="hover")),he=S||Object.values(le||{}).length===0,ge=pe&&pe(N,E,ee,S),ie=d.exports.useMemo(function(){if(!(!b||O==="actions"))return[l("div",{onClick:function(te){return te.stopPropagation()},children:b},"action")]},[b,O]),De=d.exports.useMemo(function(){if(!(!b||!O||O==="extra"))return[l("div",{onClick:function(te){return te.stopPropagation()},children:b},"action")]},[b,O]),Ce=f||m?M("div",{className:"".concat(I,"-header-title ").concat(h),children:[f&&l("div",{className:"".concat(I,"-title ").concat(h),children:f}),m&&l("div",{className:"".concat(I,"-subTitle ").concat(h),children:m})]}):null,ce=(r=A&&(A==null?void 0:A(N,E,Ce)))!==null&&r!==void 0?r:Ce,Te=ce||w||m||C?l(Le.Item.Meta,{avatar:w,title:ce,description:C&&he&&l("div",{className:"".concat(I,"-description ").concat(h),children:C})}):null,Se=ae(h,(n={},a(n,"".concat(I,"-item-has-checkbox"),D),a(n,"".concat(I,"-item-has-avatar"),w),a(n,I,I),n)),Y=d.exports.useMemo(function(){return w||f?M(ze,{children:[w&&l(Lt,{size:22,src:w,className:"".concat(s("list-item-meta-avatar")," ").concat(h)}),l("span",{className:"".concat(s("list-item-meta-title")," ").concat(h),children:f})]}):null},[w,s,h,f]),be=_?l(fe,B(B(B({bordered:!0,loading:J,hoverable:!0},_),{},{title:Y,subTitle:m,extra:ie,actions:De,bodyStyle:B({padding:24},_.bodyStyle)},$==null?void 0:$(N,E)),{},{children:l(et,{avatar:!0,title:!1,loading:J,active:!0,children:M("div",{className:"".concat(I,"-header ").concat(h),children:[A&&(A==null?void 0:A(N,E,Ce)),K]})})})):l(Le.Item,B(B(B(B({className:ae(Se,a({},Z,Z!==g))},me),{},{actions:ie,extra:!!q&&l("div",{className:j,children:q})},W==null?void 0:W(N,E)),$==null?void 0:$(N,E)),{},{onClick:function(te){var P,F,Q,U;W==null||(P=W(N,E))===null||P===void 0||(F=P.onClick)===null||F===void 0||F.call(P,te),$==null||(Q=$(N,E))===null||Q===void 0||(U=Q.onClick)===null||U===void 0||U.call(Q,te),L&&R(!S)},children:M(et,{avatar:!0,title:!1,loading:J,active:!0,children:[M("div",{className:"".concat(I,"-header ").concat(h),children:[M("div",{className:"".concat(I,"-header-option ").concat(h),children:[!!D&&l("div",{className:"".concat(I,"-checkbox ").concat(h),children:D}),Object.values(le||{}).length>0&&G&&Ta({prefixCls:x,expandIcon:ye,onExpand:R,expanded:S,record:N})]}),(i=T&&(T==null?void 0:T(N,E,Te)))!==null&&i!==void 0?i:Te]}),he&&(K||ge)&&M("div",{className:"".concat(I,"-content ").concat(h),children:[K,pe&&G&&l("div",{className:Ae&&Ae(N,E,ee),children:ge})]})]})}));return _?l("div",{className:ae(h,(c={},a(c,"".concat(I,"-card"),_),a(c,Z,Z!==g),c)),style:oe,children:be}):be}var Fa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Na(t){var e=t.dataSource,r=t.columns,n=t.rowKey,i=t.showActions,c=t.showExtra,o=t.prefixCls,u=t.actionRef,s=t.itemTitleRender,y=t.renderItem,h=t.itemCardProps,x=t.itemHeaderRender,g=t.expandable,f=t.rowSelection,m=t.pagination,K=t.onRow,A=t.onItem,b=t.rowClassName,w=qe(t,Fa),_=d.exports.useContext(rt),C=_.hashId,p=d.exports.useContext(He.ConfigContext),D=p.getPrefixCls,E=H.useMemo(function(){return typeof n=="function"?n:function(k,S){return k[n]||S}},[n]),V=jt(e,"children",E),J=we(V,1),v=J[0],z=$t(e.length,B({responsive:!0},m),function(){}),le=we(z,1),G=le[0],xe=H.useMemo(function(){if(m===!1||!G.pageSize||e.length<G.total)return e;var k=G.current,S=k===void 0?1:k,R=G.pageSize,I=R===void 0?10:R,j=e.slice((S-1)*I,S*I);return j},[e,G,m]),ue=D("pro-list",o),ve=Ot(f,{getRowKey:E,getRecordByKey:v,prefixCls:ue,data:e,pageData:xe,expandType:"row",childrenColumnName:"children",locale:{}}),oe=we(ve,2),re=oe[0],Z=oe[1],N=g||{},W=N.expandedRowKeys,$=N.defaultExpandedRowKeys,T=N.defaultExpandAllRows,O=T===void 0?!0:T,q=N.onExpand,me=N.onExpandedRowsChange,X=N.rowExpandable,pe=H.useState(function(){return $||(O!==!1?e.map(E):[])}),ye=we(pe,2),L=ye[0],Pe=ye[1],ee=H.useMemo(function(){return new Set(W||L||[])},[W,L]),Ae=H.useCallback(function(k){var S=E(k,e.indexOf(k)),R,I=ee.has(S);I?(ee.delete(S),R=_e(ee)):R=[].concat(_e(ee),[S]),Pe(R),q&&q(!I,k),me&&me(R)},[E,ee,e,q,me]),Ee=re([])[0];return l(Le,B(B({},w),{},{className:ae(D("pro-list-container",o),C,w.className),dataSource:xe,pagination:m&&G,renderItem:function(S,R){var I,j,he,ge={className:typeof b=="function"?b(S,R):b};r==null||r.forEach(function(Y){var be=Y.listKey,se=Y.cardActionProps;if(!!Ht.has(be)){var te=Y.dataIndex||be||Y.key,P=Array.isArray(te)?qt(S,te):S[te];se==="actions"&&be==="actions"&&(ge.cardActionProps=se);var F=Y.render?Y.render(P,S,R):P;F!=="-"&&(ge[Y.listKey]=F)}});var ie;Ee&&Ee.render&&(ie=Ee.render(S,S,R)||void 0);var De=((I=u.current)===null||I===void 0?void 0:I.isEditable(B(B({},S),{},{index:R})))||{},Ce=De.isEditable,ce=De.recordKey,Te=Z.has(ce||R),Se=l(Ba,B(B({cardProps:w.grid?B(B(B({},h),w.grid),{},{checked:Te,onChecked:H.isValidElement(ie)?(j=ie)===null||j===void 0||(he=j.props)===null||he===void 0?void 0:he.onChange:void 0}):void 0},ge),{},{recordKey:ce,isEditable:Ce||!1,expandable:g,expand:ee.has(E(S,R)),onExpand:function(){Ae(S)},index:R,record:S,item:S,showActions:i,showExtra:c,itemTitleRender:s,itemHeaderRender:x,rowSupportExpand:!X||X&&X(S),selected:Z.has(E(S,R)),checkbox:ie,onRow:K,onItem:A}),ce);return y?y(S,R,Se):Se}}))}var Ma=function(e){var r,n,i,c,o,u;return a({},e.componentCls,(u={backgroundColor:"transparent"},a(u,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(u,"&-row",(o={borderBlockEnd:"1px solid ".concat(e.colorSplit)},a(o,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(o,"&:last-child",a({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),a(o,"&:hover",(r={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(r,"".concat(e.antCls,"-list-item-action"),{display:"block"}),a(r,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),a(r,"".concat(e.componentCls,"-row-extra"),{display:"block"}),a(r,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),r)),a(o,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(o,"&".concat(e.componentCls,"-row-editable"),a({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(o,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),a(o,"&".concat(e.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),a(o,"&".concat(e.componentCls,"-row-type-inline"),a({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),a(o,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(o,"&-show-action-hover",(n={},a(n,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),a(n,"&:hover",a({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),n)),a(o,"&-show-extra-hover",a({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),a(o,"&-extra",{display:"none"}),a(o,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(o,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(o,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(o,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),a(o,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(o,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(o,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(o,"&-avatar",{display:"flex"}),a(o,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),a(o,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(o,"&-header-option",{display:"flex"}),a(o,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(o,"&-no-split",(i={},a(i,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),a(i,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),i)),a(o,"&-bordered",a({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),a(o,"".concat(e.antCls,"-list-vertical"),(c={},a(c,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(c,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(c,"&-content",{marginBlock:0,marginInline:0}),a(c,"&-subTitle",{marginBlockStart:8}),a(c,"".concat(e.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),a(c,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),a(c,"".concat(e.componentCls,"-row-show-extra-hover"),a({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),c)),a(o,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),a(o,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(o,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(o,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),o)),u))};function Ka(t){return Gt("ProList",function(e){var r=B(B({},e),{},{componentCls:".".concat(t)});return[Ma(r)]})}var _a=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function za(t){var e=t.metas,r=t.split,n=t.footer,i=t.rowKey,c=t.tooltip,o=t.className,u=t.options,s=u===void 0?!1:u,y=t.search,h=y===void 0?!1:y,x=t.expandable,g=t.showActions,f=t.showExtra,m=t.rowSelection,K=m===void 0?!1:m,A=t.pagination,b=A===void 0?!1:A,w=t.itemLayout,_=t.renderItem,C=t.grid,p=t.itemCardProps,D=t.onRow,E=t.onItem,V=t.rowClassName,J=t.locale,v=t.itemHeaderRender,z=t.itemTitleRender,le=qe(t,_a),G=d.exports.useRef();d.exports.useImperativeHandle(le.actionRef,function(){return G.current});var xe=d.exports.useContext(He.ConfigContext),ue=xe.getPrefixCls,ve=d.exports.useMemo(function(){var $=[];return Object.keys(e||{}).forEach(function(T){var O=e[T]||{},q=O.valueType;q||(T==="avatar"&&(q="avatar"),T==="actions"&&(q="option"),T==="description"&&(q="textarea")),$.push(B(B({listKey:T,dataIndex:(O==null?void 0:O.dataIndex)||T},O),{},{valueType:q}))}),$},[e]),oe=ue("pro-list",t.prefixCls),re=Ka(oe),Z=re.wrapSSR,N=re.hashId,W=ae(oe,N,a({},"".concat(oe,"-no-split"),!r));return Z(l(Vt,B(B({tooltip:c},le),{},{actionRef:G,pagination:b,type:"list",rowSelection:K,search:h,options:s,className:ae(oe,o,W),columns:ve,rowKey:i,tableViewRender:function(T){var O=T.columns,q=T.size,me=T.pagination,X=T.rowSelection,pe=T.dataSource,ye=T.loading;return l(Na,{grid:C,itemCardProps:p,itemTitleRender:z,prefixCls:t.prefixCls,columns:O,renderItem:_,actionRef:G,dataSource:pe||[],size:q,footer:n,split:r,rowKey:i,expandable:x,rowSelection:K===!1?void 0:X,showActions:g,showExtra:f,pagination:me,itemLayout:w,loading:ye,itemHeaderRender:v,onRow:D,onItem:E,rowClassName:V,locale:J})}})))}var Ct=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},La=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,c=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)c.push(i.value)}catch(u){o={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return c},Ke=new Set,Ie,nt={xs:0,sm:576,md:768,lg:992,xl:1200};function ot(){var t,e,r=Ie;if(St(),r!==Ie)try{for(var n=Ct(Ke),i=n.next();!i.done;i=n.next()){var c=i.value;c()}}catch(o){t={error:o}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}var $e=!1;function St(){var t,e,r=window.innerWidth,n={},i=!1;try{for(var c=Ct(Object.keys(nt)),o=c.next();!o.done;o=c.next()){var u=o.value;n[u]=r>=nt[u],n[u]!==Ie[u]&&(i=!0)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}i&&(Ie=n)}function ka(){at&&!$e&&(Ie={},St(),window.addEventListener("resize",ot),$e=!0);var t=La(d.exports.useState(Ie),2),e=t[0],r=t[1];return d.exports.useEffect(function(){if(!!at){var n=function(){r(Ie)};return Ke.add(n),function(){Ke.delete(n),Ke.size===0&&(window.removeEventListener("resize",ot),$e=!1)}}},[]),e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",it(void 0));Qe.debugLabel="atomRoleListActions";const Ue=()=>Ge(Qe),ja=()=>la(Qe),je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",xa({open:!1,roleId:0}));je.debugLabel="atomRoleDetails";const $a=()=>va(je),Oa=()=>{const t=ct(je);return e=>{t({open:!0,roleId:e})}},Ne=()=>Ge(je),Je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomSearchParams",it({}));Je.debugLabel="atomSearchParams";const Ha=()=>Ge(Je),qa=()=>ct(Je),bt="sysRole",wt=[bt,"details"],Et=t=>{const{roleId:e}=Ne(),r=xt(wt,()=>da({roleId:e}),{onSuccess:t,enabled:!1});return d.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},It=[bt,"tree"],Ga=t=>{const{roleId:e}=Ne(),r=xt(It,async()=>{const{menus:n,checkedKeys:i}=await sa({roleId:e});return{treeData:n,selectedMenuIds:i,selectedTreeData:lt(n,i),allMenuIds:st(n),allExpandedKeys:dt(n)}},{onSuccess:n=>{t(n.selectedTreeData)},enabled:!1});return d.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},Rt=t=>{const e=Wt();return Xe(async r=>{const n=e.getQueryData(wt),i=e.getQueryData(It);await ua({roleId:n.roleId,roleKey:n.roleKey,roleName:n.roleName,roleSort:n.roleSort,status:n.status,menuIds:i.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...r})},{onSuccess:()=>{t(),Me.success("\u4FDD\u5B58\u6210\u529F")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Va=()=>{const{canEditSysRole:t}=Re(),e=Xt(),{roleId:r}=Ne();return l(Fe,{accessible:t,children:l(ne,{type:"primary",ghost:!0,onClick:()=>e(`/system/role-auth/${r}`),icon:l(Yt,{}),children:"\u5206\u914D\u7528\u6237"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Wa=()=>{var i;const{canAddSysRole:t}=Re(),e=d.exports.useRef(),r=Ue(),{data:n}=We("sys_normal_disable");return l(Fe,{accessible:t,children:l(Qt,{title:"\u65B0\u589E\u89D2\u8272",trigger:l(ne,{type:"primary",icon:l(Ut,{}),children:"\u65B0\u589E"}),formRef:e,onFinish:async c=>{var o;return await ma({...c,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),r==null||r.reload(),Me.success("\u65B0\u589E\u6210\u529F"),(o=e.current)==null||o.resetFields(),!0},width:500,layoutType:"ModalForm",columns:[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}},{valueType:"group",columns:[{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueEnum:(i=n==null?void 0:n.mapData)!=null?i:{},valueType:"radio",formItemProps:{initialValue:n==null?void 0:n.defaultValue,required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]}},{title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u6392\u5E8F"}]}}]},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea"}]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Xa=()=>{const{canRemoveSysRole:t}=Re(),e=Ue(),r=$a(),{roleId:n}=Ne();return l(Fe,{accessible:t,children:l(ne,{danger:!0,ghost:!0,icon:l(Jt,{}),onClick:()=>Zt.confirm({title:"\u5220\u9664\u89D2\u8272",content:`\u786E\u5B9A\u5220\u9664\u89D2\u8272\u7F16\u53F7\u4E3A ${n} \u7684\u6570\u636E\u5417\uFF1F`,onOk:async()=>{var c;await pa({roleIds:n}),e==null||e.reload(),(c=e==null?void 0:e.clearSelected)==null||c.call(e),r(),Me.success("\u5220\u9664\u6210\u529F")}}),children:"\u5220\u9664"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ya=()=>{const{canExportSysRole:t}=Re(),e=Ha(),{isLoading:r,mutate:n}=Xe(()=>ha(e),{onSuccess:()=>{Me.success("\u5BFC\u51FA\u6210\u529F")}});return l(Fe,{accessible:t,children:l(ne,{ghost:!0,type:"primary",icon:l(ea,{}),loading:r,onClick:()=>n(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Qa=()=>{var x;const[t,e]=d.exports.useState([]),[r]=ta.useForm(),n=Re(),{data:i}=We("sys_normal_disable"),c=Ue(),{data:o,isFetching:u,refetch:s}=Et(()=>{e([]),r.resetFields()}),{mutateAsync:y}=Rt(()=>{s(),c==null||c.reload()}),h=n.canEditSysRole&&o?{form:r,editableKeys:t,onChange:(g,f)=>{e(g);const m=g[0];r.setFieldsValue({[m]:f[m]})},onSave:async(g,f)=>{await y({[g]:f[g]})}}:void 0;return M(ke,{spinning:u,children:[l(tt,{column:2,columns:[{title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],dataSource:o}),l(aa,{}),l(tt,{column:2,columns:[{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueEnum:(x=i==null?void 0:i.mapData)!=null?x:{},valueType:"radio",formItemProps:{initialValue:i==null?void 0:i.defaultValue,required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]}},{title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u6392\u5E8F"}]}},{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}}],dataSource:o,editable:h})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ua=()=>{var i;const t=ja(),e=Oa(),r=qa(),{data:n}=We("sys_normal_disable");return l(za,{ghost:!0,rowKey:"roleId",actionRef:t,metas:{title:{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},subTitle:{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:(i=n==null?void 0:n.mapData)!=null?i:{}},description:{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}}},tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:c})=>{e(c)}},search:{filterType:"light"},options:{setting:!1,fullScreen:!1,density:!1,reload:!0},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:async(...c)=>{const o=na(...c);return r(o),await ga(o)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ja=()=>{const[t,e]=d.exports.useState([]),[r,n]=d.exports.useState(!1),[i,c]=d.exports.useState([]),[o,u]=d.exports.useState([]),[s,y]=d.exports.useState(!1),[h,x]=d.exports.useState(!0),[g,f]=d.exports.useState(),m=d.exports.useRef(),{canEditSysRole:K}=Re(),{open:A,roleId:b}=Ne(),{refetch:w}=Et(({dataScope:v})=>{var z;f(v),(z=m.current)==null||z.setFieldsValue({dataScope:v})}),{loading:_,refresh:C,data:p}=Ca(async()=>{const{depts:v,checkedKeys:z}=await ya({roleId:b});return{treeData:v,selectedMenuIds:z,selectedTreeData:lt(v,z),allMenuIds:st(v),allExpandedKeys:dt(v)}},{ready:A,refreshDeps:[b],onSuccess:v=>{n(!1),u(v.selectedTreeData)}}),{isLoading:D,mutate:E}=Xe(async()=>{await fa({roleId:b,dataScope:g,deptIds:t})},{onSuccess:()=>{C(),w(),Me.success("\u4FDD\u5B58\u6210\u529F")}}),V=i.length===(p==null?void 0:p.allExpandedKeys.length),J=v=>{var z;if(v||h){e((z=p==null?void 0:p.allMenuIds)!=null?z:[]);return}e([])};return d.exports.useEffect(()=>{if((p==null?void 0:p.allMenuIds.length)===t.length){y(!0),x(!1);return}if(t.length===0){y(!1),x(!1);return}x(!0)},[p==null?void 0:p.allMenuIds,t]),M(ze,{children:[M("header",{className:"flex justify-between items-start flex-wrap",children:[l(oa,{formRef:m,submitter:!1,layout:"horizontal",children:l(ra,{name:"dataScope",label:"\u6570\u636E\u6743\u9650\u8303\u56F4",fieldProps:{options:ia,onChange:v=>{f(v)}},readonly:!r})}),l(Fe,{accessible:K,children:r?M(Be,{children:[l(ne,{loading:D,onClick:()=>{var v;n(!1),u((v=p==null?void 0:p.selectedTreeData)!=null?v:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),l(ne,{type:"primary",ghost:!0,icon:l(ut,{}),loading:D,onClick:()=>E(),children:"\u4FDD\u5B58"})]}):l(ne,{type:"primary",ghost:!0,icon:l(mt,{}),onClick:()=>{var v,z;n(!0),e((v=p==null?void 0:p.selectedMenuIds)!=null?v:[]),u((z=p==null?void 0:p.treeData)!=null?z:[])},children:"\u7F16\u8F91\u6570\u636E\u6743\u9650"})})]}),g==="2"&&M(ze,{children:[M(Be,{wrap:!0,className:"mb-2",children:[o.length>0&&l(ne,{size:"small",icon:V?l(pt,{}):l(ht,{}),onClick:()=>c(V?[]:p.allExpandedKeys),children:V?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),r&&l(gt,{indeterminate:h,onChange:v=>J(v.target.checked),checked:s,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),l(ke,{spinning:_,children:o.length>0?l(ft,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:i,onExpand:v=>c(v),onCheck:v=>{e(v.checked)}}):l(Ve,{description:"\u6682\u672A\u5206\u914D\u6570\u636E\u6743\u9650"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Za=()=>{const[t,e]=d.exports.useState([]),[r,n]=d.exports.useState(!1),[i,c]=d.exports.useState([]),[o,u]=d.exports.useState([]),[s,y]=d.exports.useState(!1),[h,x]=d.exports.useState(!0),{canEditSysRole:g}=Re(),{isFetching:f,data:m,refetch:K}=Ga(C=>{n(!1),u(C)}),{isLoading:A,mutate:b}=Rt(()=>{K()}),w=i.length===(m==null?void 0:m.allExpandedKeys.length),_=C=>{var p;if(C||h){e((p=m==null?void 0:m.allMenuIds)!=null?p:[]);return}e([])};return d.exports.useEffect(()=>{if((m==null?void 0:m.allMenuIds.length)===t.length){y(!0),x(!1);return}if(t.length===0){y(!1),x(!1);return}x(!0)},[m==null?void 0:m.allMenuIds,t]),M(ze,{children:[M("header",{className:"flex justify-between mb-2",children:[l(Be,{wrap:!0,children:o.length>0&&l(ne,{size:"small",icon:w?l(pt,{}):l(ht,{}),onClick:()=>c(w?[]:m.allExpandedKeys),children:w?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"})}),l(Fe,{accessible:g,children:r?M(Be,{wrap:!0,children:[l(ne,{loading:A,onClick:()=>{var C;n(!1),u((C=m==null?void 0:m.selectedTreeData)!=null?C:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),l(ne,{type:"primary",ghost:!0,icon:l(ut,{}),loading:A,onClick:()=>b({menuIds:t}),children:"\u4FDD\u5B58"})]}):l(ne,{type:"primary",ghost:!0,icon:l(mt,{}),onClick:()=>{var C,p;n(!0),e((C=m==null?void 0:m.selectedMenuIds)!=null?C:[]),u((p=m==null?void 0:m.treeData)!=null?p:[])},children:"\u7F16\u8F91\u83DC\u5355\u6743\u9650"})})]}),M(ke,{spinning:f,children:[l("div",{className:"pl-1 mb-2",children:r&&l(gt,{indeterminate:h,onChange:C=>_(C.target.checked),checked:s,children:"\u5168\u9009/\u5168\u4E0D\u9009"})}),o.length>0?l(ft,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:i,onExpand:C=>c(C),onCheck:C=>{e(C.checked)}}):l(Ve,{description:"\u6682\u672A\u5206\u914D\u83DC\u5355\u6743\u9650"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const mn=()=>{const{md:t,xl:e}=ka(),{open:r}=Ne();return l(ca,{children:M(fe,{ghost:!0,gutter:[16,16],wrap:!t,children:[l(fe,{title:"\u89D2\u8272\u5217\u8868",colSpan:"450px",extra:M(Be,{children:[l(Ya,{}),l(Wa,{})]}),children:l(Ua,{})}),r?M(fe,{split:"horizontal",title:"\u89D2\u8272\u8BE6\u60C5",extra:M(Be,{children:[l(Xa,{}),l(Va,{})]}),children:[l(fe,{children:l(Qa,{})}),M(fe,{split:e?"vertical":"horizontal",children:[l(fe,{children:l(Za,{})}),l(fe,{children:l(Ja,{})})]})]}):l(fe,{title:"\u89D2\u8272\u8BE6\u60C5",className:"h-full",children:l(Ve,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})})]})})};export{mn as default};
