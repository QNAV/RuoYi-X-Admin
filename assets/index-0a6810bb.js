import{$ as g,a0 as m,a1 as p,A as r,j as s,a2 as c,f as y,X as f,a3 as x,a4 as I,a5 as T,r as v,B as C,Z as b,a6 as k,a7 as A}from"./index-b9ecb91e.js";import{s as w,h as S,i as j,j as B}from"./Monitor-f33af41c.js";import{u as R}from"./useMutation-93d9da5c.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const l=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",g(void 0));l.debugLabel="atomMainTableActions";const u=()=>p(l),M=()=>m(l);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=()=>{const{message:e,modal:t}=r.useApp(),a=u();return s(c,{accessKey:"monitor:logininfor:remove",children:s(y,{danger:!0,icon:s(f,{}),onClick:()=>{t.confirm({title:"操作确认",content:"确认清空访问记录吗？",onOk:async()=>{var n;await w(),(n=a==null?void 0:a.clearSelected)==null||n.call(a),a==null||a.reload(),e.success("清空成功")}})},children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const P=async e=>{const{data:t}=await S(e,{format:"blob"});await I(t,`user_${new Date().getTime()}.xlsx`)},E=({searchParams:e})=>{const{message:t}=r.useApp(),{isLoading:a,mutate:o}=R(P,{onSuccess:()=>{t.success("导出成功")}});return s(c,{accessKey:"monitor:logininfor:export",children:s(x,{loading:a,onClick:()=>o(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const d=({infoId:e,disabled:t,batch:a})=>{const o=u(),{message:n,modal:i}=r.useApp();return s(c,{accessKey:"monitor:logininfor:remove",children:s(T,{batch:a,disabled:t,onClick:()=>{i.confirm({title:"操作确认",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:async()=>{var h;await j({infoIds:e}),(h=o==null?void 0:o.clearSelected)==null||h.call(o),o==null||o.reload(),n.success("删除成功")}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=()=>{const{valueEnumSysNormalDisable:e}=A();return[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作系统",dataIndex:"os",key:"os",valueType:"text",hideInSearch:!0},{title:"登录状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录时间",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"登录时间",dataIndex:"dateTimeRange",key:"dateTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(t,a)=>s(d,{infoId:[a.infoId]})}]},K=({selectedRows:e})=>s(d,{batch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId)}),$=()=>{const e=M(),[t,a]=v.useState({}),o=D();return s(C,{children:s(b,{rowKey:"infoId",actionRef:e,columns:o,request:async(...n)=>{const i=k(...n);return a(i),await B(i)},toolbar:{actions:[s(L,{},"ButtonCleanUp"),s(E,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:K})})};export{$ as default};
