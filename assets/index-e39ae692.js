import{q as v,t as S,v as M,R as C,a5 as w,j as a,a as A,d as I,a$ as R,b0 as B,am as p,b1 as O,x as D,b2 as F,o as N,z as V,b3 as L,F as q,B as X}from"./index-b5eebe28.js";import{a as Y,u as H}from"./utils-2835fcdf.js";import{r as m,bg as y,aH as $,B as g,P as z,E as G,D as Q,c as W}from"./antd-f7a9cbdb.js";import{u as T}from"./useMutation-cb32f323.js";import{P as x}from"./index-843b2515.js";import{P as _}from"./index-f6ff2bbf.js";import{P as J}from"./index-b2d143af.js";import{P as K}from"./index-80c0c3aa.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",v(void 0));f.debugLabel="atomMainTableActions";const U=()=>S(f),E=()=>M(f),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",Y({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const Z=()=>{const e=C(h);return()=>e({open:!0,actionType:"add"})},ee=()=>{const e=C(h);return t=>e({open:!0,actionType:"edit",record:t})},te=()=>H(h),ae=()=>M(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{const e=m.useRef(),{message:t}=y.useApp(),{open:s,actionType:r,record:o}=ae(),l=te(),c=()=>{var i;r==="edit"&&((i=e.current)==null||i.resetFields()),l()},d=E(),{valueEnumSysNormalDisable:b,defaultValueSysNormalDisable:P}=w(),{mutate:n,isLoading:j}=T(async()=>{var u;const i=await((u=e.current)==null?void 0:u.validateFields());if(i){if(r==="add"){await R(i);return}await B({...i,postId:o.postId})}},{onSuccess:()=>{d==null||d.reload(),c(),t.success(r==="add"?"新增成功":"保存成功")}});return m.useEffect(()=>{if(s&&r==="edit"){const i=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(o),clearTimeout(i)},0)}},[s]),a($,{open:s,onCancel:c,okText:"提交",okButtonProps:{loading:j},onOk:()=>n(),title:r==="add"?"新增岗位":"编辑岗位信息",children:A(I,{submitter:!1,formRef:e,children:[a(x,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),a(x,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),a(_,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),a(J.Group,{name:"status",label:"状态",valueEnum:b,initialValue:P}),a(K,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const e=Z();return a(p,{accessible:!0,children:a(g,{type:"primary",icon:a(z,{}),onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({record:e})=>{const t=ee();return a(p,{accessible:!0,children:a(g,{type:"link",icon:a(G,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=async e=>{const{data:t}=await O(e,{format:"blob"});await D(t,`post_${new Date().getTime()}.xlsx`)},ce=({searchParams:e})=>{const{message:t}=y.useApp(),{isLoading:s,mutate:r}=T(ie,{onSuccess:()=>{t.success("导出成功")}});return a(p,{accessible:!0,children:a(g,{type:"primary",ghost:!0,icon:a(Q,{}),loading:s,onClick:()=>r(e),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({postId:e,isBatch:t,disabled:s})=>{const r=t?"批量删除":"删除",o=E(),{message:l,modal:c}=y.useApp(),{mutateAsync:d,isLoading:b}=T(async n=>{await F({postIds:n})},{onSuccess:()=>{var n;o==null||o.reload(),(n=o==null?void 0:o.clearSelected)==null||n.call(o),l.success("删除成功")}});return a(p,{accessible:!0,children:a(g,{type:"link",danger:!0,disabled:s,icon:a(W,{}),onClick:()=>{c.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>d(e),okButtonProps:{loading:b}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{const{valueEnumSysNormalDisable:e}=w();return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(t,s)=>A(q,{children:[a(re,{record:s}),a(k,{postId:[s.postId]})]})}]},le=({selectedRowKeys:e})=>a(k,{disabled:e.length===0,isBatch:!0,postId:e}),de=()=>{const[e,t]=m.useState({}),s=m.useRef(),r=U(),o=ne();return a(N,{formRef:s,actionRef:r,rowKey:"postId",request:async(...l)=>{const c=V(...l);return t(c),await L(c)},columns:o,toolbar:{actions:[a(ce,{searchParams:e},"ButtonExport"),a(se,{},"ButtonAdd")]},tableAlertOptionRender:le})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Pe=()=>A(X,{children:[a(de,{}),a(oe,{})]});export{Pe as default};
