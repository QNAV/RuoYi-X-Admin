import{r as x,U as Ae,a0 as Q,j as _,a as i,M as a,a9 as lt,b0 as st,J as dt,K as ut,W as Pe,a6 as mt,Q as pt,V as Ce,bu as gt,_ as Te,bv as ft,bw as je,a$ as ht,bf as Ue,bx as xt,ad as _e,by as Qe,ac as Me,bz as vt,F as Le,ay as Ct,ab as P,aT as ke,b5 as Be,bA as yt,aD as Ee,bB as St,bC as bt,bD as wt,bE as It,bF as Et,aa as Rt,a_ as Pt,i as Nt,n as Ye,l as Bt,p as Ne,bG as Tt,aA as Re,b9 as Dt,aJ as ze,aL as Ge,bb as At,bc as _t,ba as Mt,bd as We,az as Ve,bg as Lt,bh as zt,bH as Kt,bk as Ft,be as $t,b4 as Xe,aI as qe,bl as Je}from"./index.7e2e4aff.js";import{B as Ht}from"./index.0dac2af8.js";import{A as Ke}from"./index.3efbd4c1.js";import{P as Ot}from"./index.40385f79.js";import{P as jt}from"./index.886aa1fb.js";import{E as kt,a as Ze,u as et}from"./useMutation.esm.c7490ab8.js";import{b as Fe}from"./keepAlive.a2f6a073.js";import{u as Gt,c as Wt}from"./useInitActionType.07c1d484.js";import{a as Vt,u as Xt}from"./utils.81244b9b.js";import{b as qt,C as Jt,c as Ut}from"./common.026964d1.js";import{E as tt}from"./index.37f2e67b.js";import{e as Qt}from"./SysMenuService.8c69695a.js";import{f as Yt,g as Zt}from"./tree.1fecacac.js";import{u as at}from"./useRequest.366cd4a8.js";import{u as ea}from"./useRowClick.c19aaf4b.js";import"./utils.esm.6214005e.js";import"./cloneDeep.5079a371.js";var nt=globalThis&&globalThis.__rest||function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(c[o[s]]=t[o[s]]);return c},ta=function(e){var c=e.prefixCls,o=e.className,s=e.avatar,r=e.title,n=e.description,d=nt(e,["prefixCls","className","avatar","title","description"]),l=x.exports.useContext(Ae),C=l.getPrefixCls,m=C("list",c),y=Q("".concat(m,"-item-meta"),o),p=_("div",{className:"".concat(m,"-item-meta-content"),children:[r&&i("h4",{className:"".concat(m,"-item-meta-title"),children:r}),n&&i("div",{className:"".concat(m,"-item-meta-description"),children:n})]});return _("div",{...d,className:y,children:[s&&i("div",{className:"".concat(m,"-item-meta-avatar"),children:s}),(r||n)&&p]})},aa=function(e,c){var o=e.prefixCls,s=e.children,r=e.actions,n=e.extra,d=e.className,l=e.colStyle,C=nt(e,["prefixCls","children","actions","extra","className","colStyle"]),m=x.exports.useContext($e),y=m.grid,p=m.itemLayout,g=x.exports.useContext(Ae),u=g.getPrefixCls,L=function(){var f;return x.exports.Children.forEach(s,function(h){typeof h=="string"&&(f=!0)}),f&&x.exports.Children.count(s)>1},T=function(){return p==="vertical"?!!n:!L()},b=u("list",o),S=r&&r.length>0&&i("ul",{className:"".concat(b,"-item-action"),children:r.map(function(N,f){return _("li",{children:[N,f!==r.length-1&&i("em",{className:"".concat(b,"-item-action-split")})]},"".concat(b,"-item-action-").concat(f))})},"actions"),A=y?"div":"li",H=i(A,{...C,...y?{}:{ref:c},className:Q("".concat(b,"-item"),a({},"".concat(b,"-item-no-flex"),!T()),d),children:p==="vertical"&&n?[_("div",{className:"".concat(b,"-item-main"),children:[s,S]},"content"),i("div",{className:"".concat(b,"-item-extra"),children:n},"extra")]:[s,S,lt(n,{key:"extra"})]});return y?i(st,{ref:c,flex:1,style:l,children:H}):H},ot=x.exports.forwardRef(aa);ot.Meta=ta;const na=ot;var oa=function(e){var c,o,s=e.listBorderedCls,r=e.componentCls,n=e.paddingLG,d=e.margin,l=e.padding,C=e.listItemPaddingSM,m=e.marginLG,y=e.radiusLG;return o={},a(o,"".concat(s),(c={border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:y},a(c,"".concat(r,"-header,").concat(r,"-footer,").concat(r,"-item"),{paddingInline:n}),a(c,"".concat(r,"-pagination"),{margin:"".concat(d,"px ").concat(m,"px")}),c)),a(o,"".concat(s).concat(r,"-sm"),a({},"".concat(r,"-item,").concat(r,"-header,").concat(r,"-footer"),{padding:C})),a(o,"".concat(s).concat(r,"-lg"),a({},"".concat(r,"-item,").concat(r,"-header,").concat(r,"-footer"),{padding:"".concat(l,"px ").concat(n,"px")})),o},ra=function(e){var c,o,s,r,n=e.componentCls,d=e.screenSM,l=e.screenMD,C=e.marginLG,m=e.marginSM,y=e.margin;return r={},a(r,"@media screen and (max-width:".concat(l,")"),(c={},a(c,"".concat(n),a({},"".concat(n,"-item"),a({},"".concat(n,"-item-action"),{marginInlineStart:C}))),a(c,"".concat(n,"-vertical"),a({},"".concat(n,"-item"),a({},"".concat(n,"-item-extra"),{marginInlineStart:C}))),c)),a(r,"@media screen and (max-width: ".concat(d,")"),(s={},a(s,"".concat(n),a({},"".concat(n,"-item"),a({flexWrap:"wrap"},"".concat(n,"-action"),{marginInlineStart:m}))),a(s,"".concat(n,"-vertical"),a({},"".concat(n,"-item"),(o={flexWrap:"wrap-reverse"},a(o,"".concat(n,"-item-main"),{minWidth:e.contentWidth}),a(o,"".concat(n,"-item-extra"),{margin:"auto auto ".concat(y,"px")}),o))),s)),r},ia=function(e){var c,o,s,r,n,d,l=e.componentCls,C=e.antCls,m=e.controlHeight,y=e.minHeight,p=e.paddingSM,g=e.marginLG,u=e.padding,L=e.listItemPadding,T=e.colorPrimary,b=e.listItemPaddingSM,S=e.listItemPaddingLG,A=e.paddingXS,H=e.margin,N=e.colorText,f=e.colorTextDescription,h=e.motionDurationSlow,re=e.lineWidth;return d={},a(d,"".concat(l),Pe(Pe({},mt(e)),(r={position:"relative","*":{outline:"none"}},a(r,"".concat(l,"-header, ").concat(l,"-footer"),{background:"transparent",paddingBlock:p}),a(r,"".concat(l,"-pagination"),a({marginBlockStart:g,textAlign:"end"},"".concat(C,"-pagination-options"),{textAlign:"start"})),a(r,"".concat(l,"-spin"),{minHeight:y,textAlign:"center"}),a(r,"".concat(l,"-items"),{margin:0,padding:0,listStyle:"none"}),a(r,"".concat(l,"-item"),(s={display:"flex",alignItems:"center",justifyContent:"space-between",padding:L,color:N},a(s,"".concat(l,"-item-meta"),(c={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(c,"".concat(l,"-item-meta-avatar"),{marginInlineEnd:u}),a(c,"".concat(l,"-item-meta-content"),{flex:"1 0",width:0,color:N}),a(c,"".concat(l,"-item-meta-title"),{marginBottom:e.marginXXS,color:N,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":a({color:N,transition:"all ".concat(h)},"&:hover",{color:T})}),a(c,"".concat(l,"-item-meta-description"),{color:f,fontSize:e.fontSize,lineHeight:e.lineHeight}),c)),a(s,"".concat(l,"-item-action"),(o={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(o,"& > li",a({position:"relative",display:"inline-block",padding:"0 ".concat(A,"px"),color:f,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(o,"".concat(l,"-item-action-split"),{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:re,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),o)),s)),a(r,"".concat(l,"-empty"),{padding:"".concat(u,"px 0"),color:f,fontSize:e.fontSizeSM,textAlign:"center"}),a(r,"".concat(l,"-empty-text"),{padding:u,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),a(r,"".concat(l,"-item-no-flex"),{display:"block"}),r))),a(d,"".concat(l,"-grid ").concat(C,"-col > ").concat(l,"-item"),{display:"block",maxWidth:"100%",marginBlockEnd:H,paddingBlock:0,borderBlockEnd:"none"}),a(d,"".concat(l,"-vertical ").concat(l,"-item"),(n={alignItems:"initial"},a(n,"".concat(l,"-item-main"),{display:"block",flex:1}),a(n,"".concat(l,"-item-extra"),{marginInlineStart:g}),a(n,"".concat(l,"-item-meta"),a({marginBlockEnd:u},"".concat(l,"-item-meta-title"),{marginBlockEnd:p,color:N,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),a(n,"".concat(l,"-item-action"),{marginBlockStart:u,marginInlineStart:"auto","> li":a({padding:"0 ".concat(u,"px")},"&:first-child",{paddingInlineStart:0})}),n)),a(d,"".concat(l,"-split ").concat(l,"-item"),a({borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.controlLineType," ").concat(e.colorSplit)},"&:last-child",{borderBlockEnd:"none"})),a(d,"".concat(l,"-split ").concat(l,"-header"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-split").concat(l,"-empty ").concat(l,"-footer"),{borderTop:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-loading ").concat(l,"-spin-nested-loading"),{minHeight:m}),a(d,"".concat(l,"-split").concat(l,"-something-after-last-item ").concat(C,"-spin-container > ").concat(l,"-items > ").concat(l,"-item:last-child"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-lg ").concat(l,"-item"),{padding:S}),a(d,"".concat(l,"-sm ").concat(l,"-item"),{padding:b}),a(d,"".concat(l,":not(").concat(l,"-vertical)"),a({},"".concat(l,"-item-no-flex"),a({},"".concat(l,"-item-action"),{float:"right"}))),d};const ca=dt("List",function(t){var e=ut(t,{listBorderedCls:"".concat(t.componentCls,"-bordered"),minHeight:t.controlHeightLG,listItemPadding:"".concat(t.paddingSM,"px 0"),listItemPaddingSM:"".concat(t.paddingXS,"px ").concat(t.padding,"px"),listItemPaddingLG:"".concat(t.padding,"px ").concat(t.paddingLG,"px")});return[ia(e),oa(e),ra(e)]},{contentWidth:220});var la=globalThis&&globalThis.__rest||function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(c[o[s]]=t[o[s]]);return c},$e=x.exports.createContext({});$e.Consumer;function De(t){var e,c=t.pagination,o=c===void 0?!1:c,s=t.prefixCls,r=t.bordered,n=r===void 0?!1:r,d=t.split,l=d===void 0?!0:d,C=t.className,m=t.children,y=t.itemLayout,p=t.loadMore,g=t.grid,u=t.dataSource,L=u===void 0?[]:u,T=t.size,b=t.header,S=t.footer,A=t.loading,H=A===void 0?!1:A,N=t.rowKey,f=t.renderItem,h=t.locale,re=la(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),ae=o&&pt(o)==="object"?o:{},ue=x.exports.useState(ae.defaultCurrent||1),me=Ce(ue,2),ne=me[0],j=me[1],pe=x.exports.useState(ae.defaultPageSize||10),ie=Ce(pe,2),ge=ie[0],Y=ie[1],Z=x.exports.useContext(Ae),q=Z.getPrefixCls,D=Z.renderEmpty,k=Z.direction,F={current:1,total:0},R={},$=function(B){return function(V,X){j(V),Y(X),o&&o[B]&&o[B](V,X)}},O=$("onChange"),ce=$("onShowSizeChange"),G=function(B,V){if(!f)return null;var X;return typeof N=="function"?X=N(B):N?X=B[N]:X=B.key,X||(X="list-item-".concat(V)),R[V]=X,f(B,V)},le=function(){return!!(p||o||S)},fe=function(B,V){return i("div",{className:"".concat(B,"-empty-text"),children:h&&h.emptyText||V("List")})},M=q("list",s),Se=ca(M),J=Ce(Se,2),be=J[0],ye=J[1],z=H;typeof z=="boolean"&&(z={spinning:z});var v=z&&z.spinning,I="";switch(T){case"large":I="lg";break;case"small":I="sm";break}var w=Q(M,(e={},a(e,"".concat(M,"-vertical"),y==="vertical"),a(e,"".concat(M,"-").concat(I),I),a(e,"".concat(M,"-split"),l),a(e,"".concat(M,"-bordered"),n),a(e,"".concat(M,"-loading"),v),a(e,"".concat(M,"-grid"),!!g),a(e,"".concat(M,"-something-after-last-item"),le()),a(e,"".concat(M,"-rtl"),k==="rtl"),e),C,ye),K=Pe(Pe(Pe({},F),{total:L.length,current:ne,pageSize:ge}),o||{}),se=Math.ceil(K.total/K.pageSize);K.current>se&&(K.current=se);var de=o?i("div",{className:"".concat(M,"-pagination"),children:i(gt,{...K,onChange:O,onShowSizeChange:ce})}):null,ee=Te(L);o&&L.length>(K.current-1)*K.pageSize&&(ee=Te(L).splice((K.current-1)*K.pageSize,K.pageSize));var we=Object.keys(g||{}).some(function(E){return["xs","sm","md","lg","xl","xxl"].includes(E)}),he=ft(we),te=x.exports.useMemo(function(){for(var E=0;E<je.length;E+=1){var B=je[E];if(he[B])return B}},[he]),Ie=x.exports.useMemo(function(){if(!!g){var E=te&&g[te]?g[te]:g.column;if(E)return{width:"".concat(100/E,"%"),maxWidth:"".concat(100/E,"%")}}},[g==null?void 0:g.column,te]),xe=v&&i("div",{style:{minHeight:53}});if(ee.length>0){var W=ee.map(function(E,B){return G(E,B)}),ve=x.exports.Children.map(W,function(E,B){return i("div",{style:Ie,children:E},R[B])});xe=g?i(ht,{gutter:g.gutter,children:ve}):i("ul",{className:"".concat(M,"-items"),children:W})}else!m&&!v&&(xe=fe(M,D||xt));var oe=K.position||"bottom",U=x.exports.useMemo(function(){return{grid:g,itemLayout:y}},[JSON.stringify(g),y]);return be(i($e.Provider,{value:U,children:_("div",{className:w,...re,children:[(oe==="top"||oe==="both")&&de,b&&i("div",{className:"".concat(M,"-header"),children:b}),_(Ue,{...z,children:[xe,m]}),S&&i("div",{className:"".concat(M,"-footer"),children:S}),p||(oe==="bottom"||oe==="both")&&de]})}))}De.Item=na;var sa=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function da(t){var e,c=t.prefixCls,o=t.expandIcon,s=o===void 0?i(yt,{}):o,r=t.onExpand,n=t.expanded,d=t.record,l=s,C="".concat(c,"-row-expand-icon"),m=function(p){r(!n),p.stopPropagation()};return typeof s=="function"&&(l=s({expanded:n,onExpand:r,record:d})),i("span",{className:Q(C,(e={},a(e,"".concat(c,"-row-expanded"),n),a(e,"".concat(c,"-row-collapsed"),!n),e)),onClick:m,children:l})}function ua(t){var e,c,o,s,r,n=t.prefixCls,d=x.exports.useContext(_e.ConfigContext),l=d.getPrefixCls,C=Qe(),m=C.hashId,y=l("pro-list",n),p="".concat(y,"-row"),g=t.title,u=t.subTitle,L=t.content,T=t.itemTitleRender;t.prefixCls;var b=t.actions;t.item,t.recordKey;var S=t.avatar,A=t.cardProps,H=t.description,N=t.isEditable,f=t.checkbox,h=t.index,re=t.selected,ae=t.loading,ue=t.expand,me=t.onExpand,ne=t.expandable,j=t.rowSupportExpand,pe=t.showActions,ie=t.showExtra,ge=t.type,Y=t.style,Z=t.className,q=Z===void 0?p:Z,D=t.record,k=t.onRow,F=t.onItem,R=t.itemHeaderRender,$=t.cardActionProps,O=t.extra,ce=Me(t,sa),G=ne||{},le=G.expandedRowRender,fe=G.expandIcon,M=G.expandRowByClick,Se=G.indentSize,J=Se===void 0?8:Se,be=G.expandedRowClassName,ye=vt(!!ue,{value:ue,onChange:me}),z=Ce(ye,2),v=z[0],I=z[1],w=Q((e={},a(e,"".concat(p,"-selected"),!A&&re),a(e,"".concat(p,"-show-action-hover"),pe==="hover"),a(e,"".concat(p,"-type-").concat(ge),!!ge),a(e,"".concat(p,"-editable"),N),a(e,"".concat(p,"-show-extra-hover"),ie==="hover"),e),m,p),K=Q(m,a({},"".concat(q,"-extra"),ie==="hover")),se=v||Object.values(ne||{}).length===0,de=le&&le(D,h,J,v),ee=x.exports.useMemo(function(){if(!(!b||$==="actions"))return[i("div",{onClick:function(U){return U.stopPropagation()},children:b},"action")]},[b,$]),we=x.exports.useMemo(function(){if(!(!b||!$||$==="extra"))return[i("div",{onClick:function(U){return U.stopPropagation()},children:b},"action")]},[b,$]),he=g||u?_("div",{className:"".concat(w,"-header-title ").concat(m),children:[g&&i("div",{className:"".concat(w,"-title ").concat(m),children:g}),u&&i("div",{className:"".concat(w,"-subTitle ").concat(m),children:u})]}):null,te=(c=T&&(T==null?void 0:T(D,h,he)))!==null&&c!==void 0?c:he,Ie=te||S||u||H?i(De.Item.Meta,{avatar:S,title:te,description:H&&se&&i("div",{className:"".concat(w,"-description ").concat(m),children:H})}):null,xe=Q(m,(o={},a(o,"".concat(w,"-item-has-checkbox"),f),a(o,"".concat(w,"-item-has-avatar"),S),a(o,w,w),o)),W=x.exports.useMemo(function(){return S||g?_(Le,{children:[S&&i(Ct,{size:22,src:S,className:"".concat(l("list-item-meta-avatar")," ").concat(m)}),i("span",{className:"".concat(l("list-item-meta-title")," ").concat(m),children:g})]}):null},[S,l,m,g]),ve=A?i(Be,P(P(P({bordered:!0,loading:ae,hoverable:!0},A),{},{title:W,subTitle:u,extra:ee,actions:we,bodyStyle:P({padding:24},A.bodyStyle)},F==null?void 0:F(D,h)),{},{children:i(ke,{avatar:!0,title:!1,loading:ae,active:!0,children:_("div",{className:"".concat(w,"-header ").concat(m),children:[T&&(T==null?void 0:T(D,h,he)),L]})})})):i(De.Item,P(P(P(P({className:Q(xe,a({},q,q!==p))},ce),{},{actions:ee,extra:!!O&&i("div",{className:K,children:O})},k==null?void 0:k(D,h)),F==null?void 0:F(D,h)),{},{onClick:function(U){var E,B,V,X;k==null||(E=k(D,h))===null||E===void 0||(B=E.onClick)===null||B===void 0||B.call(E,U),F==null||(V=F(D,h))===null||V===void 0||(X=V.onClick)===null||X===void 0||X.call(V,U),M&&I(!v)},children:_(ke,{avatar:!0,title:!1,loading:ae,active:!0,children:[_("div",{className:"".concat(w,"-header ").concat(m),children:[_("div",{className:"".concat(w,"-header-option ").concat(m),children:[!!f&&i("div",{className:"".concat(w,"-checkbox ").concat(m),children:f}),Object.values(ne||{}).length>0&&j&&da({prefixCls:y,expandIcon:fe,onExpand:I,expanded:v,record:D})]}),(s=R&&(R==null?void 0:R(D,h,Ie)))!==null&&s!==void 0?s:Ie]}),se&&(L||de)&&_("div",{className:"".concat(w,"-content ").concat(m),children:[L,le&&j&&i("div",{className:be&&be(D,h,J),children:de})]})]})}));return A?i("div",{className:Q(m,(r={},a(r,"".concat(w,"-card"),A),a(r,q,q!==p),r)),style:Y,children:ve}):ve}var ma=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function pa(t){var e=t.dataSource,c=t.columns,o=t.rowKey,s=t.showActions,r=t.showExtra,n=t.prefixCls,d=t.actionRef,l=t.itemTitleRender,C=t.renderItem,m=t.itemCardProps,y=t.itemHeaderRender,p=t.expandable,g=t.rowSelection,u=t.pagination,L=t.onRow,T=t.onItem,b=t.rowClassName,S=Me(t,ma),A=Qe(),H=A.hashId,N=x.exports.useContext(_e.ConfigContext),f=N.getPrefixCls,h=Ee.useMemo(function(){return typeof o=="function"?o:function(z,v){return z[o]||v}},[o]),re=St(e,"children",h),ae=Ce(re,1),ue=ae[0],me=bt(e.length,P({responsive:!0},u),function(){}),ne=Ce(me,1),j=ne[0],pe=Ee.useMemo(function(){if(u===!1||!j.pageSize||e.length<j.total)return e;var z=j.current,v=z===void 0?1:z,I=j.pageSize,w=I===void 0?10:I,K=e.slice((v-1)*w,v*w);return K},[e,j,u]),ie=f("pro-list",n),ge=wt(g,{getRowKey:h,getRecordByKey:ue,prefixCls:ie,data:e,pageData:pe,expandType:"row",childrenColumnName:"children",locale:{}}),Y=Ce(ge,2),Z=Y[0],q=Y[1],D=p||{},k=D.expandedRowKeys,F=D.defaultExpandedRowKeys,R=D.defaultExpandAllRows,$=R===void 0?!0:R,O=D.onExpand,ce=D.onExpandedRowsChange,G=D.rowExpandable,le=Ee.useState(function(){return F||($!==!1?e.map(h):[])}),fe=Ce(le,2),M=fe[0],Se=fe[1],J=Ee.useMemo(function(){return new Set(k||M||[])},[k,M]),be=Ee.useCallback(function(z){var v=h(z,e.indexOf(z)),I,w=J.has(v);w?(J.delete(v),I=Te(J)):I=[].concat(Te(J),[v]),Se(I),O&&O(!w,z),ce&&ce(I)},[h,J,e,O,ce]),ye=Z([])[0];return i(De,P(P({},S),{},{className:Q(f("pro-list-container",n),H,S.className),dataSource:pe,pagination:u&&j,renderItem:function(v,I){var w,K,se,de={className:typeof b=="function"?b(v,I):b};c==null||c.forEach(function(W){var ve=W.listKey,oe=W.cardActionProps;if(!!It.has(ve)){var U=W.dataIndex||ve||W.key,E=Array.isArray(U)?Et(v,U):v[U];oe==="actions"&&ve==="actions"&&(de.cardActionProps=oe);var B=W.render?W.render(E,v,I):E;B!=="-"&&(de[W.listKey]=B)}});var ee;ye&&ye.render&&(ee=ye.render(v,v,I)||void 0);var we=((w=d.current)===null||w===void 0?void 0:w.isEditable(P(P({},v),{},{index:I})))||{},he=we.isEditable,te=we.recordKey,Ie=q.has(te||I),xe=i(ua,P(P({cardProps:S.grid?P(P(P({},m),S.grid),{},{checked:Ie,onChecked:Ee.isValidElement(ee)?(K=ee)===null||K===void 0||(se=K.props)===null||se===void 0?void 0:se.onChange:void 0}):void 0},de),{},{recordKey:te,isEditable:he||!1,expandable:p,expand:J.has(h(v,I)),onExpand:function(){be(v)},index:I,record:v,item:v,showActions:s,showExtra:r,itemTitleRender:l,itemHeaderRender:y,rowSupportExpand:!G||G&&G(v),selected:q.has(h(v,I)),checkbox:ee,onRow:L,onItem:T}),te);return C?C(v,I,xe):xe}}))}var ga=function(e){var c,o,s,r,n,d;return a({},e.componentCls,(d={backgroundColor:"transparent"},a(d,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(d,"&-row",(n={borderBlockEnd:"1px solid ".concat(e.colorSplit)},a(n,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(n,"&:last-child",a({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),a(n,"&:hover",(c={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(c,"".concat(e.antCls,"-list-item-action"),{display:"block"}),a(c,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),a(c,"".concat(e.componentCls,"-row-extra"),{display:"block"}),a(c,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),c)),a(n,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(n,"&".concat(e.componentCls,"-row-editable"),a({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(n,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),a(n,"&".concat(e.componentCls,"-row-type-new"),{animation:"techUiListActive 3s"}),a(n,"&".concat(e.componentCls,"-row-type-inline"),a({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),a(n,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(n,"&-show-action-hover",(o={},a(o,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),a(o,"&:hover",a({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),o)),a(n,"&-show-extra-hover",a({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),a(n,"&-extra",{display:"none"}),a(n,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(n,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(n,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(n,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),a(n,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(n,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(n,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(n,"&-avatar",{display:"flex"}),a(n,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start"}),a(n,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(n,"&-header-option",{display:"flex"}),a(n,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(n,"&-no-split",(s={},a(s,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),a(s,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),s)),a(n,"&-bordered",a({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),a(n,"".concat(e.antCls,"-list-vertical"),(r={},a(r,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(r,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(r,"&-content",{marginBlock:0,marginInline:0}),a(r,"&-subTitle",{marginBlockStart:8}),a(r,"".concat(e.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),a(r,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),a(r,"".concat(e.componentCls,"-row-show-extra-hover"),a({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),r)),a(n,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),a(n,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(n,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(n,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),n)),d))};function fa(t){return Rt("ProList",function(e){var c=P(P({},e),{},{componentCls:".".concat(t)});return[ga(c)]})}var ha=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function xa(t){var e=t.metas,c=t.split,o=t.footer,s=t.rowKey,r=t.tooltip,n=t.className,d=t.options,l=d===void 0?!1:d,C=t.search,m=C===void 0?!1:C,y=t.expandable,p=t.showActions,g=t.showExtra,u=t.rowSelection,L=u===void 0?!1:u,T=t.pagination,b=T===void 0?!1:T,S=t.itemLayout,A=t.renderItem,H=t.grid,N=t.itemCardProps,f=t.onRow,h=t.onItem,re=t.rowClassName,ae=t.locale,ue=t.itemHeaderRender,me=t.itemTitleRender,ne=Me(t,ha),j=x.exports.useRef();x.exports.useImperativeHandle(ne.actionRef,function(){return j.current});var pe=x.exports.useContext(_e.ConfigContext),ie=pe.getPrefixCls,ge=x.exports.useMemo(function(){var F=[];return Object.keys(e||{}).forEach(function(R){var $=e[R]||{},O=$.valueType;O||(R==="avatar"&&(O="avatar"),R==="actions"&&(O="option"),R==="description"&&(O="textarea")),F.push(P(P({listKey:R,dataIndex:($==null?void 0:$.dataIndex)||R},$),{},{valueType:O}))}),F},[e]),Y=ie("pro-list",t.prefixCls),Z=fa(Y),q=Z.wrapSSR,D=Z.hashId,k=Q(Y,D,a({},"".concat(Y,"-no-split"),!c));return q(i(Pt,P(P({tooltip:r},ne),{},{actionRef:j,pagination:b,type:"list",rowSelection:L,search:m,options:l,className:Q(Y,n,k),columns:ge,rowKey:s,tableViewRender:function(R){var $=R.columns,O=R.size,ce=R.pagination,G=R.rowSelection,le=R.dataSource,fe=R.loading;return i(pa,{grid:H,itemCardProps:N,itemTitleRender:me,prefixCls:t.prefixCls,columns:$,renderItem:A,actionRef:j,dataSource:le||[],size:O,footer:o,split:c,rowKey:s,expandable:y,rowSelection:L===!1?void 0:G,showActions:p,showExtra:g,pagination:ce,itemLayout:S,loading:fe,itemHeaderRender:ue,onRow:f,onItem:h,rowClassName:re,locale:ae})}})))}const va={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},Ca={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},ya={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},Sa={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},rt=Nt(void 0),He=()=>Ye(rt),ba=()=>Gt(rt),Oe=Vt({visible:!1,roleId:0,roleName:""}),wa=()=>Xt(Oe),Ia=()=>Bt(Oe),it=()=>Ye(Oe);async function Ea(t,e){return Ne("/system/role/add",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Ra(t,e){return Ne("/system/role/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Pa(t,e){return Ne("/system/role/info",{method:"GET",params:{...t},...e||{}})}async function Na(t,e){return Ne("/system/role/list",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Ba(t,e){return Ne("/system/role/remove",{method:"POST",params:{...t},...e||{}})}const Ta=()=>{const t=Fe(),e=x.exports.useRef(),c=He();return i(Ke,{accessible:t.canAddSysRole,children:_(Tt,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:i(Re,{type:"primary",icon:i(Dt,{}),children:"\u65B0\u5EFA"}),formRef:e,onFinish:async o=>{var s;return await Ea({...o,menuIds:[],menuCheckStrictly:!0}),c==null||c.reload(),(s=e.current)==null||s.resetFields(),ze.success("\u65B0\u5EFA\u6210\u529F"),!0},width:500,children:[i(Ge,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),i(Ge,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),i(Ot,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),i(At.Group,{name:"status",label:"\u72B6\u6001",valueEnum:kt,initialValue:Ze.ENABLE}),i(jt,{name:"remark",label:"\u5907\u6CE8"})]})})},Da=()=>{const t=Fe(),e=He(),c=wa(),{roleId:o,roleName:s}=it(),r=()=>Mt.confirm({title:"\u5220\u9664\u786E\u8BA4",content:_(Le,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",i(We.Text,{code:!0,children:s}),"\u8FDB\u884C",i(We.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:async()=>{var n;await Ba({roleIds:o}),e==null||e.reload(),(n=e==null?void 0:e.clearSelected)==null||n.call(e),c(),ze.success("\u5220\u9664\u6210\u529F")}});return i(Ke,{accessible:t.canRemoveSysRole,children:i(Re,{danger:!0,ghost:!0,icon:i(_t,{}),onClick:r,children:"\u5220\u9664"})})},Aa={title:"label",key:"id",children:"children"},ct=t=>{const e=[];return t.forEach(({id:c,children:o})=>{e.push(c),o&&e.push(...ct(o))}),e},_a=({roleId:t,handleEdit:e})=>{var N;const[c,o]=x.exports.useState([]),[s,r]=x.exports.useState(!1),[n,d]=x.exports.useState([]),[l,C]=x.exports.useState([]),[m,y]=x.exports.useState(!1),[p,g]=x.exports.useState(!0),{data:u,refresh:L}=at(async()=>{const{menus:f,checkedKeys:h}=await Qt({roleId:t});return{treeData:f,selectedMenuIds:h,selectedTreeData:Yt(f,h),allMenuIds:Zt(f)}},{ready:t>0,refreshDeps:[t],onSuccess:f=>{r(!1),C(f.selectedTreeData)}}),{isLoading:T,mutate:b}=et(async()=>{await e({menuIds:c}),L()}),S=ct((N=u==null?void 0:u.treeData)!=null?N:[]),A=(n==null?void 0:n.length)!==0&&(n==null?void 0:n.length)===(S==null?void 0:S.length),H=f=>{var h;if(f||p){o((h=u==null?void 0:u.allMenuIds)!=null?h:[]);return}o([])};return x.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===c.length){y(!0),g(!1);return}if(c.length===0){y(!1),g(!1);return}g(!0)},[u==null?void 0:u.allMenuIds,c]),_(Le,{children:[_("header",{className:"flex justify-between mb-2",children:[_(Ve,{children:[l.length>0&&i(Re,{size:"small",icon:A?i(Lt,{}):i(zt,{}),onClick:()=>d(A?[]:S),children:A?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),s&&i(Kt,{indeterminate:p,onChange:f=>H(f.target.checked),checked:m,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),i(Ke,{accessible:!0,children:s?_(Ve,{children:[i(Re,{loading:T,onClick:()=>{var f;r(!1),C((f=u==null?void 0:u.selectedTreeData)!=null?f:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),i(Re,{type:"primary",ghost:!0,loading:T,onClick:()=>b(),children:"\u4FDD\u5B58"})]}):i(Re,{type:"primary",ghost:!0,onClick:()=>{var f,h;r(!0),o((f=u==null?void 0:u.selectedMenuIds)!=null?f:[]),C((h=u==null?void 0:u.treeData)!=null?h:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),i("div",{className:"h-[390px] overflow-y-auto",children:l.length>0?i(Ft,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:s,checkStrictly:!0,fieldNames:Aa,checkedKeys:c,treeData:l,expandedKeys:n,onExpand:f=>d(f),onCheck:f=>{o(f.checked)}}):i(tt,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},Ma=()=>{const[t,e]=x.exports.useState([]),[c]=$t.useForm(),o=Fe(),s=He(),{roleId:r,visible:n}=it(),{data:d,loading:l,refresh:C}=at(()=>Pa({roleId:r}),{ready:n&&r>0,refreshDeps:[r],onSuccess:()=>{e([])}}),{mutateAsync:m}=et(async p=>{var g;await Ra({roleId:r,menuIds:(g=d==null?void 0:d.menuIds)!=null?g:[],roleKey:d.roleKey,roleName:d.roleName,roleSort:d.roleSort,status:d.status,...p})},{onSuccess:()=>{C(),s==null||s.reload(),ze.success("\u4FDD\u5B58\u6210\u529F")}}),y=o.canEditSysRole&&d?{form:c,editableKeys:t,onChange:(p,g)=>{e(p),p.length===1&&!Array.isArray(g)&&c.setFieldsValue({[p[0]]:g[p[0]]})},onSave:async(p,g)=>{await m({[p]:g[p]})}}:void 0;return n?_(Ue,{spinning:l,children:[i(Xe,{column:2,columns:[Ca,qt],dataSource:d}),i(qe,{}),i(Xe,{column:2,columns:[Jt,Sa,va,Ut,ya],dataSource:d,editable:y}),i(qe,{}),i(_a,{roleId:r,handleEdit:p=>m(p)})]}):i(tt,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},La=()=>{const t=ba(),e=Ia(),{onClick:c,rowSelection:o,selectedRows:s}=ea("roleId","radio");return x.exports.useEffect(()=>{s.length===1&&e({roleId:s[0].roleId,roleName:s[0].roleName,visible:!0})},[s]),i(xa,{ghost:!0,rowKey:"roleId",actionRef:t,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:r=>r===Ze.ENABLE?i(Je,{color:"success",children:"\u542F\u7528\u4E2D"}):i(Je,{color:"error",children:"\u5DF2\u7981\u7528"})}},tableAlertRender:!1,onRow:r=>({onClick:()=>c(r)}),rowSelection:o,pagination:{pageSize:10},request:(...r)=>Na(Wt(...r))})},Za=()=>i(Ht,{children:_(Be,{ghost:!0,gutter:24,children:[i(Be,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:i(Ta,{}),children:i(La,{})}),i(Be,{title:"\u89D2\u8272\u8BE6\u60C5",extra:i(Da,{}),children:i(Ma,{})})]})});export{Za as default};
