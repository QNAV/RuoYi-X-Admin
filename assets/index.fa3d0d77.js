import{r as p,b8 as $e,V as te,g as E,j as i,M as a,b9 as Tt,ap as At,ba as Bt,bb as Dt,bc as Fe,bd as Nt,be as Ft,bf as Se,bg as Mt,bh as Le,bi as Kt,bj as Ze,ao as _t,aK as ze,bk as Lt,U as He,bl as it,O as qe,bm as kt,F as Me,aq as zt,_ as N,a8 as et,ax as pe,bn as jt,aD as Ae,bo as Ot,bp as $t,bq as Ht,br as qt,bs as Wt,K as Gt,bt as Vt,h as ct,l as We,n as lt,bu as st,bv as dt,bw as ut,q as Xt,Y as Ke,a as Yt,af as De,ag as ae,a4 as Qt,bx as Ut,aA as Jt,ah as Zt,ai as ea,aH as tt,aj as ta,aI as aa,au as at,X as na,al as oa,W as ra,aO as ia,by as ca,aR as Be,bz as mt,aB as ht,aL as pt,aM as gt,bA as ft,aP as xt,aJ as Ge,I as la}from"./index.e35fb49a.js";import{a as Ie,c as Ve}from"./index.2c7238d2.js";import{a as sa}from"./index.d5dce333.js";import{e as da}from"./SysMenuService.a25bd27d.js";import{S as ua,a as ma,b as ha,c as pa,d as ga,e as fa,f as xa}from"./SysRoleService.ef92e997.js";import{a as va,u as ya}from"./utils.2b854221.js";import{u as vt}from"./useQuery.esm.c5b43a0d.js";import{u as Xe}from"./useMutation.esm.a979ceb5.js";import{e as Ca}from"./SysDeptService.73f6663c.js";import{i as nt,u as Sa}from"./useRequest.9c11be53.js";import"./SysLoginService.40e50112.js";import"./utils.esm.5a8b285d.js";var yt=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(t);c<n.length;c++)e.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(t,n[c])&&(r[n[c]]=t[n[c]]);return r},ba=function(e){var r=e.prefixCls,n=e.className,c=e.avatar,l=e.title,o=e.description,d=yt(e,["prefixCls","className","avatar","title","description"]),s=p.exports.useContext($e),y=s.getPrefixCls,h=y("list",r),x=te("".concat(h,"-item-meta"),n),g=E("div",{className:"".concat(h,"-item-meta-content"),children:[l&&i("h4",{className:"".concat(h,"-item-meta-title"),children:l}),o&&i("div",{className:"".concat(h,"-item-meta-description"),children:o})]});return E("div",{...d,className:x,children:[c&&i("div",{className:"".concat(h,"-item-meta-avatar"),children:c}),(l||o)&&g]})},wa=function(e,r){var n=e.prefixCls,c=e.children,l=e.actions,o=e.extra,d=e.className,s=e.colStyle,y=yt(e,["prefixCls","children","actions","extra","className","colStyle"]),h=p.exports.useContext(Ye),x=h.grid,g=h.itemLayout,f=p.exports.useContext($e),u=f.getPrefixCls,K=function(){var B;return p.exports.Children.forEach(c,function(I){typeof I=="string"&&(B=!0)}),B&&p.exports.Children.count(c)>1},A=function(){return g==="vertical"?!!o:!K()},b=u("list",n),w=l&&l.length>0&&i("ul",{className:"".concat(b,"-item-action"),children:l.map(function(m,B){return E("li",{children:[m,B!==l.length-1&&i("em",{className:"".concat(b,"-item-action-split")})]},"".concat(b,"-item-action-").concat(B))})},"actions"),_=x?"div":"li",C=i(_,{...y,...x?{}:{ref:r},className:te("".concat(b,"-item"),a({},"".concat(b,"-item-no-flex"),!A()),d),children:g==="vertical"&&o?[E("div",{className:"".concat(b,"-item-main"),children:[c,w]},"content"),i("div",{className:"".concat(b,"-item-extra"),children:o},"extra")]:[c,w,Tt(o,{key:"extra"})]});return x?i(At,{ref:r,flex:1,style:s,children:C}):C},Ct=p.exports.forwardRef(wa);Ct.Meta=ba;const Ia=Ct;var Ea=function(e){var r,n,c=e.listBorderedCls,l=e.componentCls,o=e.paddingLG,d=e.margin,s=e.padding,y=e.listItemPaddingSM,h=e.marginLG,x=e.radiusLG;return n={},a(n,"".concat(c),(r={border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:x},a(r,"".concat(l,"-header,").concat(l,"-footer,").concat(l,"-item"),{paddingInline:o}),a(r,"".concat(l,"-pagination"),{margin:"".concat(d,"px ").concat(h,"px")}),r)),a(n,"".concat(c).concat(l,"-sm"),a({},"".concat(l,"-item,").concat(l,"-header,").concat(l,"-footer"),{padding:y})),a(n,"".concat(c).concat(l,"-lg"),a({},"".concat(l,"-item,").concat(l,"-header,").concat(l,"-footer"),{padding:"".concat(s,"px ").concat(o,"px")})),n},Ra=function(e){var r,n,c,l,o=e.componentCls,d=e.screenSM,s=e.screenMD,y=e.marginLG,h=e.marginSM,x=e.margin;return l={},a(l,"@media screen and (max-width:".concat(s,")"),(r={},a(r,"".concat(o),a({},"".concat(o,"-item"),a({},"".concat(o,"-item-action"),{marginInlineStart:y}))),a(r,"".concat(o,"-vertical"),a({},"".concat(o,"-item"),a({},"".concat(o,"-item-extra"),{marginInlineStart:y}))),r)),a(l,"@media screen and (max-width: ".concat(d,")"),(c={},a(c,"".concat(o),a({},"".concat(o,"-item"),a({flexWrap:"wrap"},"".concat(o,"-action"),{marginInlineStart:h}))),a(c,"".concat(o,"-vertical"),a({},"".concat(o,"-item"),(n={flexWrap:"wrap-reverse"},a(n,"".concat(o,"-item-main"),{minWidth:e.contentWidth}),a(n,"".concat(o,"-item-extra"),{margin:"auto auto ".concat(x,"px")}),n))),c)),l},Pa=function(e){var r,n,c,l,o,d,s=e.componentCls,y=e.antCls,h=e.controlHeight,x=e.minHeight,g=e.paddingSM,f=e.marginLG,u=e.padding,K=e.listItemPadding,A=e.colorPrimary,b=e.listItemPaddingSM,w=e.listItemPaddingLG,_=e.paddingXS,C=e.margin,m=e.colorText,B=e.colorTextDescription,I=e.motionDurationSlow,W=e.lineWidth;return d={},a(d,"".concat(s),Fe(Fe({},Nt(e)),(l={position:"relative","*":{outline:"none"}},a(l,"".concat(s,"-header, ").concat(s,"-footer"),{background:"transparent",paddingBlock:g}),a(l,"".concat(s,"-pagination"),a({marginBlockStart:f,textAlign:"end"},"".concat(y,"-pagination-options"),{textAlign:"start"})),a(l,"".concat(s,"-spin"),{minHeight:x,textAlign:"center"}),a(l,"".concat(s,"-items"),{margin:0,padding:0,listStyle:"none"}),a(l,"".concat(s,"-item"),(c={display:"flex",alignItems:"center",justifyContent:"space-between",padding:K,color:m},a(c,"".concat(s,"-item-meta"),(r={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(r,"".concat(s,"-item-meta-avatar"),{marginInlineEnd:u}),a(r,"".concat(s,"-item-meta-content"),{flex:"1 0",width:0,color:m}),a(r,"".concat(s,"-item-meta-title"),{marginBottom:e.marginXXS,color:m,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":a({color:m,transition:"all ".concat(I)},"&:hover",{color:A})}),a(r,"".concat(s,"-item-meta-description"),{color:B,fontSize:e.fontSize,lineHeight:e.lineHeight}),r)),a(c,"".concat(s,"-item-action"),(n={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(n,"& > li",a({position:"relative",display:"inline-block",padding:"0 ".concat(_,"px"),color:B,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(n,"".concat(s,"-item-action-split"),{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:W,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),n)),c)),a(l,"".concat(s,"-empty"),{padding:"".concat(u,"px 0"),color:B,fontSize:e.fontSizeSM,textAlign:"center"}),a(l,"".concat(s,"-empty-text"),{padding:u,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),a(l,"".concat(s,"-item-no-flex"),{display:"block"}),l))),a(d,"".concat(s,"-grid ").concat(y,"-col > ").concat(s,"-item"),{display:"block",maxWidth:"100%",marginBlockEnd:C,paddingBlock:0,borderBlockEnd:"none"}),a(d,"".concat(s,"-vertical ").concat(s,"-item"),(o={alignItems:"initial"},a(o,"".concat(s,"-item-main"),{display:"block",flex:1}),a(o,"".concat(s,"-item-extra"),{marginInlineStart:f}),a(o,"".concat(s,"-item-meta"),a({marginBlockEnd:u},"".concat(s,"-item-meta-title"),{marginBlockEnd:g,color:m,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),a(o,"".concat(s,"-item-action"),{marginBlockStart:u,marginInlineStart:"auto","> li":a({padding:"0 ".concat(u,"px")},"&:first-child",{paddingInlineStart:0})}),o)),a(d,"".concat(s,"-split ").concat(s,"-item"),a({borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.controlLineType," ").concat(e.colorSplit)},"&:last-child",{borderBlockEnd:"none"})),a(d,"".concat(s,"-split ").concat(s,"-header"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(s,"-split").concat(s,"-empty ").concat(s,"-footer"),{borderTop:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(s,"-loading ").concat(s,"-spin-nested-loading"),{minHeight:h}),a(d,"".concat(s,"-split").concat(s,"-something-after-last-item ").concat(y,"-spin-container > ").concat(s,"-items > ").concat(s,"-item:last-child"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(s,"-lg ").concat(s,"-item"),{padding:w}),a(d,"".concat(s,"-sm ").concat(s,"-item"),{padding:b}),a(d,"".concat(s,":not(").concat(s,"-vertical)"),a({},"".concat(s,"-item-no-flex"),a({},"".concat(s,"-item-action"),{float:"right"}))),d};const Ta=Bt("List",function(t){var e=Dt(t,{listBorderedCls:"".concat(t.componentCls,"-bordered"),minHeight:t.controlHeightLG,listItemPadding:"".concat(t.paddingSM,"px 0"),listItemPaddingSM:"".concat(t.paddingXS,"px ").concat(t.padding,"px"),listItemPaddingLG:"".concat(t.padding,"px ").concat(t.paddingLG,"px")});return[Pa(e),Ea(e),Ra(e)]},{contentWidth:220});var Aa=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(t);c<n.length;c++)e.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(t,n[c])&&(r[n[c]]=t[n[c]]);return r},Ye=p.exports.createContext({});Ye.Consumer;function ke(t){var e,r=t.pagination,n=r===void 0?!1:r,c=t.prefixCls,l=t.bordered,o=l===void 0?!1:l,d=t.split,s=d===void 0?!0:d,y=t.className,h=t.children,x=t.itemLayout,g=t.loadMore,f=t.grid,u=t.dataSource,K=u===void 0?[]:u,A=t.size,b=t.header,w=t.footer,_=t.loading,C=_===void 0?!1:_,m=t.rowKey,B=t.renderItem,I=t.locale,W=Aa(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),U=n&&Ft(n)==="object"?n:{},v=p.exports.useState(U.defaultCurrent||1),L=Se(v,2),ce=L[0],q=L[1],ge=p.exports.useState(U.defaultPageSize||10),se=Se(ge,2),fe=se[0],ne=se[1],oe=p.exports.useContext($e),J=oe.getPrefixCls,M=oe.renderEmpty,G=oe.direction,O={current:1,total:0},D={},$=function(F){return function(Y,Q){q(Y),ne(Q),n&&n[F]&&n[F](Y,Q)}},H=$("onChange"),de=$("onShowSizeChange"),V=function(F,Y){if(!B)return null;var Q;return typeof m=="function"?Q=m(F):m?Q=F[m]:Q=F.key,Q||(Q="list-item-".concat(Y)),D[Y]=Q,B(F,Y)},ue=function(){return!!(g||n||w)},xe=function(F,Y){return i("div",{className:"".concat(F,"-empty-text"),children:I&&I.emptyText||Y("List")})},k=J("list",c),Ee=Ta(k),Z=Se(Ee,2),Re=Z[0],be=Z[1],z=C;typeof z=="boolean"&&(z={spinning:z});var S=z&&z.spinning,P="";switch(A){case"large":P="lg";break;case"small":P="sm";break}var R=te(k,(e={},a(e,"".concat(k,"-vertical"),x==="vertical"),a(e,"".concat(k,"-").concat(P),P),a(e,"".concat(k,"-split"),s),a(e,"".concat(k,"-bordered"),o),a(e,"".concat(k,"-loading"),S),a(e,"".concat(k,"-grid"),!!f),a(e,"".concat(k,"-something-after-last-item"),ue()),a(e,"".concat(k,"-rtl"),G==="rtl"),e),y,be),j=Fe(Fe(Fe({},O),{total:K.length,current:ce,pageSize:fe}),n||{}),me=Math.ceil(j.total/j.pageSize);j.current>me&&(j.current=me);var he=n?i("div",{className:"".concat(k,"-pagination"),children:i(Mt,{...j,onChange:H,onShowSizeChange:de})}):null,re=Le(K);n&&K.length>(j.current-1)*j.pageSize&&(re=Le(K).splice((j.current-1)*j.pageSize,j.pageSize));var Pe=Object.keys(f||{}).some(function(T){return["xs","sm","md","lg","xl","xxl"].includes(T)}),ve=Kt(Pe),ie=p.exports.useMemo(function(){for(var T=0;T<Ze.length;T+=1){var F=Ze[T];if(ve[F])return F}},[ve]),Te=p.exports.useMemo(function(){if(!!f){var T=ie&&f[ie]?f[ie]:f.column;if(T)return{width:"".concat(100/T,"%"),maxWidth:"".concat(100/T,"%")}}},[f==null?void 0:f.column,ie]),ye=S&&i("div",{style:{minHeight:53}});if(re.length>0){var X=re.map(function(T,F){return V(T,F)}),Ce=p.exports.Children.map(X,function(T,F){return i("div",{style:Te,children:T},D[F])});ye=f?i(_t,{gutter:f.gutter,children:Ce}):i("ul",{className:"".concat(k,"-items"),children:X})}else!h&&!S&&(ye=xe(k,M||Lt));var le=j.position||"bottom",ee=p.exports.useMemo(function(){return{grid:f,itemLayout:x}},[JSON.stringify(f),x]);return Re(i(Ye.Provider,{value:ee,children:E("div",{className:R,...W,children:[(le==="top"||le==="both")&&he,b&&i("div",{className:"".concat(k,"-header"),children:b}),E(ze,{...z,children:[ye,h]}),w&&i("div",{className:"".concat(k,"-footer"),children:w}),g||(le==="bottom"||le==="both")&&he]})}))}ke.Item=Ia;var Ba=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Da(t){var e,r=t.prefixCls,n=t.expandIcon,c=n===void 0?i(jt,{}):n,l=t.onExpand,o=t.expanded,d=t.record,s=c,y="".concat(r,"-row-expand-icon"),h=function(g){l(!o),g.stopPropagation()};return typeof c=="function"&&(s=c({expanded:o,onExpand:l,record:d})),i("span",{className:te(y,(e={},a(e,"".concat(r,"-row-expanded"),o),a(e,"".concat(r,"-row-collapsed"),!o),e)),onClick:h,children:s})}function Na(t){var e,r,n,c,l,o=t.prefixCls,d=p.exports.useContext(He.ConfigContext),s=d.getPrefixCls,y=it(),h=y.hashId,x=s("pro-list",o),g="".concat(x,"-row"),f=t.title,u=t.subTitle,K=t.content,A=t.itemTitleRender;t.prefixCls;var b=t.actions;t.item,t.recordKey;var w=t.avatar,_=t.cardProps,C=t.description,m=t.isEditable,B=t.checkbox,I=t.index,W=t.selected,U=t.loading,v=t.expand,L=t.onExpand,ce=t.expandable,q=t.rowSupportExpand,ge=t.showActions,se=t.showExtra,fe=t.type,ne=t.style,oe=t.className,J=oe===void 0?g:oe,M=t.record,G=t.onRow,O=t.onItem,D=t.itemHeaderRender,$=t.cardActionProps,H=t.extra,de=qe(t,Ba),V=ce||{},ue=V.expandedRowRender,xe=V.expandIcon,k=V.expandRowByClick,Ee=V.indentSize,Z=Ee===void 0?8:Ee,Re=V.expandedRowClassName,be=kt(!!v,{value:v,onChange:L}),z=Se(be,2),S=z[0],P=z[1],R=te((e={},a(e,"".concat(g,"-selected"),!_&&W),a(e,"".concat(g,"-show-action-hover"),ge==="hover"),a(e,"".concat(g,"-type-").concat(fe),!!fe),a(e,"".concat(g,"-editable"),m),a(e,"".concat(g,"-show-extra-hover"),se==="hover"),e),h,g),j=te(h,a({},"".concat(J,"-extra"),se==="hover")),me=S||Object.values(ce||{}).length===0,he=ue&&ue(M,I,Z,S),re=p.exports.useMemo(function(){if(!(!b||$==="actions"))return[i("div",{onClick:function(ee){return ee.stopPropagation()},children:b},"action")]},[b,$]),Pe=p.exports.useMemo(function(){if(!(!b||!$||$==="extra"))return[i("div",{onClick:function(ee){return ee.stopPropagation()},children:b},"action")]},[b,$]),ve=f||u?E("div",{className:"".concat(R,"-header-title ").concat(h),children:[f&&i("div",{className:"".concat(R,"-title ").concat(h),children:f}),u&&i("div",{className:"".concat(R,"-subTitle ").concat(h),children:u})]}):null,ie=(r=A&&(A==null?void 0:A(M,I,ve)))!==null&&r!==void 0?r:ve,Te=ie||w||u||C?i(ke.Item.Meta,{avatar:w,title:ie,description:C&&me&&i("div",{className:"".concat(R,"-description ").concat(h),children:C})}):null,ye=te(h,(n={},a(n,"".concat(R,"-item-has-checkbox"),B),a(n,"".concat(R,"-item-has-avatar"),w),a(n,R,R),n)),X=p.exports.useMemo(function(){return w||f?E(Me,{children:[w&&i(zt,{size:22,src:w,className:"".concat(s("list-item-meta-avatar")," ").concat(h)}),i("span",{className:"".concat(s("list-item-meta-title")," ").concat(h),children:f})]}):null},[w,s,h,f]),Ce=_?i(pe,N(N(N({bordered:!0,loading:U,hoverable:!0},_),{},{title:X,subTitle:u,extra:re,actions:Pe,bodyStyle:N({padding:24},_.bodyStyle)},O==null?void 0:O(M,I)),{},{children:i(et,{avatar:!0,title:!1,loading:U,active:!0,children:E("div",{className:"".concat(R,"-header ").concat(h),children:[A&&(A==null?void 0:A(M,I,ve)),K]})})})):i(ke.Item,N(N(N(N({className:te(ye,a({},J,J!==g))},de),{},{actions:re,extra:!!H&&i("div",{className:j,children:H})},G==null?void 0:G(M,I)),O==null?void 0:O(M,I)),{},{onClick:function(ee){var T,F,Y,Q;G==null||(T=G(M,I))===null||T===void 0||(F=T.onClick)===null||F===void 0||F.call(T,ee),O==null||(Y=O(M,I))===null||Y===void 0||(Q=Y.onClick)===null||Q===void 0||Q.call(Y,ee),k&&P(!S)},children:E(et,{avatar:!0,title:!1,loading:U,active:!0,children:[E("div",{className:"".concat(R,"-header ").concat(h),children:[E("div",{className:"".concat(R,"-header-option ").concat(h),children:[!!B&&i("div",{className:"".concat(R,"-checkbox ").concat(h),children:B}),Object.values(ce||{}).length>0&&q&&Da({prefixCls:x,expandIcon:xe,onExpand:P,expanded:S,record:M})]}),(c=D&&(D==null?void 0:D(M,I,Te)))!==null&&c!==void 0?c:Te]}),me&&(K||he)&&E("div",{className:"".concat(R,"-content ").concat(h),children:[K,ue&&q&&i("div",{className:Re&&Re(M,I,Z),children:he})]})]})}));return _?i("div",{className:te(h,(l={},a(l,"".concat(R,"-card"),_),a(l,J,J!==g),l)),style:ne,children:Ce}):Ce}var Fa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Ma(t){var e=t.dataSource,r=t.columns,n=t.rowKey,c=t.showActions,l=t.showExtra,o=t.prefixCls,d=t.actionRef,s=t.itemTitleRender,y=t.renderItem,h=t.itemCardProps,x=t.itemHeaderRender,g=t.expandable,f=t.rowSelection,u=t.pagination,K=t.onRow,A=t.onItem,b=t.rowClassName,w=qe(t,Fa),_=it(),C=_.hashId,m=p.exports.useContext(He.ConfigContext),B=m.getPrefixCls,I=Ae.useMemo(function(){return typeof n=="function"?n:function(z,S){return z[n]||S}},[n]),W=Ot(e,"children",I),U=Se(W,1),v=U[0],L=$t(e.length,N({responsive:!0},u),function(){}),ce=Se(L,1),q=ce[0],ge=Ae.useMemo(function(){if(u===!1||!q.pageSize||e.length<q.total)return e;var z=q.current,S=z===void 0?1:z,P=q.pageSize,R=P===void 0?10:P,j=e.slice((S-1)*R,S*R);return j},[e,q,u]),se=B("pro-list",o),fe=Ht(f,{getRowKey:I,getRecordByKey:v,prefixCls:se,data:e,pageData:ge,expandType:"row",childrenColumnName:"children",locale:{}}),ne=Se(fe,2),oe=ne[0],J=ne[1],M=g||{},G=M.expandedRowKeys,O=M.defaultExpandedRowKeys,D=M.defaultExpandAllRows,$=D===void 0?!0:D,H=M.onExpand,de=M.onExpandedRowsChange,V=M.rowExpandable,ue=Ae.useState(function(){return O||($!==!1?e.map(I):[])}),xe=Se(ue,2),k=xe[0],Ee=xe[1],Z=Ae.useMemo(function(){return new Set(G||k||[])},[G,k]),Re=Ae.useCallback(function(z){var S=I(z,e.indexOf(z)),P,R=Z.has(S);R?(Z.delete(S),P=Le(Z)):P=[].concat(Le(Z),[S]),Ee(P),H&&H(!R,z),de&&de(P)},[I,Z,e,H,de]),be=oe([])[0];return i(ke,N(N({},w),{},{className:te(B("pro-list-container",o),C,w.className),dataSource:ge,pagination:u&&q,renderItem:function(S,P){var R,j,me,he={className:typeof b=="function"?b(S,P):b};r==null||r.forEach(function(X){var Ce=X.listKey,le=X.cardActionProps;if(!!qt.has(Ce)){var ee=X.dataIndex||Ce||X.key,T=Array.isArray(ee)?Wt(S,ee):S[ee];le==="actions"&&Ce==="actions"&&(he.cardActionProps=le);var F=X.render?X.render(T,S,P):T;F!=="-"&&(he[X.listKey]=F)}});var re;be&&be.render&&(re=be.render(S,S,P)||void 0);var Pe=((R=d.current)===null||R===void 0?void 0:R.isEditable(N(N({},S),{},{index:P})))||{},ve=Pe.isEditable,ie=Pe.recordKey,Te=J.has(ie||P),ye=i(Na,N(N({cardProps:w.grid?N(N(N({},h),w.grid),{},{checked:Te,onChecked:Ae.isValidElement(re)?(j=re)===null||j===void 0||(me=j.props)===null||me===void 0?void 0:me.onChange:void 0}):void 0},he),{},{recordKey:ie,isEditable:ve||!1,expandable:g,expand:Z.has(I(S,P)),onExpand:function(){Re(S)},index:P,record:S,item:S,showActions:c,showExtra:l,itemTitleRender:s,itemHeaderRender:x,rowSupportExpand:!V||V&&V(S),selected:J.has(I(S,P)),checkbox:re,onRow:K,onItem:A}),ie);return y?y(S,P,ye):ye}}))}var Ka=function(e){var r,n,c,l,o,d;return a({},e.componentCls,(d={backgroundColor:"transparent"},a(d,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(d,"&-row",(o={borderBlockEnd:"1px solid ".concat(e.colorSplit)},a(o,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(o,"&:last-child",a({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),a(o,"&:hover",(r={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(r,"".concat(e.antCls,"-list-item-action"),{display:"block"}),a(r,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),a(r,"".concat(e.componentCls,"-row-extra"),{display:"block"}),a(r,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),r)),a(o,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(o,"&".concat(e.componentCls,"-row-editable"),a({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(o,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),a(o,"&".concat(e.componentCls,"-row-type-new"),{animation:"techUiListActive 3s"}),a(o,"&".concat(e.componentCls,"-row-type-inline"),a({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),a(o,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(o,"&-show-action-hover",(n={},a(n,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),a(n,"&:hover",a({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),n)),a(o,"&-show-extra-hover",a({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),a(o,"&-extra",{display:"none"}),a(o,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(o,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(o,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(o,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),a(o,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(o,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(o,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(o,"&-avatar",{display:"flex"}),a(o,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start"}),a(o,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(o,"&-header-option",{display:"flex"}),a(o,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(o,"&-no-split",(c={},a(c,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),a(c,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),c)),a(o,"&-bordered",a({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),a(o,"".concat(e.antCls,"-list-vertical"),(l={},a(l,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(l,"&-content",{marginBlock:0,marginInline:0}),a(l,"&-subTitle",{marginBlockStart:8}),a(l,"".concat(e.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),a(l,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),a(l,"".concat(e.componentCls,"-row-show-extra-hover"),a({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),l)),a(o,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),a(o,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(o,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(o,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),o)),d))};function _a(t){return Gt("ProList",function(e){var r=N(N({},e),{},{componentCls:".".concat(t)});return[Ka(r)]})}var La=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function ka(t){var e=t.metas,r=t.split,n=t.footer,c=t.rowKey,l=t.tooltip,o=t.className,d=t.options,s=d===void 0?!1:d,y=t.search,h=y===void 0?!1:y,x=t.expandable,g=t.showActions,f=t.showExtra,u=t.rowSelection,K=u===void 0?!1:u,A=t.pagination,b=A===void 0?!1:A,w=t.itemLayout,_=t.renderItem,C=t.grid,m=t.itemCardProps,B=t.onRow,I=t.onItem,W=t.rowClassName,U=t.locale,v=t.itemHeaderRender,L=t.itemTitleRender,ce=qe(t,La),q=p.exports.useRef();p.exports.useImperativeHandle(ce.actionRef,function(){return q.current});var ge=p.exports.useContext(He.ConfigContext),se=ge.getPrefixCls,fe=p.exports.useMemo(function(){var O=[];return Object.keys(e||{}).forEach(function(D){var $=e[D]||{},H=$.valueType;H||(D==="avatar"&&(H="avatar"),D==="actions"&&(H="option"),D==="description"&&(H="textarea")),O.push(N(N({listKey:D,dataIndex:($==null?void 0:$.dataIndex)||D},$),{},{valueType:H}))}),O},[e]),ne=se("pro-list",t.prefixCls),oe=_a(ne),J=oe.wrapSSR,M=oe.hashId,G=te(ne,M,a({},"".concat(ne,"-no-split"),!r));return J(i(Vt,N(N({tooltip:l},ce),{},{actionRef:q,pagination:b,type:"list",rowSelection:K,search:h,options:s,className:te(ne,o,G),columns:fe,rowKey:c,tableViewRender:function(D){var $=D.columns,H=D.size,de=D.pagination,V=D.rowSelection,ue=D.dataSource,xe=D.loading;return i(Ma,{grid:C,itemCardProps:m,itemTitleRender:L,prefixCls:t.prefixCls,columns:$,renderItem:_,actionRef:q,dataSource:ue||[],size:H,footer:n,split:r,rowKey:c,expandable:x,rowSelection:K===!1?void 0:V,showActions:g,showExtra:f,pagination:de,itemLayout:w,loading:xe,itemHeaderRender:v,onRow:B,onItem:I,rowClassName:W,locale:U})}})))}var St=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},za=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),c,l=[],o;try{for(;(e===void 0||e-- >0)&&!(c=n.next()).done;)l.push(c.value)}catch(d){o={error:d}}finally{try{c&&!c.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return l},_e=new Set,we,ot={xs:0,sm:576,md:768,lg:992,xl:1200};function rt(){var t,e,r=we;if(bt(),r!==we)try{for(var n=St(_e),c=n.next();!c.done;c=n.next()){var l=c.value;l()}}catch(o){t={error:o}}finally{try{c&&!c.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}var Oe=!1;function bt(){var t,e,r=window.innerWidth,n={},c=!1;try{for(var l=St(Object.keys(ot)),o=l.next();!o.done;o=l.next()){var d=o.value;n[d]=r>=ot[d],n[d]!==we[d]&&(c=!0)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}c&&(we=n)}function ja(){nt&&!Oe&&(we={},bt(),window.addEventListener("resize",rt),Oe=!0);var t=za(p.exports.useState(we),2),e=t[0],r=t[1];return p.exports.useEffect(function(){if(!!nt){var n=function(){r(we)};return _e.add(n),function(){_e.delete(n),_e.size===0&&(window.removeEventListener("resize",rt),Oe=!1)}}},[]),e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",ct(void 0));Qe.debugLabel="atomRoleListActions";const Ue=()=>We(Qe),Oa=()=>sa(Qe),je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",va({open:!1,roleId:0,roleName:""}));je.debugLabel="atomRoleDetails";const $a=()=>ya(je),Ha=()=>{const t=lt(je);return(e,r)=>{t({open:!0,roleId:e,roleName:r})}},Ne=()=>We(je),Je=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomSearchParams",ct({}));Je.debugLabel="atomSearchParams";const qa=()=>We(Je),Wa=()=>lt(Je),wt="sysRole",It=[wt,"details"],Et=t=>{const{roleId:e}=Ne(),r=vt(It,()=>ua({roleId:e}),{onSuccess:t,enabled:!1});return p.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},Rt=[wt,"tree"],Ga=t=>{const{roleId:e}=Ne(),r=vt(Rt,async()=>{const{menus:n,checkedKeys:c}=await da({roleId:e});return{treeData:n,selectedMenuIds:c,selectedTreeData:st(n,c),allMenuIds:dt(n),allExpandedKeys:ut(n)}},{onSuccess:n=>{t(n.selectedTreeData)},enabled:!1});return p.exports.useEffect(()=>{e>0&&r.refetch()},[e]),r},Pt=t=>{const e=Xt();return Xe(async r=>{const n=e.getQueryData(It),c=e.getQueryData(Rt);await ma({roleId:n.roleId,roleKey:n.roleKey,roleName:n.roleName,roleSort:n.roleSort,status:n.status,menuIds:c.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...r})},{onSuccess:()=>{t(),Ke.success("\u4FDD\u5B58\u6210\u529F")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Va=()=>{const{canEditSysRole:t}=Ie(),e=Yt(),{roleId:r}=Ne();return i(De,{accessible:t,children:i(ae,{type:"primary",ghost:!0,onClick:()=>e(`/system/role-auth/${r}`),icon:i(Qt,{}),children:"\u5206\u914D\u7528\u6237"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Xa=()=>{var c;const{canAddSysRole:t}=Ie(),e=p.exports.useRef(),r=Ue(),{data:n}=Ve("sys_normal_disable");return i(De,{accessible:t,children:i(Ut,{title:"\u65B0\u589E\u89D2\u8272",trigger:i(ae,{type:"primary",icon:i(Jt,{}),children:"\u65B0\u589E"}),formRef:e,onFinish:async l=>{var o;return await ha({...l,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),r==null||r.reload(),Ke.success("\u65B0\u589E\u6210\u529F"),(o=e.current)==null||o.resetFields(),!0},width:500,layoutType:"ModalForm",columns:[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}},{valueType:"group",columns:[{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueEnum:(c=n==null?void 0:n.mapData)!=null?c:{},valueType:"radio",formItemProps:{initialValue:n==null?void 0:n.defaultValue,required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]}},{title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u6392\u5E8F"}]}}]},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea"}]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ya=()=>{const{canRemoveSysRole:t}=Ie(),e=Ue(),r=$a(),{roleId:n,roleName:c}=Ne();return i(De,{accessible:t,children:i(ae,{danger:!0,ghost:!0,icon:i(Zt,{}),onClick:()=>ea.confirm({title:"\u5220\u9664\u89D2\u8272",content:E(Me,{children:["\u786E\u5B9A",i(tt.Text,{code:!0,children:"\u5220\u9664"}),"\u89D2\u8272",i(tt.Text,{code:!0,children:c}),"\u5417\uFF1F"]}),onOk:async()=>{var o;await pa({roleIds:n}),e==null||e.reload(),(o=e==null?void 0:e.clearSelected)==null||o.call(e),r(),Ke.success("\u5220\u9664\u6210\u529F")}}),children:"\u5220\u9664"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Qa=()=>{const{canExportSysRole:t}=Ie(),e=qa(),{isLoading:r,mutate:n}=Xe(()=>ga(e),{onSuccess:()=>{Ke.success("\u5BFC\u51FA\u6210\u529F")}});return i(De,{accessible:t,children:i(ae,{ghost:!0,type:"primary",icon:i(ta,{}),loading:r,onClick:()=>n(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ua=()=>{var x;const[t,e]=p.exports.useState([]),[r]=aa.useForm(),n=Ie(),{data:c}=Ve("sys_normal_disable"),l=Ue(),{data:o,isFetching:d,refetch:s}=Et(()=>{e([]),r.resetFields()}),{mutateAsync:y}=Pt(()=>{s(),l==null||l.reload()}),h=n.canEditSysRole&&o?{form:r,editableKeys:t,onChange:(g,f)=>{e(g);const u=g[0];r.setFieldsValue({[u]:f[u]})},onSave:async(g,f)=>{await y({[g]:f[g]})}}:void 0;return E(ze,{spinning:d,children:[i(at,{column:2,columns:[{title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",editable:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0}],dataSource:o}),i(na,{}),i(at,{column:2,columns:[{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueEnum:(x=c==null?void 0:c.mapData)!=null?x:{},valueType:"radio",formItemProps:{initialValue:c==null?void 0:c.defaultValue,required:!0,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u72B6\u6001"}]}},{title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u663E\u793A\u6392\u5E8F"}]}},{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}}],dataSource:o,editable:h})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ja=()=>{var c;const t=Oa(),e=Ha(),r=Wa(),{data:n}=Ve("sys_normal_disable");return i(ka,{ghost:!0,rowKey:"roleId",actionRef:t,metas:{title:{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}]}},subTitle:{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:(c=n==null?void 0:n.mapData)!=null?c:{}},description:{title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"}]}}},tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:l,roleName:o})=>{e(l,o)}},search:{filterType:"light"},options:{setting:!1,fullScreen:!1,density:!1,reload:!0},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:async(...l)=>{const o=oa(...l);return r(o),await fa(o)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Za=()=>{const[t,e]=p.exports.useState([]),[r,n]=p.exports.useState(!1),[c,l]=p.exports.useState([]),[o,d]=p.exports.useState([]),[s,y]=p.exports.useState(!1),[h,x]=p.exports.useState(!0),[g,f]=p.exports.useState(),u=p.exports.useRef(),{canEditSysRole:K}=Ie(),{open:A,roleId:b}=Ne(),{refetch:w}=Et(({dataScope:v})=>{var L;f(v),(L=u.current)==null||L.setFieldsValue({dataScope:v})}),{loading:_,refresh:C,data:m}=Sa(async()=>{const{depts:v,checkedKeys:L}=await Ca({roleId:b});return{treeData:v,selectedMenuIds:L,selectedTreeData:st(v,L),allMenuIds:dt(v),allExpandedKeys:ut(v)}},{ready:A,refreshDeps:[b],onSuccess:v=>{n(!1),d(v.selectedTreeData)}}),{isLoading:B,mutate:I}=Xe(async()=>{await xa({roleId:b,dataScope:g,deptIds:t})},{onSuccess:()=>{C(),w(),Ke.success("\u4FDD\u5B58\u6210\u529F")}}),W=c.length===(m==null?void 0:m.allExpandedKeys.length),U=v=>{var L;if(v||h){e((L=m==null?void 0:m.allMenuIds)!=null?L:[]);return}e([])};return p.exports.useEffect(()=>{if((m==null?void 0:m.allMenuIds.length)===t.length){y(!0),x(!1);return}if(t.length===0){y(!1),x(!1);return}x(!0)},[m==null?void 0:m.allMenuIds,t]),E(Me,{children:[E("header",{className:"flex justify-between items-start flex-wrap",children:[i(ra,{formRef:u,submitter:!1,layout:"horizontal",children:i(ia,{name:"dataScope",label:"\u6570\u636E\u6743\u9650\u8303\u56F4",fieldProps:{options:ca,onChange:v=>{f(v)}},readonly:!r})}),i(De,{accessible:K,children:r?E(Be,{children:[i(ae,{loading:B,onClick:()=>{var v;n(!1),d((v=m==null?void 0:m.selectedTreeData)!=null?v:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),i(ae,{type:"primary",ghost:!0,icon:i(mt,{}),loading:B,onClick:()=>I(),children:"\u4FDD\u5B58"})]}):i(ae,{type:"primary",ghost:!0,icon:i(ht,{}),onClick:()=>{var v,L;n(!0),e((v=m==null?void 0:m.selectedMenuIds)!=null?v:[]),d((L=m==null?void 0:m.treeData)!=null?L:[])},children:"\u7F16\u8F91\u6570\u636E\u6743\u9650"})})]}),g==="2"&&E(Me,{children:[E(Be,{wrap:!0,className:"mb-2",children:[o.length>0&&i(ae,{size:"small",icon:W?i(pt,{}):i(gt,{}),onClick:()=>l(W?[]:m.allExpandedKeys),children:W?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),r&&i(ft,{indeterminate:h,onChange:v=>U(v.target.checked),checked:s,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),i(ze,{spinning:_,children:o.length>0?i(xt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:c,onExpand:v=>l(v),onCheck:v=>{e(v.checked)}}):i(Ge,{description:"\u6682\u672A\u5206\u914D\u6570\u636E\u6743\u9650"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const en=()=>{const[t,e]=p.exports.useState([]),[r,n]=p.exports.useState(!1),[c,l]=p.exports.useState([]),[o,d]=p.exports.useState([]),[s,y]=p.exports.useState(!1),[h,x]=p.exports.useState(!0),{canEditSysRole:g}=Ie(),{isFetching:f,data:u,refetch:K}=Ga(C=>{n(!1),d(C)}),{isLoading:A,mutate:b}=Pt(()=>{K()}),w=c.length===(u==null?void 0:u.allExpandedKeys.length),_=C=>{var m;if(C||h){e((m=u==null?void 0:u.allMenuIds)!=null?m:[]);return}e([])};return p.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===t.length){y(!0),x(!1);return}if(t.length===0){y(!1),x(!1);return}x(!0)},[u==null?void 0:u.allMenuIds,t]),E(Me,{children:[E("header",{className:"flex justify-between mb-2",children:[i(Be,{wrap:!0,children:o.length>0&&i(ae,{size:"small",icon:w?i(pt,{}):i(gt,{}),onClick:()=>l(w?[]:u.allExpandedKeys),children:w?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"})}),i(De,{accessible:g,children:r?E(Be,{wrap:!0,children:[i(ae,{loading:A,onClick:()=>{var C;n(!1),d((C=u==null?void 0:u.selectedTreeData)!=null?C:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),i(ae,{type:"primary",ghost:!0,icon:i(mt,{}),loading:A,onClick:()=>b({menuIds:t}),children:"\u4FDD\u5B58"})]}):i(ae,{type:"primary",ghost:!0,icon:i(ht,{}),onClick:()=>{var C,m;n(!0),e((C=u==null?void 0:u.selectedMenuIds)!=null?C:[]),d((m=u==null?void 0:u.treeData)!=null?m:[])},children:"\u7F16\u8F91\u83DC\u5355\u6743\u9650"})})]}),E(ze,{spinning:f,children:[i("div",{className:"pl-1 mb-2",children:r&&i(ft,{indeterminate:h,onChange:C=>_(C.target.checked),checked:s,children:"\u5168\u9009/\u5168\u4E0D\u9009"})}),o.length>0?i(xt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:c,onExpand:C=>l(C),onCheck:C=>{e(C.checked)}}):i(Ge,{description:"\u6682\u672A\u5206\u914D\u83DC\u5355\u6743\u9650"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const pn=()=>{const{md:t,xl:e}=ja(),{open:r}=Ne();return i(la,{children:E(pe,{ghost:!0,gutter:[16,16],wrap:!t,children:[i(pe,{title:"\u89D2\u8272\u5217\u8868",colSpan:"450px",extra:E(Be,{children:[i(Qa,{}),i(Xa,{})]}),children:i(Ja,{})}),r?E(pe,{split:"horizontal",title:"\u89D2\u8272\u8BE6\u60C5",extra:E(Be,{children:[i(Ya,{}),i(Va,{})]}),children:[i(pe,{children:i(Ua,{})}),E(pe,{split:e?"vertical":"horizontal",children:[i(pe,{children:i(en,{})}),i(pe,{children:i(Za,{})})]})]}):i(pe,{title:"\u89D2\u8272\u8BE6\u60C5",className:"h-full",children:i(Ge,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})})]})})};export{pn as default};
