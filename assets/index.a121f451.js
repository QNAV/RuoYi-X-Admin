import{r as u,g as C,h as d,l as w,m,e as j,F as b,j as f,n as S,u as T,o as k,p as v,q as x}from"./index.0c4cf09f.js";import{u as y,S as K}from"./index.41f0efcd.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=e=>{const t=u.exports.useRef(),l=C(e);return u.exports.useEffect(()=>{t!=null&&t.current&&l(t.current)},[]),t};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=5,N=e=>{const[t,l]=y(),i=d(),a=w.find(c=>m(c,e)),s=a!==void 0;return u.exports.useEffect(()=>{s&&l(c=>{const h={...c,[a]:{children:i,pathname:e}},p=Object.keys(h);return p.length>R&&delete h[p[0]],h})},[e]),j(b,{children:[Object.entries(t).map(([c,h])=>f("div",{hidden:e!==h.pathname,children:h.children},c)),f("div",{hidden:s,children:!s&&i})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E="/login",_=()=>{const e=S(),t=T();return async()=>{await K(),k(),e.clear(),t(E)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const q=(e,t="checkbox",l=!0)=>{const[i,a]=u.exports.useState([]),[s,c]=u.exports.useState([]);return{selectedRows:s,selectedRowKeys:i,rowSelection:{alwaysShowAlert:l,type:t,selectedRowKeys:i,onChange:(o,n)=>{c(n),a(o)}},onClick:o=>{const n=o[e];let g=[o],r=[n];if(t==="checkbox")if(r=[...i],g=v(s),r.includes(n)){const A=i.indexOf(n);r.splice(A,1),g.splice(A,1)}else g.push(o),r.push(n);c(g),a(r)},clearSelection:()=>{c([]),a([])},setSelectedRowKeys:a,checkRowSelection:async(o="\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61")=>(s==null?void 0:s.length)===0?(x.warning(o),Promise.reject(o)):Promise.resolve(s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{N as a,L as b,q as c,_ as u};
