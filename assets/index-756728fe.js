import{j as a,r as p}from"./jsx-runtime-5957e344.js";import{bI as y,bJ as f,bK as r,a_ as b,bL as T,bM as u,b5 as c,bN as x,bO as I,aU as C,bP as v,bQ as S,bR as k}from"./index-b9984792.js";import{a as R}from"./index-6b191ceb.js";import{s as j,a as A,b as M,d as B}from"./Monitor-739155eb.js";import{u as P}from"./useMutation.esm-9f95c154.js";import"./routes-39faac94.js";import"./mutation.esm-30303506.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const l=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",y(void 0));l.debugLabel="atomMainTableActions";const d=()=>f(l),w=()=>R(l);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=()=>{const e=d();return a(r,{accessKey:"monitor:logininfor:remove",children:a(b,{danger:!0,icon:a(T,{}),onClick:()=>{u.confirm({title:"操作确认",content:"确认清空访问记录吗？",onOk:async()=>{var o;await j(),(o=e==null?void 0:e.clearSelected)==null||o.call(e),e==null||e.reload(),c.success("清空成功")}})},children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({searchParams:e})=>{const{isLoading:t,mutate:o}=P(A,{onSuccess:()=>{c.success("导出成功")}});return a(r,{accessKey:"monitor:logininfor:export",children:a(x,{loading:t,onClick:()=>o(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const m=({infoId:e,disabled:t,batch:o})=>{const s=d();return a(r,{accessKey:"monitor:logininfor:remove",children:a(I,{batch:o,disabled:t,onClick:()=>{u.confirm({title:"操作确认",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:async()=>{var n;await M({infoIds:e}),(n=s==null?void 0:s.clearSelected)==null||n.call(s),s==null||s.reload(),c.success("删除成功")}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const K=()=>{const{valueEnumSysCommonStatus:e}=k();return[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作系统",dataIndex:"os",key:"os",valueType:"text",hideInSearch:!0},{title:"登录状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录时间",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"登录时间",dataIndex:"dateTimeRange",key:"dateTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(t,o)=>a(m,{infoId:o.infoId})}]},O=({selectedRows:e})=>a(m,{batch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),q=()=>{const e=w(),[t,o]=p.exports.useState({}),s=K();return a(C,{children:a(v,{rowKey:"infoId",actionRef:e,columns:s,request:async(...i)=>{const n=S(...i);return o(n),await B(n)},beforeSearchSubmit:i=>{const{dateTimeRange:n,...g}=i;let h={};return n&&(h={beginTime:n[0],endTime:n[1]}),{...g,...h}},toolbar:{actions:[a(L,{},"ButtonCleanUp"),a(E,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:O})})};export{q as default};
