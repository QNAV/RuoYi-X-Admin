import{h as M,l as b,aV as R,n as P,r as g,j as a,af as y,g as F,ay as v,Y as C,$ as p,aQ as j,aW as I,az as V,aH as O,aI as L,ag as E,aA as N,aB as X,aj as Y,ah as q,ai as W,aX as $,ak as G,al as x,aP as H,F as Q,I as _}from"./index.075c34ed.js";import{a as T,S as z,d as K,e as U,f as J,g as Z,c as ee}from"./index.2ec77453.js";import{a as te,b as ae}from"./index.3c28dcd5.js";import{a as se,u as oe}from"./utils.1c1875ff.js";import{P as ue}from"./index.b4d36a94.js";import{P as ie}from"./index.1483570d.js";import{u as k}from"./useMutation.esm.401ada06.js";import{u as ce,o as re}from"./SysDictTypeService.30224edb.js";import{u as ne}from"./useRequest.017eac21.js";import"./useQuery.esm.17e173d1.js";import"./utils.esm.32fb8c14.js";import"./SysLoginService.918889e8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",M(void 0));B.debugLabel="atomMainTableActions";const de=()=>b(B),le=()=>te(B),D=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",M({dictType:"",dictName:""}));D.debugLabel="atomCurDictType";const he=()=>b(D),me=()=>R(D),A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",se({actionType:"add",open:!1}));A.debugLabel="atomAddOrEditModal";const pe=()=>b(A),ye=()=>oe(A),Te=()=>{const e=P(A);return()=>{e({actionType:"add",open:!0})}},Ae=()=>{const e=P(A);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>{const e=g.exports.useRef(),{canEditSysDict:t}=T(),c=de(),{open:o,actionType:n,record:u}=pe(),h=ye(),m=()=>{var s;n==="edit"&&((s=e.current)==null||s.resetFields()),h()},{dictType:d,dictName:r}=he();return g.exports.useEffect(()=>{if(!o)return;const s=setTimeout(()=>{var i,l;n==="add"?(i=e.current)==null||i.setFieldsValue({dictType:d,dictName:r}):(l=e.current)==null||l.setFieldsValue({...u,dictName:r}),clearTimeout(s)},0)},[o]),a(y,{accessible:t,children:F(v,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:o,modalProps:{onCancel:m,okText:"\u63D0\u4EA4"},onFinish:async s=>{var i;n==="add"?(await z(s),C.success("\u65B0\u589E\u6210\u529F")):(await K({...s,dictCode:u.dictCode}),C.success("\u7F16\u8F91\u6210\u529F")),c==null||c.reload(),h(),(i=e.current)==null||i.resetFields()},children:[a(p,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(p,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(p,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(ue,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(j,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",valueEnum:I,initialValue:"default"}),a(V.Group,{name:"status",label:"\u72B6\u6001",valueEnum:O,initialValue:L.ENABLE}),a(ie,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const{canEditSysDict:e}=T(),t=Te();return a(y,{accessible:e,children:a(E,{icon:a(N,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=({record:e})=>{const{canEditSysDict:t}=T(),c=Ae();return a(y,{accessible:t,children:a(E,{type:"link",icon:a(X,{}),onClick:()=>c(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=({searchParams:e})=>{const{canExportSysPost:t}=T(),{isLoading:c,mutate:o}=k(()=>U(e),{onSuccess:()=>{C.success("\u5BFC\u51FA\u6210\u529F")}});return a(y,{accessible:t,children:a(E,{ghost:!0,type:"primary",icon:a(Y,{}),loading:c,onClick:()=>o(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({dictCode:e,disabled:t,isBatch:c})=>{const o=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:n}=T(),u=ce(),{mutateAsync:h,isLoading:m}=k(async r=>{await J({dictCodes:r})},{onSuccess:()=>{var r;u==null||u.reload(),(r=u==null?void 0:u.clearSelected)==null||r.call(u),C.success("\u5220\u9664\u6210\u529F")}});return a(y,{accessible:n,children:a(E,{type:"link",danger:!0,disabled:t,icon:a(q,{}),onClick:()=>{W.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:`\u786E\u5B9A\u5220\u9664\u5B57\u5178\u7F16\u7801\u4E3A ${e} \u7684\u5B57\u5178\u6570\u636E\u5417\uFF1F`,onOk:()=>h(e),okButtonProps:{loading:m}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>{var t;const{data:e}=ee("sys_normal_disable");return[{title:"\u5B57\u5178\u7F16\u7801",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6807\u7B7E",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"\u5B57\u5178\u952E\u503C",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6392\u5E8F",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(c,o)=>F(Q,{children:[a(Ee,{record:o}),a(w,{dictCode:o.dictCode})]})}]},Be=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(",")}),De=()=>{const e=$(),[t,c]=g.exports.useState({}),o=le(),n=Fe(),u=g.exports.useRef(),[h,m]=me(),{data:d,run:r}=ne(async()=>(await re()).reduce((i,l)=>(i[l.dictType]=l.dictName,i),{}),{manual:!0,onSuccess:s=>{const i=e.dictType;m({dictType:i,dictName:s[i]});const l=setTimeout(()=>{var f,S;(f=u.current)==null||f.setFieldsValue({dictType:i}),(S=o==null?void 0:o.current)==null||S.reload(),clearTimeout(l)},0)}});return ae("/system/dict/:dictType",()=>{r()}),a(G,{rowKey:"dictCode",actionRef:o,columns:n,params:h,request:async(...s)=>{const i=x(...s);return c(i),await Z(x(...s))},tableAlertOptionRender:Be,manualRequest:!0,toolbar:{actions:[a(be,{searchParams:t},"ButtonExport"),a(Ce,{},"ButtonAdd")]},headerTitle:a(H,{formRef:u,children:a(j,{name:"dictType",valueEnum:d!=null?d:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:s=>{m({dictType:s,dictName:d[s]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Oe=()=>F(_,{children:[a(De,{}),a(ge,{})]});export{Oe as default};
