import{r as d,A as k,j as e,B as R,b as G,Q as o,f as i,V as C,X as g,Y as O,O as M}from"./index-8e79839f.js";import{descriptionsColumns as q,useCacheNameTableColumns as E,useCacheKeyTableColumns as Q}from"./index-499652ba.js";import{a as X,b as Y,d as v,e as z,f as F,g as H}from"./Monitor-84be1b2d.js";import{u as l}from"./useRequest-39bbbc00.js";import{u as r}from"./useMutation-25c2b1ea.js";import{P as I}from"./index-e1d81cf8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};const ee=()=>{const[a,t]=d.useState(),[c,p]=d.useState(),{message:n}=k.useApp(),{data:f,refresh:h,loading:y}=l(X),{data:K,refresh:u,loading:N,mutate:w}=l(async()=>(await Y(a)).map(j=>({cacheKey:j})),{ready:!!a,refreshDeps:[a]}),{data:x,mutate:m,loading:b}=l(()=>v(a,c),{ready:!!c,refreshDeps:[c]}),{mutate:D,isLoading:L}=r(async s=>{await z(s),s===a&&w([]),h(),n.success("操作成功")}),{mutate:S,isLoading:B}=r(async s=>{await F(a,s),s===c&&m({}),u(),n.success("操作成功")}),{mutate:T,isLoading:V}=r(async()=>{await H(),m({}),n.success("操作成功")}),A=E(D),P=Q(S);return e(R,{children:G(o,{ghost:!0,gutter:[8,8],children:[e(o,{title:"缓存列表",extra:[e(i,{type:"text",icon:e(C,{}),onClick:h,loading:L},"Button")],children:e(g,{rowKey:"cacheName",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:A,options:!1,dataSource:f,scroll:{},loading:y,onRow:s=>({onClick:()=>t(s.cacheName)})})}),e(o,{title:"键名列表",extra:[e(i,{type:"text",icon:e(C,{}),onClick:u,loading:B},"Button")],children:e(g,{rowKey:"cacheKey",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:P,options:!1,dataSource:K,scroll:{},loading:N,onRow:s=>({onClick:()=>p(s.cacheKey)})})}),e(o,{title:"缓存内容",extra:[e(i,{type:"text",icon:e(O,{}),onClick:()=>T(),loading:V},"Button")],children:e(M,{spinning:b,children:e(I,{column:1,columns:q,dataSource:x})})})]})})};export{ee as default};
