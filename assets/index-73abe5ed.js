import{r as h,a,j as g,F as v}from"./jsx-runtime-06f68cbc.js";import{bb as M,aI as I,ag as b,a6 as m,Y as p,c1 as S,b5 as R,bm as O,ba as B,be as F,ay as D}from"./index-37fcb888.js";import{c as P}from"./index-31f2d972.js";import{b as N}from"./index-52a41e5a.js";import{x as V,z as C,u as x,af as L,ag as Y,ah as q,ai as X,aj as z}from"./react-e9ce630e.js";import{a as G,u as H}from"./utils-c12dd345.js";import{u as y}from"./useMutation-14a6a543.js";import{P as T}from"./index-6de84089.js";import{P as Q}from"./index-5cb01e9d.js";import{P as W}from"./index-79dca7fe.js";import{P as $}from"./index-3ea42731.js";import{j as J}from"./index-98f2df22.js";import"./mutation-bdd50ce1.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",V(void 0));A.debugLabel="atomMainTableActions";const K=()=>N(A),j=()=>C(A),u=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",G({open:!1,actionType:"add"}));u.debugLabel="atomAddOrEditModal";const U=()=>{const e=x(u);return()=>e({open:!0,actionType:"add"})},Z=()=>{const e=x(u);return t=>e({open:!0,actionType:"edit",record:t})},_=()=>H(u),ee=()=>C(u);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=h.useRef(),{open:t,actionType:o,record:c}=ee(),s=_(),n=()=>{var i;o==="edit"&&((i=e.current)==null||i.resetFields()),s()},r=j(),{valueEnumSysNormalDisable:f,defaultValueSysNormalDisable:l}=P(),{mutate:w,isLoading:E}=y(async()=>{var d;const i=await((d=e.current)==null?void 0:d.validateFields());if(i){if(o==="add"){await L(i);return}await Y({...i,postId:c.postId})}},{onSuccess:()=>{r==null||r.reload(),n(),b.success(o==="add"?"新增成功":"保存成功")}});return h.useEffect(()=>{if(t&&o==="edit"){const i=setTimeout(()=>{var d;(d=e.current)==null||d.setFieldsValue(c),clearTimeout(i)},0)}},[t]),a(M,{open:t,onCancel:n,okText:"提交",okButtonProps:{loading:E},onOk:()=>w(),title:o==="add"?"新增岗位":"编辑岗位信息",children:g(I,{submitter:!1,formRef:e,children:[a(T,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),a(T,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),a(Q,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),a(W.Group,{name:"status",label:"状态",valueEnum:f,initialValue:l}),a($,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{const e=U();return a(m,{accessible:!0,children:a(p,{type:"primary",icon:a(S,{}),onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({record:e})=>{const t=Z();return a(m,{accessible:!0,children:a(p,{type:"link",icon:a(R,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({searchParams:e})=>{const{isLoading:t,mutate:o}=y(()=>q(e),{onSuccess:()=>{b.success("导出成功")}});return a(m,{accessible:!0,children:a(p,{type:"primary",ghost:!0,icon:a(O,{}),loading:t,onClick:()=>o(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({postId:e,isBatch:t,disabled:o})=>{const c=t?"批量删除":"删除",s=j(),{mutateAsync:n,isLoading:r}=y(async l=>{await X({postIds:l})},{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),b.success("删除成功")}});return a(m,{accessible:!0,children:a(p,{type:"link",danger:!0,disabled:o,icon:a(B,{}),onClick:()=>{M.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>n(e),okButtonProps:{loading:r}})},children:c})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const{valueEnumSysNormalDisable:e}=P();return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(t,o)=>g(v,{children:[a(oe,{record:o}),a(k,{postId:[o.postId]})]})}]},ie=({selectedRowKeys:e})=>a(k,{disabled:e.length===0,isBatch:!0,postId:e}),ce=()=>{const[e,t]=h.useState({}),o=h.useRef(),c=K(),s=re();return a(F,{formRef:o,actionRef:c,rowKey:"postId",request:async(...n)=>{const r=J(...n);return t(r),await z(r)},columns:s,toolbar:{actions:[a(se,{searchParams:e},"ButtonExport"),a(ae,{},"ButtonAdd")]},tableAlertOptionRender:ie})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=()=>g(D,{children:[a(ce,{}),a(te,{})]});export{Me as default};
