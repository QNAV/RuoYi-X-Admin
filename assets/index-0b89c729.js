import{u,a as n}from"./index-e664d339.js";import{b as f,a as l,d as g}from"./index-6f927546.js";import{r}from"./jsx-runtime-06f68cbc.js";import{u as p}from"./react-27f57fd0.js";import{a1 as A,a4 as i}from"./index-37fcb888.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const w=()=>{const{data:t}=u();return r.useCallback((e,a)=>{var s;const c=new Set(((s=t==null?void 0:t.userInfo)==null?void 0:s.permissions)??[]);return typeof e=="function"?e(c):f(e,c,a)},[t])};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const v=t=>{const e=r.useRef(),a=p(t);return r.useEffect(()=>{r.startTransition(()=>{a(e.current)})},[]),e};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const M=(t,e=!0)=>{const a=r.useRef({}),{pathname:c}=A(),s=n();return r.useEffect(()=>{if(a.current.pattern&&!i(a.current.pattern,c)){a.current.isActivated=!1;return}if(a.current.isActivated)return;const o=s.find(h=>i(h,c));o&&(a.current.isActivated=!0,!(a.current.pattern===void 0&&(a.current.pattern=o,e))&&(t==null||t()))},[c]),a.current.isActivated};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const m=(t={})=>l({path:"/logout",method:"POST",secure:!0,skipErrorHandler:!1,...t});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const R=()=>async()=>{await m(),g(),window.location.replace("/login")};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};export{w as a,v as b,M as c,R as u};
