import{u as f,M as D}from"./useMutation.esm.c7490ab8.js";import{c,d as h}from"./SysMenuService.8c69695a.js";import{o as C,n as i,l as w,q as d,ba as A,j as O,F as R,a as Q,bd as q,aJ as E}from"./index.7e2e4aff.js";import{p as m,s as l}from"./tree.1fecacac.js";import{a as p,u as M}from"./utils.81244b9b.js";import{u as y}from"./useQuery.esm.3039810b.js";import"./utils.esm.6214005e.js";import"./cloneDeep.5079a371.js";const I="systemMenu",L=e=>{const n=t=>t.filter(s=>s.menuType!==D.F).map(({menuId:s,menuName:u,children:a})=>({menuId:s,menuName:u,children:a?n(a):[]}));return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:e?n(e):[]}]},r=p({hasSelected:!1,selectedMenuId:0,selectedMenuName:"\u6839\u76EE\u5F55"}),P=()=>M(r),k=()=>C(r),H=()=>i(r),o=p(!1),J=()=>M(o),W=()=>{const e=w(o);return()=>e(!0)},z=()=>i(o),S=[I,"list"],T=()=>{const e=d();return()=>e.invalidateQueries(S)},G=(e={},n)=>y(S,async()=>{const t=await c(e),s=m(t,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:l(s),map:t.reduce((u,a)=>u.set(a.menuId,a),new Map),parentIds:Array.from(t.reduce((u,a)=>u.add(a.parentId),new Set))}},{onSuccess:t=>{n(t.parentIds)}}),F=[I,"options"],g=()=>{const e=d();return()=>e.invalidateQueries(F)},U=()=>y(F,async()=>{const e=await c({}),n=m(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:L(l(n)),map:e.reduce((t,s)=>t.set(s.menuId,s),new Map)}}),X=()=>{const e=T(),n=g(),t=P();return f(async({menuId:s,menuName:u})=>{A.confirm({title:"\u5220\u9664\u83DC\u5355",content:O(R,{children:["\u786E\u5B9A\u5220\u9664\u83DC\u5355",Q(q.Text,{code:!0,children:u}),"\u5417\uFF1F"]}),onOk:async()=>{await h({menuId:s}),t(),await Promise.all([e(),n()]),E.success("\u5220\u9664\u6210\u529F")}})})};export{X as useDeleteMenu,J as useHideCreateModal,G as useQueryMenuList,U as useQueryMenuOptions,T as useReFetchMenuList,g as useReFetchMenuOptions,P as useResetSelectedMenuData,W as useShowCreateModal,k as useStateSelectedMenuData,z as useValueCreateModal,H as useValueSelectedMenuData};
