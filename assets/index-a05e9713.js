import{j as o,r as p}from"./jsx-runtime-5957e344.js";import{bH as f,bI as y,bJ as i,a_ as b,bK as x,b5 as r,bL as u,bM as T,bN as I,aU as C,bO as v,bP as k}from"./index-b7804f37.js";import{a as j}from"./index-cc007863.js";import{s as A,a as B,b as L,d as M}from"./Monitor-85d5b438.js";import{u as c}from"./useMutation.esm-059e5dbf.js";import"./routes-2e00a88b.js";import"./mutation.esm-23401b57.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",f(void 0));h.debugLabel="atomMainTableActions";const d=()=>y(h),P=()=>j(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=()=>{const e=d(),{isLoading:t,mutate:s}=c(A,{onSuccess:()=>{var n;r.success("清空成功"),e==null||e.reload(),(n=e==null?void 0:e.clearSelected)==null||n.call(e)}});return o(i,{accessKey:"monitor:logininfor:remove",children:o(b,{danger:!0,icon:o(x,{}),onClick:()=>{u.confirm({title:"操作确认",content:"确认清空访问记录吗？",okButtonProps:{loading:t},onOk:()=>s({})})},children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({searchParams:e})=>{const{isLoading:t,mutate:s}=c(B,{onSuccess:()=>{r.success("导出成功")}});return o(i,{accessKey:"monitor:logininfor:export",children:o(T,{loading:t,onClick:()=>s(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g=({infoId:e,disabled:t,batch:s})=>{const a=d(),{mutateAsync:n,isLoading:m}=c(L,{onSuccess:()=>{var l;r.success("删除成功"),a==null||a.reload(),(l=a==null?void 0:a.clearSelected)==null||l.call(a)}});return o(i,{accessKey:"monitor:logininfor:remove",children:o(I,{batch:s,disabled:t,onClick:()=>{u.confirm({title:"操作确认",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:()=>n({infoIds:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录日期",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(e,t)=>o(g,{infoId:t.infoId})}],K=({selectedRows:e})=>o(g,{batch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),D=()=>{const e=P(),[t,s]=p.exports.useState({});return o(C,{children:o(v,{rowKey:"infoId",actionRef:e,columns:R,request:async(...a)=>{const n=k(...a);return s(n),await M(n)},toolbar:{actions:[o(S,{},"ButtonCleanUp"),o(w,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:K})})};export{D as default};
