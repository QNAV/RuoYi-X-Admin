import{r as d,j as a,az as l,e as g,aY as C,q as n,a1 as A,aC as F,aD as f,aE as y,ai as m,aA as E,aZ as T,a_ as M,aB as D,a$ as P,b0 as S,M as j}from"./index.f558e200.js";import{d as h}from"./index.ce26b53e.js";import{u as w,a as x,b as R,S as k,c as O,d as q,e as I,f as V,g as N,t as v,h as L,B as W}from"./index.0eb8577e.js";import{P as z}from"./index.dec3aaf7.js";import{b as G}from"./index.8875ffdb.js";import{u as H}from"./useMutation.esm.f3c19e6e.js";import"./useQuery.esm.0df65878.js";import"./utils.esm.a17b781a.js";import"./utils.d50e5480.js";import"./index.6c63d4e2.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const K=()=>{const t=d.exports.useRef(),{canAddSysDict:e,canEditSysDict:o}=h(),s=w(),{open:u,actionType:c,record:i}=x(),p=R();return d.exports.useEffect(()=>{var r;u&&c==="edit"&&((r=t.current)==null||r.setFieldsValue(i))},[u]),a(l,{accessible:e||o,children:g(C,{formRef:t,width:500,title:c==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:u,modalProps:{onCancel:p,okText:"\u63D0\u4EA4"},onFinish:async r=>{var B;c==="add"?(await k(r),n.success("\u65B0\u589E\u6210\u529F")):(await O({...r,dictId:i.dictId}),n.success("\u7F16\u8F91\u6210\u529F")),s==null||s.reload(),p(),(B=t.current)==null||B.resetFields()},children:[a(A,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(F.Group,{name:"status",label:"\u72B6\u6001",valueEnum:f,initialValue:y.ENABLE}),a(z,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Y=()=>{const{canAddSysDict:t}=h(),e=q();return a(l,{accessible:t,children:a(m,{icon:a(E,{}),type:"primary",onClick:e,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Z=({searchParams:t})=>{const e=h(),{isLoading:o,mutate:s}=H(()=>I(t),{onSuccess:()=>{n.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:e.canExportSysPost,children:a(m,{ghost:!0,type:"primary",icon:a(T,{}),loading:o,onClick:()=>s(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const _=()=>{const{canRemoveSysDict:t}=h();return a(l,{accessible:t,children:a(m,{danger:!0,icon:a(M,{}),onClick:()=>{D.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await V(),n.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const b="dictId",$=({selectedRows:t})=>a(W,{disabled:t.length===0,isBatch:!0,dictId:t.map(e=>e.dictId).join(","),dictName:t.map(e=>e.dictName).join(",")}),J=()=>{const{rowSelection:t,onClick:e}=G(b),o=N(),[s,u]=d.exports.useState({});return a(P,{rowKey:b,actionRef:o,columns:v,tableAlertOptionRender:$,rowSelection:t,onRow:c=>({onClick:()=>{e(c)}}),request:async(...c)=>{const i=S(...c);return u(i),await L(i)},toolbar:{actions:[a(_,{},"ButtonRefresh"),a(Z,{searchParams:s},"ButtonExport"),a(Y,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const it=()=>g(j,{children:[a(J,{}),a(K,{})]});export{it as default};
