import{Q as R,X as E,V as L,aS as q,aj as k,r as p,ak as I,a4 as N,j as a,aT as G,f as W,b as S,al as $,aU as K,aV as Q,p as x,Y as f,ao as U,ap as H,aW as Z,a0 as _,aX as z,a1 as J,$ as ee,aY as te,aZ as ae,a_ as se,a2 as oe,a3 as j,a$ as ce,aI as ie,q as re,B as ne}from"./index-536fe76b.js";import{a as le,u as de}from"./utils-c7e25dd8.js";import{P as y}from"./index-4d7c0756.js";import{P as w}from"./index-cbc98efe.js";import{P as ue}from"./index-3db3aaf6.js";import{P as B}from"./index-f820e98d.js";import{P as he}from"./index-f2ed2232.js";import{u as V}from"./useMutation-7eda67d8.js";import{u as me}from"./useRequest-23adcda4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};var F=(e=>(e.NONE="none",e.DEFAULT="default",e.ERROR="error",e.SUCCESS="success",e.PROCESSING="processing",e.WARNING="warning",e))(F||{});const O=new Map([["none",{text:"无"}],["default",{text:"默认",status:"Default"}],["processing",{text:"进行中",status:"Processing"}],["warning",{text:"警告",status:"Warning"}],["error",{text:"错误",status:"Error"}],["success",{text:"成功",status:"Success"}]]);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const M=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",R(void 0));M.debugLabel="atomMainTableActions";const Y=()=>E(M),pe=()=>L(M),v=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",R({dictType:"",dictName:""}));v.debugLabel="atomCurDictType";const ye=()=>E(v),Te=()=>q(v);var C=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(C||{});const ge={[0]:"新增",[1]:"编辑"},T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",le({actionType:0,open:!1}));T.debugLabel="atomAddOrEditModal";const Ae=()=>E(T),be=()=>de(T),Ce=()=>{const e=k(T);return()=>{e({actionType:0,open:!0})}},fe=()=>{const e=k(T);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=()=>{const e=p.useRef(),t=Y(),{open:r,actionType:s,record:m}=Ae(),h=be(),g=()=>{var c;s===C.Edit&&((c=e.current)==null||c.resetFields()),h()},u=ge[s],{dictType:A,dictName:b}=ye(),{valueEnumSysYesNo:n}=I(),{defaultValueSysNormalDisable:o,valueEnumSysNormalDisable:l}=N(),i=async c=>{var d;s===C.Add?await K(c):await Q({...c,dictCode:m.dictCode}),h(),(d=e.current)==null||d.resetFields(),x.success(`${u}成功`),t==null||t.reload()};return p.useEffect(()=>{r&&p.startTransition(()=>{var c,d;s===C.Add?(c=e.current)==null||c.setFieldsValue({dictType:A,dictName:b}):(d=e.current)==null||d.setFieldsValue({...m,dictName:b})})},[r]),a(G,{accessible:!0,fallback:a(W,{children:"111"}),children:S($,{formRef:e,width:500,title:`${u}字典数据`,open:r,modalProps:{onCancel:g,okText:"提交"},onFinish:i,children:[a(y,{name:"dictName",label:"字典名称",readonly:!0}),a(y,{name:"dictType",label:"字典类型",hidden:!0}),a(y,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(y,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(w.Group,{name:"isDefault",label:"是否默认值",valueEnum:n}),a(y,{name:"cssClass",label:"样式属性"}),a(ue,{name:"dictSort",label:"显示排序",initialValue:0}),a(B,{name:"listClass",label:"回显样式",valueEnum:O,initialValue:F.NONE}),a(w.Group,{name:"status",label:"状态",valueEnum:l,initialValue:o}),a(he,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Se=()=>{const e=Ce();return a(f,{accessKey:"system:dict:edit",children:a(U,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=({record:e})=>{const t=fe();return a(f,{accessKey:"system:dict:edit",children:a(H,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=({searchParams:e})=>{const{isLoading:t,mutate:r}=V(Z,{onSuccess:()=>{x.success("导出成功")}});return a(f,{accessKey:"system:dict:export",children:a(_,{loading:t,onClick:()=>r(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const X=({dictCode:e,disabled:t,batch:r})=>{const s=Y(),{mutateAsync:m,isLoading:h}=V(z,{onSuccess:()=>{var u;s==null||s.reload(),(u=s==null?void 0:s.clearSelected)==null||u.call(s),x.success("删除成功")}});return a(f,{accessKey:"system:dict:edit",children:a(J,{batch:r,disabled:t,onClick:()=>{ee.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>m({dictCodes:e}),okButtonProps:{loading:h}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ve=()=>{const{valueEnumSysNormalDisable:e}=N(),{valueEnumSysYesNo:t}=I();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"是否默认值",dataIndex:"isDefault",key:"isDefault",valueType:"radio",valueEnum:t,hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:O},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(r,s)=>S(re,{children:[a(xe,{record:s}),a(X,{dictCode:[s.dictCode]})]})}]},De=({selectedRowKeys:e})=>a(X,{disabled:e.length===0,batch:!0,dictCode:e});let P;const je=()=>{const e=te(),[t,r]=p.useState({}),s=pe(),m=ve(),h=p.useRef(),[g,u]=Te(),{data:A,run:b}=me(async()=>(await ae()).reduce((o,l)=>(o[l.dictType]=l.dictName,o),{}),{ready:!!e.dictType,onSuccess:n=>{const o=e.dictType;u({dictType:o,dictName:n[o]}),p.startTransition(()=>{var l,i,c,d,D;(l=h.current)==null||l.setFieldsValue({dictType:o}),(c=(i=s==null?void 0:s.current)==null?void 0:i.clearSelected)==null||c.call(i),(D=(d=s.current)==null?void 0:d.reloadAndRest)==null||D.call(d)})}});return se(()=>{e.dictType===void 0||e.dictType===P||(P=e.dictType,b())}),a(oe,{rowKey:"dictCode",actionRef:s,columns:m,params:g,request:async(...n)=>{const o=j(...n);return r(o),await ce(j(...n))},tableAlertOptionRender:De,manualRequest:!0,toolbar:{actions:[a(Me,{searchParams:t},"ButtonExport"),a(Se,{},"ButtonAdd")]},headerTitle:a(ie,{formRef:h,children:a(B,{name:"dictType",valueEnum:A??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:n=>{var o,l,i,c;(l=(o=s==null?void 0:s.current)==null?void 0:o.clearSelected)==null||l.call(o),(c=(i=s.current)==null?void 0:i.reset)==null||c.call(i),u({dictType:n,dictName:A[n]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Oe=()=>S(ne,{children:[a(je,{}),a(Ee,{})]});export{Oe as default};
