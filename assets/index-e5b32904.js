import{aX as R,aY as f,aj as C,r as T,b9 as M,d as a,af as d,j as y,b_ as I,ct as P,aH as m,cu as v,aA as l,c1 as E,a0 as O,bn as B,bT as D,cv as S,a$ as F,c3 as V,a_ as j,cw as _,cx as q,aZ as L,b0 as X,b1 as Y,cy as N,h as H,av as $}from"./index-c0bbb246.js";import{a as G}from"./index-0c7706f3.js";import{a as K,u as Q}from"./utils-87ba727f.js";import{P as A}from"./index-4e68db6f.js";import{P as W}from"./index-34a801cc.js";import{P as Z}from"./index-bb3cdb5c.js";import{u as x}from"./useMutation.esm-49983955.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomMainTableActions",R(void 0));b.debugLabel="atomMainTableActions";const k=()=>f(b),z=()=>G(b),p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dict/model/index.ts/atomAddOrEditModal",K({actionType:"add",open:!1}));p.debugLabel="atomAddOrEditModal";const J=()=>f(p),U=()=>Q(p),ee=()=>{const e=C(p);return()=>{e({actionType:"add",open:!0})}},te=()=>{const e=C(p);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{var h;const e=T.exports.useRef(),t=k(),{open:s,actionType:o,record:c}=J(),i=U(),g=()=>{var n;o==="edit"&&((n=e.current)==null||n.resetFields()),i()},{data:r}=M("sys_normal_disable");return T.exports.useEffect(()=>{if(s&&o==="edit"){const n=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(c),clearTimeout(n)},0)}},[s]),a(d,{accessible:!0,children:y(I,{formRef:e,width:500,title:o==="add"?"新增字典类型":"编辑字典类型",open:s,modalProps:{onCancel:g,okText:"提交"},onFinish:async n=>{var u;o==="add"?(await P(n),m.success("新增成功")):(await v({...n,dictId:c.dictId}),m.success("编辑成功")),t==null||t.reload(),i(),(u=e.current)==null||u.resetFields()},children:[a(A,{name:"dictName",label:"字典名称",required:!0,rules:[{required:!0}]}),a(A,{name:"dictType",label:"字典类型",required:!0,rules:[{required:!0}]}),a(W.Group,{name:"status",label:"状态",valueEnum:(h=r==null?void 0:r.mapData)!=null?h:{},initialValue:r==null?void 0:r.defaultValue}),a(Z,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const e=ee();return a(d,{accessible:!0,children:a(l,{icon:a(E,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=({dictType:e})=>{const t=O();return a(l,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"查看"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({record:e})=>{const t=te();return a(d,{accessible:!0,children:a(l,{type:"link",icon:a(D,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=({searchParams:e})=>{const{isLoading:t,mutate:s}=x(()=>S(e),{onSuccess:()=>{m.success("导出成功")}});return a(d,{accessible:!0,children:a(l,{ghost:!0,type:"primary",icon:a(F,{}),loading:t,onClick:()=>s(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>a(d,{accessible:!0,children:a(l,{danger:!0,icon:a(V,{}),onClick:()=>{j.confirm({title:"确定要刷新缓存吗？",content:"刷新缓存后，所有字典数据将重新加载",onOk:async()=>{await _(),m.success("刷新成功")}})},children:"刷新缓存"})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({dictId:e,disabled:t,isBatch:s})=>{const o=s?"批量删除":"删除",c=k(),{mutateAsync:i,isLoading:g}=x(()=>q({dictIds:e}),{onSuccess:()=>{var h;c==null||c.reload(),(h=c==null?void 0:c.clearSelected)==null||h.call(c),m.success("删除成功")}});return a(d,{accessible:!0,children:a(l,{type:"link",danger:!0,disabled:t,icon:a(L,{}),onClick:()=>{j.confirm({title:"删除字典",content:`确定删除字典编号为 ${e} 的字典吗？`,onOk:async()=>i(),okButtonProps:{loading:g}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{const{data:e}=M("sys_normal_disable");return[{title:"字典编号",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"字典名称",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"字典类型",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e==null?void 0:e.mapData},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,s)=>y(H,{children:[a(ce,{dictType:s.dictType}),a(oe,{record:s}),a(w,{dictId:s.dictId})]})}]},de=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),le=()=>{const e=z(),t=ne(),[s,o]=T.exports.useState({});return a(X,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:de,request:async(...c)=>{const i=Y(...c);return o(i),await N(i)},toolbar:{actions:[a(re,{},"ButtonRefresh"),a(ie,{searchParams:s},"ButtonExport"),a(se,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=()=>y($,{children:[a(le,{}),a(ae,{})]});export{be as default};
