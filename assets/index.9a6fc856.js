import{r as g,j as a,af as r,g as B,ay as b,Y as l,$ as y,az as f,aH as F,aI as D,ag as n,aA as S,a as x,aU as j,aB as k,aj as M,aC as I,ai as T,ah as w,ak as P,al as v,F as R,I as O}from"./index.221a708e.js";import{a as d}from"./index.563f800d.js";import{u as A,a as q,b as N,S as V,c as L,d as H,e as W,f as $,g as z,h as G,i as K,j as U}from"./SysDictTypeService.3b367616.js";import{P as Y}from"./index.f1fc39f3.js";import{u as C}from"./useMutation.esm.d8040284.js";import"./useQuery.esm.c22a7b2e.js";import"./utils.esm.d716c0ee.js";import"./SysLoginService.7274aa29.js";import"./index.46a2b6de.js";import"./utils.5fc4c27e.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const J=()=>{const e=g.exports.useRef(),{canAddSysDict:t,canEditSysDict:c}=d(),s=A(),{open:i,actionType:u,record:p}=q(),m=N();return g.exports.useEffect(()=>{var o;i&&u==="edit"&&((o=e.current)==null||o.setFieldsValue(p))},[i]),a(r,{accessible:t||c,children:B(b,{formRef:e,width:500,title:u==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:i,modalProps:{onCancel:m,okText:"\u63D0\u4EA4"},onFinish:async o=>{var h;u==="add"?(await V(o),l.success("\u65B0\u589E\u6210\u529F")):(await L({...o,dictId:p.dictId}),l.success("\u7F16\u8F91\u6210\u529F")),s==null||s.reload(),m(),(h=e.current)==null||h.resetFields()},children:[a(y,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(y,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(f.Group,{name:"status",label:"\u72B6\u6001",valueEnum:F,initialValue:D.ENABLE}),a(Y,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Q=()=>{const{canAddSysDict:e}=d(),t=H();return a(r,{accessible:e,children:a(n,{icon:a(S,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const X=({dictType:e})=>{const t=x();return a(n,{type:"link",icon:a(j,{}),onClick:()=>t(e),children:"\u67E5\u770B"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Z=({record:e})=>{const t=W(),{canEditSysDict:c}=d();return a(r,{accessible:c,children:a(n,{type:"link",icon:a(k,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const _=({searchParams:e})=>{const{canExportSysDict:t}=d(),{isLoading:c,mutate:s}=C(()=>$(e),{onSuccess:()=>{l.success("\u5BFC\u51FA\u6210\u529F")}});return a(r,{accessible:t,children:a(n,{ghost:!0,type:"primary",icon:a(M,{}),loading:c,onClick:()=>s(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{const{canRemoveSysDict:e}=d();return a(r,{accessible:e,children:a(n,{danger:!0,icon:a(I,{}),onClick:()=>{T.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await z(),l.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=({dictId:e,disabled:t,isBatch:c})=>{const s=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:i}=d(),u=A(),{mutateAsync:p,isLoading:m}=C(()=>G({dictIds:e}),{onSuccess:()=>{var h;u==null||u.reload(),(h=u==null?void 0:u.clearSelected)==null||h.call(u),l.success("\u5220\u9664\u6210\u529F")}});return a(r,{accessible:i,children:a(n,{type:"link",danger:!0,disabled:t,icon:a(w,{}),onClick:()=>{T.confirm({title:"\u5220\u9664\u5B57\u5178",content:`\u786E\u5B9A\u5220\u9664\u5B57\u5178\u7F16\u53F7\u4E3A ${e} \u7684\u5B57\u5178\u5417\uFF1F`,onOk:async()=>p(),okButtonProps:{loading:m}})},children:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>[{title:"\u5B57\u5178\u7F16\u53F7",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"\u5B57\u5178\u7C7B\u578B",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:F},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(e,t)=>B(R,{children:[a(X,{dictType:t.dictType}),a(Z,{record:t}),a(E,{dictId:t.dictId})]})}],ae=({selectedRows:e})=>a(E,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),ue=()=>{const e=K(),t=te(),[c,s]=g.exports.useState({});return a(P,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:ae,request:async(...i)=>{const u=v(...i);return s(u),await U(u)},toolbar:{actions:[a(ee,{},"ButtonRefresh"),a(_,{searchParams:c},"ButtonExport"),a(Q,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me=()=>B(O,{children:[a(ue,{}),a(J,{})]});export{me as default};
