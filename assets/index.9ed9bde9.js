import{h as I,l as B,n as E,r as A,j as a,af as h,g as F,ay as R,Y as d,$ as y,az as w,ag as g,aA as P,aB as v,aj as D,aC as O,ai as x,ah as V,ak as q,al as K,F as L,I as Y}from"./index.f21f9b1f.js";import{b as m,j as M}from"./index.b7f985ac.js";import{a as X}from"./index.6a07e55a.js";import{a as _,u as N}from"./utils.945e1b77.js";import{S as W,a as $,b as z,c as G,d as H,e as Q}from"./SysConfigService.84bd6a20.js";import{P as U}from"./index.27dab4fe.js";import{u as j}from"./useMutation.esm.98487660.js";import"./useQuery.esm.1e4d2f56.js";import"./utils.esm.5b089745.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",I(void 0));T.debugLabel="atomMainTableActions";const k=()=>B(T),J=()=>X(T),f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",_({open:!1,actionType:"add"}));f.debugLabel="atomAddOrEditModal";const Z=()=>B(f),ee=()=>{const e=E(f);return()=>{e({open:!0,actionType:"add"})}},te=()=>{const e=E(f);return t=>{e({open:!0,actionType:"edit",record:t})}},ae=()=>N(f);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var b;const e=A.exports.useRef(),{canAddSysConfig:t,canEditSysConfig:c}=m(),u=k(),{data:s}=M("sys_yes_no"),{open:o,actionType:n,record:p}=Z(),C=ae(),r=()=>{var i;n==="edit"&&((i=e.current)==null||i.resetFields()),C()};return A.exports.useEffect(()=>{if(o&&n==="edit"){const i=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(p),clearTimeout(i)},0)}},[o]),a(h,{accessible:t||c,children:F(R,{formRef:e,width:500,title:n==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:o,modalProps:{onCancel:r,okText:"\u63D0\u4EA4"},onFinish:async i=>{var l;n==="add"?(await W(i),d.success("\u65B0\u589E\u6210\u529F")):(await $({...i,configId:p.configId}),d.success("\u7F16\u8F91\u6210\u529F")),u==null||u.reload(),C(),(l=e.current)==null||l.resetFields()},children:[a(y,{name:"configName",label:"\u53C2\u6570\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(y,{name:"configKey",label:"\u53C2\u6570\u952E\u540D",required:!0,rules:[{required:!0}]}),a(y,{name:"configValue",label:"\u53C2\u6570\u952E\u503C",required:!0,rules:[{required:!0}]}),a(w.Group,{name:"configType",label:"\u7CFB\u7EDF\u5185\u7F6E",valueEnum:(b=s==null?void 0:s.mapData)!=null?b:{},initialValue:s==null?void 0:s.defaultValue}),a(U,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const{canAddSysConfig:e}=m(),t=ee();return a(h,{accessible:e,children:a(g,{icon:a(P,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({record:e})=>{const t=te();return a(g,{type:"link",icon:a(v,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=({searchParams:e})=>{const{canExportSysConfig:t}=m(),{isLoading:c,mutate:u}=j(()=>z(e),{onSuccess:()=>{d.success("\u5BFC\u51FA\u6210\u529F")}});return a(h,{accessible:t,children:a(g,{ghost:!0,type:"primary",icon:a(D,{}),loading:c,onClick:()=>u(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const{canRemoveSysConfig:e}=m();return a(h,{accessible:e,children:a(g,{danger:!0,icon:a(O,{}),onClick:()=>{x.confirm({title:"\u5237\u65B0\u7F13\u5B58\uFF1F",content:"\u786E\u5B9A\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",onOk:async()=>{await G(),d.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({configId:e,disabled:t,isBatch:c})=>{const u=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:s}=m(),o=k(),{mutateAsync:n,isLoading:p}=j(async r=>{await H({configIds:r})},{onSuccess:()=>{var r;o==null||o.reload(),(r=o==null?void 0:o.clearSelected)==null||r.call(o),d.success("\u5220\u9664\u6210\u529F")}});return a(h,{accessible:s,children:a(g,{type:"link",danger:!0,disabled:t,icon:a(V,{}),onClick:()=>{x.confirm({title:"\u5220\u9664\u53C2\u6570",content:`\u786E\u5B9A\u5220\u9664\u53C2\u6570\u7F16\u53F7\u4E3A ${e} \u7684\u53C2\u6570\u5417\uFF1F`,onOk:async()=>n(e),okButtonProps:{loading:p}})},children:u})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{var t;const{data:e}=M("sys_yes_no");return[{title:"\u53C2\u6570\u4E3B\u952E",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"configName",key:"configName",valueType:"text"},{title:"\u53C2\u6570\u952E\u540D",dataIndex:"configKey",key:"configKey",valueType:"text"},{title:"\u53C2\u6570\u952E\u503C",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},{title:"\u7CFB\u7EDF\u5185\u7F6E",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",fixed:"right",render:(c,u)=>F(L,{children:[a(se,{record:u}),a(S,{configId:u.configId})]})}]},re=({selectedRows:e})=>a(S,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(",")}),le=()=>{const e=J(),t=ne(),[c,u]=A.exports.useState({});return a(q,{rowKey:"configId",actionRef:e,columns:t,tableAlertOptionRender:re,request:async(...s)=>{const o=K(...s);return u(o),await Q(o)},toolbar:{actions:[a(ie,{},"ButtonRefresh"),a(ce,{searchParams:c},"ButtonExport"),a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>F(Y,{children:[a(le,{}),a(oe,{})]});export{Fe as default};
