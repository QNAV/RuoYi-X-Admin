import{r as B,j as a,ai as l,e as g,aH as E,q as h,a2 as A,aI as D,ao as j,aZ as M,aj as n,aL as S,u as w,b7 as k,aM as P,ap as R,aN as O,al as b,ak as x,F as v,am as I,aq as N,aO as q,ar as L,O as V}from"./index.81083d84.js";import{e as d}from"./index.f96d154a.js";import{u as T,a as W,b as H,c as G,d as K,e as Z}from"./index.e77c7057.js";import{S as z,a as J,b as Q,c as U,d as X,e as Y}from"./SysDictTypeService.5d52b9f5.js";import{P as _}from"./index.3dff4c9d.js";import{i as $,j as ee,k as te,b as ae,C as se,T as ce,a as oe}from"./index.63a1eab6.js";import{c as ue}from"./index.08fe5c8b.js";import{u as y}from"./useMutation.esm.df12e81c.js";import"./useQuery.esm.b461aa08.js";import"./utils.esm.2a5188fb.js";import"./utils.eb113b90.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const e=B.exports.useRef(),{canAddSysDict:t,canEditSysDict:u}=d(),o=T(),{open:i,actionType:c,record:s}=W(),p=H();return B.exports.useEffect(()=>{var r;i&&c==="edit"&&((r=e.current)==null||r.setFieldsValue(s))},[i]),a(l,{accessible:t||u,children:g(E,{formRef:e,width:500,title:c==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:i,modalProps:{onCancel:p,okText:"\u63D0\u4EA4"},onFinish:async r=>{var C;c==="add"?(await z(r),h.success("\u65B0\u589E\u6210\u529F")):(await J({...r,dictId:s.dictId}),h.success("\u7F16\u8F91\u6210\u529F")),o==null||o.reload(),p(),(C=e.current)==null||C.resetFields()},children:[a(A,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(D.Group,{name:"status",label:"\u72B6\u6001",valueEnum:j,initialValue:M.ENABLE}),a(_,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const{canAddSysDict:e}=d(),t=G();return a(l,{accessible:e,children:a(n,{icon:a(S,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({dictType:e})=>{const t=w();return a(n,{type:"link",icon:a(k,{}),onClick:()=>t(e),children:"\u67E5\u770B"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=({record:e})=>{const t=K();return a(n,{type:"link",icon:a(P,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=({searchParams:e})=>{const t=d(),{isLoading:u,mutate:o}=y(()=>Q(e),{onSuccess:()=>{h.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:t.canExportSysPost,children:a(n,{ghost:!0,type:"primary",icon:a(R,{}),loading:u,onClick:()=>o(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const{canRemoveSysDict:e}=d();return a(l,{accessible:e,children:a(n,{danger:!0,icon:a(O,{}),onClick:()=>{b.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await U(),h.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=({dictId:e,dictName:t,disabled:u,isBatch:o})=>{const i=o?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:c}=d(),s=T(),{mutateAsync:p,isLoading:r}=y(async m=>{await X({dictIds:m})},{onSuccess:()=>{var m;s==null||s.reload(),(m=s==null?void 0:s.clearSelected)==null||m.call(s),h.success("\u5220\u9664\u6210\u529F")}});return a(l,{accessible:c,children:a(n,{type:"link",danger:!0,disabled:u,icon:a(x,{}),onClick:()=>{b.confirm({title:"\u5220\u9664\u5B57\u5178",content:g(v,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178",a(I.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>p(e),okButtonProps:{loading:r}})},children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F="dictId",pe=({selectedRows:e})=>a(f,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(","),dictName:e.map(t=>t.dictName).join(",")}),me=()=>{const{rowSelection:e,onClick:t}=ue(F),u=Z(),[o,i]=B.exports.useState({});return a(N,{rowKey:F,actionRef:u,columns:[$,ee,te,ae,se,ce,oe,{title:"\u64CD\u4F5C",valueType:"option",render:(c,s)=>g(q,{children:[a(ne,{dictType:s.dictType}),a(he,{record:s}),a(f,{dictId:s.dictId,dictName:s.dictName})]})}],tableAlertOptionRender:pe,rowSelection:e,onRow:c=>({onClick:()=>{t(c)}}),request:async(...c)=>{const s=L(...c);return i(s),await Y(s)},toolbar:{actions:[a(de,{},"ButtonRefresh"),a(le,{searchParams:o},"ButtonExport"),a(re,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const je=()=>g(V,{children:[a(me,{}),a(ie,{})]});export{je as default};
