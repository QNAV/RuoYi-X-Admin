import{aw as E,V as v,j as s,ax as U,_ as j,s as k,v as P,g as M,aB as C,e as i,Z as w,a1 as n,w as b,r as F,q as D,az as d,ai as l,aA as O,aC as L,b5 as q,b6 as V,bx as W,by as X,aF as Y,F as z,aG as G,bz as H,ah as J,b7 as K,bA as Z,aI as _,aJ as Q,bB as $,aO as ee,M as te,at as T}from"./index.994dd2cc.js";import{b as se,c as ae}from"./index.6239fa73.js";import{a as oe,u as re}from"./utils.7aae9fd9.js";import{y as ce,z as ue,A as ie,B as ne,D as le,C as he,b as de,E as me}from"./index.62be7258.js";import{d as m}from"./index.7111268d.js";import{u as x}from"./index.826d283e.js";import{u as y}from"./useMutation.esm.7504d6e9.js";import{e as pe}from"./SysDeptService.38ff6ded.js";import{u as ge}from"./useRequest.a9456521.js";import"./useQuery.esm.57740e02.js";import"./utils.esm.62724219.js";var Ce=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],be=E.forwardRef(function(e,t){var a=e.fieldProps,o=e.unCheckedChildren,u=e.checkedChildren,r=e.proFieldProps,c=v(e,Ce);return s(U,j({valueType:"switch",fieldProps:j({unCheckedChildren:o,checkedChildren:u},a),ref:t,valuePropName:"checked",proFieldProps:r,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},c))});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomMainTableActions",k(void 0));R.debugLabel="AtomMainTableActions";const I=()=>P(R),Ae=()=>se(R),S=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomSelectedDeptId",k(0));S.debugLabel="AtomSelectedDeptId";const fe=()=>P(S),Te=()=>M(S),A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/model/index.ts/AtomResetPasswordModal",oe({open:!1,userId:0,userName:""}));A.debugLabel="AtomResetPasswordModal";const Pe=()=>{const e=M(A);return(t,a)=>{e({open:!0,userId:t,userName:a})}},we=()=>re(A),Fe=()=>P(A);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=()=>{const e=we(),{open:t,userId:a,userName:o}=Fe();return s(C,{title:"\u91CD\u7F6E\u5BC6\u7801",open:t,onCancel:e,children:i(w,{children:[s(n,{}),s(n.Password,{})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function Re(e,t){return b("/system/user/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Se(e){return b("/system/user/importTemplate",{method:"POST",...e||{}})}async function je(e,t){return b("/system/user/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Be(e,t){return b("/system/user/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ke=()=>{const e=m(),[t,{toggle:a}]=x(),o=F.exports.useRef(),u=I(),{isLoading:r,mutate:c}=y(async()=>{var h,p;const f=await((p=(h=o.current)==null?void 0:h.validateFieldsReturnFormatValue)==null?void 0:p.call(h));await Re(f)},{onSuccess:()=>{u==null||u.reload(),D.success("\u6DFB\u52A0\u6210\u529F")}});return i(d,{accessible:e.canAddSysUser,children:[s(l,{type:"primary",icon:s(O,{}),onClick:a,children:"\u65B0\u589E"}),s(C,{title:"\u6DFB\u52A0\u7528\u6237",open:t,onCancel:a,confirmLoading:r,okText:"\u63D0\u4EA4",onOk:()=>c(),children:i(w,{submitter:!1,formRef:o,grid:!0,colProps:{span:12},children:[s(n,{name:"nickName",label:"\u7528\u6237\u6635\u79F0",rules:[{required:!0}]}),s(n,{name:"phoneNumber",label:"\u624B\u673A\u53F7\u7801"}),s(n,{name:"email",label:"\u90AE\u7BB1"}),s(n,{name:"userName",label:"\u7528\u6237\u540D\u79F0",rules:[{required:!0}]}),s(n.Password,{name:"password",label:"\u7528\u6237\u5BC6\u7801",rules:[{required:!0}]}),s(L.Group,{name:"status",label:"\u72B6\u6001"})]})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=()=>{const e=m();return s(d,{accessible:e.canEditSysUser,children:s(l,{type:"link",icon:s(q,{}),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=()=>{const e=m();return s(d,{accessible:e.canExportSysUser,children:s(l,{icon:s(V,{}),children:"\u5BFC\u51FA"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>{const e=m(),t=F.exports.useRef(),[a,{toggle:o}]=x(),{mutate:u,isLoading:r}=y(Se);return i(d,{accessible:e.canImportSysUser,children:[s(l,{icon:s(W,{}),onClick:o,children:"\u5BFC\u5165"}),i(C,{title:"\u5BFC\u5165\u7528\u6237",open:a,onCancel:o,children:[s("div",{className:"text-right",children:s(l,{type:"link",onClick:u,loading:r,children:"\u4E0B\u8F7D\u6A21\u677F"})}),i(w,{layout:"horizontal",submitter:!1,formRef:t,children:[s(be,{name:"isCover",label:"\u662F\u5426\u66F4\u65B0\u5DF2\u7ECF\u5B58\u5728\u7684\u7528\u6237\u6570\u636E"}),s(X,{name:"list"})]})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const N=({userId:e,userName:t,isBatch:a,disabled:o})=>{const u=a?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",r=m(),c=I(),{mutateAsync:f,isLoading:h}=y(async g=>{await Be({userIds:g})},{onSuccess:()=>{var g;c==null||c.reload(),(g=c==null?void 0:c.clearSelected)==null||g.call(c),D.success("\u5220\u9664\u6210\u529F")}}),p=()=>{C.confirm({title:"\u5220\u9664\u7528\u6237",content:i(z,{children:["\u786E\u5B9A\u5220\u9664\u7528\u6237",s(G.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>f(e),okButtonProps:{loading:h}})};return s(d,{accessible:r.canRemoveSysUser,children:s(l,{type:"link",danger:!0,disabled:o,icon:s(Y,{}),onClick:p,children:u})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ie=({userId:e,userName:t})=>{const a=m(),o=Pe();return s(d,{accessible:a.canResetSysUserPwd,children:s(l,{type:"link",danger:!0,icon:s(H,{}),onClick:()=>o(e,t),children:"\u91CD\u7F6E\u5BC6\u7801"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ne=[ce,ue,ie,ne,le,he,de,me,{title:"\u64CD\u4F5C",valueType:"option",width:290,render:(e,t)=>i(Z,{children:[s(Me,{}),s(N,{userId:t.userId,userName:t.userName}),s(Ie,{userId:t.userId,userName:t.userName})]})}],B="userId",Ee=({selectedRows:e})=>{const t=e.length===0;return s(N,{disabled:t,isBatch:!0,userId:e.map(a=>a.userId).join(","),userName:e.map(a=>a.userName).join(",")})},ve=()=>{const e=Ae(),t=fe(),a=t>0?{deptId:t}:{},{rowSelection:o,onClick:u}=ae(B);return s(J,{rowKey:B,actionRef:e,columns:Ne,params:a,search:{span:{xs:24,sm:24,md:12,lg:12,xl:12,xxl:6}},onRow:r=>({onClick:()=>u(r)}),rowSelection:o,tableAlertOptionRender:Ee,request:(...r)=>je(K(...r)),toolbar:{actions:[s(De,{},"ButtonExport"),s(xe,{},"ButtonImport"),s(ke,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ue=()=>{const[e,t]=F.exports.useState(""),a=Te(),{data:o,loading:u}=ge(()=>pe({deptName:e}),{refreshDeps:[e]});return o?i(Q,{spinning:u,children:[s($.Search,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",className:"mb-3",onSearch:r=>{t(r)}}),s(ee,{treeData:o,defaultExpandAll:!0,fieldNames:{title:"label",key:"id"},onSelect:(r,{node:{key:c}})=>{a(c)}})]}):s(_,{})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ke=()=>i(te,{children:[i(T,{ghost:!0,gutter:24,children:[s(T,{colSpan:"300px",className:"h-full",children:s(Ue,{})}),s(T,{ghost:!0,className:"h-full",children:s(ve,{})})]}),s(ye,{})]});export{Ke as default};
