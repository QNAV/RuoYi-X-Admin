import{u as m,a as T}from"./index.8875ffdb.js";import{j as c,T as v,L as k,u as d,S as y,i as E,a as L,r as p,b as j,k as M,c as K,d as b,N as C,e as x,P as w,f as O}from"./index.f558e200.js";import{u as R,a as I}from"./index.ce26b53e.js";import"./useQuery.esm.0df65878.js";import"./utils.esm.a17b781a.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=()=>{const e=m();return c(v,{title:"\u9000\u51FA\u767B\u5F55",children:c(k,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const N=()=>{const e=d();return c(v,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:c(y,{onClick:()=>e("/settings")})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=(e,t)=>e!=null&&e.path?E(e.path)?c("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:t}):c(L,{to:e.path,children:t}):t;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const H=()=>{const[e,t]=p.exports.useState(""),{pathname:i}=j(),a=d(),[h,u]=R(),g=n=>{u(r=>{const s={...r};return delete s[Object.keys(s).find(o=>s[o].pathname===n)],s})},l=p.exports.useMemo(()=>Object.entries(h).map(([n,r])=>{var s,o;return{label:(o=(s=M)==null?void 0:s[n])!=null?o:n,key:r.pathname}}),[h]);return p.exports.useEffect(()=>{t(i)},[i]),c(K,{hideAdd:!0,type:"editable-card",items:l,activeKey:e,onChange:a,onEdit:n=>{if(n===i){const r=l.map(o=>o.key),s=r.findIndex(o=>o===e);s===0&&r.length===1?a("/"):a(r[s>0?s-1:s+1])}g(n)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const q=()=>{var n,r,s,o,A,f;const{pathname:e}=j(),t=d(),i=T(e),{data:a,isSuccess:h,isLoading:u,isError:g}=I(),l=(n=b)!=null&&n[e]?!!((r=a==null?void 0:a.accessObject)!=null&&r[b[e]]):!0;return g?c(C,{to:"/500",replace:!0}):h&&!l?c(C,{to:"/403",replace:!0}):x(w,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>t("/"),menu:{loading:u},loading:u,menuDataRender:()=>O(a==null?void 0:a.userRoutes),menuItemRender:F,token:{pageContainer:{paddingBlockPageContainerContent:0,paddingInlinePageContainerContent:0}},avatarProps:{size:"small",src:(o=(s=a==null?void 0:a.userInfo)==null?void 0:s.user)==null?void 0:o.avatar,title:(f=(A=a==null?void 0:a.userInfo)==null?void 0:A.user)==null?void 0:f.nickName},actionsRender:()=>[c(N,{},"IconSetting"),c(B,{},"IconLogout")],children:[c(H,{}),i]})};export{q as default};
