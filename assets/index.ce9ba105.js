import{s as j,v as f,g as E,w as m,r as b,j as a,aw as y,e as u,ax as S,q as A,a1 as w,b1 as B,ay as P,aN as I,aW as x,bh as v,bi as O,ai as T,aB as R,aC as k,aG as N,aF as D,F as M,aH as q,aI as V,aK as W,b4 as L,M as X}from"./index.6c7226d6.js";import{d as g}from"./index.fe7b9df5.js";import{b as Y}from"./index.0a2c7e81.js";import{e as G}from"./SysDictDataService.f5c54f2f.js";import{a as K,u as H}from"./utils.4c37bda9.js";import{u as _}from"./useQuery.esm.a73c52bc.js";import{y as Q,c as $,a as z}from"./index.627c7b29.js";import{u as J}from"./index.8b16e847.js";import{u as U}from"./useMutation.esm.e2449bdd.js";import"./utils.esm.4c076868.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",j(void 0));C.debugLabel="atomMainTableActions";const Z=()=>f(C),ee=()=>Y(C),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",K({open:!1,actionType:"add"}));d.debugLabel="atomAddOrEditModal";const te=()=>f(d),ae=()=>{const e=E(d);return()=>{e({open:!0,actionType:"add"})}},oe=()=>{const e=E(d);return t=>{e({open:!0,actionType:"edit",record:t})}},se=()=>H(d),ce=["system","notice","dict"],ie=()=>_(ce,()=>G({dictType:"sys_notice_type"}));globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function ne(e,t){return m("/system/notice/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function re(e,t){return m("/system/notice/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ue(e,t){return m("/system/notice/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function le(e,t){return m("/system/notice/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const e=b.exports.useRef(),{canAddSysNotice:t,canEditSysConfig:n}=g(),c=Z(),{open:l,actionType:r,record:o}=te(),h=se(),p=()=>{var i;r==="edit"&&((i=e.current)==null||i.resetFields()),h()};return b.exports.useEffect(()=>{if(l&&r==="edit"){const i=setTimeout(()=>{var s;(s=e.current)==null||s.setFieldsValue(o),clearTimeout(i)},0)}},[l]),a(y,{accessible:t||n,children:u(S,{formRef:e,width:800,title:r==="add"?"\u65B0\u589E\u516C\u544A":"\u7F16\u8F91\u516C\u544A",open:l,modalProps:{onCancel:p,okText:"\u63D0\u4EA4"},grid:!0,onFinish:async i=>{var s;r==="add"?(await ne(i),A.success("\u65B0\u589E\u6210\u529F")):(await re({...i,noticeId:o.noticeId}),A.success("\u7F16\u8F91\u6210\u529F")),c==null||c.reload(),h(),(s=e.current)==null||s.resetFields()},children:[a(w,{name:"noticeTitle",label:"\u516C\u544A\u6807\u9898",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(B,{name:"noticeType",label:"\u516C\u544A\u7C7B\u578B",required:!0,rules:[{required:!0}],valueEnum:{},colProps:{span:12}}),a(P.Group,{name:"status",label:"\u72B6\u6001",valueEnum:I,initialValue:x.ENABLE}),a(v,{name:"noticeContent",label:"\u5185\u5BB9",children:a(O,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he={title:"\u5E8F\u53F7",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},me={title:"\u516C\u544A\u6807\u9898",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},pe={title:"\u516C\u544A\u7C7B\u578B",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:{}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const{canAddSysNotice:e}=g(),t=ae();return a(y,{accessible:e,children:a(T,{icon:a(R,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({record:e})=>{const t=oe();return a(T,{type:"link",icon:a(k,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=({noticeId:e,noticeTitle:t,disabled:n,isBatch:c})=>{const l=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:r}=g(),o=J(),{mutateAsync:h,isLoading:p}=U(async s=>{await le({noticeIds:s})},{onSuccess:()=>{var s;o==null||o.reload(),(s=o==null?void 0:o.clearSelected)==null||s.call(o),A.success("\u5220\u9664\u6210\u529F")}});return a(y,{accessible:r,children:a(T,{type:"link",danger:!0,disabled:n,icon:a(N,{}),onClick:()=>{D.confirm({title:"\u5220\u9664\u516C\u544A\u901A\u77E5",content:u(M,{children:["\u786E\u5B9A\u5220\u9664\u516C\u544A\u901A\u77E5",a(q.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>h(e),okButtonProps:{loading:p}})},children:l})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te="noticeId",ge=({selectedRows:e})=>u(L,{children:[u("span",{children:["\u5DF2\u9009\u62E9 ",e.length," \u9879"]}),a(F,{isBatch:!0,disabled:e.length===0,noticeTitle:e.map(t=>t.noticeTitle).join(","),noticeId:e.map(t=>t.noticeId).join(",")})]}),Ce=()=>{const e=ee(),{data:t}=ie();return console.log(t),a(V,{rowKey:Te,actionRef:e,columns:[he,me,pe,Q,$,z,{title:"\u64CD\u4F5C",valueType:"option",render:(n,c)=>u(M,{children:[a(ye,{record:c}),a(F,{noticeId:c.noticeId,noticeTitle:c.noticeTitle})]})}],request:async(...n)=>await ue(W(...n)),rowSelection:{alwaysShowAlert:!0},tableAlertRender:ge,toolbar:{actions:[a(Ae,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ie=()=>u(X,{children:[a(Ce,{}),a(de,{})]});export{Ie as default};
