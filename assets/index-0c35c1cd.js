import{j as e,p as o,q as R,o as k}from"./antdProComponents-d97761a4.js";import{B as G,d}from"./index-7df8d6db.js";import{descriptionsColumns as q,useCacheNameTableColumns as E,useCacheKeyTableColumns as M}from"./index-674d282c.js";import{a as O,b as _,d as v,e as z,f as F,g as H}from"./Monitor-ca1c20a8.js";import{u as n}from"./useRequest-6b8c6b76.js";import{r as C,b6 as I,B as r,a_ as p,af as J}from"./antd-79b0e736.js";import{u as l}from"./useMutation-6894a2eb.js";import"./iconPark-31f72c99.js";import"./wangEditor-f0c73729.js";import"./tslib.es6-59680bf8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};const te=()=>{const[a,t]=C.useState(),[c,g]=C.useState(),{message:i}=I.useApp(),{data:f,refresh:h,loading:x}=n(O),{data:y,refresh:u,loading:j,mutate:K}=n(async()=>(await _(a)).map(P=>({cacheKey:P})),{ready:!!a,refreshDeps:[a]}),{data:N,mutate:m,loading:w}=n(()=>v(a,c),{ready:!!c,refreshDeps:[c]}),{mutate:b,isLoading:B}=l(async s=>{await z(s),s===a&&K([]),h(),i.success("操作成功")}),{mutate:D,isLoading:L}=l(async s=>{await F(a,s),s===c&&m({}),u(),i.success("操作成功")}),{mutate:S,isLoading:T}=l(async()=>{await H(),m({}),i.success("操作成功")}),V=E(b),A=M(D);return e.jsx(G,{children:e.jsxs(o,{ghost:!0,gutter:[8,8],children:[e.jsx(o,{title:"缓存列表",extra:[e.jsx(r,{type:"text",icon:e.jsx(p,{}),onClick:h,loading:B},"Button")],children:e.jsx(d,{rowKey:"cacheName",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:V,options:!1,dataSource:f,scroll:{},loading:x,onRow:s=>({onClick:()=>t(s.cacheName)})})}),e.jsx(o,{title:"键名列表",extra:[e.jsx(r,{type:"text",icon:e.jsx(p,{}),onClick:u,loading:L},"Button")],children:e.jsx(d,{rowKey:"cacheKey",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:A,options:!1,dataSource:y,scroll:{},loading:j,onRow:s=>({onClick:()=>g(s.cacheKey)})})}),e.jsx(o,{title:"缓存内容",extra:[e.jsx(r,{type:"text",icon:e.jsx(R,{}),onClick:()=>S(),loading:T},"Button")],children:e.jsx(J,{spinning:w,children:e.jsx(k,{column:1,columns:q,dataSource:N})})})]})})};export{te as default};
