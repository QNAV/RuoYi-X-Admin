import{u as y,k as b,m as E,r as h,j as m,F as L,a as s,b as v,D as O,M as k,S as K,A as N,l as R,c as f,d as C,T as F,L as M,N as g,P as j,e as T,f as w}from"./index.ce63faa1.js";import{u as x,a as D}from"./keepAlive.209f2cb8.js";import{u as A}from"./initialState.2240936a.js";import"./useQuery.esm.268677e9.js";import"./utils.esm.bbb5c808.js";const H=e=>e.startsWith("http://")||e.startsWith("https://"),S=5,_=e=>{const[l,u]=x(),a=y(),d=b.find(n=>E(n,e)),o=d!==void 0;return h.exports.useEffect(()=>{o&&u(n=>{const r={...n,[d]:{children:a,pathname:e}},t=Object.keys(r);return t.length>S&&delete r[t[0]],r})},[e]),m(L,{children:[Object.entries(l).map(([n,r])=>s("div",{hidden:e!==r.pathname,children:r.children},n)),s("div",{hidden:o,children:!o&&a})]})},B=()=>s("div",{className:"py-3 text-gray-400 text-center",children:"\xA9 2022 Sushi Su"}),U=[{key:"PROFILE",label:"\u4E2A\u4EBA\u4E2D\u5FC3"},{type:"divider"},{key:"LOGOUT",label:"\u9000\u51FA\u767B\u5F55"}],W=()=>{var a,d,o,n,r,t;const e=A(),l=v(),u={PROFILE:()=>l("/settings"),LOGOUT:R};return s("div",{className:"cursor-pointer hover:bg-[rgba(0,0,0,0.065)] px-3",children:s(O,{overlay:s(k,{items:U,onClick:({key:c})=>{var i;return(i=u[c])==null?void 0:i.call(u)}}),children:m(K,{children:[s(N,{src:(o=(d=(a=e==null?void 0:e.data)==null?void 0:a.userInfo)==null?void 0:d.user)==null?void 0:o.avatar}),s("span",{children:(t=(r=(n=e==null?void 0:e.data)==null?void 0:n.userInfo)==null?void 0:r.user)==null?void 0:t.nickName})]})})})},I=()=>{const[e,l]=h.exports.useState(""),{pathname:u}=f(),a=v(),[d,o]=x(),n=t=>{o(c=>{const i={...c};return delete i[t],i})},r=h.exports.useMemo(()=>Object.entries(d).map(([t,c])=>{var i,p;return{label:(p=(i=C)==null?void 0:i[t])!=null?p:t,key:c.pathname}}),[d]);return h.exports.useEffect(()=>{l(u)},[u]),s(F,{hideAdd:!0,type:"editable-card",items:r,activeKey:e,onChange:a,onEdit:t=>{if(t===u){const c=r.map(p=>p.key),i=c.findIndex(p=>p===e);i===0&&c.length===1?a("/"):a(c[i>0?i-1:i+1])}n(t)}})},X=()=>m("div",{className:"flex justify-between items-end pl-5",children:[s(I,{}),s(W,{})]}),q=(e,l)=>e!=null&&e.path?H(e.path)?s("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:l}):s(M,{to:e.path,children:l}):l,V=()=>{const{pathname:e}=f(),l=v(),u=_(e),{data:a,isSuccess:d,isLoading:o}=A(),n=D(),r=h.exports.useMemo(()=>{var c;const t=(c=w)==null?void 0:c[e];return t===void 0?!0:!!(n!=null&&n[t])},[e,n]);return!o&&!d?s(g,{to:"/500",replace:!0}):!r&&!o&&d?s(g,{to:"/403",replace:!0}):s(j,{title:"RuoYi X Admin",layout:"mix",location:{pathname:e},onMenuHeaderClick:()=>l("/"),menu:{loading:o},loading:o,headerContentRender:X,menuItemRender:q,menuDataRender:()=>{var t;return T((t=a==null?void 0:a.userRoutes)!=null?t:[])},footerRender:B,bgLayoutImgList:[{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",left:85,bottom:100,height:"303px"},{src:"https://img.alicdn.com/imgextra/i2/O1CN01O4etvp1DvpFLKfuWq_!!6000000000279-2-tps-609-606.png",bottom:-68,right:-45,height:"303px"},{src:"https://img.alicdn.com/imgextra/i3/O1CN018NxReL1shX85Yz6Cx_!!6000000005798-2-tps-884-496.png",bottom:0,left:0,width:"331px"}],children:u})};export{V as default};
