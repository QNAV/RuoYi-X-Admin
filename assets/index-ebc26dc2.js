import{Q as S,X as b,V as x,aj as A,j as a,Y as m,ap as w,p as y,bn as B,a1 as R,$ as P,bo as i,b as C,q as N,bp as F,bq as O,br as k,r as h,bs as V,bt as q,bu as L,ao as X,a2 as Y,bv as $,a3 as K,B as Q}from"./index-b4f947db.js";import{a as W,u as D}from"./utils-ca7c5bb3.js";import{u as H}from"./useMutation-343b08de.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",S(void 0));p.debugLabel="atomMainTableActions";const I=()=>b(p),z=()=>x(p);var d=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(d||{});const G={[0]:"新增",[1]:"编辑"},r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:0}));r.debugLabel="atomAddOrEditModal";const J=()=>b(r),U=()=>{const e=A(r);return()=>{e({open:!0,actionType:0})}},Z=()=>{const e=A(r);return t=>{e({open:!0,actionType:1,record:t})}},_=()=>D(r);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=Z();return a(m,{accessKey:"system:notice:edit",children:a(w,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=({noticeIds:e,disabled:t,batch:s})=>{const o=I(),{mutate:l,isLoading:u}=H(B,{onSuccess:()=>{var n;o==null||o.reload(),(n=o==null?void 0:o.clearSelected)==null||n.call(o),y.success("删除成功")}});return a(m,{accessKey:"system:notice:remove",children:a(R,{batch:s,disabled:t,onClick:()=>{P.confirm({title:"操作确认",content:`确定删除公告编号为 ${e.join(",")} 的公告通知吗？`,onOk:()=>l({noticeIds:e}),okButtonProps:{loading:u}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const[te]=i({title:"公告编号",dataIndex:"noticeId",table:{valueType:"text",hideInSearch:!0}}),[oe,,ae]=i({title:"公告标题",dataIndex:"noticeTitle",table:{valueType:"text"},form:{valueType:"text",formItemProps:{rules:[{required:!0}]}}}),M=()=>{const{valueEnumSysNoticeType:e}=O();return i({title:"公告类型",dataIndex:"noticeType",valueEnum:e,table:{valueType:"select"},form:{valueType:"select",formItemProps:{rules:[{required:!0}]}}})},se="NORMAL",j=()=>{const{valueEnumSysNoticeStatus:e}=k();return i({title:"状态",dataIndex:"status",valueEnum:e,table:{valueType:"select",hideInSearch:!0},form:{valueType:"radio",formItemProps:{rules:[{required:!0}]},initialValue:se}})},[ce]=i({title:"创建者",dataIndex:"createBy",table:{valueType:"text"}}),[ie]=i({title:"创建时间",dataIndex:"createTime",table:{valueType:"dateTime",hideInSearch:!0,sorter:!0}}),ne=()=>{const[e]=M(),[t]=j();return[te,oe,e,t,ce,ie,{title:"操作",valueType:"option",render:(s,o)=>C(N,{children:[a(ee,{record:o}),a(f,{noticeIds:[o.noticeId]})]})}]},re=()=>{const[,,e]=M(),[,,t]=j();return[ae,e,t,{name:"noticeContent",title:"内容",colProps:{span:24},renderFormItem:()=>a(F,{})}]};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=()=>{const e=h.useRef(),t=I(),{open:s,actionType:o,record:l}=J(),u=_(),T=()=>{var c;o===d.Edit&&((c=e.current)==null||c.resetFields()),u()},n=G[o],v=async c=>{var g;o===d.Add?await q(c):await L({...c,noticeId:l.noticeId}),u(),(g=e.current)==null||g.resetFields(),t==null||t.reload(),y.success(`${n}成功`)},E=re();return h.useEffect(()=>{s&&d.Edit&&h.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(l)})},[s]),a(V,{title:`${n}公告通知`,layoutType:"ModalForm",grid:!0,colProps:{span:12},open:s,modalProps:{onCancel:T,okText:"提交"},columns:E,formRef:e,width:800,onFinish:v})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const e=U();return a(m,{accessKey:"system:notice:add",children:a(X,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=({selectedRowKeys:e})=>a(f,{batch:!0,disabled:e.length===0,noticeIds:e}),he=()=>{const e=z(),t=ne();return a(Y,{rowKey:"noticeId",actionRef:e,columns:t,request:(...s)=>$(K(...s)),tableAlertOptionRender:de,toolbar:{actions:[a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>C(Q,{children:[a(he,{}),a(le,{})]});export{ge as default};
