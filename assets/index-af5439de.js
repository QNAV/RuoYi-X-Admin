import{r as m,a as o,j as p,F as P}from"./jsx-runtime-f6344dff.js";import{bL as w,c4 as R,aw as M,bM as B,bN as S,bi as k,bf as F,bg as O,bj as V,aC as N}from"./index-e7aa29a2.js";import{A as u,W as K}from"./index-70b6575f.js";import{i as L,j as D,e as f}from"./index-1f7823f9.js";import{b as W}from"./index-10632c0b.js";import{a as X,b as E,u as C}from"./index-b050966c.js";import{a as Y,u as _}from"./utils-f024f5dd.js";import{I as q,J as Q,K as $,L as G}from"./vanilla-228b7eb5.js";import{P as H}from"./index-12ea3be2.js";import{P as J}from"./index-dd797ea4.js";import{P as z}from"./index-84ef4e5b.js";import{u as U}from"./useMutation.esm-9aa9d32b.js";import{i as Z}from"./index-1ca65ce8.js";import"./utils.esm-12f3e66b.js";import"./mutation.esm-9136add8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",X(void 0));y.debugLabel="atomMainTableActions";const v=()=>E(y),ee=()=>W(y);var l=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(l||{});const te={[0]:"新增",[1]:"编辑"},n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",Y({open:!1,actionType:0}));n.debugLabel="atomAddOrEditModal";const oe=()=>E(n),ae=()=>{const e=C(n);return()=>{e({open:!0,actionType:0})}},se=()=>{const e=C(n);return t=>{e({open:!0,actionType:1,record:t})}},ie=()=>_(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=m.useRef(),{defaultValueSysNoticeType:t,valueEnumSysNoticeType:i}=L(),{defaultValueSysNoticeStatus:a,valueEnumSysNoticeStatus:h}=D(),r=v(),{open:d,actionType:c,record:g}=oe(),A=ie(),I=()=>{var s;c===l.Edit&&((s=e.current)==null||s.resetFields()),A()},T=te[c],x=async s=>{var b;c===l.Add?await q(s):await Q({...s,noticeId:g.noticeId}),A(),(b=e.current)==null||b.resetFields(),r==null||r.reload(),M.success(`${T}成功`)};return m.useEffect(()=>{d&&l.Edit&&m.startTransition(()=>{var s;(s=e.current)==null||s.setFieldsValue(g)})},[d]),o(u,{accessKey:["system:notice:add","system:notice:edit"],children:p(w,{formRef:e,width:800,title:`${T}公告通知`,open:d,modalProps:{onCancel:I,okText:"提交"},grid:!0,onFinish:x,children:[o(H,{name:"noticeTitle",label:"公告标题",rules:[{required:!0}],colProps:{span:12}}),o(J,{name:"noticeType",label:"公告类型",rules:[{required:!0}],valueEnum:i,initialValue:t,colProps:{span:12}}),o(z.Group,{name:"status",label:"状态",valueEnum:h,initialValue:a}),o(R,{name:"noticeContent",label:"内容",children:o(K,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const e=ae();return o(u,{accessKey:"system:notice:add",children:o(B,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=({record:e})=>{const t=se();return o(u,{accessKey:"system:notice:edit",children:o(S,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const j=({noticeId:e,disabled:t,batch:i})=>{const a=v(),{mutateAsync:h,isLoading:r}=U($,{onSuccess:async()=>{var c;a==null||a.reload(),(c=a==null?void 0:a.clearSelected)==null||c.call(a),M.success("删除成功")}});return o(u,{accessKey:"system:notice:remove",children:o(k,{batch:i,disabled:t,icon:o(F,{}),onClick:()=>{O.confirm({title:"操作确认",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>h({noticeIds:e}),okButtonProps:{loading:r}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const de=()=>{const{data:e}=f("sys_notice_type"),{data:t}=f("sys_notice_status");return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:(e==null?void 0:e.valueEnum)??{}},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t==null?void 0:t.valueEnum)??{}},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(i,a)=>p(P,{children:[o(ne,{record:a}),o(j,{noticeId:a.noticeId})]})}]},le=({selectedRows:e})=>o(j,{batch:!0,disabled:e.length===0,noticeId:e.map(t=>t.noticeId).join(",")}),ue=()=>{const e=ee(),t=de();return o(V,{rowKey:"noticeId",actionRef:e,columns:t,request:(...i)=>G(Z(...i)),tableAlertOptionRender:le,toolbar:{actions:[o(re,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>p(N,{children:[o(ue,{}),o(ce,{})]});export{xe as default};
