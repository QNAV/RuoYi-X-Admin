import{j as a}from"./jsx-runtime-5957e344.js";import{bl as d,bm as h,b5 as m,bn as p,by as g,a_ as b,bo as y,bp as T,aU as x,bs as I,bt as k}from"./index-0c4887cd.js";import{a as f}from"./index-2c3b5c09.js";import{d as A,e as v}from"./Monitor-304ec73c.js";import{u as j}from"./useMutation.esm-f0903555.js";import"./routes-4fe0d821.js";import"./mutation.esm-ca2e19e4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/online/model/index.ts/atomMainTableActions",d(void 0));r.debugLabel="atomMainTableActions";const L=()=>h(r),M=()=>f(r);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const s=({userName:e,tokenId:t,batch:o=!1,disabled:c})=>{const n=L(),{isLoading:l,mutate:u}=j(A,{onSuccess:()=>{m.success("强退成功"),n==null||n.reload()}});return a(p,{accessKey:i=>i.has(g)?!0:o?i.has("monitor:online:batchLogout"):i.has("monitor:online:forceLogout"),children:a(b,{icon:a(y,{}),disabled:c,danger:!0,size:"small",type:"link",onClick:()=>{T.confirm({title:"操作确认",content:`确定强退用户 ${e} 吗？`,okButtonProps:{loading:l},onOk:()=>u({tokenId:t})})},children:o?"批量强退":"强退"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C=()=>[{title:"序号",dataIndex:"index",key:"index",valueType:"indexBorder"},{title:"会话编号",dataIndex:"tokenId",key:"tokenId",valueType:"text",hideInSearch:!0,ellipsis:!0,copyable:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"部门名称",dataIndex:"deptName",key:"deptName",valueType:"text",hideInSearch:!0},{title:"主机地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作系统",dataIndex:"os",key:"os",valueType:"text",hideInSearch:!0},{title:"登录时间",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",fixed:"right",render:(e,t)=>a(s,{tokenId:t.tokenId,userName:t.userName})}],N=({selectedRows:e})=>a(s,{batch:!0,disabled:e.length===0,userName:e.map(t=>t.userName).join(","),tokenId:e.map(t=>t.tokenId).join(",")}),U=()=>{const e=M(),t=C();return a(x,{children:a(I,{rowKey:"tokenId",scroll:{x:"105%"},actionRef:e,columns:t,request:(...o)=>v(k(...o)),tableAlertOptionRender:N})})};export{U as default};
