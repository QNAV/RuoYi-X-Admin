import{h as x,l as E,aZ as R,n as S,r as g,j as a,af as A,g as y,aC as v,Y as T,$ as m,aV as M,a_ as I,aD as L,aN as j,aO as V,ag as C,aG as O,aH as N,aj as Y,ah as X,ai as q,F as P,ak as W,a$ as G,al as $,am as D,aU as H,I as U}from"./index.0ef95268.js";import{a as b,S as K,d as Z,e as _,f as z,g as J}from"./index.7fc617d2.js";import{a as Q,b as ee}from"./index.a89017a5.js";import{a as te,u as ae}from"./utils.b3a24505.js";import{P as se}from"./index.44eddc58.js";import{P as oe}from"./index.b09fcd10.js";import{u as k}from"./useMutation.esm.6ead3839.js";import{u as ie}from"./index.f1cdc0b6.js";import{o as ce}from"./SysDictTypeService.8c567c6f.js";import{u as ue}from"./useRequest.8fe39857.js";import"./useQuery.esm.b9eab7c7.js";import"./utils.esm.39e0d893.js";import"./SysLoginService.d952cf4a.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",x(void 0));F.debugLabel="atomMainTableActions";const re=()=>E(F),de=()=>Q(F),f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",x({dictType:"",dictName:""}));f.debugLabel="atomCurDictType";const ne=()=>E(f),le=()=>R(f),p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",te({actionType:"add",open:!1}));p.debugLabel="atomAddOrEditModal";const he=()=>E(p),me=()=>ae(p),pe=()=>{const e=S(p);return()=>{e({actionType:"add",open:!0})}},ge=()=>{const e=S(p);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const e=g.exports.useRef(),{canEditSysDict:t}=b(),u=re(),{open:i,actionType:r,record:l}=he(),c=me(),{dictType:d,dictName:h}=ne();return g.exports.useEffect(()=>{var o,s,n;i&&r==="add"&&((o=e.current)==null||o.setFieldsValue({dictType:d,dictName:h})),i&&r==="edit"&&((s=e.current)==null||s.setFieldsValue({...l,dictName:h})),i||(n=e.current)==null||n.resetFields()},[i]),a(A,{accessible:t,children:y(v,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:i,modalProps:{onCancel:c,okText:"\u63D0\u4EA4"},onFinish:async o=>{var s;r==="add"?(await K(o),T.success("\u65B0\u589E\u6210\u529F")):(await Z({...o,dictCode:l.dictCode}),T.success("\u7F16\u8F91\u6210\u529F")),u==null||u.reload(),c(),(s=e.current)==null||s.resetFields()},children:[a(m,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(m,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(m,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(m,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(m,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(se,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(M,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",fieldProps:{options:I},initialValue:"default"}),a(L.Group,{name:"status",label:"\u72B6\u6001",valueEnum:j,initialValue:V.ENABLE}),a(oe,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const{canEditSysDict:e}=b(),t=pe();return a(A,{accessible:e,children:a(C,{icon:a(O,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({record:e})=>{const t=ge();return a(C,{type:"link",icon:a(N,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=({searchParams:e})=>{const t=b(),{isLoading:u,mutate:i}=k(()=>_(e),{onSuccess:()=>{T.success("\u5BFC\u51FA\u6210\u529F")}});return a(A,{accessible:t.canExportSysPost,children:a(C,{ghost:!0,type:"primary",icon:a(Y,{}),loading:u,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({dictCode:e,dictLabel:t,disabled:u,isBatch:i})=>{const r=i?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:l}=b(),c=ie(),{mutateAsync:d,isLoading:h}=k(async s=>{await z({dictCodes:s})},{onSuccess:()=>{var s;c==null||c.reload(),(s=c==null?void 0:c.clearSelected)==null||s.call(c),T.success("\u5220\u9664\u6210\u529F")}});return a(A,{accessible:l,children:a(C,{type:"link",danger:!0,disabled:u,icon:a(X,{}),onClick:()=>{q.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:y(P,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178\u6570\u636E",a(W.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>d(e),okButtonProps:{loading:h}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be="dictCode",Ee=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(","),dictLabel:e.map(t=>t.dictLabel).join(",")}),Fe=()=>{const e=G(),[t,u]=g.exports.useState({}),i=de(),r=g.exports.useRef(),[l,c]=le(),{data:d,run:h}=ue(async()=>(await ce()).reduce((s,n)=>(s[n.dictType]=n.dictName,s),{}),{manual:!0,onSuccess:o=>{var n,B;const s=e.dictType;c({dictType:s,dictName:o[s]}),(n=r.current)==null||n.setFieldsValue({dictType:s}),(B=i==null?void 0:i.current)==null||B.reload()}});return ee("/system/dict/:dictType",()=>{h()}),a($,{rowKey:be,actionRef:i,columns:[{title:"\u5B57\u5178\u7F16\u7801",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6807\u7B7E",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"\u5B57\u5178\u952E\u503C",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6392\u5E8F",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:j},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(o,s)=>y(P,{children:[a(ye,{record:s}),a(w,{dictCode:s.dictCode,dictLabel:s.dictLabel})]})}],params:l,request:async(...o)=>{const s=D(...o);return u(s),await J(D(...o))},tableAlertOptionRender:Ee,manualRequest:!0,toolbar:{actions:[a(Ce,{searchParams:t},"ButtonExport"),a(Ae,{},"ButtonAdd")]},headerTitle:a(H,{formRef:r,children:a(M,{name:"dictType",valueEnum:d!=null?d:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:o=>{c({dictType:o,dictName:d[o]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Le=()=>y(U,{children:[a(Fe,{}),a(Te,{})]});export{Le as default};
