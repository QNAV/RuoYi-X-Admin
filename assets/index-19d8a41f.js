import{q as k,v as x,t as X,al as G,R as B,V as I,a5 as N,j as a,am as K,a as S,ad as W,an as $,ao as H,A as E,Z as Q,T as U,w as z,ap as Z,x as _,aq as J,y as ee,ar as te,as as ae,at as se,o as oe,z as R,au as ce,ac as re,F as ie,B as ne}from"./index-b5eebe28.js";import{a as le,u as de}from"./utils-2835fcdf.js";import{r as y,bg as M,B as ue}from"./antd-f7a9cbdb.js";import{P as A}from"./index-843b2515.js";import{P}from"./index-b2d143af.js";import{P as he}from"./index-f6ff2bbf.js";import{P as F}from"./index-ddc152a2.js";import{P as me}from"./index-80c0c3aa.js";import{u as V}from"./useMutation-cb32f323.js";import{u as pe}from"./useRequest-238e95e7.js";import"./@icon-park/react-8ab893b5.js";import"./@wangeditor/editor-2b25ac2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};var O=(e=>(e.NONE="none",e.DEFAULT="default",e.ERROR="error",e.SUCCESS="success",e.PROCESSING="processing",e.WARNING="warning",e))(O||{});const Y=new Map([["none",{text:"无"}],["default",{text:"默认",status:"Default"}],["processing",{text:"进行中",status:"Processing"}],["warning",{text:"警告",status:"Warning"}],["error",{text:"错误",status:"Error"}],["success",{text:"成功",status:"Success"}]]);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",k(void 0));v.debugLabel="atomMainTableActions";const q=()=>x(v),ye=()=>X(v),w=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",k({dictType:"",dictName:""}));w.debugLabel="atomCurDictType";const ge=()=>x(w),Te=()=>G(w);var f=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(f||{});const Ae={[0]:"新增",[1]:"编辑"},b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",le({actionType:0,open:!1}));b.debugLabel="atomAddOrEditModal";const be=()=>x(b),Ce=()=>de(b),fe=()=>{const e=B(b);return()=>{e({actionType:0,open:!0})}},Ee=()=>{const e=B(b);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>{const e=y.useRef(),{message:t}=M.useApp(),l=q(),{open:i,actionType:s,record:r}=be(),m=Ce(),T=()=>{var c;s===f.Edit&&((c=e.current)==null||c.resetFields()),m()},g=Ae[s],{dictType:p,dictName:C}=ge(),{valueEnumSysYesNo:d}=I(),{defaultValueSysNormalDisable:o,valueEnumSysNormalDisable:u}=N(),n=async c=>{var h;s===f.Add?await $(c):await H({...c,dictCode:r.dictCode}),m(),(h=e.current)==null||h.resetFields(),t.success(`${g}成功`),l==null||l.reload()};return y.useEffect(()=>{i&&y.startTransition(()=>{var c,h;s===f.Add?(c=e.current)==null||c.setFieldsValue({dictType:p,dictName:C}):(h=e.current)==null||h.setFieldsValue({...r,dictName:C})})},[i]),a(K,{accessible:!0,fallback:a(ue,{children:"111"}),children:S(W,{formRef:e,width:500,title:`${g}字典数据`,open:i,modalProps:{onCancel:T,okText:"提交"},onFinish:n,children:[a(A,{name:"dictName",label:"字典名称",readonly:!0}),a(A,{name:"dictType",label:"字典类型",hidden:!0}),a(A,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(A,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(P.Group,{name:"isDefault",label:"是否默认值",valueEnum:d}),a(A,{name:"cssClass",label:"样式属性"}),a(he,{name:"dictSort",label:"显示排序",initialValue:0}),a(F,{name:"listClass",label:"回显样式",valueEnum:Y,initialValue:O.NONE}),a(P.Group,{name:"status",label:"状态",valueEnum:u,initialValue:o}),a(me,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Se=()=>{const e=fe();return a(E,{accessKey:"system:dict:edit",children:a(Q,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=({record:e})=>{const t=Ee();return a(E,{accessKey:"system:dict:edit",children:a(U,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ve=async e=>{const{data:t}=await Z(e,{format:"blob"});await _(t,`dict_${new Date().getTime()}.xlsx`)},we=({searchParams:e})=>{const{message:t}=M.useApp(),{isLoading:l,mutate:i}=V(ve,{onSuccess:()=>{t.success("导出成功")}});return a(E,{accessKey:"system:dict:export",children:a(z,{loading:l,onClick:()=>i(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=({dictCode:e,disabled:t,batch:l})=>{const{message:i,modal:s}=M.useApp(),r=q(),{mutateAsync:m,isLoading:T}=V(J,{onSuccess:()=>{var p;r==null||r.reload(),(p=r==null?void 0:r.clearSelected)==null||p.call(r),i.success("删除成功")}});return a(E,{accessKey:"system:dict:edit",children:a(ee,{batch:l,disabled:t,onClick:()=>{s.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>m({dictCodes:e}),okButtonProps:{loading:T}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=()=>{const{valueEnumSysNormalDisable:e}=N(),{valueEnumSysYesNo:t}=I();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"是否默认值",dataIndex:"isDefault",key:"isDefault",valueType:"radio",valueEnum:t,hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:Y},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(l,i)=>S(ie,{children:[a(Me,{record:i}),a(L,{dictCode:[i.dictCode]})]})}]},Re=({selectedRowKeys:e})=>a(L,{disabled:e.length===0,batch:!0,dictCode:e});let j;const Pe="/system/dict/:dictType",je=()=>{const e=te(),[t,l]=y.useState({}),i=ae(Pe),s=ye(),r=De(),m=y.useRef(),[T,g]=Te(),{data:p,run:C}=pe(async()=>(await se()).reduce((o,u)=>(o[u.dictType]=u.dictName,o),{}),{ready:!!e.dictType,onSuccess:d=>{const o=e.dictType;g({dictType:o,dictName:d[o]}),y.startTransition(()=>{var u,n,c,h,D;(u=m.current)==null||u.setFieldsValue({dictType:o}),(c=(n=s==null?void 0:s.current)==null?void 0:n.clearSelected)==null||c.call(n),(D=(h=s.current)==null?void 0:h.reloadAndRest)==null||D.call(h)})}});return y.useEffect(()=>{e.dictType===void 0||e.dictType===j||(j=e.dictType,C())},[i]),a(oe,{rowKey:"dictCode",actionRef:s,columns:r,params:T,request:async(...d)=>{const o=R(...d);return l(o),await ce(R(...d))},tableAlertOptionRender:Re,manualRequest:!0,toolbar:{actions:[a(we,{searchParams:t},"ButtonExport"),a(Se,{},"ButtonAdd")]},headerTitle:a(re,{formRef:m,children:a(F,{name:"dictType",valueEnum:p??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:d=>{var o,u,n,c;(u=(o=s==null?void 0:s.current)==null?void 0:o.clearSelected)==null||u.call(o),(c=(n=s.current)==null?void 0:n.reset)==null||c.call(n),g({dictType:d,dictName:p[d]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ke=()=>S(ne,{children:[a(je,{}),a(xe,{})]});export{Ke as default};
