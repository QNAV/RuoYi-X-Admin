import{z as B,A as R,B as D,D as x,c as v,C as I,a as V}from"./index.0d737274.js";import{s as L,v as S,g as j,j as s,ai as g,aj as C,aL as N,aM as q,w as p,q as b,ap as W,ak as X,al as w,e as h,F as y,am as Y,r as A,$ as z,a2 as E,aI as G,ao as H,aZ as K,O as Z,av as $,ar as J}from"./index.c72bb1f1.js";import{b as Q,c as U}from"./index.7826b6a7.js";import{d as F}from"./index.0553b5a6.js";import{a as _,u as tt}from"./utils.3ff3c682.js";import{u as P}from"./useMutation.esm.69319351.js";import{P as et}from"./index.44cd42bb.js";import{P as st}from"./index.d82c47a1.js";import"./useQuery.esm.81638f94.js";import"./utils.esm.00f7e927.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomMainTableActions",L(void 0));f.debugLabel="AtomMainTableActions";const ot=()=>Q(f),O=()=>S(f),m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomAddOrEditModal",_({open:!1,actionType:"add"}));m.debugLabel="AtomAddOrEditModal";const at=()=>{const t=j(m);return()=>t({open:!0,actionType:"add"})},ct=()=>{const t=j(m);return e=>t({open:!0,actionType:"edit",record:e})},rt=()=>tt(m),it=()=>S(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const nt=()=>{const t=F(),e=at();return s(g,{accessible:t.canAddSysPost,children:s(C,{type:"primary",icon:s(N,{}),onClick:e,children:"\u65B0\u5EFA"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ut=({record:t})=>{const e=F(),a=ct();return s(g,{accessible:e.canEditSysPost,children:s(C,{type:"link",icon:s(q,{}),onClick:()=>a(t),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};async function dt(t,e){return p("/system/post/add",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function lt(t,e){return p("/system/post/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function ht(t,e){return p("/system/post/export",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function pt(t,e){return p("/system/post/list",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function mt(t,e){return p("/system/post/remove",{method:"POST",params:{...t},...e||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const At=({searchParams:t})=>{const e=F(),{isLoading:a,mutate:i}=P(()=>ht(t),{onSuccess:()=>{b.success("\u5BFC\u51FA\u6210\u529F")}});return s(g,{accessible:e.canExportSysPost,children:s(C,{type:"link",icon:s(W,{}),loading:a,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const k=({postId:t,postName:e,isBatch:a,disabled:i})=>{const l=a?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",d=F(),c=O(),{mutateAsync:r,isLoading:n}=P(async o=>{await mt({postIds:o})},{onSuccess:()=>{var o;c==null||c.reload(),(o=c==null?void 0:c.clearSelected)==null||o.call(c),b.success("\u5220\u9664\u6210\u529F")}}),u=()=>{w.confirm({title:"\u5220\u9664\u5C97\u4F4D",content:h(y,{children:["\u786E\u5B9A\u5220\u9664\u5C97\u4F4D",s(Y.Text,{code:!0,children:e}),"\u5417\uFF1F"]}),onOk:async()=>r(t),okButtonProps:{loading:n}})};return s(g,{accessible:d.canRemoveSysPost,children:s(C,{type:"link",danger:!0,disabled:i,icon:s(X,{}),onClick:u,children:l})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const gt=()=>{var u;const t=A.exports.useRef(),{open:e,actionType:a,record:i}=it(),l=rt(),d=O(),c=()=>{var o;l(),(o=t.current)==null||o.resetFields()},{mutate:r,isLoading:n}=P(async()=>{var T;const o=await((T=t.current)==null?void 0:T.validateFields());if(!!o){if(a==="add"){await dt(o);return}await lt({...o,postId:i.postId})}},{onSuccess:()=>{d==null||d.reload(),c(),b.success(a==="add"?"\u65B0\u5EFA\u6210\u529F":"\u4FDD\u5B58\u6210\u529F")}});return A.exports.useEffect(()=>{var o;a==="edit"&&i&&((o=t.current)==null?void 0:o.setFieldsValue)&&t.current.setFieldsValue(i)},[a,(u=t.current)==null?void 0:u.setFieldsValue]),s(w,{open:e,onCancel:c,okText:"\u63D0\u4EA4",okButtonProps:{loading:n},onOk:()=>r(),title:a==="add"?"\u65B0\u5EFA\u5C97\u4F4D":"\u7F16\u8F91\u5C97\u4F4D\u4FE1\u606F",children:h(z,{submitter:!1,formRef:t,children:[s(E,{name:"postName",label:"\u5C97\u4F4D\u540D\u79F0",rules:[{required:!0}]}),s(E,{name:"postCode",label:"\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0}]}),s(et,{name:"postSort",label:"\u663E\u793A\u987A\u5E8F",rules:[{required:!0}],initialValue:0}),s(G.Group,{name:"status",label:"\u72B6\u6001",valueEnum:H,initialValue:K.ENABLE}),s(st,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ct=[B,R,D,x,v,I,V,{title:"\u64CD\u4F5C",valueType:"option",render:(t,e)=>h(y,{children:[s(ut,{record:e}),s(k,{postId:e.postId,postName:e.postName})]})}],M="postId",wt=()=>{const[t,e]=A.exports.useState({}),a=A.exports.useRef(),i=ot(),{rowSelection:l,onClick:d}=U(M);return h(Z,{children:[s($,{formRef:a,actionRef:i,rowKey:M,request:async(...r)=>{const n=J(...r);return e(n),await pt(n)},columns:Ct,toolbar:{actions:[s(nt,{},"ButtonAdd")]},rowSelection:l,onRow:r=>({onClick:()=>d(r)}),tableAlertOptionRender:({selectedRows:r})=>{const n=r.length===0;return h(y,{children:[s(k,{disabled:n,isBatch:!0,postId:r.map(u=>u.postId).join(","),postName:r.map(u=>u.postName).join(",")}),s(At,{searchParams:t})]})}}),s(gt,{})]})};export{wt as default};
