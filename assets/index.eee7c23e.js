import{s as S,v as f,y as O,g as P,r as b,j as a,ai as T,e as y,aH as L,q as A,a2 as C,b4 as R,b8 as V,aI as v,ao as q,aZ as N,aj as E,aL as X,aM as Y,ap as W,ak as G,al as H,F as I,am as K,b9 as U,aq as Z,aO as $,ar as j,b3 as z,O as J}from"./index.b67212cb.js";import{e as D,k as Q,l as _,m as ee,n as te,o as ae}from"./index.d2b89c20.js";import{b as se,c as oe,d as ce}from"./index.7fbe1efc.js";import{a as ie,u as ue}from"./utils.840ab196.js";import{P as re}from"./index.268e3eed.js";import{P as ne}from"./index.6c2cbdf3.js";import{l as le,m as de,n as he,o as me,b as pe,C as Ce,T as ge,a as be}from"./index.0752f89b.js";import{u as k}from"./useMutation.esm.4a818e92.js";import{u as Ae}from"./index.87bca3fe.js";import{o as Te}from"./SysDictTypeService.3a1852f3.js";import{u as ye}from"./useRequest.a0a3a2e9.js";import"./useQuery.esm.84d89167.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",S(void 0));F.debugLabel="atomMainTableActions";const Ee=()=>f(F),De=()=>se(F),M=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",S({dictType:"",dictName:""}));M.debugLabel="atomCurDictType";const fe=()=>f(M),Fe=()=>O(M),g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",ie({actionType:"add",open:!1}));g.debugLabel="atomAddOrEditModal";const Me=()=>f(g),Be=()=>ue(g),je=()=>{const e=P(g);return()=>{e({actionType:"add",open:!0})}},we=()=>{const e=P(g);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Se=()=>{const e=b.exports.useRef(),{canEditSysDict:t}=D(),n=Ee(),{open:u,actionType:d,record:l}=Me(),s=Be(),{dictType:m,dictName:h}=fe();return b.exports.useEffect(()=>{var r,c,o;u&&d==="add"&&((r=e.current)==null||r.setFieldsValue({dictType:m,dictName:h})),u&&d==="edit"&&((c=e.current)==null||c.setFieldsValue({...l,dictName:h})),u||(o=e.current)==null||o.resetFields()},[u]),a(T,{accessible:t,children:y(L,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:u,modalProps:{onCancel:s,okText:"\u63D0\u4EA4"},onFinish:async r=>{var c;d==="add"?(await Q(r),A.success("\u65B0\u589E\u6210\u529F")):(await _({...r,dictCode:l.dictCode}),A.success("\u7F16\u8F91\u6210\u529F")),n==null||n.reload(),s(),(c=e.current)==null||c.resetFields()},children:[a(C,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(C,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(C,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(C,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(C,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(re,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(R,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",fieldProps:{options:V},initialValue:"default"}),a(v.Group,{name:"status",label:"\u72B6\u6001",valueEnum:q,initialValue:N.ENABLE}),a(ne,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Pe=()=>{const{canEditSysDict:e}=D(),t=je();return a(T,{accessible:e,children:a(E,{icon:a(X,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Re=({record:e})=>{const t=we();return a(E,{type:"link",icon:a(Y,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ke=({searchParams:e})=>{const t=D(),{isLoading:n,mutate:u}=k(()=>ee(e),{onSuccess:()=>{A.success("\u5BFC\u51FA\u6210\u529F")}});return a(T,{accessible:t.canExportSysPost,children:a(E,{ghost:!0,type:"primary",icon:a(W,{}),loading:n,onClick:()=>u(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const x=({dictCode:e,dictLabel:t,disabled:n,isBatch:u})=>{const d=u?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:l}=D(),s=Ae(),{mutateAsync:m,isLoading:h}=k(async c=>{await te({dictCodes:c})},{onSuccess:()=>{var c;s==null||s.reload(),(c=s==null?void 0:s.clearSelected)==null||c.call(s),A.success("\u5220\u9664\u6210\u529F")}});return a(T,{accessible:l,children:a(E,{type:"link",danger:!0,disabled:n,icon:a(G,{}),onClick:()=>{H.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:y(I,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178\u6570\u636E",a(K.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>m(e),okButtonProps:{loading:h}})},children:d})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w="dictCode",xe=({selectedRows:e})=>a(x,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(","),dictLabel:e.map(t=>t.dictLabel).join(",")}),Oe=()=>{const{rowSelection:e,onClick:t}=oe(w),n=U(),[u,d]=b.exports.useState({}),l=De(),s=b.exports.useRef(),[m,h]=Fe(),{data:r,run:c}=ye(async()=>(await Te()).reduce((i,p)=>(i[p.dictType]=p.dictName,i),{}),{manual:!0,onSuccess:o=>{var p,B;const i=n.dictType;h({dictType:i,dictName:o[i]}),(p=s.current)==null||p.setFieldsValue({dictType:i}),(B=l==null?void 0:l.current)==null||B.reload()}});return ce("/system/dict/:dictType",()=>{c()}),a(Z,{rowKey:w,actionRef:l,columns:[le,de,he,me,pe,Ce,ge,be,{title:"\u64CD\u4F5C",valueType:"option",render:(o,i)=>y($,{children:[a(Re,{record:i}),a(x,{dictCode:i.dictCode,dictLabel:i.dictLabel})]})}],params:m,request:async(...o)=>{const i=j(...o);return d(i),await ae(j(...o))},tableAlertOptionRender:xe,rowSelection:e,onRow:o=>({onClick:()=>{t(o)}}),manualRequest:!0,toolbar:{actions:[a(ke,{searchParams:u},"ButtonExport"),a(Pe,{},"ButtonAdd")]},headerTitle:a(z,{formRef:s,children:a(R,{name:"dictType",valueEnum:r!=null?r:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:o=>{h({dictType:o,dictName:r[o]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ue=()=>y(J,{children:[a(Oe,{}),a(Se,{})]});export{Ue as default};
