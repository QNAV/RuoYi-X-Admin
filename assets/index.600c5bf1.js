import{B as bt}from"./index.66d53706.js";import{u as Be,A as ze,P as pt}from"./useAccess.69c5d540.js";import{r as m,a1 as Le,d as U,D as r,h as I,ag as xt,aS as gt,v as yt,_ as Re,a4 as Oe,b as Fe,aW as Ct,cS as Ge,aU as Rt,ac as at,bI as St,C as Ye,l as Ve,j as _,g as ye,F as wt,aB as Et,a as D,S as We,aa as It,a7 as Pe,d0 as Pt,aI as $e,J as rt,V as ot,cT as At,W as kt,aG as De,aH as Ae,cV as Dt,cC as Ue,cu as Tt,U as it,cW as lt,aC as Je,bG as _t,cX as Ft,bv as Kt,aV as $t,aT as Qe,cY as Ze}from"./index.e7e8a15b.js";import{E as Mt,a as st,u as ut}from"./useMutation.1e2dbf19.js";import"./keepAlive.5504b859.js";import{u as Ot,c as jt}from"./useInitActionType.0fa3dcee.js";import{a as Bt,u as zt,b as Lt,P as Yt,M as Vt}from"./Table.7e4fad06.js";import{P as Xt}from"./index.ed943dc7.js";import{P as Ht}from"./index.69c53a31.js";import{M as qt,T as Gt}from"./Tree.9d22aed6.js";import{P as _e,u as Wt,T as et}from"./index.ebc4e7d2.js";import{b as Ut,C as Jt,c as Qt}from"./common.f0aae362.js";import{E as ct}from"./index.81372627.js";import{e as Zt}from"./SysMenuService.483ee7d1.js";import{f as en,a as tn}from"./tree.37039ea2.js";import{P as tt}from"./index.64153480.js";/* empty css              */import"./RouteContext.8ac15446.js";import"./index.d6144630.js";import"./index.53673e5f.js";import"./unstated-next.21011287.js";var W="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/node_modules/.pnpm/antd@4.23.2_biqbaboplfbrettd7655fr4n2y/node_modules/antd/es/list/Item.js",dt=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a},nn=function(t){var a=t.prefixCls,n=t.className,o=t.avatar,i=t.title,s=t.description,v=dt(t,["prefixCls","className","avatar","title","description"]),x=m.exports.useContext(Le),R=x.getPrefixCls,f=R("list",a),d=U("".concat(f,"-item-meta"),n),u=r("div",{className:"".concat(f,"-item-meta-content"),children:[i&&r("h4",{className:"".concat(f,"-item-meta-title"),children:i},void 0,!1,{fileName:W,lineNumber:38,columnNumber:28},this),s&&r("div",{className:"".concat(f,"-item-meta-description"),children:s},void 0,!1,{fileName:W,lineNumber:40,columnNumber:42},this)]},void 0,!0,{fileName:W,lineNumber:36,columnNumber:30},this);return r("div",{...v,className:d,children:[o&&r("div",{className:"".concat(f,"-item-meta-avatar"),children:o},void 0,!1,{fileName:W,lineNumber:45,columnNumber:30},this),(i||s)&&u]},void 0,!0,{fileName:W,lineNumber:43,columnNumber:23},this)},an=function(t,a){var n=t.prefixCls,o=t.children,i=t.actions,s=t.extra,v=t.className,x=t.colStyle,R=dt(t,["prefixCls","children","actions","extra","className","colStyle"]),f=m.exports.useContext(Xe),d=f.grid,u=f.itemLayout,c=m.exports.useContext(Le),l=c.getPrefixCls,P=function(){var h;return m.exports.Children.forEach(o,function(T){typeof T=="string"&&(h=!0)}),h&&m.exports.Children.count(o)>1},F=function(){return u==="vertical"?!!s:!P()},S=l("list",n),k=i&&i.length>0&&r("ul",{className:"".concat(S,"-item-action"),children:i.map(function(N,h){return r("li",{children:[N,h!==i.length-1&&r("em",{className:"".concat(S,"-item-action-split")},void 0,!1,{fileName:W,lineNumber:94,columnNumber:59},this)]},"".concat(S,"-item-action-").concat(h),!0,{fileName:W,lineNumber:92,columnNumber:7},this)})},"actions",!1,{fileName:W,lineNumber:85,columnNumber:70},this),Y=d?"div":"li",B=r(Y,{...R,...d?{}:{ref:a},className:U("".concat(S,"-item"),I({},"".concat(S,"-item-no-flex"),!F()),v),children:u==="vertical"&&s?[r("div",{className:"".concat(S,"-item-main"),children:[o,k]},"content",!0,{fileName:W,lineNumber:104,columnNumber:58},this),r("div",{className:"".concat(S,"-item-extra"),children:s},"extra",!1,{fileName:W,lineNumber:107,columnNumber:46},this)]:[o,k,xt(s,{key:"extra"})]},void 0,!1,{fileName:W,lineNumber:100,columnNumber:35},this);return d?r(gt,{ref:a,flex:1,style:x,children:B},void 0,!1,{fileName:W,lineNumber:113,columnNumber:30},this):B},mt=m.exports.forwardRef(an);mt.Meta=nn;const rn=mt;var G="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/node_modules/.pnpm/antd@4.23.2_biqbaboplfbrettd7655fr4n2y/node_modules/antd/es/list/index.js",on=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a},Xe=m.exports.createContext({});Xe.Consumer;function Ke(e){var t,a=e.pagination,n=a===void 0?!1:a,o=e.prefixCls,i=e.bordered,s=i===void 0?!1:i,v=e.split,x=v===void 0?!0:v,R=e.className,f=e.children,d=e.itemLayout,u=e.loadMore,c=e.grid,l=e.dataSource,P=l===void 0?[]:l,F=e.size,S=e.header,k=e.footer,Y=e.loading,B=Y===void 0?!1:Y,N=e.rowKey,h=e.renderItem,T=e.locale,me=on(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),fe=n&&yt(n)==="object"?n:{},oe=m.exports.useState(fe.defaultCurrent||1),V=Re(oe,2),ie=V[0],Z=V[1],ve=m.exports.useState(fe.defaultPageSize||10),le=Re(ve,2),he=le[0],X=le[1],w=m.exports.useContext(Le),z=w.getPrefixCls,g=w.renderEmpty,K=w.direction,$={current:1,total:0},J={},ee=function(C){return function(O,j){Z(O),X(j),n&&n[C]&&n[C](O,j)}},q=ee("onChange"),se=ee("onShowSizeChange"),Se=function(C,O){if(!h)return null;var j;return typeof N=="function"?j=N(C):N?j=C[N]:j=C.key,j||(j="list-item-".concat(O)),J[O]=j,h(C,O)},we=function(){return!!(u||n||k)},Ee=function(C,O){return r("div",{className:"".concat(C,"-empty-text"),children:T&&T.emptyText||O("List")},void 0,!1,{fileName:G,lineNumber:122,columnNumber:25},this)},E=z("list",o),Q=B;typeof Q=="boolean"&&(Q={spinning:Q});var ue=Q&&Q.spinning,M="";switch(F){case"large":M="lg";break;case"small":M="sm";break}var p=U(E,(t={},I(t,"".concat(E,"-vertical"),d==="vertical"),I(t,"".concat(E,"-").concat(M),M),I(t,"".concat(E,"-split"),x),I(t,"".concat(E,"-bordered"),s),I(t,"".concat(E,"-loading"),ue),I(t,"".concat(E,"-grid"),!!c),I(t,"".concat(E,"-something-after-last-item"),we()),I(t,"".concat(E,"-rtl"),K==="rtl"),t),R),b=Oe(Oe(Oe({},$),{total:P.length,current:ie,pageSize:he}),n||{}),y=Math.ceil(b.total/b.pageSize);b.current>y&&(b.current=y);var te=n?r("div",{className:"".concat(E,"-pagination"),children:r(Bt,{...b,onChange:q,onShowSizeChange:se},void 0,!1,{fileName:G,lineNumber:170,columnNumber:19},this)},void 0,!1,{fileName:G,lineNumber:168,columnNumber:53},this):null,ne=Fe(P);n&&P.length>(b.current-1)*b.pageSize&&(ne=Fe(P).splice((b.current-1)*b.pageSize,b.pageSize));var Ne=Object.keys(c||{}).some(function(A){return["xs","sm","md","lg","xl","xxl"].includes(A)}),ae=Ct(Ne),ce=m.exports.useMemo(function(){for(var A=0;A<Ge.length;A+=1){var C=Ge[A];if(ae[C])return C}},[ae]),xe=m.exports.useMemo(function(){if(!!c){var A=ce&&c[ce]?c[ce]:c.column;if(A)return{width:"".concat(100/A,"%"),maxWidth:"".concat(100/A,"%")}}},[c==null?void 0:c.column,ce]),re=ue&&r("div",{style:{minHeight:53}},void 0,!1,{fileName:G,lineNumber:212,columnNumber:51},this);if(ne.length>0){var ge=ne.map(function(A,C){return Se(A,C)}),Ie=m.exports.Children.map(ge,function(A,C){return r("div",{style:xe,children:A},J[C],!1,{fileName:G,lineNumber:223,columnNumber:27},this)});re=c?r(Rt,{gutter:c.gutter,children:Ie},void 0,!1,{fileName:G,lineNumber:228,columnNumber:43},this):r("ul",{className:"".concat(E,"-items"),children:ge},void 0,!1,{fileName:G,lineNumber:230,columnNumber:37},this)}else!f&&!ue&&(re=Ee(E,g||St));var L=b.position||"bottom",be=m.exports.useMemo(function(){return{grid:c,itemLayout:d}},[JSON.stringify(c),d]);return r(Xe.Provider,{value:be,children:r("div",{className:p,...me,children:[(L==="top"||L==="both")&&te,S&&r("div",{className:"".concat(E,"-header"),children:S},void 0,!1,{fileName:G,lineNumber:248,columnNumber:122},this),r(at,{...Q,children:[re,f]},void 0,!0,{fileName:G,lineNumber:250,columnNumber:28},this),k&&r("div",{className:"".concat(E,"-footer"),children:k},void 0,!1,{fileName:G,lineNumber:250,columnNumber:132},this),u||(L==="bottom"||L==="both")&&te]},void 0,!0,{fileName:G,lineNumber:246,columnNumber:19},this)},void 0,!1,{fileName:G,lineNumber:244,columnNumber:23},this)}Ke.Item=rn;function ln(e,t){for(var a=e,n=0;n<t.length;n+=1){if(a==null)return;a=a[t[n]]}return a}var sn=["title","subTitle","avatar","description","extra","content","actions","type"],un=sn.reduce(function(e,t){return e.set(t,!0),e},new Map);function cn(e,t){return vn(e)||fn(e,t)||mn(e,t)||dn()}function dn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mn(e,t){if(!!e){if(typeof e=="string")return nt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nt(e,t)}}function nt(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function fn(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],n=!0,o=!1,i=void 0;try{for(var s=e[Symbol.iterator](),v;!(n=(v=s.next()).done)&&(a.push(v.value),!(t&&a.length===t));n=!0);}catch(x){o=!0,i=x}finally{try{!n&&s.return!=null&&s.return()}finally{if(o)throw i}}return a}}function vn(e){if(Array.isArray(e))return e}function hn(e,t){var a=t||{},n=a.defaultValue,o=a.value,i=a.onChange,s=a.postState,v=m.exports.useState(function(){return o!==void 0?o:n!==void 0?typeof n=="function"?n():n:typeof e=="function"?e():e}),x=cn(v,2),R=x[0],f=x[1],d=o!==void 0?o:R;s&&(d=s(d));function u(l){f(l),d!==l&&i&&i(l,d)}var c=m.exports.useRef(!0);return m.exports.useEffect(function(){if(c.current){c.current=!1;return}o===void 0&&f(o)},[o]),[d,u]}var Nn=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function bn(e){var t,a=e.prefixCls,n=e.expandIcon,o=n===void 0?_(It,{}):n,i=e.onExpand,s=e.expanded,v=e.record,x=o,R="".concat(a,"-row-expand-icon"),f=function(u){i(!s),u.stopPropagation()};return typeof o=="function"&&(x=o({expanded:s,onExpand:i,record:v})),_("span",{className:U(R,(t={},I(t,"".concat(a,"-row-expanded"),s),I(t,"".concat(a,"-row-collapsed"),!s),t)),onClick:f,children:x})}function pn(e){var t,a,n,o,i,s=e.prefixCls,v=m.exports.useContext(Ye.ConfigContext),x=v.getPrefixCls,R=x("pro-list",s),f="".concat(R,"-row"),d=e.title,u=e.subTitle,c=e.content,l=e.itemTitleRender;e.prefixCls;var P=e.actions;e.item,e.recordKey;var F=e.avatar,S=e.cardProps,k=e.description,Y=e.isEditable,B=e.checkbox,N=e.index,h=e.selected,T=e.loading,me=e.expand,fe=e.onExpand,oe=e.expandable,V=e.rowSupportExpand,ie=e.showActions,Z=e.showExtra,ve=e.type,le=e.style,he=e.className,X=he===void 0?f:he,w=e.record,z=e.onRow,g=e.onItem,K=e.itemHeaderRender,$=e.cardActionProps,J=e.extra,ee=Ve(e,Nn),q=oe||{},se=q.expandedRowRender,Se=q.expandIcon,we=q.expandRowByClick,Ee=q.indentSize,E=Ee===void 0?8:Ee,Q=q.expandedRowClassName,ue=hn(!!me,{value:me,onChange:fe}),M=Re(ue,2),p=M[0],b=M[1],y=U((t={},I(t,"".concat(f,"-selected"),!S&&h),I(t,"".concat(f,"-show-action-hover"),ie==="hover"),I(t,"".concat(f,"-type-").concat(ve),!!ve),I(t,"".concat(f,"-editable"),Y),I(t,"".concat(f,"-show-extra-hover"),Z==="hover"),t),f),te=U(I({},"".concat(X,"-extra"),Z==="hover")),ne=p||Object.values(oe||{}).length===0,Ne=se&&se(w,N,E,p),ae=m.exports.useMemo(function(){if(!(!P||$==="actions"))return[_("div",{onClick:function(C){return C.stopPropagation()},children:P},"action")]},[P,$]),ce=m.exports.useMemo(function(){if(!(!P||!$||$==="extra"))return[_("div",{onClick:function(C){return C.stopPropagation()},children:P},"action")]},[P,$]),xe=d||u?ye("div",{className:"".concat(y,"-header-title"),children:[d&&_("div",{className:"".concat(y,"-title"),children:d}),u&&_("div",{className:"".concat(y,"-subTitle"),children:u})]}):null,re=(a=l&&(l==null?void 0:l(w,N,xe)))!==null&&a!==void 0?a:xe,ge=re||F||u||k?_(Ke.Item.Meta,{avatar:F,title:re,description:k&&ne&&_("div",{className:"".concat(y,"-description"),children:k})}):null,Ie=U((n={},I(n,"".concat(y,"-item-has-checkbox"),B),I(n,"".concat(y,"-item-has-avatar"),F),I(n,y,y),n)),L=m.exports.useMemo(function(){return F||d?ye(wt,{children:[F&&_(Et,{size:22,src:F,className:x("list-item-meta-avatar")}),_("span",{className:x("list-item-meta-title"),children:d})]}):null},[F,x,d]),be=S?_(_e,D(D(D({bordered:!0,loading:T,hoverable:!0},S),{},{title:L,subTitle:u,extra:ae,actions:ce,bodyStyle:D({padding:24},S.bodyStyle)},g==null?void 0:g(w,N)),{},{children:_(We,{avatar:!0,title:!1,loading:T,active:!0,children:ye("div",{className:"".concat(y,"-header"),children:[l&&(l==null?void 0:l(w,N,xe)),c]})})})):_(Ke.Item,D(D(D(D({className:U(Ie,I({},X,X!==f))},ee),{},{actions:ae,extra:!!J&&_("div",{className:te,children:J})},z==null?void 0:z(w,N)),g==null?void 0:g(w,N)),{},{onClick:function(C){var O,j,Te,Me;z==null||(O=z(w,N))===null||O===void 0||(j=O.onClick)===null||j===void 0||j.call(O,C),g==null||(Te=g(w,N))===null||Te===void 0||(Me=Te.onClick)===null||Me===void 0||Me.call(Te,C),we&&b(!p)},children:ye(We,{avatar:!0,title:!1,loading:T,active:!0,children:[ye("div",{className:"".concat(y,"-header"),children:[ye("div",{className:"".concat(y,"-header-option"),children:[!!B&&_("div",{className:"".concat(y,"-checkbox"),children:B}),Object.values(oe||{}).length>0&&V&&bn({prefixCls:R,expandIcon:Se,onExpand:b,expanded:p,record:w})]}),(o=K&&(K==null?void 0:K(w,N,ge)))!==null&&o!==void 0?o:ge]}),ne&&(c||Ne)&&ye("div",{className:"".concat(y,"-content"),children:[c,se&&V&&_("div",{className:Q&&Q(w,N,E),children:Ne})]})]})}));return S?_("div",{className:U((i={},I(i,"".concat(y,"-card"),S),I(i,X,X!==f),i)),style:le,children:be}):be}var xn=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function gn(e){var t=e.dataSource,a=e.columns,n=e.rowKey,o=e.showActions,i=e.showExtra,s=e.prefixCls,v=e.actionRef,x=e.itemTitleRender,R=e.renderItem,f=e.itemCardProps,d=e.itemHeaderRender,u=e.expandable,c=e.rowSelection,l=e.pagination,P=e.onRow,F=e.onItem,S=e.rowClassName,k=Ve(e,xn),Y=m.exports.useContext(Ye.ConfigContext),B=Y.getPrefixCls,N=Pe.useMemo(function(){return typeof n=="function"?n:function(M,p){return M[n]||p}},[n]),h=Wt(t,"children",N),T=Re(h,1),me=T[0],fe=zt(t.length,D({responsive:!0},l),function(){}),oe=Re(fe,1),V=oe[0],ie=Pe.useMemo(function(){if(l===!1||!V.pageSize||t.length<V.total)return t;var M=V.current,p=M===void 0?1:M,b=V.pageSize,y=b===void 0?10:b,te=t.slice((p-1)*y,p*y);return te},[t,V,l]),Z=B("pro-list",s),ve=Lt(c,{getRowKey:N,getRecordByKey:me,prefixCls:Z,data:t,pageData:ie,expandType:"row",childrenColumnName:"children",locale:{}}),le=Re(ve,2),he=le[0],X=le[1],w=u||{},z=w.expandedRowKeys,g=w.defaultExpandedRowKeys,K=w.defaultExpandAllRows,$=K===void 0?!0:K,J=w.onExpand,ee=w.onExpandedRowsChange,q=w.rowExpandable,se=Pe.useState(function(){return g||($!==!1?t.map(N):[])}),Se=Re(se,2),we=Se[0],Ee=Se[1],E=Pe.useMemo(function(){return new Set(z||we||[])},[z,we]),Q=Pe.useCallback(function(M){var p=N(M,t.indexOf(M)),b,y=E.has(p);y?(E.delete(p),b=Fe(E)):b=[].concat(Fe(E),[p]),Ee(b),J&&J(!y,M),ee&&ee(b)},[N,E,t,J,ee]),ue=he([])[0];return _(Ke,D(D({},k),{},{className:U(B("pro-list-container",s),k.className),dataSource:ie,pagination:l&&V,renderItem:function(p,b){var y,te,ne,Ne={className:typeof S=="function"?S(p,b):S};a==null||a.forEach(function(L){var be=L.listKey,A=L.cardActionProps;if(!!un.has(be)){var C=L.dataIndex||be||L.key,O=Array.isArray(C)?ln(p,C):p[C];A==="actions"&&be==="actions"&&(Ne.cardActionProps=A);var j=L.render?L.render(O,p,b):O;j!=="-"&&(Ne[L.listKey]=j)}});var ae;ue&&ue.render&&(ae=ue.render(p,p,b)||void 0);var ce=((y=v.current)===null||y===void 0?void 0:y.isEditable(D(D({},p),{},{index:b})))||{},xe=ce.isEditable,re=ce.recordKey,ge=X.has(re||b),Ie=_(pn,D(D({cardProps:k.grid?D(D(D({},f),k.grid),{},{checked:ge,onChecked:Pe.isValidElement(ae)?(te=ae)===null||te===void 0||(ne=te.props)===null||ne===void 0?void 0:ne.onChange:void 0}):void 0},Ne),{},{recordKey:re,isEditable:xe||!1,expandable:u,expand:E.has(N(p,b)),onExpand:function(){Q(p)},index:b,record:p,item:p,showActions:o,showExtra:i,itemTitleRender:x,itemHeaderRender:d,rowSupportExpand:!q||q&&q(p),selected:X.has(N(p,b)),checkbox:ae,onRow:P,onItem:F}),re);return R?R(p,b,Ie):Ie}}))}var yn=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Cn(e){var t=e.metas,a=e.split,n=e.footer,o=e.rowKey,i=e.tooltip,s=e.className,v=e.options,x=v===void 0?!1:v,R=e.search,f=R===void 0?!1:R,d=e.expandable,u=e.showActions,c=e.showExtra,l=e.rowSelection,P=l===void 0?!1:l,F=e.pagination,S=F===void 0?!1:F,k=e.itemLayout,Y=e.renderItem,B=e.grid,N=e.itemCardProps,h=e.onRow,T=e.onItem,me=e.rowClassName,fe=e.locale,oe=e.itemHeaderRender,V=e.itemTitleRender,ie=Ve(e,yn),Z=m.exports.useRef();m.exports.useImperativeHandle(ie.actionRef,function(){return Z.current});var ve=m.exports.useContext(Ye.ConfigContext),le=ve.getPrefixCls,he=m.exports.useMemo(function(){var z=[];return Object.keys(t||{}).forEach(function(g){var K=t[g]||{},$=K.valueType;$||(g==="avatar"&&($="avatar"),g==="actions"&&($="option"),g==="description"&&($="textarea")),z.push(D(D({listKey:g,dataIndex:(K==null?void 0:K.dataIndex)||g},K),{},{valueType:$}))}),z},[t]),X=le("pro-list",e.prefixCls),w=U(X,I({},"".concat(X,"-no-split"),!a));return _(Yt,D(D({tooltip:i},ie),{},{actionRef:Z,pagination:S,type:"list",rowSelection:P,search:f,options:x,className:U(X,s,w),columns:he,rowKey:o,tableViewRender:function(g){var K=g.columns,$=g.size,J=g.pagination,ee=g.rowSelection,q=g.dataSource,se=g.loading;return _(gn,{grid:B,itemCardProps:N,itemTitleRender:V,prefixCls:e.prefixCls,columns:K,renderItem:Y,actionRef:Z,dataSource:q||[],size:$,footer:n,split:a,rowKey:o,expandable:d,rowSelection:P===!1?void 0:ee,showActions:u,showExtra:c,pagination:J,itemLayout:k,loading:se,itemHeaderRender:oe,onRow:h,onItem:T,rowClassName:me,locale:fe})}}))}const Rn={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},Sn={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},wn={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},En={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},In=(e,t="checkbox",a=!1)=>{const[n,o]=m.exports.useState([]),[i,s]=m.exports.useState([]);return{selectedRows:i,selectedRowKeys:n,rowSelection:{alwaysShowAlert:a,type:t,selectedRowKeys:n,onChange:(d,u)=>{s(u),o(d)}},onClick:d=>{const u=d[e];let c=[d],l=[u];if(t==="checkbox")if(l=[...n],c=Pt(i),l.includes(u)){const P=n.indexOf(u);l.splice(P,1),c.splice(P,1)}else c.push(d),l.push(u);s(c),o(l)},clearSelection:()=>{s([]),o([])},setSelectedRowKeys:o,checkRowSelection:async(d="\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61")=>(i==null?void 0:i.length)===0?($e.warning(d),Promise.reject(d)):Promise.resolve(i)}},ft="systemRole",vt=rt({key:`${ft}AtomRoleListActions`,default:void 0}),He=()=>ot(vt),Pn=()=>Ot(vt),qe=rt({key:`${ft}AtomRoleDetails`,default:{visible:!1,roleId:0,roleName:""}}),An=()=>At(qe),kn=()=>kt(qe),ht=()=>ot(qe);async function Dn(e,t){return De("/system/role/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Tn(e,t){return De("/system/role/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function _n(e,t){return De("/system/role/info",{method:"GET",params:{...e},...t||{}})}async function Fn(e,t){return De("/system/role/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function Kn(e,t){return De("/system/role/remove",{method:"POST",params:{...e},...t||{}})}var de="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/components/ButtonCreate.tsx";const $n=()=>{const e=Be(),t=m.exports.useRef(),a=He();return r(ze,{accessible:e.canAddSysRole,children:r(Vt,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:r(Ae,{type:"primary",icon:r(Dt,{},void 0,!1,{fileName:de,lineNumber:25,columnNumber:40},void 0),children:"\u65B0\u5EFA"},void 0,!1,{fileName:de,lineNumber:25,columnNumber:11},void 0),formRef:t,onFinish:async n=>{var o;return await Dn({...n,menuIds:[],menuCheckStrictly:!0}),a==null||a.reload(),(o=t.current)==null||o.resetFields(),$e.success("\u65B0\u5EFA\u6210\u529F"),!0},width:500,children:[r(Ue,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]},void 0,!1,{fileName:de,lineNumber:43,columnNumber:9},void 0),r(Ue,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"},void 0,!1,{fileName:de,lineNumber:45,columnNumber:9},void 0),r(Xt,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0},void 0,!1,{fileName:de,lineNumber:52,columnNumber:9},void 0),r(pt.Group,{name:"status",label:"\u72B6\u6001",valueEnum:Mt,initialValue:st.ENABLE},void 0,!1,{fileName:de,lineNumber:54,columnNumber:9},void 0),r(Ht,{name:"remark",label:"\u5907\u6CE8"},void 0,!1,{fileName:de,lineNumber:61,columnNumber:9},void 0)]},void 0,!0,{fileName:de,lineNumber:22,columnNumber:7},void 0)},void 0,!1,{fileName:de,lineNumber:21,columnNumber:5},void 0)};var ke="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/components/ButtonDelete.tsx";const Mn=()=>{const e=Be(),t=He(),a=An(),{roleId:n,roleName:o}=ht(),i=()=>qt.confirm({title:"\u5220\u9664\u786E\u8BA4",content:r(it,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",r(et.Text,{code:!0,children:o},void 0,!1,{fileName:ke,lineNumber:22,columnNumber:16},void 0),"\u8FDB\u884C",r(et.Text,{code:!0,children:"\u5220\u9664"},void 0,!1,{fileName:ke,lineNumber:22,columnNumber:68},void 0),"\u64CD\u4F5C\u5417\uFF1F"]},void 0,!0),onOk:async()=>{var s;await Kn({roleIds:n}),t==null||t.reload(),(s=t==null?void 0:t.clearSelected)==null||s.call(t),a(),$e.success("\u5220\u9664\u6210\u529F")}});return r(ze,{accessible:e.canRemoveSysRole,children:r(Ae,{danger:!0,ghost:!0,icon:r(Tt,{},void 0,!1,{fileName:ke,lineNumber:37,columnNumber:34},void 0),onClick:i,children:"\u5220\u9664"},void 0,!1,{fileName:ke,lineNumber:37,columnNumber:7},void 0)},void 0,!1,{fileName:ke,lineNumber:36,columnNumber:5},void 0)};var H="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/components/TreeMenu.tsx";const On={title:"label",key:"id",children:"children"},Nt=e=>{const t=[];return e.forEach(({id:a,children:n})=>{t.push(a),n&&t.push(...Nt(n))}),t},jn=({roleId:e,handleEdit:t})=>{var N;const[a,n]=m.exports.useState([]),[o,i]=m.exports.useState(!1),[s,v]=m.exports.useState([]),[x,R]=m.exports.useState([]),[f,d]=m.exports.useState(!1),[u,c]=m.exports.useState(!0),{data:l,refresh:P}=lt(async()=>{const{menus:h,checkedKeys:T}=await Zt({roleId:e});return{treeData:h,selectedMenuIds:T,selectedTreeData:en(h,T),allMenuIds:tn(h)}},{ready:e>0,refreshDeps:[e],onSuccess:h=>{i(!1),R(h.selectedTreeData)}}),{isLoading:F,mutate:S}=ut(async()=>{await t({menuIds:a}),P()}),k=Nt((N=l==null?void 0:l.treeData)!=null?N:[]),Y=(s==null?void 0:s.length)!==0&&(s==null?void 0:s.length)===(k==null?void 0:k.length),B=h=>{var T;if(h||u){n((T=l==null?void 0:l.allMenuIds)!=null?T:[]);return}n([])};return m.exports.useEffect(()=>{if((l==null?void 0:l.allMenuIds.length)===a.length){d(!0),c(!1);return}if(a.length===0){d(!1),c(!1);return}c(!0)},[l==null?void 0:l.allMenuIds,a]),r(it,{children:[r("header",{className:"flex justify-between mb-2",children:[r(Je,{children:[x.length>0&&r(Ae,{size:"small",icon:Y?r(_t,{},void 0,!1,{fileName:H,lineNumber:111,columnNumber:37},void 0):r(Ft,{},void 0,!1,{fileName:H,lineNumber:111,columnNumber:61},void 0),onClick:()=>v(Y?[]:k),children:Y?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"},void 0,!1,{fileName:H,lineNumber:109,columnNumber:13},void 0),o&&r(Kt,{indeterminate:u,onChange:h=>B(h.target.checked),checked:f,children:"\u5168\u9009/\u5168\u4E0D\u9009"},void 0,!1,{fileName:H,lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:H,lineNumber:107,columnNumber:9},void 0),r(ze,{accessible:!0,children:o?r(Je,{children:[r(Ae,{loading:F,onClick:()=>{var h;i(!1),R((h=l==null?void 0:l.selectedTreeData)!=null?h:[])},children:"\u53D6\u6D88\u7F16\u8F91"},void 0,!1,{fileName:H,lineNumber:132,columnNumber:15},void 0),r(Ae,{type:"primary",ghost:!0,loading:F,onClick:()=>S(),children:"\u4FDD\u5B58"},void 0,!1,{fileName:H,lineNumber:141,columnNumber:15},void 0)]},void 0,!0,{fileName:H,lineNumber:131,columnNumber:13},void 0):r(Ae,{type:"primary",ghost:!0,onClick:()=>{var h,T;i(!0),n((h=l==null?void 0:l.selectedMenuIds)!=null?h:[]),R((T=l==null?void 0:l.treeData)!=null?T:[])},children:"\u7F16\u8F91\u6743\u9650"},void 0,!1,{fileName:H,lineNumber:146,columnNumber:13},void 0)},void 0,!1,{fileName:H,lineNumber:129,columnNumber:9},void 0)]},void 0,!0,{fileName:H,lineNumber:106,columnNumber:7},void 0),r("div",{className:"h-[390px] overflow-y-auto",children:x.length>0?r(Gt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:o,checkStrictly:!0,fieldNames:On,checkedKeys:a,treeData:x,expandedKeys:s,onExpand:h=>v(h),onCheck:h=>{n(h.checked)}},void 0,!1,{fileName:H,lineNumber:163,columnNumber:11},void 0):r(ct,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"},void 0,!1,{fileName:H,lineNumber:178,columnNumber:11},void 0)},void 0,!1,{fileName:H,lineNumber:161,columnNumber:7},void 0)]},void 0,!0)};var Ce="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/components/DescDetails.tsx";const Bn=()=>{const[e,t]=m.exports.useState([]),[a]=$t.useForm(),n=Be(),o=He(),{roleId:i,visible:s}=ht(),{data:v,loading:x,refresh:R}=lt(()=>_n({roleId:i}),{ready:s&&i>0,refreshDeps:[i],onSuccess:()=>{t([])}}),{mutateAsync:f}=ut(async u=>{var c;await Tn({roleId:i,menuIds:(c=v==null?void 0:v.menuIds)!=null?c:[],roleKey:v.roleKey,roleName:v.roleName,roleSort:v.roleSort,status:v.status,...u})},{onSuccess:()=>{R(),o==null||o.reload(),$e.success("\u4FDD\u5B58\u6210\u529F")}}),d=n.canEditSysRole&&v?{form:a,editableKeys:e,onChange:(u,c)=>{t(u),u.length===1&&!Array.isArray(c)&&a.setFieldsValue({[u[0]]:c[u[0]]})},onSave:async(u,c)=>{await f({[u]:c[u]})}}:void 0;return s?r(at,{spinning:x,children:[r(tt,{column:2,columns:[Sn,Ut],dataSource:v},void 0,!1,{fileName:Ce,lineNumber:83,columnNumber:7},void 0),r(Qe,{},void 0,!1,{fileName:Ce,lineNumber:85,columnNumber:7},void 0),r(tt,{column:2,columns:[Jt,En,Rn,Qt,wn],dataSource:v,editable:d},void 0,!1,{fileName:Ce,lineNumber:87,columnNumber:7},void 0),r(Qe,{},void 0,!1,{fileName:Ce,lineNumber:94,columnNumber:7},void 0),r(jn,{roleId:i,handleEdit:u=>f(u)},void 0,!1,{fileName:Ce,lineNumber:96,columnNumber:7},void 0)]},void 0,!0,{fileName:Ce,lineNumber:82,columnNumber:5},void 0):r(ct,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"},void 0,!1,{fileName:Ce,lineNumber:79,columnNumber:24},void 0)};var je="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/components/List.tsx";const zn=()=>{const e=Pn(),t=kn(),{onClick:a,rowSelection:n,selectedRows:o}=In("roleId","radio");return m.exports.useEffect(()=>{o.length===1&&t({roleId:o[0].roleId,roleName:o[0].roleName,visible:!0})},[o]),r(Cn,{ghost:!0,rowKey:"roleId",actionRef:e,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:i=>i===st.ENABLE?r(Ze,{color:"success",children:"\u542F\u7528\u4E2D"},void 0,!1,{fileName:je,lineNumber:41,columnNumber:15},void 0):r(Ze,{color:"error",children:"\u5DF2\u7981\u7528"},void 0,!1,{fileName:je,lineNumber:43,columnNumber:15},void 0)}},tableAlertRender:!1,onRow:i=>({onClick:()=>a(i)}),rowSelection:n,pagination:{pageSize:10},request:(...i)=>Fn(jt(...i))},void 0,!1,{fileName:je,lineNumber:29,columnNumber:5},void 0)};var pe="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/index.tsx";const ua=()=>r(bt,{children:r(_e,{ghost:!0,gutter:24,children:[r(_e,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:r($n,{},void 0,!1,{fileName:pe,lineNumber:13,columnNumber:54},void 0),children:r(zn,{},void 0,!1,{fileName:pe,lineNumber:14,columnNumber:11},void 0)},void 0,!1,{fileName:pe,lineNumber:13,columnNumber:9},void 0),r(_e,{title:"\u89D2\u8272\u8BE6\u60C5",extra:r(Mn,{},void 0,!1,{fileName:pe,lineNumber:17,columnNumber:38},void 0),children:r(Bn,{},void 0,!1,{fileName:pe,lineNumber:18,columnNumber:11},void 0)},void 0,!1,{fileName:pe,lineNumber:17,columnNumber:9},void 0)]},void 0,!0,{fileName:pe,lineNumber:12,columnNumber:7},void 0)},void 0,!1,{fileName:pe,lineNumber:11,columnNumber:5},void 0);export{ua as default};
