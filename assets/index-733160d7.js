import{aW as j,aX as f,cy as I,aj as w,r as b,b8 as R,d as a,af as y,j as x,bZ as V,cz as O,aG as A,cA as B,cB as L,az as C,c0 as X,bS as Y,cC as N,a_ as q,cD as _,aY as G,aZ as z,cE as W,cF as Z,a$ as $,b0 as k,cG as H,ck as K,k as Q,au as U}from"./index-4bcc3c59.js";import{a as J,b as ee}from"./index-7fa97739.js";import{a as te,u as ae}from"./utils-cfd88001.js";import{P as T}from"./index-32640d42.js";import{P as se}from"./index-0ef8c337.js";import{P as S}from"./index-64dc4e71.js";import{P as oe}from"./index-b5172dc2.js";import{P as ce}from"./index-e4d44f30.js";import{u as E}from"./useMutation.esm-92311925.js";import{u as ie}from"./useRequest-5864723d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",j(void 0));D.debugLabel="atomMainTableActions";const v=()=>f(D),re=()=>J(D),M=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",j({dictType:"",dictName:""}));M.debugLabel="atomCurDictType";const ne=()=>f(M),de=()=>I(M),g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",te({actionType:"add",open:!1}));g.debugLabel="atomAddOrEditModal";const le=()=>f(g),ue=()=>ae(g),he=()=>{const e=w(g);return()=>{e({actionType:"add",open:!0})}},me=()=>{const e=w(g);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pe=()=>{var r;const e=b.exports.useRef(),t=v(),{open:n,actionType:o,record:c}=le(),u=ue(),h=()=>{var s;o==="edit"&&((s=e.current)==null||s.resetFields()),u()},{dictType:m,dictName:i}=ne(),{data:l}=R("sys_normal_disable");return b.exports.useEffect(()=>{if(!n)return;const s=setTimeout(()=>{var d,p;o==="add"?(d=e.current)==null||d.setFieldsValue({dictType:m,dictName:i}):(p=e.current)==null||p.setFieldsValue({...c,dictName:i}),clearTimeout(s)},0)},[n]),a(y,{accessible:!0,children:x(V,{formRef:e,width:500,title:"新增字典数据",open:n,modalProps:{onCancel:h,okText:"提交"},onFinish:async s=>{var d;o==="add"?(await O(s),A.success("新增成功")):(await B({...s,dictCode:c.dictCode}),A.success("编辑成功")),t==null||t.reload(),u(),(d=e.current)==null||d.resetFields()},children:[a(T,{name:"dictName",label:"字典名称",readonly:!0}),a(T,{name:"dictType",label:"字典类型",hidden:!0}),a(T,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(T,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(T,{name:"cssClass",label:"样式属性"}),a(se,{name:"dictSort",label:"显示排序",initialValue:0}),a(S,{name:"listClass",label:"回显样式",valueEnum:L,initialValue:"default"}),a(oe.Group,{name:"status",label:"状态",valueEnum:(r=l==null?void 0:l.mapData)!=null?r:{},initialValue:l==null?void 0:l.defaultValue}),a(ce,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const e=he();return a(y,{accessible:!0,children:a(C,{icon:a(X,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({record:e})=>{const t=me();return a(y,{accessible:!0,children:a(C,{type:"link",icon:a(Y,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=({searchParams:e})=>{const{isLoading:t,mutate:n}=E(()=>N(e),{onSuccess:()=>{A.success("导出成功")}});return a(y,{accessible:!0,children:a(C,{ghost:!0,type:"primary",icon:a(q,{}),loading:t,onClick:()=>n(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=({dictCode:e,disabled:t,isBatch:n})=>{const o=n?"批量删除":"删除",c=v(),{mutateAsync:u,isLoading:h}=E(async i=>{await _({dictCodes:i})},{onSuccess:()=>{var i;c==null||c.reload(),(i=c==null?void 0:c.clearSelected)==null||i.call(c),A.success("删除成功")}});return a(y,{accessible:!0,children:a(C,{type:"link",danger:!0,disabled:t,icon:a(G,{}),onClick:()=>{z.confirm({title:"删除字典数据",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>u(e),okButtonProps:{loading:h}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=()=>{var t;const{data:e}=R("sys_normal_disable");return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(n,o)=>x(Q,{children:[a(ye,{record:o}),a(F,{dictCode:o.dictCode})]})}]},Ae=({selectedRows:e})=>a(F,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(",")}),Ce=()=>{const e=W(),[t,n]=b.exports.useState({}),o=re(),c=be(),u=b.exports.useRef(),[h,m]=de(),{data:i,run:l}=ie(async()=>(await Z()).reduce((s,d)=>(s[d.dictType]=d.dictName,s),{}),{manual:!0,onSuccess:r=>{const s=e.dictType;m({dictType:s,dictName:r[s]});const d=setTimeout(()=>{var p,P;(p=u.current)==null||p.setFieldsValue({dictType:s}),(P=o==null?void 0:o.current)==null||P.reload(),clearTimeout(d)},0)}});return ee("/system/dict/:dictType",()=>{l()}),a($,{rowKey:"dictCode",actionRef:o,columns:c,params:h,request:async(...r)=>{const s=k(...r);return n(s),await H(k(...r))},tableAlertOptionRender:Ae,manualRequest:!0,toolbar:{actions:[a(ge,{searchParams:t},"ButtonExport"),a(Te,{},"ButtonAdd")]},headerTitle:a(K,{formRef:u,children:a(S,{name:"dictType",valueEnum:i!=null?i:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:r=>{m({dictType:r,dictName:i[r]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=()=>x(U,{children:[a(Ce,{}),a(pe,{})]});export{Ee as default};
