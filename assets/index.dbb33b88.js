import{h as A,l as C,j as a,af as c,ag as r,ah as m,ai as F,Y as h,aj as E,r as x,I,ak as T,al as b}from"./index.78e6d167.js";import{a as l}from"./index.3d32bccd.js";import{a as k}from"./index.de54e2c9.js";import{e as S,f as v,g as j,h as L}from"./SysLoginService.33e65324.js";import{u as d}from"./useMutation.esm.dfcb9615.js";import"./useQuery.esm.82a3f304.js";import"./utils.esm.55fd1c23.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",A(void 0));g.debugLabel="atomMainTableActions";const p=()=>C(g),M=()=>k(g);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const P=()=>{const{canRemoveSysLogininfor:e}=l(),t=p(),{isLoading:u,mutate:n}=d(S,{onSuccess:()=>{t==null||t.reload(),h.success("\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55\u6210\u529F")}});return a(c,{accessible:e,children:a(r,{danger:!0,icon:a(m,{}),onClick:()=>F.confirm({title:"\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55",content:"\u786E\u8BA4\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55\u5417\uFF1F",okButtonProps:{loading:u},onOk:n}),children:"\u6E05\u7A7A"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({searchParams:e})=>{const{canExportSysLogininfor:t}=l(),{isLoading:u,mutate:n}=d(()=>v(e),{onSuccess:()=>{h.success("\u5BFC\u51FA\u6210\u529F")}});return a(c,{accessible:t,children:a(r,{ghost:!0,type:"primary",icon:a(E,{}),loading:u,onClick:()=>n(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const B=({infoId:e,disabled:t,isBatch:u})=>{const n=u?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysLogininfor:s}=l(),o=p(),{mutateAsync:y,isLoading:f}=d(async i=>{await j({infoIds:i})},{onSuccess:()=>{var i;o==null||o.reload(),(i=o==null?void 0:o.clearSelected)==null||i.call(o),h.success("\u5220\u9664\u6210\u529F")}});return a(c,{accessible:s,children:a(r,{type:"link",danger:!0,disabled:t,icon:a(m,{}),onClick:()=>{F.confirm({title:"\u5220\u9664\u8BBF\u95EE\u8BB0\u5F55",content:`\u786E\u5B9A\u5220\u9664\u8BBF\u95EE\u7F16\u53F7\u4E3A ${e} \u7684\u8BBF\u95EE\u8BB0\u5F55\u5417\uFF1F`,onOk:async()=>y(e),okButtonProps:{loading:f}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=[{title:"\u8BBF\u95EE\u7F16\u53F7",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"\u7528\u6237\u540D\u79F0",dataIndex:"userName",key:"userName",valueType:"text"},{title:"\u767B\u5F55\u5730\u5740",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"\u767B\u5F55\u5730\u70B9",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u767B\u5F55\u65E5\u671F",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(e,t)=>a(B,{infoId:t.infoId})}],D=({selectedRows:e})=>a(B,{isBatch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),$=()=>{const e=M(),[t,u]=x.exports.useState({});return a(I,{children:a(T,{rowKey:"infoId",actionRef:e,columns:R,request:async(...n)=>{const s=b(...n);return u(s),await L(s)},toolbar:{actions:[a(P,{},"ButtonCleanUp"),a(w,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:D})})};export{$ as default};
