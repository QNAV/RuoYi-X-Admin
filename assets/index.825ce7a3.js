import{u as T,a as j}from"./index.0fdcceee.js";import{j as o,T as v,L as k,u as d,S as E,i as L,a as y,r as p,b as m,k as M,c as K,d as C,N as b,e as x,P as w,f as R}from"./index.b3a8c93a.js";import{u as I,a as B}from"./index.0b65fc71.js";import"./useQuery.esm.af4dbc8b.js";import"./utils.esm.fa621e75.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const N=()=>{const e=T();return o(v,{title:"\u9000\u51FA\u767B\u5F55",children:o(k,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const O=()=>{const e=d();return o(v,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:o(E,{onClick:()=>e("/settings")})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=(e,t)=>e!=null&&e.path?L(e.path)?o("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:t}):o(y,{to:e.path,children:t}):t;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const H=()=>{const[e,t]=p.exports.useState(""),{pathname:h}=m(),a=d(),[u,l]=I(),g=n=>{l(c=>{const s={...c};return delete s[n],s})},i=p.exports.useMemo(()=>Object.entries(u).map(([n,c])=>{var s,r;return{label:(r=(s=M)==null?void 0:s[n])!=null?r:n,key:c.pathname}}),[u]);return p.exports.useEffect(()=>{t(h)},[h]),o(K,{hideAdd:!0,type:"editable-card",items:i,activeKey:e,onChange:a,onEdit:n=>{if(n===h){const c=i.map(r=>r.key),s=c.findIndex(r=>r===e);s===0&&c.length===1?a("/"):a(c[s>0?s-1:s+1])}g(n)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const q=()=>{var c,s,r,A,f;const{pathname:e}=m(),t=d(),h=j(e),{data:a,isSuccess:u,isLoading:l,isError:g}=B(),i=a==null?void 0:a.accessObject,n=(c=C)!=null&&c[e]?!!(i!=null&&i[C[e]]):!0;return g?o(b,{to:"/500",replace:!0}):u&&!n?o(b,{to:"/403",replace:!0}):x(w,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>t("/"),menu:{loading:l},loading:l,menuDataRender:()=>R(a==null?void 0:a.userRoutes),menuItemRender:F,token:{pageContainer:{marginBlockPageContainerContent:0,marginInlinePageContainerContent:0}},avatarProps:{size:"small",src:(r=(s=a==null?void 0:a.userInfo)==null?void 0:s.user)==null?void 0:r.avatar,title:(f=(A=a==null?void 0:a.userInfo)==null?void 0:A.user)==null?void 0:f.nickName},actionsRender:()=>[o(O,{},"IconSetting"),o(N,{},"IconLogout")],children:[o(H,{}),h]})};export{q as default};
