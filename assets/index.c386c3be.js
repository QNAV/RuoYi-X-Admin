import{u as D,M as F}from"./useMutation.esm.4eab8cdd.js";import{c as i,d as h}from"./SysMenuService.aeacedfe.js";import{R as d,b4 as l,i as R,g as p,h as C,E as m,b6 as _,j as x,F as w,a as O,b9 as E,aB as Q}from"./index.ce63faa1.js";import{p as M,s as y}from"./tree.28d7a851.js";import{u as I}from"./useQuery.esm.268677e9.js";import"./utils.esm.bbb5c808.js";const r="systemMenu",g=e=>{const n=t=>t.filter(s=>s.menuType!==F.F).map(({menuId:s,menuName:u,children:a})=>({menuId:s,menuName:u,children:a?n(a):[]}));return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:e?n(e):[]}]},o=d({key:`${r}SelectedMenuData`,default:{hasSelected:!1,selectedMenuId:0,selectedMenuName:"\u6839\u76EE\u5F55"}}),L=()=>l(o),B=()=>R(o),N=()=>p(o),c=d({key:`${r}CreateModal`,default:!1}),K=()=>l(c),V=()=>{const e=C(c);return()=>e(!0)},$=()=>p(c),S=[r,"list"],P=()=>{const e=m();return()=>e.invalidateQueries(S)},H=(e={},n)=>I(S,async()=>{const t=await i(e),s=M(t,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:y(s),map:t.reduce((u,a)=>u.set(a.menuId,a),new Map),parentIds:Array.from(t.reduce((u,a)=>u.add(a.parentId),new Set))}},{onSuccess:t=>{n(t.parentIds)}}),f=[r,"options"],T=()=>{const e=m();return()=>e.invalidateQueries(f)},z=()=>I(f,async()=>{const e=await i({}),n=M(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:g(y(n)),map:e.reduce((t,s)=>t.set(s.menuId,s),new Map)}}),G=()=>{const e=P(),n=T(),t=L();return D(async({menuId:s,menuName:u})=>{_.confirm({title:"\u5220\u9664\u83DC\u5355",content:x(w,{children:["\u786E\u5B9A\u5220\u9664\u83DC\u5355",O(E.Text,{code:!0,children:u}),"\u5417\uFF1F"]}),onOk:async()=>{await h({menuId:s}),t(),await Promise.all([e(),n()]),Q.success("\u5220\u9664\u6210\u529F")}})})};export{G as useDeleteMenu,K as useHideCreateModal,H as useQueryMenuList,z as useQueryMenuOptions,P as useReFetchMenuList,T as useReFetchMenuOptions,L as useResetSelectedMenuData,V as useShowCreateModal,B as useStateSelectedMenuData,$ as useValueCreateModal,N as useValueSelectedMenuData};
