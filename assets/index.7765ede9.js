import{p as k,s as T,g as E,r as y,j as a,ah as l,e as p,aE as I,$ as d,a1 as A,aF as R,aG as b,aH as w,ai as h,aI as P,aJ as v,al as O,aK as D,ak as B,aj as N,F as x,am as V,an as q,ao as K,K as Y}from"./index.420d2bc2.js";import{e as g}from"./index.d0bd967d.js";import{b as L}from"./index.f32b5ff9.js";import{a as X,u as W}from"./utils.ecaa00bc.js";import{S as G,a as H,b as J,c as U,d as $,e as z}from"./SysConfigService.77336271.js";import{P as Q}from"./index.e5b483a5.js";import{u as M}from"./useMutation.esm.c2afcb52.js";import"./useQuery.esm.86c767cc.js";import"./utils.esm.283448c2.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",k(void 0));F.debugLabel="atomMainTableActions";const S=()=>T(F),Z=()=>L(F),m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",X({open:!1,actionType:"add"}));m.debugLabel="atomAddOrEditModal";const _=()=>T(m),ee=()=>{const e=E(m);return()=>{e({open:!0,actionType:"add"})}},te=()=>{const e=E(m);return t=>{e({open:!0,actionType:"edit",record:t})}},ae=()=>W(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{const e=y.exports.useRef(),{canAddSysConfig:t,canEditSysConfig:n}=g(),s=S(),{open:o,actionType:r,record:u}=_(),f=ae(),C=()=>{var i;r==="edit"&&((i=e.current)==null||i.resetFields()),f()};return y.exports.useEffect(()=>{if(o&&r==="edit"){const i=setTimeout(()=>{var c;(c=e.current)==null||c.setFieldsValue(u),clearTimeout(i)},0)}},[o]),a(l,{accessible:t||n,children:p(I,{formRef:e,width:500,title:r==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:o,modalProps:{onCancel:C,okText:"\u63D0\u4EA4"},onFinish:async i=>{var c;r==="add"?(await G(i),d.success("\u65B0\u589E\u6210\u529F")):(await H({...i,configId:u.configId}),d.success("\u7F16\u8F91\u6210\u529F")),s==null||s.reload(),f(),(c=e.current)==null||c.resetFields()},children:[a(A,{name:"configName",label:"\u53C2\u6570\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"configKey",label:"\u53C2\u6570\u952E\u540D",required:!0,rules:[{required:!0}]}),a(A,{name:"configValue",label:"\u53C2\u6570\u952E\u503C",required:!0,rules:[{required:!0}]}),a(R.Group,{name:"configType",label:"\u7CFB\u7EDF\u5185\u7F6E",valueEnum:b,initialValue:w.YES}),a(Q,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=()=>{const{canAddSysConfig:e}=g(),t=ee();return a(l,{accessible:e,children:a(h,{icon:a(P,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({record:e})=>{const t=te();return a(h,{type:"link",icon:a(v,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=({searchParams:e})=>{const{canExportSysConfig:t}=g(),{isLoading:n,mutate:s}=M(()=>J(e),{onSuccess:()=>{d.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:t,children:a(h,{ghost:!0,type:"primary",icon:a(O,{}),loading:n,onClick:()=>s(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const{canRemoveSysConfig:e}=g();return a(l,{accessible:e,children:a(h,{danger:!0,icon:a(D,{}),onClick:()=>{B.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u53C2\u6570\u8BBE\u7F6E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await U(),d.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const j=({configId:e,configName:t,disabled:n,isBatch:s})=>{const o=s?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:r}=g(),u=S(),{mutateAsync:f,isLoading:C}=M(async c=>{await $({configIds:c})},{onSuccess:()=>{var c;u==null||u.reload(),(c=u==null?void 0:u.clearSelected)==null||c.call(u),d.success("\u5220\u9664\u6210\u529F")}});return a(l,{accessible:r,children:a(h,{type:"link",danger:!0,disabled:n,icon:a(N,{}),onClick:()=>{B.confirm({title:"\u5220\u9664\u53C2\u6570",content:p(x,{children:["\u786E\u5B9A\u5220\u9664\u53C2\u6570",a(V.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>f(e),okButtonProps:{loading:C}})},children:o})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne="configId",re=({selectedRows:e})=>a(j,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(","),configName:e.map(t=>t.configName).join(",")}),de=()=>{const e=Z(),[t,n]=y.exports.useState({});return a(q,{rowKey:ne,actionRef:e,columns:[{title:"\u53C2\u6570\u4E3B\u952E",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"configName",key:"configName",valueType:"text"},{title:"\u53C2\u6570\u952E\u540D",dataIndex:"configKey",key:"configKey",valueType:"text"},{title:"\u53C2\u6570\u952E\u503C",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},{title:"\u7CFB\u7EDF\u5185\u7F6E",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:b},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",fixed:"right",render:(s,o)=>p(x,{children:[a(se,{record:o}),a(j,{configId:o.configId,configName:o.configName})]})}],tableAlertOptionRender:re,rowSelection:{},request:async(...s)=>{const o=K(...s);return n(o),await z(o)},toolbar:{actions:[a(ie,{},"ButtonRefresh"),a(ce,{searchParams:t},"ButtonExport"),a(ue,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Fe=()=>p(Y,{children:[a(de,{}),a(oe,{})]});export{Fe as default};
