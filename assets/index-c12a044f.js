import{aV as I,aW as C,ai as j,r as M,b7 as h,d as a,af as g,j as A,bY as E,cX as k,aF as p,cY as w,cZ as v,c_ as R,ay as T,b$ as O,bR as B,c$ as F,aX as _,aY as V,a_ as Y,d0 as D,a$ as X,k as q,at as L}from"./index-7ee0543a.js";import{a as $}from"./index-1e1b992f.js";import{a as W,u as G}from"./utils-a9f22c3b.js";import{P as H}from"./index-d9a8df08.js";import{P as K}from"./index-17fc636b.js";import{P as Q}from"./index-956278c4.js";import{u as Z}from"./useMutation.esm-0f0e46ee.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",I(void 0));y.debugLabel="atomMainTableActions";const P=()=>C(y),z=()=>$(y),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:"add"}));d.debugLabel="atomAddOrEditModal";const J=()=>C(d),U=()=>{const e=j(d);return()=>{e({open:!0,actionType:"add"})}},N=()=>{const e=j(d);return t=>{e({open:!0,actionType:"edit",record:t})}},S=()=>G(d);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{var b,f;const e=M.exports.useRef(),{data:t}=h("sys_notice_type"),{data:o}=h("sys_notice_status"),i=P(),{open:s,actionType:c,record:u}=J(),m=S(),n=()=>{var r;c==="edit"&&((r=e.current)==null||r.resetFields()),m()};return M.exports.useEffect(()=>{if(s&&c==="edit"){const r=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(u),clearTimeout(r)},0)}},[s]),a(g,{accessible:!0,children:A(E,{formRef:e,width:800,title:c==="add"?"新增公告":"编辑公告",open:s,modalProps:{onCancel:n,okText:"提交"},grid:!0,onFinish:async r=>{var l;return c==="add"?(await k(r),p.success("新增成功")):(await w({...r,noticeId:u.noticeId}),p.success("编辑成功")),i==null||i.reload(),m(),(l=e.current)==null||l.resetFields(),!0},children:[a(H,{name:"noticeTitle",label:"公告标题",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(K,{name:"noticeType",label:"公告类型",required:!0,rules:[{required:!0}],valueEnum:(b=t==null?void 0:t.mapData)!=null?b:{},colProps:{span:12}}),a(Q.Group,{name:"status",label:"状态",valueEnum:(f=o==null?void 0:o.mapData)!=null?f:{},initialValue:o==null?void 0:o.defaultValue}),a(v,{name:"noticeContent",label:"内容",children:a(R,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=U();return a(g,{accessible:!0,children:a(T,{icon:a(O,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=N();return a(T,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"编辑"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const x=({noticeId:e,disabled:t,isBatch:o})=>{const i=o?"批量删除":"删除",s=P(),{mutateAsync:c,isLoading:u}=Z(async n=>{await F({noticeIds:n})},{onSuccess:()=>{var n;s==null||s.reload(),(n=s==null?void 0:s.clearSelected)==null||n.call(s),p.success("删除成功")}});return a(g,{accessible:!0,children:a(T,{type:"link",danger:!0,disabled:t,icon:a(_,{}),onClick:()=>{V.confirm({title:"删除公告通知",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>c(e),okButtonProps:{loading:u}})},children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var o,i;const{data:e}=h("sys_notice_type"),{data:t}=h("sys_notice_status");return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:(o=e==null?void 0:e.mapData)!=null?o:{}},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(i=t==null?void 0:t.mapData)!=null?i:{}},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(s,c)=>A(q,{children:[a(ae,{record:c}),a(x,{noticeId:c.noticeId})]})}]},se=({selectedRows:e})=>a(x,{isBatch:!0,disabled:e.length===0,noticeId:e.map(t=>t.noticeId).join(",")}),ce=()=>{const e=z(),t=oe();return a(Y,{rowKey:"noticeId",actionRef:e,columns:t,request:(...o)=>D(X(...o)),tableAlertOptionRender:se,toolbar:{actions:[a(te,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me=()=>A(L,{children:[a(ce,{}),a(ee,{})]});export{me as default};
