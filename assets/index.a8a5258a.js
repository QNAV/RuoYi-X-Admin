import{u as F,M as D}from"./useMutation.esm.76d24b2c.js";import{c as i,d as h}from"./SysMenuService.bdc84bb4.js";import{R as d,b5 as l,n as C,g as m,h as R,G as p,b7 as _,j as x,F as O,a as w,ba as Q,aC as g}from"./index.0ca811aa.js";import{p as M,s as y}from"./tree.10029c20.js";import{u as I}from"./useQuery.esm.b5e7d152.js";import"./utils.esm.9c17378e.js";const a="systemMenu",E=e=>{const n=u=>u.filter(t=>t.menuType!==D.F).map(({menuId:t,menuName:s,children:c})=>({menuId:t,menuName:s,children:c?n(c):[]}));return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:e?n(e):[]}]},r=d({key:`${a}SelectedMenuData`,default:{hasSelected:!1,selectedMenuId:0,selectedMenuName:"\u6839\u76EE\u5F55"}}),L=()=>l(r),N=()=>C(r),V=()=>m(r),o=d({key:`${a}VisibleCreateModal`,default:!1}),B=()=>l(o),K=()=>{const e=R(o);return()=>e(!0)},$=()=>m(o),S=[a,"list"],P=()=>{const e=p();return()=>e.invalidateQueries(S)},G=(e={})=>I(S,async()=>{const n=await i(e),u=M(n,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:y(u),map:n.reduce((t,s)=>t.set(s.menuId,s),new Map),parentIds:Array.from(n.reduce((t,s)=>t.add(s.parentId),new Set))}}),f=[a,"options"],T=()=>{const e=p();return()=>e.invalidateQueries(f)},H=()=>I(f,async()=>{const e=await i({}),n=M(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:E(y(n)),map:e.reduce((u,t)=>({...u,[t.menuId]:t}),{})}}),z=()=>{const e=P(),n=T(),u=L();return F(async({menuId:t,menuName:s})=>{_.confirm({title:"\u5220\u9664\u83DC\u5355",content:x(O,{children:["\u786E\u5B9A\u5220\u9664\u83DC\u5355",w(Q.Text,{code:!0,children:s}),"\u5417\uFF1F"]}),onOk:async()=>{await h({menuId:t}),await Promise.all([e(),n()]),u(),g.success("\u5220\u9664\u6210\u529F")}})})};export{z as useDeleteMenu,B as useHideCreateModal,G as useQueryMenuList,H as useQueryMenuOptions,P as useReFetchMenuList,T as useReFetchMenuOptions,L as useResetSelectedMenuData,K as useShowCreateModal,N as useStateSelectedMenuData,$ as useValueCreateModal,V as useValueSelectedMenuData};
