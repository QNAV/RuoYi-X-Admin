import{u as x,a as y,b as I}from"./index.d34d4ef2.js";import{u as C,a as M,r as b,s as T,m as A,j as c,T as S,b as k,L,S as R,i as B,c as E,N as v,d as j,P as O,e as K,f as w,g as F,F as H}from"./index.40f40a7a.js";import{u as N}from"./index.1510b1eb.js";import"./useQuery.esm.cfde13e1.js";import"./utils.esm.55b514ba.js";import"./SysLoginService.f7aaea4a.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $=({keepAliveElements:e})=>{const{pathname:t,search:r}=C(),o=M(),l=x(),[n,h]=b.exports.useState(""),[i,u]=b.exports.useState([{key:"/",label:"\u9996\u9875",pathname:"/",search:r,closable:!1}]),d=a=>{const s=i.findIndex(({key:p})=>p===a),{pathname:f,search:g}=i[s<i.length-1?s+1:s-1];o(`${f}${g}`),u(p=>p.filter(({key:m})=>m!==a)),e[a]!==void 0&&delete e[a]};return b.exports.useEffect(()=>{l(d);const a=Object.keys(T).find(s=>A(s,t));if(a===void 0){h("");return}u((s=[])=>{const{name:f,hideInTab:g,closableTab:p}=T[a];return s.find(m=>m.key===a)||g?s:[...s,{key:a,label:f,pathname:t,search:r,closable:p}]}),h(a)},[t]),c(S,{hideAdd:!0,type:"editable-card",items:i,activeKey:n,onChange:a=>{const{pathname:s,search:f}=i.find(g=>g.key===a);o(`${s}${f}`)},onEdit:a=>{d(a)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const G=()=>{const e=N();return c(k,{title:"\u9000\u51FA\u767B\u5F55",children:c(L,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const U=()=>{const e=M();return c(k,{title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:c(R,{onClick:()=>e("/settings")})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const z=(e,t)=>e!=null&&e.path?B(e.path)?c("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",children:t}):c(E,{to:e.path,children:t}):t;globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=()=>{const{pathname:e}=C(),t=w(),r=b.exports.useRef({}),o=Object.keys(T).find(n=>A(n,e)),l=o?T[o].isKeepAlive:!1;return l&&(r.current[o]=t),F(H,{children:[c($,{keepAliveElements:r.current}),Object.entries(r.current).map(([n,h])=>c("div",{hidden:!A(n,e),children:h},n)),!l&&t]})},J=()=>{var u,d,a,s;const{pathname:e}=C(),t=M(),r=D(),{data:o,isSuccess:l,isLoading:n,isError:h}=y(),i=I();return h?c(v,{to:"/500",replace:!0}):l&&(j[e]===void 0?!1:!i[j[e]])?c(v,{to:"/403",replace:!0}):c(O,{title:"RuoYi X Admin",location:{pathname:e},onMenuHeaderClick:()=>t("/"),menu:{loading:n},loading:n,menuDataRender:()=>K(o==null?void 0:o.userRoutes),menuItemRender:z,token:{pageContainer:{paddingBlockPageContainerContent:0,paddingInlinePageContainerContent:0},header:{colorBgHeader:"#292f33",colorHeaderTitle:"#fff",colorTextMenu:"#dfdfdf",colorTextMenuSecondary:"#dfdfdf",colorTextMenuSelected:"#fff",colorBgMenuItemSelected:"#22272b",colorTextRightActionsItem:"#dfdfdf"},sider:{colorMenuBackground:"#fff",colorMenuItemDivider:"#dfdfdf",colorTextMenu:"#595959",colorTextMenuSelected:"#1677ff",colorBgMenuItemSelected:"rgba(230,243,254,1)"}},avatarProps:{size:"small",src:(d=(u=o==null?void 0:o.userInfo)==null?void 0:u.user)==null?void 0:d.avatar,title:(s=(a=o==null?void 0:o.userInfo)==null?void 0:a.user)==null?void 0:s.nickName},actionsRender:()=>[c(U,{},"IconSetting"),c(G,{},"IconLogout")],children:r})};export{J as default};
