import{j as s,k as E,d as T,m as S,n as v,q as I}from"./antdProComponents-3b0f8b6c.js";import{e as R,f as O,h as f,F as M,V as C,aL as B,aM as F,a8 as p,aN as D,k as N,aO as V,d as L,m as q,aP as X,B as Y}from"./index-20666813.js";import{a as H,u as _}from"./utils-85b7c61c.js";import{r as m,bf as A,ay as $,B as g,au as G,aF as Q,b5 as W,at as z}from"./antd-1ebea658.js";import{u as b}from"./useMutation-0b0999c8.js";import"./iconPark-46022f30.js";import"./wangEditor-5d138508.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",R(void 0));y.debugLabel="atomMainTableActions";const J=()=>O(y),k=()=>f(y),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",H({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const K=()=>{const e=M(h);return()=>e({open:!0,actionType:"add"})},U=()=>{const e=M(h);return t=>e({open:!0,actionType:"edit",record:t})},Z=()=>_(h),ee=()=>f(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=m.useRef(),{message:t}=A.useApp(),{open:o,actionType:r,record:a}=ee(),l=Z(),i=()=>{var c;r==="edit"&&((c=e.current)==null||c.resetFields()),l()},d=k(),{valueEnumSysNormalDisable:x,defaultValueSysNormalDisable:j}=C(),{mutate:n,isLoading:P}=b(async()=>{var u;const c=await((u=e.current)==null?void 0:u.validateFields());if(c){if(r==="add"){await B(c);return}await F({...c,postId:a.postId})}},{onSuccess:()=>{d==null||d.reload(),i(),t.success(r==="add"?"新增成功":"保存成功")}});return m.useEffect(()=>{if(o&&r==="edit"){const c=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(a),clearTimeout(c)},0)}},[o]),s.jsx($,{open:o,onCancel:i,okText:"提交",okButtonProps:{loading:P},onOk:()=>n(),title:r==="add"?"新增岗位":"编辑岗位信息",children:s.jsxs(E,{submitter:!1,formRef:e,children:[s.jsx(T,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),s.jsx(T,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),s.jsx(S,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),s.jsx(v.Group,{name:"status",label:"状态",valueEnum:x,initialValue:j}),s.jsx(I,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const e=K();return s.jsx(p,{accessible:!0,children:s.jsx(g,{type:"primary",icon:s.jsx(G,{}),onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=U();return s.jsx(p,{accessible:!0,children:s.jsx(g,{type:"link",icon:s.jsx(Q,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=async e=>{const{data:t}=await D(e,{format:"blob"});await N(t,`post_${new Date().getTime()}.xlsx`)},re=({searchParams:e})=>{const{message:t}=A.useApp(),{isLoading:o,mutate:r}=b(oe,{onSuccess:()=>{t.success("导出成功")}});return s.jsx(p,{accessible:!0,children:s.jsx(g,{type:"primary",ghost:!0,icon:s.jsx(W,{}),loading:o,onClick:()=>r(e),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({postId:e,isBatch:t,disabled:o})=>{const r=t?"批量删除":"删除",a=k(),{message:l,modal:i}=A.useApp(),{mutateAsync:d,isLoading:x}=b(async n=>{await V({postIds:n})},{onSuccess:()=>{var n;a==null||a.reload(),(n=a==null?void 0:a.clearSelected)==null||n.call(a),l.success("删除成功")}}),j=()=>{i.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>d(e),okButtonProps:{loading:x}})};return s.jsx(p,{accessible:!0,children:s.jsx(g,{type:"link",danger:!0,disabled:o,icon:s.jsx(z,{}),onClick:j,children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const{valueEnumSysNormalDisable:e}=C();return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(t,o)=>s.jsxs(s.Fragment,{children:[s.jsx(ae,{record:o}),s.jsx(w,{postId:[o.postId]})]})}]},ie=({selectedRowKeys:e})=>s.jsx(w,{disabled:e.length===0,isBatch:!0,postId:e}),ne=()=>{const[e,t]=m.useState({}),o=m.useRef(),r=J(),a=ce();return s.jsx(L,{formRef:o,actionRef:r,rowKey:"postId",request:async(...l)=>{const i=q(...l);return t(i),await X(i)},columns:a,toolbar:{actions:[s.jsx(re,{searchParams:e},"ButtonExport"),s.jsx(se,{},"ButtonAdd")]},tableAlertOptionRender:ie})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>s.jsxs(Y,{children:[s.jsx(ne,{}),s.jsx(te,{})]});export{xe as default};
