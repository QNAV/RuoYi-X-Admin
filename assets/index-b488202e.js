import{j as e,B as A}from"./antdProComponents-4d2f80fe.js";import{aF as C,aG as T,aH as b,A as j,L as x,d as M,aI as y,m as O,B}from"./index-82ba992b.js";import{u as w,a as E,O as F,b as P,c as h,d as R,e as I,f as S,g as V,B as k}from"./index-5baf1447.js";import{u as q}from"./useRequest-c085c0e9.js";import{ba as G,r as u}from"./antd-a78c455c.js";import"./iconPark-5ec34246.js";import"./wangEditor-0d271890.js";import"./useMutation-2affec20.js";import"./utils-5ad12fb9.js";import"./tslib.es6-59680bf8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const H=()=>{const{message:s}=G.useApp(),t=u.useRef(),a=w(),{open:c,actionType:r,ossConfigId:n}=E(),d=F[r],l=P(),m=()=>{var o;r===h.Edit&&((o=t.current)==null||o.resetFields()),l()},[,f]=u.useTransition();q(()=>C({ossConfigId:n}),{ready:c&&h.Edit&&!!n,onSuccess:o=>{f(()=>{var i;(i=t.current)==null||i.setFieldsValue(o)})},refreshDeps:[c]});const g=async o=>{var i;r===h.Add?await T(o):await b({ossConfigId:n,...o}),a==null||a.reload(),(i=t.current)==null||i.resetFields(),l(),s.success(`${d}成功`)},p=R();return e.jsx(A,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:m},width:680,open:c,onFinish:g,columns:p})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const L=()=>{const s=I();return e.jsx(j,{accessKey:"system:oss:add",children:e.jsx(x,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const $=({selectedRowKeys:s})=>e.jsx(k,{disabled:s.length===0,batch:!0,ossConfigIds:s}),v=()=>{const s=S(),t=V();return e.jsx(M,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...a)=>y(O(...a)),toolbar:{actions:[e.jsx(L,{},"ButtonAdd")]},tableAlertOptionRender:$})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const Z=()=>e.jsxs(B,{children:[e.jsx(v,{}),e.jsx(H,{})]});export{Z as default};
