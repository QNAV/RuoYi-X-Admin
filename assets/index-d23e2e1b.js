import{aW as I,aX as P,aj as x,r as m,b8 as C,d as a,aZ as k,j as A,aE as v,aG as b,d6 as R,d7 as S,af as p,az as g,c0 as O,bS as B,d8 as F,a_ as V,d9 as D,aY as L,a$ as X,b0 as Y,da as _,k as q,au as N}from"./index-4bcc3c59.js";import{a as G}from"./index-7fa97739.js";import{a as W,u as $}from"./utils-cfd88001.js";import{u as y}from"./useMutation.esm-92311925.js";import{P as M}from"./index-32640d42.js";import{P as z}from"./index-0ef8c337.js";import{P as H}from"./index-b5172dc2.js";import{P as K}from"./index-e4d44f30.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",I(void 0));T.debugLabel="atomMainTableActions";const Q=()=>G(T),j=()=>P(T),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const Z=()=>{const e=x(h);return()=>e({open:!0,actionType:"add"})},J=()=>{const e=x(h);return t=>e({open:!0,actionType:"edit",record:t})},U=()=>$(h),ee=()=>P(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{var f;const e=m.exports.useRef(),{open:t,actionType:o,record:r}=ee(),s=U(),d=()=>{var i;o==="edit"&&((i=e.current)==null||i.resetFields()),s()},c=j(),{data:n}=C("sys_normal_disable"),{mutate:l,isLoading:E}=y(async()=>{var u;const i=await((u=e.current)==null?void 0:u.validateFields());if(!!i){if(o==="add"){await R(i);return}await S({...i,postId:r.postId})}},{onSuccess:()=>{c==null||c.reload(),d(),b.success(o==="add"?"新建成功":"保存成功")}});return m.exports.useEffect(()=>{if(t&&o==="edit"){const i=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(r),clearTimeout(i)},0)}},[t]),a(k,{open:t,onCancel:d,okText:"提交",okButtonProps:{loading:E},onOk:()=>l(),title:o==="add"?"新建岗位":"编辑岗位信息",children:A(v,{submitter:!1,formRef:e,children:[a(M,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),a(M,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),a(z,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),a(H.Group,{name:"status",label:"状态",valueEnum:(f=n==null?void 0:n.mapData)!=null?f:{},initialValue:n==null?void 0:n.defaultValue}),a(K,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{const e=Z();return a(p,{accessible:!0,children:a(g,{type:"primary",icon:a(O,{}),onClick:e,children:"新建"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({record:e})=>{const t=J();return a(p,{accessible:!0,children:a(g,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({searchParams:e})=>{const{isLoading:t,mutate:o}=y(()=>F(e),{onSuccess:()=>{b.success("导出成功")}});return a(p,{accessible:!0,children:a(g,{type:"primary",ghost:!0,icon:a(V,{}),loading:t,onClick:()=>o(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({postId:e,isBatch:t,disabled:o})=>{const r=t?"批量删除":"删除",s=j(),{mutateAsync:d,isLoading:c}=y(async l=>{await D({postIds:l})},{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),b.success("删除成功")}});return a(p,{accessible:!0,children:a(g,{type:"link",danger:!0,disabled:o,icon:a(L,{}),onClick:()=>{k.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>d(e),okButtonProps:{loading:c}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{var t;const{data:e}=C("sys_normal_disable");return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(o,r)=>A(q,{children:[a(oe,{record:r}),a(w,{postId:r.postId})]})}]},ce=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,postId:e.map(t=>t.postId).join(",")}),ie=()=>{const[e,t]=m.exports.useState({}),o=m.exports.useRef(),r=Q(),s=re();return a(X,{formRef:o,actionRef:r,rowKey:"postId",request:async(...d)=>{const c=Y(...d);return t(c),await _(c)},columns:s,toolbar:{actions:[a(se,{searchParams:e},"ButtonExport"),a(ae,{},"ButtonAdd")]},tableAlertOptionRender:ce})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>A(N,{children:[a(ie,{}),a(te,{})]});export{Ae as default};
