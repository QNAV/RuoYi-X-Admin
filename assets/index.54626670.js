import{h as I,l as x,n as M,j as a,af as A,ag as F,aE as w,aF as D,o as d,Y as T,aj as v,ah as O,ai as j,g as n,F as C,ao as R,r as m,W as V,$ as P,aB as L,aL as k,aM as N,I as q,bb as W,al as Y}from"./index.6d0b91ec.js";import{a as g}from"./index.38c46d10.js";import{a as X}from"./index.699d3673.js";import{a as G,u as H}from"./utils.16040360.js";import{u as b}from"./useMutation.esm.186a4238.js";import{P as K}from"./index.918da560.js";import{P as $}from"./index.09d946b7.js";import"./useQuery.esm.5b5c6ca1.js";import"./utils.esm.bd1fb957.js";import"./SysLoginService.449819d8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomMainTableActions",I(void 0));f.debugLabel="AtomMainTableActions";const z=()=>X(f),B=()=>x(f),l=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomAddOrEditModal",G({open:!1,actionType:"add"}));l.debugLabel="AtomAddOrEditModal";const J=()=>{const e=M(l);return()=>e({open:!0,actionType:"add"})},Q=()=>{const e=M(l);return t=>e({open:!0,actionType:"edit",record:t})},U=()=>H(l),Z=()=>x(l);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const _=()=>{const e=g(),t=J();return a(A,{accessible:e.canAddSysPost,children:a(F,{type:"primary",icon:a(w,{}),onClick:t,children:"\u65B0\u5EFA"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({record:e})=>{const t=g(),u=Q();return a(A,{accessible:t.canEditSysPost,children:a(F,{type:"link",icon:a(D,{}),onClick:()=>u(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function te(e,t){return d("/system/post/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ae(e,t){return d("/system/post/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function oe(e,t){return d("/system/post/export",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function se(e,t){return d("/system/post/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ue(e,t){return d("/system/post/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({searchParams:e})=>{const t=g(),{isLoading:u,mutate:c}=b(()=>oe(e),{onSuccess:()=>{T.success("\u5BFC\u51FA\u6210\u529F")}});return a(A,{accessible:t.canExportSysPost,children:a(F,{type:"link",icon:a(v,{}),loading:u,onClick:()=>c(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({postId:e,postName:t,isBatch:u,disabled:c})=>{const h=u?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",r=g(),o=B(),{mutateAsync:i,isLoading:y}=b(async s=>{await ue({postIds:s})},{onSuccess:()=>{var s;o==null||o.reload(),(s=o==null?void 0:o.clearSelected)==null||s.call(o),T.success("\u5220\u9664\u6210\u529F")}}),p=()=>{j.confirm({title:"\u5220\u9664\u5C97\u4F4D",content:n(C,{children:["\u786E\u5B9A\u5220\u9664\u5C97\u4F4D",a(R.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>i(e),okButtonProps:{loading:y}})};return a(A,{accessible:r.canRemoveSysPost,children:a(F,{type:"link",danger:!0,disabled:c,icon:a(O,{}),onClick:p,children:h})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{var p;const e=m.exports.useRef(),{open:t,actionType:u,record:c}=Z(),h=U(),r=B(),o=()=>{var s;h(),(s=e.current)==null||s.resetFields()},{mutate:i,isLoading:y}=b(async()=>{var E;const s=await((E=e.current)==null?void 0:E.validateFields());if(!!s){if(u==="add"){await te(s);return}await ae({...s,postId:c.postId})}},{onSuccess:()=>{r==null||r.reload(),o(),T.success(u==="add"?"\u65B0\u5EFA\u6210\u529F":"\u4FDD\u5B58\u6210\u529F")}});return m.exports.useEffect(()=>{var s;u==="edit"&&c&&((s=e.current)==null?void 0:s.setFieldsValue)&&e.current.setFieldsValue(c)},[u,(p=e.current)==null?void 0:p.setFieldsValue]),a(j,{open:t,onCancel:o,okText:"\u63D0\u4EA4",okButtonProps:{loading:y},onOk:()=>i(),title:u==="add"?"\u65B0\u5EFA\u5C97\u4F4D":"\u7F16\u8F91\u5C97\u4F4D\u4FE1\u606F",children:n(V,{submitter:!1,formRef:e,children:[a(P,{name:"postName",label:"\u5C97\u4F4D\u540D\u79F0",rules:[{required:!0}]}),a(P,{name:"postCode",label:"\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0}]}),a(K,{name:"postSort",label:"\u663E\u793A\u987A\u5E8F",rules:[{required:!0}],initialValue:0}),a(L.Group,{name:"status",label:"\u72B6\u6001",valueEnum:k,initialValue:N.ENABLE}),a($,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie="postId",Ce=()=>{const[e,t]=m.exports.useState({}),u=m.exports.useRef(),c=z();return n(q,{children:[a(W,{formRef:u,actionRef:c,rowKey:ie,request:async(...r)=>{const o=Y(...r);return t(o),await se(o)},columns:[{dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},{dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:k},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(r,o)=>n(C,{children:[a(ee,{record:o}),a(S,{postId:o.postId,postName:o.postName})]})}],toolbar:{actions:[a(_,{},"ButtonAdd")]},tableAlertOptionRender:({selectedRows:r})=>{const o=r.length===0;return n(C,{children:[a(S,{disabled:o,isBatch:!0,postId:r.map(i=>i.postId).join(","),postName:r.map(i=>i.postName).join(",")}),a(re,{searchParams:e})]})}}),a(ce,{})]})};export{Ce as default};
