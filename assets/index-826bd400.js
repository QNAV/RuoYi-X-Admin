import{p,r as u,bH as C,j as e,am as T,bI as b,bJ as M,Z as y,ap as O,O as j,bK as B,a2 as w,d as E,B as F}from"./index-cde0b745.js";import{u as P,a as x,O as R,b as I,c as h,d as S,e as V,f as k,g as q,B as H}from"./index-6c72b399.js";import{u as K}from"./useRequest-41b27702.js";import"./useMutation-c6d67192.js";import"./utils-c4afd625.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const $=()=>{const{message:s}=p.useApp(),t=u.useRef(),o=P(),{open:i,actionType:n,ossConfigId:r}=x(),d=R[n],l=I(),g=()=>{var a;n===h.Edit&&((a=t.current)==null||a.resetFields()),l()},[,f]=u.useTransition();K(()=>C({ossConfigId:r}),{ready:i&&h.Edit&&!!r,onSuccess:a=>{f(()=>{var c;(c=t.current)==null||c.setFieldsValue(a)})},refreshDeps:[i]});const A=async a=>{var c;n===h.Add?await b(a):await M({ossConfigId:r,...a}),o==null||o.reload(),(c=t.current)==null||c.resetFields(),l(),s.success(`${d}成功`)},m=S();return e(T,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:g},width:680,open:i,onFinish:A,columns:m})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const v=()=>{const s=V();return e(y,{accessKey:"system:oss:add",children:e(O,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const D=({selectedRowKeys:s})=>e(H,{disabled:s.length===0,batch:!0,ossConfigIds:s}),G=()=>{const s=k(),t=q();return e(j,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...o)=>B(w(...o)),toolbar:{actions:[e(v,{},"ButtonAdd")]},tableAlertOptionRender:D})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const N=()=>E(F,{children:[e(G,{}),e($,{})]});export{N as default};
