import{r as l,j as a,a as m,F as B}from"./jsx-runtime-5957e344.js";import{bC as j,i as d,bD as k,bE as v,ba as E,h as P,bS as I,af as R,bF as w,M as f,bb as S,bc as D,as as F}from"./index-442a2ec7.js";import{A as n}from"./index-fde2aee0.js";import{g as b}from"./index-0a60f587.js";import{u as A,a as N,b as O,D as u,d as K,c as V,e as q,f as L}from"./index-59d4322a.js";import{r as Q,t as $,v as G,w as H,x as W,y as z}from"./index-f11fcf0f.js";import{P as T}from"./index-b2830aed.js";import{P as J}from"./index-da4fb5b2.js";import{P as U}from"./index-2bf7544a.js";import{u as p}from"./useMutation.esm-c54c7ae5.js";import{j as X}from"./index-e57a3a71.js";import"./index-40ebb399.js";import"./utils.esm-60235144.js";import"./utils-84e6be4f.js";import"./mutation.esm-15872bfb.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Y=()=>{const e=l.exports.useRef(),t=A(),{open:o,actionType:s,record:i}=N(),r=O(),y=()=>{var c;s===u.Edit&&((c=e.current)==null||c.resetFields()),r()},h=async c=>{var g;s===u.Add?(await Q(c),d.success("新增成功")):(await $({...c,dictId:i.dictId}),d.success("编辑成功")),t==null||t.reload(),r(),(g=e.current)==null||g.resetFields()},{defaultValueSysNormalDisable:x,valueEnumSysNormalDisable:M}=b();return l.exports.useEffect(()=>{o&&s===u.Edit&&l.exports.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(i)})},[o]),a(n,{accessKey:["system:dict:add","system:dict:edit"],children:m(j,{formRef:e,width:500,title:`${K[s]}字典类型`,open:o,modalProps:{onCancel:y,okText:"提交"},onFinish:h,children:[a(T,{name:"dictName",label:"字典名称",rules:[{required:!0}]}),a(T,{name:"dictType",label:"字典类型",rules:[{required:!0}]}),a(J.Group,{name:"status",label:"状态",valueEnum:M,initialValue:x}),a(U,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Z=()=>{const e=V();return a(n,{accessKey:"system:dict:add",children:a(k,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const _=({record:e})=>{const t=q();return a(n,{accessKey:"system:dict:edit",children:a(v,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({searchParams:e})=>{const{isLoading:t,mutate:o}=p(G,{onSuccess:()=>{d.success("导出成功")}});return a(n,{accessKey:"system:dict:export",children:a(E,{loading:t,onClick:()=>o(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=({dictType:e})=>{const t=P();return a(n,{accessKey:"system:dict:query",children:a(I,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{const{mutateAsync:e,isLoading:t}=p(H,{onSuccess:()=>d.success("刷新成功")});return a(R,{danger:!0,icon:a(w,{}),onClick:()=>{f.confirm({title:"操作确认",content:"刷新缓存后，所有字典数据将重新加载",onOk:()=>e({}),okButtonProps:{loading:t}})},children:"刷新缓存"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C=({dictId:e,disabled:t,batch:o})=>{const s=A(),{mutateAsync:i,isLoading:r}=p(W,{onSuccess:()=>{var h;s==null||s.reload(),(h=s==null?void 0:s.clearSelected)==null||h.call(s),d.success("删除成功")}});return a(n,{accessKey:"system:dict:remove",children:a(S,{batch:o,disabled:t,onClick:()=>{f.confirm({title:"操作确认",content:`确定删除字典编号为 ${e} 的字典吗？`,onOk:()=>i({dictIds:e}),okButtonProps:{loading:r}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const{valueEnumSysNormalDisable:e}=b();return[{title:"字典编号",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"字典名称",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"字典类型",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,o)=>m(B,{children:[a(te,{dictType:o.dictType}),a(_,{record:o}),a(C,{dictId:o.dictId})]})}]},oe=({selectedRows:e})=>a(C,{disabled:e.length===0,batch:!0,dictId:e.map(t=>t.dictId).join(",")}),ce=()=>{const e=L(),t=se(),[o,s]=l.exports.useState({});return a(D,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:oe,request:async(...i)=>{const r=X(...i);return s(r),await z(r)},toolbar:{actions:[a(ae,{},"ButtonRefresh"),a(ee,{searchParams:o},"ButtonExport"),a(Z,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>m(F,{children:[a(ce,{}),a(Y,{})]});export{Ce as default};
