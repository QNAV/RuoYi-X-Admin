import{r as d,ap as qe,c as J,g as j,am as se,a as n,br as Mt,b9 as Dt,an as Kt,ao as Bt,bB as Lt,N as kt,h as Se,da as zt,s as Be,db as Ot,bK as et,b8 as jt,cf as ze,dc as $t,b as We,p as lt,l as Ge,d as c,j as k,k as Le,A as Ht,_ as N,bg as fe,dd as qt,de as Wt,df as Gt,dg as Vt,u as Ft,dh as Xt,aV as st,aW as Ve,ai as ct,c7 as dt,di as Yt,dj as Qt,dk as ut,dl as mt,dm as pt,ak as Ut,aF as _e,dn as Jt,a0 as Zt,af as Ae,ay as Z,aK as ea,b7 as Fe,dp as ta,b$ as aa,dq as ra,aX as na,aY as ia,dr as oa,aZ as la,ds as sa,aw as ca,aE as da,a$ as ua,dt as ma,du as pa,aD as fa,dv as ha,w as Te,dw as ft,bR as ht,ch as gt,ci as xt,aB as vt,ck as yt,ce as Xe,dx as ga,at as xa}from"./index-3af5a8dd.js";import{a as va}from"./index-805e6ef1.js";import{a as ya,u as Ca}from"./utils-667a4caf.js";import{u as Ye}from"./useMutation.esm-483465d4.js";import{P as tt}from"./index-0c333209.js";import{S as at}from"./Skeleton-9e618c6e.js";import{i as rt,u as Sa}from"./useRequest-0ccbe725.js";import{P as ba}from"./index-d445d06a.js";var Ct=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]]);return a},wa=function(t){var a=t.prefixCls,r=t.className,o=t.avatar,l=t.title,i=t.description,m=Ct(t,["prefixCls","className","avatar","title","description"]),s=d.exports.useContext(qe),C=s.getPrefixCls,p=C("list",a),f=J(p+"-item-meta",r),g=j.createElement("div",{className:p+"-item-meta-content"},l&&j.createElement("h4",{className:p+"-item-meta-title"},l),i&&j.createElement("div",{className:p+"-item-meta-description"},i));return j.createElement("div",se({},m,{className:f}),o&&j.createElement("div",{className:p+"-item-meta-avatar"},o),(l||i)&&g)},Ia=function(t,a){var r=t.prefixCls,o=t.children,l=t.actions,i=t.extra,m=t.className,s=t.colStyle,C=Ct(t,["prefixCls","children","actions","extra","className","colStyle"]),p=d.exports.useContext(Qe),f=p.grid,g=p.itemLayout,u=d.exports.useContext(qe),S=u.getPrefixCls,D=function(){var M;return d.exports.Children.forEach(o,function(I){typeof I=="string"&&(M=!0)}),M&&d.exports.Children.count(o)>1},P=function(){return g==="vertical"?!!i:!D()},w=S("list",r),E=l&&l.length>0&&j.createElement("ul",{className:w+"-item-action",key:"actions"},l.map(function(_,M){return j.createElement("li",{key:w+"-item-action-"+M},_,M!==l.length-1&&j.createElement("em",{className:w+"-item-action-split"}))})),y=f?"div":"li",h=j.createElement(y,se({},C,f?{}:{ref:a},{className:J(w+"-item",n({},w+"-item-no-flex",!P()),m)}),g==="vertical"&&i?[j.createElement("div",{className:w+"-item-main",key:"content"},o,E),j.createElement("div",{className:w+"-item-extra",key:"extra"},i)]:[o,E,Mt(i,{key:"extra"})]);return f?j.createElement(Dt,{ref:a,flex:1,style:s},h):h},St=d.exports.forwardRef(Ia);St.Meta=wa;const Ea=St;var Ra=function(t){var a,r,o=t.listBorderedCls,l=t.componentCls,i=t.paddingLG,m=t.margin,s=t.padding,C=t.listItemPaddingSM,p=t.marginLG,f=t.borderRadiusLG;return r={},n(r,""+o,(a={border:t.lineWidth+"px "+t.lineType+" "+t.colorBorder,borderRadius:f},n(a,l+"-header,"+l+"-footer,"+l+"-item",{paddingInline:i}),n(a,l+"-pagination",{margin:m+"px "+p+"px"}),a)),n(r,""+o+l+"-sm",n({},l+"-item,"+l+"-header,"+l+"-footer",{padding:C})),n(r,""+o+l+"-lg",n({},l+"-item,"+l+"-header,"+l+"-footer",{padding:s+"px "+i+"px"})),r},Pa=function(t){var a,r,o,l,i=t.componentCls,m=t.screenSM,s=t.screenMD,C=t.marginLG,p=t.marginSM,f=t.margin;return l={},n(l,"@media screen and (max-width:"+s+")",(a={},n(a,""+i,n({},i+"-item",n({},i+"-item-action",{marginInlineStart:C}))),n(a,i+"-vertical",n({},i+"-item",n({},i+"-item-extra",{marginInlineStart:C}))),a)),n(l,"@media screen and (max-width: "+m+")",(o={},n(o,""+i,n({},i+"-item",n({flexWrap:"wrap"},i+"-action",{marginInlineStart:p}))),n(o,i+"-vertical",n({},i+"-item",(r={flexWrap:"wrap-reverse"},n(r,i+"-item-main",{minWidth:t.contentWidth}),n(r,i+"-item-extra",{margin:"auto auto "+f+"px"}),r))),o)),l},Ta=function(t){var a,r,o,l,i,m,s=t.componentCls,C=t.antCls,p=t.controlHeight,f=t.minHeight,g=t.paddingSM,u=t.marginLG,S=t.padding,D=t.listItemPadding,P=t.colorPrimary,w=t.listItemPaddingSM,E=t.listItemPaddingLG,y=t.paddingXS,h=t.margin,_=t.colorText,M=t.colorTextDescription,I=t.motionDurationSlow,ee=t.lineWidth;return m={},n(m,""+s,se(se({},Lt(t)),(l={position:"relative","*":{outline:"none"}},n(l,s+"-header, "+s+"-footer",{background:"transparent",paddingBlock:g}),n(l,s+"-pagination",n({marginBlockStart:u,textAlign:"end"},C+"-pagination-options",{textAlign:"start"})),n(l,s+"-spin",{minHeight:f,textAlign:"center"}),n(l,s+"-items",{margin:0,padding:0,listStyle:"none"}),n(l,s+"-item",(o={display:"flex",alignItems:"center",justifyContent:"space-between",padding:D,color:_},n(o,s+"-item-meta",(a={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},n(a,s+"-item-meta-avatar",{marginInlineEnd:S}),n(a,s+"-item-meta-content",{flex:"1 0",width:0,color:_}),n(a,s+"-item-meta-title",{marginBottom:t.marginXXS,color:_,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":n({color:_,transition:"all "+I},"&:hover",{color:P})}),n(a,s+"-item-meta-description",{color:M,fontSize:t.fontSize,lineHeight:t.lineHeight}),a)),n(o,s+"-item-action",(r={flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none"},n(r,"& > li",n({position:"relative",display:"inline-block",padding:"0 "+y+"px",color:M,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),n(r,s+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:ee,height:Math.ceil(t.fontSize*t.lineHeight)-t.marginXXS*2,transform:"translateY(-50%)",backgroundColor:t.colorSplit}),r)),o)),n(l,s+"-empty",{padding:S+"px 0",color:M,fontSize:t.fontSizeSM,textAlign:"center"}),n(l,s+"-empty-text",{padding:S,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"}),n(l,s+"-item-no-flex",{display:"block"}),l))),n(m,s+"-grid "+C+"-col > "+s+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"}),n(m,s+"-vertical "+s+"-item",(i={alignItems:"initial"},n(i,s+"-item-main",{display:"block",flex:1}),n(i,s+"-item-extra",{marginInlineStart:u}),n(i,s+"-item-meta",n({marginBlockEnd:S},s+"-item-meta-title",{marginBlockEnd:g,color:_,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG})),n(i,s+"-item-action",{marginBlockStart:S,marginInlineStart:"auto","> li":n({padding:"0 "+S+"px"},"&:first-child",{paddingInlineStart:0})}),i)),n(m,s+"-split "+s+"-item",n({borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit},"&:last-child",{borderBlockEnd:"none"})),n(m,s+"-split "+s+"-header",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),n(m,s+"-split"+s+"-empty "+s+"-footer",{borderTop:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),n(m,s+"-loading "+s+"-spin-nested-loading",{minHeight:p}),n(m,s+"-split"+s+"-something-after-last-item "+C+"-spin-container > "+s+"-items > "+s+"-item:last-child",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),n(m,s+"-lg "+s+"-item",{padding:E}),n(m,s+"-sm "+s+"-item",{padding:w}),n(m,s+":not("+s+"-vertical)",n({},s+"-item-no-flex",n({},s+"-item-action",{float:"right"}))),m};const Aa=Kt("List",function(e){var t=Bt(e,{listBorderedCls:e.componentCls+"-bordered",minHeight:e.controlHeightLG,listItemPadding:e.paddingContentVertical+"px "+e.paddingContentHorizontalLG+"px",listItemPaddingSM:e.paddingContentVerticalSM+"px "+e.paddingContentHorizontal+"px",listItemPaddingLG:e.paddingContentVerticalLG+"px "+e.paddingContentHorizontalLG+"px"});return[Ta(t),Ra(t),Pa(t)]},{contentWidth:220});var Na=globalThis&&globalThis.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(a[r[o]]=e[r[o]]);return a},Qe=d.exports.createContext({});Qe.Consumer;function ke(e){var t,a=e.pagination,r=a===void 0?!1:a,o=e.prefixCls,l=e.bordered,i=l===void 0?!1:l,m=e.split,s=m===void 0?!0:m,C=e.className,p=e.children,f=e.itemLayout,g=e.loadMore,u=e.grid,S=e.dataSource,D=S===void 0?[]:S,P=e.size,w=e.header,E=e.footer,y=e.loading,h=y===void 0?!1:y,_=e.rowKey,M=e.renderItem,I=e.locale,ee=Na(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),x=r&&kt(r)==="object"?r:{},z=d.exports.useState(x.defaultCurrent||1),he=Se(z,2),ne=he[0],G=he[1],ge=d.exports.useState(x.defaultPageSize||10),ce=Se(ge,2),xe=ce[0],te=ce[1],ae=d.exports.useContext(qe),Q=ae.getPrefixCls,K=ae.renderEmpty,X=ae.direction,O={current:1,total:0},A=function(T){return function(F,W){G(F),te(W),r&&r[T]&&r[T](F,W)}},$=A("onChange"),H=A("onShowSizeChange"),de=function(T,F){if(!M)return null;var W;return typeof _=="function"?W=_(T):_?W=T[_]:W=T.key,W||(W="list-item-"+F),d.exports.createElement(d.exports.Fragment,{key:W},M(T,F))},Y=function(){return!!(g||r||E)},ue=function(T,F){return d.exports.createElement("div",{className:T+"-empty-text"},I&&I.emptyText||F("List"))},B=Q("list",o),Re=Aa(B),be=Se(Re,2),re=be[0],Pe=be[1],U=h;typeof U=="boolean"&&(U={spinning:U});var q=U&&U.spinning,b="";switch(P){case"large":b="lg";break;case"small":b="sm";break}var L=J(B,(t={},n(t,B+"-vertical",f==="vertical"),n(t,B+"-"+b,b),n(t,B+"-split",s),n(t,B+"-bordered",i),n(t,B+"-loading",q),n(t,B+"-grid",!!u),n(t,B+"-something-after-last-item",Y()),n(t,B+"-rtl",X==="rtl"),t),C,Pe),v=se(se(se({},O),{total:D.length,current:ne,pageSize:xe}),r||{}),ie=Math.ceil(v.total/v.pageSize);v.current>ie&&(v.current=ie);var me=r?d.exports.createElement("div",{className:B+"-pagination"},d.exports.createElement(zt,se({},v,{onChange:$,onShowSizeChange:H}))):null,oe=Be(D);r&&D.length>(v.current-1)*v.pageSize&&(oe=Be(D).splice((v.current-1)*v.pageSize,v.pageSize));var pe=Object.keys(u||{}).some(function(R){return["xs","sm","md","lg","xl","xxl"].includes(R)}),we=Ot(pe),le=d.exports.useMemo(function(){for(var R=0;R<et.length;R+=1){var T=et[R];if(we[T])return T}},[we]),ve=d.exports.useMemo(function(){if(!!u){var R=le&&u[le]?u[le]:u.column;if(R)return{width:100/R+"%",maxWidth:100/R+"%"}}},[u==null?void 0:u.column,le]),ye=q&&d.exports.createElement("div",{style:{minHeight:53}});if(oe.length>0){var Ie=oe.map(function(R,T){return de(R,T)});ye=u?d.exports.createElement(jt,{gutter:u.gutter},d.exports.Children.map(Ie,function(R){return d.exports.createElement("div",{key:R==null?void 0:R.key,style:ve},R)})):d.exports.createElement("ul",{className:B+"-items"},Ie)}else!p&&!q&&(ye=ue(B,K||$t));var V=v.position||"bottom",Ce=d.exports.useMemo(function(){return{grid:u,itemLayout:f}},[JSON.stringify(u),f]);return re(d.exports.createElement(Qe.Provider,{value:Ce},d.exports.createElement("div",se({className:L},ee),(V==="top"||V==="both")&&me,w&&d.exports.createElement("div",{className:B+"-header"},w),d.exports.createElement(ze,se({},U),ye,p),E&&d.exports.createElement("div",{className:B+"-footer"},E),g||(V==="bottom"||V==="both")&&me)))}ke.Item=Ea;var bt={};Object.defineProperty(bt,"__esModule",{value:!0});var _a=bt.default=Ma;function Ma(e,t){for(var a=e,r=0;r<t.length;r+=1){if(a==null)return;a=a[t[r]]}return a}var Da=["title","subTitle","avatar","description","extra","content","actions","type"],Ka=Da.reduce(function(e,t){return e.set(t,!0),e},new Map),wt={};function De(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?De=function(a){return typeof a}:De=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},De(e)}Object.defineProperty(wt,"__esModule",{value:!0});var Ba=wt.default=Ha,$e=La(d.exports);function It(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return It=function(){return e},e}function La(e){if(e&&e.__esModule)return e;if(e===null||De(e)!=="object"&&typeof e!="function")return{default:e};var t=It();if(t&&t.has(e))return t.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=r?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}return a.default=e,t&&t.set(e,a),a}function ka(e,t){return $a(e)||ja(e,t)||Oa(e,t)||za()}function za(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oa(e,t){if(!!e){if(typeof e=="string")return nt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nt(e,t)}}function nt(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function ja(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var a=[],r=!0,o=!1,l=void 0;try{for(var i=e[Symbol.iterator](),m;!(r=(m=i.next()).done)&&(a.push(m.value),!(t&&a.length===t));r=!0);}catch(s){o=!0,l=s}finally{try{!r&&i.return!=null&&i.return()}finally{if(o)throw l}}return a}}function $a(e){if(Array.isArray(e))return e}function Ha(e,t){var a=t||{},r=a.defaultValue,o=a.value,l=a.onChange,i=a.postState,m=$e.useState(function(){return o!==void 0?o:r!==void 0?typeof r=="function"?r():r:typeof e=="function"?e():e}),s=ka(m,2),C=s[0],p=s[1],f=o!==void 0?o:C;i&&(f=i(f));function g(S){p(S),f!==S&&l&&l(S,f)}var u=$e.useRef(!0);return $e.useEffect(function(){if(u.current){u.current=!1;return}o===void 0&&p(o)},[o]),[f,g]}var qa=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Wa(e){var t,a=e.prefixCls,r=e.expandIcon,o=r===void 0?c(qt,{}):r,l=e.onExpand,i=e.expanded,m=e.record,s=o,C="".concat(a,"-row-expand-icon"),p=function(g){l(!i),g.stopPropagation()};return typeof o=="function"&&(s=o({expanded:i,onExpand:l,record:m})),c("span",{className:J(C,(t={},n(t,"".concat(a,"-row-expanded"),i),n(t,"".concat(a,"-row-collapsed"),!i),t)),onClick:p,children:s})}function Ga(e){var t,a,r,o,l,i=e.prefixCls,m=d.exports.useContext(We.ConfigContext),s=m.getPrefixCls,C=d.exports.useContext(lt),p=C.hashId,f=s("pro-list",i),g="".concat(f,"-row"),u=e.title,S=e.subTitle,D=e.content,P=e.itemTitleRender;e.prefixCls;var w=e.actions;e.item,e.recordKey;var E=e.avatar,y=e.cardProps,h=e.description,_=e.isEditable,M=e.checkbox,I=e.index,ee=e.selected,x=e.loading,z=e.expand,he=e.onExpand,ne=e.expandable,G=e.rowSupportExpand,ge=e.showActions,ce=e.showExtra,xe=e.type,te=e.style,ae=e.className,Q=ae===void 0?g:ae,K=e.record,X=e.onRow,O=e.onItem,A=e.itemHeaderRender,$=e.cardActionProps,H=e.extra,de=Ge(e,qa),Y=ne||{},ue=Y.expandedRowRender,B=Y.expandIcon,Re=Y.expandRowByClick,be=Y.indentSize,re=be===void 0?8:be,Pe=Y.expandedRowClassName,U=Ba(!!z,{value:z,onChange:he}),q=Se(U,2),b=q[0],L=q[1],v=J((t={},n(t,"".concat(g,"-selected"),!y&&ee),n(t,"".concat(g,"-show-action-hover"),ge==="hover"),n(t,"".concat(g,"-type-").concat(xe),!!xe),n(t,"".concat(g,"-editable"),_),n(t,"".concat(g,"-show-extra-hover"),ce==="hover"),t),p,g),ie=J(p,n({},"".concat(Q,"-extra"),ce==="hover")),me=b||Object.values(ne||{}).length===0,oe=ue&&ue(K,I,re,b),pe=d.exports.useMemo(function(){if(!(!w||$==="actions"))return[c("div",{onClick:function(T){return T.stopPropagation()},children:w},"action")]},[w,$]),we=d.exports.useMemo(function(){if(!(!w||!$||$==="extra"))return[c("div",{onClick:function(T){return T.stopPropagation()},children:w},"action")]},[w,$]),le=u||S?k("div",{className:"".concat(v,"-header-title ").concat(p),children:[u&&c("div",{className:"".concat(v,"-title ").concat(p),children:u}),S&&c("div",{className:"".concat(v,"-subTitle ").concat(p),children:S})]}):null,ve=(a=P&&(P==null?void 0:P(K,I,le)))!==null&&a!==void 0?a:le,ye=ve||E||S||h?c(ke.Item.Meta,{avatar:E,title:ve,description:h&&me&&c("div",{className:"".concat(v,"-description ").concat(p),children:h})}):null,Ie=J(p,(r={},n(r,"".concat(v,"-item-has-checkbox"),M),n(r,"".concat(v,"-item-has-avatar"),E),n(r,v,v),r)),V=d.exports.useMemo(function(){return E||u?k(Le,{children:[E&&c(Ht,{size:22,src:E,className:"".concat(s("list-item-meta-avatar")," ").concat(p)}),c("span",{className:"".concat(s("list-item-meta-title")," ").concat(p),children:u})]}):null},[E,s,p,u]),Ce=y?c(fe,N(N(N({bordered:!0,loading:x,hoverable:!0},y),{},{title:V,subTitle:S,extra:pe,actions:we,bodyStyle:N({padding:24},y.bodyStyle)},O==null?void 0:O(K,I)),{},{children:c(at,{avatar:!0,title:!1,loading:x,active:!0,children:k("div",{className:"".concat(v,"-header ").concat(p),children:[P&&(P==null?void 0:P(K,I,le)),D]})})})):c(ke.Item,N(N(N(N({className:J(Ie,n({},Q,Q!==g))},de),{},{actions:pe,extra:!!H&&c("div",{className:ie,children:H})},X==null?void 0:X(K,I)),O==null?void 0:O(K,I)),{},{onClick:function(T){var F,W,Me,je;X==null||(F=X(K,I))===null||F===void 0||(W=F.onClick)===null||W===void 0||W.call(F,T),O==null||(Me=O(K,I))===null||Me===void 0||(je=Me.onClick)===null||je===void 0||je.call(Me,T),Re&&L(!b)},children:k(at,{avatar:!0,title:!1,loading:x,active:!0,children:[k("div",{className:"".concat(v,"-header ").concat(p),children:[k("div",{className:"".concat(v,"-header-option ").concat(p),children:[!!M&&c("div",{className:"".concat(v,"-checkbox ").concat(p),children:M}),Object.values(ne||{}).length>0&&G&&Wa({prefixCls:f,expandIcon:B,onExpand:L,expanded:b,record:K})]}),(o=A&&(A==null?void 0:A(K,I,ye)))!==null&&o!==void 0?o:ye]}),me&&(D||oe)&&k("div",{className:"".concat(v,"-content ").concat(p),children:[D,ue&&G&&c("div",{className:Pe&&Pe(K,I,re),children:oe})]})]})}));return y?c("div",{className:J(p,(l={},n(l,"".concat(v,"-card"),y),n(l,Q,Q!==g),l)),style:te,children:Ce}):Ce}var Va=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Fa(e){var t=e.dataSource,a=e.columns,r=e.rowKey,o=e.showActions,l=e.showExtra,i=e.prefixCls,m=e.actionRef,s=e.itemTitleRender,C=e.renderItem,p=e.itemCardProps,f=e.itemHeaderRender,g=e.expandable,u=e.rowSelection,S=e.pagination,D=e.onRow,P=e.onItem,w=e.rowClassName,E=Ge(e,Va),y=d.exports.useContext(lt),h=y.hashId,_=d.exports.useContext(We.ConfigContext),M=_.getPrefixCls,I=j.useMemo(function(){return typeof r=="function"?r:function(q,b){return q[r]||b}},[r]),ee=Wt(t,"children",I),x=Se(ee,1),z=x[0],he=Gt(t.length,N({responsive:!0},S),function(){}),ne=Se(he,1),G=ne[0],ge=j.useMemo(function(){if(S===!1||!G.pageSize||t.length<G.total)return t;var q=G.current,b=q===void 0?1:q,L=G.pageSize,v=L===void 0?10:L,ie=t.slice((b-1)*v,b*v);return ie},[t,G,S]),ce=M("pro-list",i),xe=Vt(u,{getRowKey:I,getRecordByKey:z,prefixCls:ce,data:t,pageData:ge,expandType:"row",childrenColumnName:"children",locale:{}}),te=Se(xe,2),ae=te[0],Q=te[1],K=g||{},X=K.expandedRowKeys,O=K.defaultExpandedRowKeys,A=K.defaultExpandAllRows,$=A===void 0?!0:A,H=K.onExpand,de=K.onExpandedRowsChange,Y=K.rowExpandable,ue=j.useState(function(){return O||($!==!1?t.map(I):[])}),B=Se(ue,2),Re=B[0],be=B[1],re=j.useMemo(function(){return new Set(X||Re||[])},[X,Re]),Pe=j.useCallback(function(q){var b=I(q,t.indexOf(q)),L,v=re.has(b);v?(re.delete(b),L=Be(re)):L=[].concat(Be(re),[b]),be(L),H&&H(!v,q),de&&de(L)},[I,re,t,H,de]),U=ae([])[0];return c(ke,N(N({},E),{},{className:J(M("pro-list-container",i),h,E.className),dataSource:ge,pagination:S&&G,renderItem:function(b,L){var v,ie,me,oe={className:typeof w=="function"?w(b,L):w};a==null||a.forEach(function(V){var Ce=V.listKey,R=V.cardActionProps;if(!!Ka.has(Ce)){var T=V.dataIndex||Ce||V.key,F=Array.isArray(T)?_a(b,T):b[T];R==="actions"&&Ce==="actions"&&(oe.cardActionProps=R);var W=V.render?V.render(F,b,L):F;W!=="-"&&(oe[V.listKey]=W)}});var pe;U&&U.render&&(pe=U.render(b,b,L)||void 0);var we=((v=m.current)===null||v===void 0?void 0:v.isEditable(N(N({},b),{},{index:L})))||{},le=we.isEditable,ve=we.recordKey,ye=Q.has(ve||L),Ie=c(Ga,N(N({cardProps:E.grid?N(N(N({},p),E.grid),{},{checked:ye,onChecked:j.isValidElement(pe)?(ie=pe)===null||ie===void 0||(me=ie.props)===null||me===void 0?void 0:me.onChange:void 0}):void 0},oe),{},{recordKey:ve,isEditable:le||!1,expandable:g,expand:re.has(I(b,L)),onExpand:function(){Pe(b)},index:L,record:b,item:b,showActions:o,showExtra:l,itemTitleRender:s,itemHeaderRender:f,rowSupportExpand:!Y||Y&&Y(b),selected:Q.has(I(b,L)),checkbox:pe,onRow:D,onItem:P}),ve);return C?C(b,L,Ie):Ie}}))}var Xa=function(t){var a,r,o,l,i,m;return n({},t.componentCls,(m={backgroundColor:"transparent"},n(m,"".concat(t.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),n(m,"&-row",(i={borderBlockEnd:"1px solid ".concat(t.colorSplit)},n(i,"".concat(t.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),n(i,"&:last-child",n({borderBlockEnd:"none"},"".concat(t.antCls,"-list-item"),{borderBlockEnd:"none"})),n(i,"&:hover",(a={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},n(a,"".concat(t.antCls,"-list-item-action"),{display:"block"}),n(a,"".concat(t.antCls,"-list-item-extra"),{display:"flex"}),n(a,"".concat(t.componentCls,"-row-extra"),{display:"block"}),n(a,"".concat(t.componentCls,"-row-subheader-actions"),{display:"block"}),a)),n(i,"&-card",n({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(t.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),n(i,"&".concat(t.componentCls,"-row-editable"),n({},"".concat(t.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),n(i,"&".concat(t.componentCls,"-row-selected"),{backgroundColor:t.colorPrimaryBgHover,"&:hover":{backgroundColor:t.colorPrimaryBgHover}}),n(i,"&".concat(t.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),n(i,"&".concat(t.componentCls,"-row-type-inline"),n({},"".concat(t.componentCls,"-row-title"),{fontWeight:"normal"})),n(i,"&".concat(t.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),n(i,"&-show-action-hover",(r={},n(r,"".concat(t.antCls,`-list-item-action,
            `).concat(t.proComponentsCls,`-card-extra,
            `).concat(t.proComponentsCls,"-card-actions"),{display:"none"}),n(r,"&:hover",n({},"".concat(t.proComponentsCls,"-card-extra,").concat(t.proComponentsCls,"-card-actions"),{display:"flex"})),r)),n(i,"&-show-extra-hover",n({},"".concat(t.antCls,"-list-item-extra"),{display:"none"})),n(i,"&-extra",{display:"none"}),n(i,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:t.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),n(i,"&-expand-icon",{marginInlineEnd:8,color:t.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),n(i,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),n(i,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:t.colorPrimary}}),n(i,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),n(i,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),n(i,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),n(i,"&-avatar",{display:"flex"}),n(i,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),n(i,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),n(i,"&-header-option",{display:"flex"}),n(i,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),n(i,"&-no-split",(o={},n(o,"".concat(t.componentCls,"-row"),{borderBlockEnd:"none"}),n(o,"".concat(t.antCls,"-list ").concat(t.antCls,"-list-item"),{borderBlockEnd:"none"}),o)),n(i,"&-bordered",n({},"".concat(t.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(t.colorSplit)})),n(i,"".concat(t.antCls,"-list-vertical"),(l={},n(l,"".concat(t.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),n(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),n(l,"&-content",{marginBlock:0,marginInline:0}),n(l,"&-subTitle",{marginBlockStart:8}),n(l,"".concat(t.antCls,"-list-item-extra"),n({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(t.componentCls,"-row-description"),{marginBlockStart:16})),n(l,"".concat(t.antCls,"-list-bordered ").concat(t.antCls,"-list-item"),{paddingInline:0}),n(l,"".concat(t.componentCls,"-row-show-extra-hover"),n({},"".concat(t.antCls,"-list-item-extra "),{display:"none"})),l)),n(i,"".concat(t.antCls,"-list-pagination"),{marginBlockEnd:t.marginLG}),n(i,"".concat(t.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),n(i,"".concat(t.antCls,"-list-vertical .").concat(t.proComponentsCls,"-list-row ").concat(t.antCls,"-list"),n({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(t.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),n(i,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),i)),m))};function Ya(e){return Ft("ProList",function(t){var a=N(N({},t),{},{componentCls:".".concat(e)});return[Xa(a)]})}var Qa=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Ua(e){var t=e.metas,a=e.split,r=e.footer,o=e.rowKey,l=e.tooltip,i=e.className,m=e.options,s=m===void 0?!1:m,C=e.search,p=C===void 0?!1:C,f=e.expandable,g=e.showActions,u=e.showExtra,S=e.rowSelection,D=S===void 0?!1:S,P=e.pagination,w=P===void 0?!1:P,E=e.itemLayout,y=e.renderItem,h=e.grid,_=e.itemCardProps,M=e.onRow,I=e.onItem,ee=e.rowClassName,x=e.locale,z=e.itemHeaderRender,he=e.itemTitleRender,ne=Ge(e,Qa),G=d.exports.useRef();d.exports.useImperativeHandle(ne.actionRef,function(){return G.current});var ge=d.exports.useContext(We.ConfigContext),ce=ge.getPrefixCls,xe=d.exports.useMemo(function(){var O=[];return Object.keys(t||{}).forEach(function(A){var $=t[A]||{},H=$.valueType;H||(A==="avatar"&&(H="avatar"),A==="actions"&&(H="option"),A==="description"&&(H="textarea")),O.push(N(N({listKey:A,dataIndex:($==null?void 0:$.dataIndex)||A},$),{},{valueType:H}))}),O},[t]),te=ce("pro-list",e.prefixCls),ae=Ya(te),Q=ae.wrapSSR,K=ae.hashId,X=J(te,K,n({},"".concat(te,"-no-split"),!a));return Q(c(Xt,N(N({tooltip:l},ne),{},{actionRef:G,pagination:w,type:"list",rowSelection:D,search:p,options:s,className:J(te,i,X),columns:xe,rowKey:o,tableViewRender:function(A){var $=A.columns,H=A.size,de=A.pagination,Y=A.rowSelection,ue=A.dataSource,B=A.loading;return c(Fa,{grid:h,itemCardProps:_,itemTitleRender:he,prefixCls:e.prefixCls,columns:$,renderItem:y,actionRef:G,dataSource:ue||[],size:H,footer:r,split:a,rowKey:o,expandable:f,rowSelection:D===!1?void 0:Y,showActions:g,showExtra:u,pagination:de,itemLayout:E,loading:B,itemHeaderRender:z,onRow:M,onItem:I,rowClassName:ee,locale:x})}})))}var Et=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ja=globalThis&&globalThis.__read||function(e,t){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var r=a.call(e),o,l=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)l.push(o.value)}catch(m){i={error:m}}finally{try{o&&!o.done&&(a=r.return)&&a.call(r)}finally{if(i)throw i.error}}return l},Ke=new Set,Ee,it={xs:0,sm:576,md:768,lg:992,xl:1200};function ot(){var e,t,a=Ee;if(Rt(),a!==Ee)try{for(var r=Et(Ke),o=r.next();!o.done;o=r.next()){var l=o.value;l()}}catch(i){e={error:i}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}}var He=!1;function Rt(){var e,t,a=window.innerWidth,r={},o=!1;try{for(var l=Et(Object.keys(it)),i=l.next();!i.done;i=l.next()){var m=i.value;r[m]=a>=it[m],r[m]!==Ee[m]&&(o=!0)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}o&&(Ee=r)}function Za(){rt&&!He&&(Ee={},Rt(),window.addEventListener("resize",ot),He=!0);var e=Ja(d.exports.useState(Ee),2),t=e[0],a=e[1];return d.exports.useEffect(function(){if(!!rt){var r=function(){a(Ee)};return Ke.add(r),function(){Ke.delete(r),Ke.size===0&&(window.removeEventListener("resize",ot),He=!1)}}},[]),t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ue=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",st(void 0));Ue.debugLabel="atomRoleListActions";const Je=()=>Ve(Ue),er=()=>va(Ue),Oe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",ya({open:!1,roleId:0}));Oe.debugLabel="atomRoleDetails";const tr=()=>Ca(Oe),ar=()=>{const e=ct(Oe);return t=>{e({open:!0,roleId:t})}},Ne=()=>Ve(Oe),Ze=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomSearchParams",st({}));Ze.debugLabel="atomSearchParams";const rr=()=>Ve(Ze),nr=()=>ct(Ze),Pt="sysRole",Tt=[Pt,"details"],At=e=>{const{roleId:t}=Ne(),a=dt(Tt,()=>Yt({roleId:t}),{onSuccess:e,enabled:!1});return d.exports.useEffect(()=>{t>0&&a.refetch()},[t]),a},Nt=[Pt,"tree"],ir=e=>{const{roleId:t}=Ne(),a=dt(Nt,async()=>{const{menus:r,checkedKeys:o}=await Qt({roleId:t});return{treeData:r,selectedMenuIds:o,selectedTreeData:ut(r,o),allMenuIds:mt(r),allExpandedKeys:pt(r)}},{onSuccess:r=>{e(r.selectedTreeData)},enabled:!1});return d.exports.useEffect(()=>{t>0&&a.refetch()},[t]),a},_t=e=>{const t=Ut();return Ye(async a=>{const r=t.getQueryData(Tt),o=t.getQueryData(Nt);await Jt({roleId:r.roleId,roleKey:r.roleKey,roleName:r.roleName,roleSort:r.roleSort,status:r.status,menuIds:o.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...a})},{onSuccess:()=>{e(),_e.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const or=()=>{const e=Zt(),{roleId:t}=Ne();return c(Ae,{accessible:!0,children:c(Z,{type:"primary",ghost:!0,onClick:()=>e(`/system/role-auth/${t}`),icon:c(ea,{}),children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const lr=()=>{var r;const e=d.exports.useRef(),t=Je(),{data:a}=Fe("sys_normal_disable");return c(Ae,{accessible:!0,children:c(ta,{title:"新增角色",trigger:c(Z,{type:"primary",icon:c(aa,{}),children:"新增"}),formRef:e,onFinish:async o=>{var l;return await ra({...o,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),t==null||t.reload(),_e.success("新增成功"),(l=e.current)==null||l.resetFields(),!0},width:500,layoutType:"ModalForm",columns:[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:(r=a==null?void 0:a.mapData)!=null?r:{},valueType:"radio",formItemProps:{initialValue:a==null?void 0:a.defaultValue,required:!0,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const sr=()=>{const e=Je(),t=tr(),{roleId:a}=Ne();return c(Ae,{accessible:!0,children:c(Z,{danger:!0,ghost:!0,icon:c(na,{}),onClick:()=>ia.confirm({title:"删除角色",content:`确定删除角色编号为 ${a} 的数据吗？`,onOk:async()=>{var o;await oa({roleIds:a}),e==null||e.reload(),(o=e==null?void 0:e.clearSelected)==null||o.call(e),t(),_e.success("删除成功")}}),children:"删除"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const cr=()=>{const e=rr(),{isLoading:t,mutate:a}=Ye(()=>sa(e),{onSuccess:()=>{_e.success("导出成功")}});return c(Ae,{accessible:!0,children:c(Z,{ghost:!0,type:"primary",icon:c(la,{}),loading:t,onClick:()=>a(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const dr=()=>{var p;const[e,t]=d.exports.useState([]),[a]=ca.useForm(),{data:r}=Fe("sys_normal_disable"),o=Je(),{data:l,isFetching:i,refetch:m}=At(()=>{t([]),a.resetFields()}),{mutateAsync:s}=_t(()=>{m(),o==null||o.reload()}),C=l?{form:a,editableKeys:e,onChange:(f,g)=>{t(f);const u=f[0];a.setFieldsValue({[u]:g[u]})},onSave:async(f,g)=>{await s({[f]:g[f]})}}:void 0;return k(ze,{spinning:i,children:[c(tt,{column:2,columns:[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],dataSource:l}),c(da,{}),c(tt,{column:2,columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:(p=r==null?void 0:r.mapData)!=null?p:{},valueType:"radio",formItemProps:{initialValue:r==null?void 0:r.defaultValue,required:!0,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{required:!0,rules:[{required:!0,message:"请输入显示排序"}]}},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}],dataSource:l,editable:C})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ur=()=>{var o;const e=er(),t=ar(),a=nr(),{data:r}=Fe("sys_normal_disable");return c(Ua,{ghost:!0,rowKey:"roleId",actionRef:e,metas:{title:{title:"角色名称",dataIndex:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:(o=r==null?void 0:r.mapData)!=null?o:{}},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}},tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:l})=>{t(l)}},search:{filterType:"light"},options:{setting:!1,fullScreen:!1,density:!1,reload:!0},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:async(...l)=>{const i=ua(...l);return a(i),await ma(i)}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const mr=()=>{const[e,t]=d.exports.useState([]),[a,r]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,m]=d.exports.useState([]),[s,C]=d.exports.useState(!1),[p,f]=d.exports.useState(!0),[g,u]=d.exports.useState(),S=d.exports.useRef(),{open:D,roleId:P}=Ne(),{refetch:w}=At(({dataScope:x})=>{var z;u(x),(z=S.current)==null||z.setFieldsValue({dataScope:x})}),{loading:E,refresh:y,data:h}=Sa(async()=>{const{depts:x,checkedKeys:z}=await pa({roleId:P});return{treeData:x,selectedMenuIds:z,selectedTreeData:ut(x,z),allMenuIds:mt(x),allExpandedKeys:pt(x)}},{ready:D,refreshDeps:[P],onSuccess:x=>{r(!1),m(x.selectedTreeData)}}),{isLoading:_,mutate:M}=Ye(async()=>{await ga({roleId:P,dataScope:g,deptIds:e})},{onSuccess:()=>{y(),w(),_e.success("保存成功")}}),I=o.length===(h==null?void 0:h.allExpandedKeys.length),ee=x=>{var z;if(x||p){t((z=h==null?void 0:h.allMenuIds)!=null?z:[]);return}t([])};return d.exports.useEffect(()=>{if((h==null?void 0:h.allMenuIds.length)===e.length){C(!0),f(!1);return}if(e.length===0){C(!1),f(!1);return}f(!0)},[h==null?void 0:h.allMenuIds,e]),k(Le,{children:[k("header",{className:"flex justify-between items-start flex-wrap",children:[c(fa,{formRef:S,submitter:!1,layout:"horizontal",children:c(ba,{name:"dataScope",label:"数据权限范围",fieldProps:{options:ha,onChange:x=>{u(x)}},readonly:!a})}),c(Ae,{accessible:!0,children:a?k(Te,{children:[c(Z,{loading:_,onClick:()=>{var x;r(!1),m((x=h==null?void 0:h.selectedTreeData)!=null?x:[])},children:"取消编辑"}),c(Z,{type:"primary",ghost:!0,icon:c(ft,{}),loading:_,onClick:()=>M(),children:"保存"})]}):c(Z,{type:"primary",ghost:!0,icon:c(ht,{}),onClick:()=>{var x,z;r(!0),t((x=h==null?void 0:h.selectedMenuIds)!=null?x:[]),m((z=h==null?void 0:h.treeData)!=null?z:[])},children:"编辑数据权限"})})]}),g==="2"&&k(Le,{children:[k(Te,{wrap:!0,className:"mb-2",children:[i.length>0&&c(Z,{size:"small",icon:I?c(gt,{}):c(xt,{}),onClick:()=>l(I?[]:h.allExpandedKeys),children:I?"全部折叠":"全部展开"}),a&&c(vt,{indeterminate:p,onChange:x=>ee(x.target.checked),checked:s,children:"全选/全不选"})]}),c(ze,{spinning:E,children:i.length>0?c(yt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:a,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:x=>l(x),onCheck:x=>{t(x.checked)}}):c(Xe,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pr=()=>{const[e,t]=d.exports.useState([]),[a,r]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,m]=d.exports.useState([]),[s,C]=d.exports.useState(!1),[p,f]=d.exports.useState(!0),{isFetching:g,data:u,refetch:S}=ir(y=>{r(!1),m(y)}),{isLoading:D,mutate:P}=_t(()=>{S()}),w=o.length===(u==null?void 0:u.allExpandedKeys.length),E=y=>{var h;if(y||p){t((h=u==null?void 0:u.allMenuIds)!=null?h:[]);return}t([])};return d.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===e.length){C(!0),f(!1);return}if(e.length===0){C(!1),f(!1);return}f(!0)},[u==null?void 0:u.allMenuIds,e]),k(Le,{children:[k("header",{className:"flex justify-between mb-2",children:[c(Te,{wrap:!0,children:i.length>0&&c(Z,{size:"small",icon:w?c(gt,{}):c(xt,{}),onClick:()=>l(w?[]:u.allExpandedKeys),children:w?"全部折叠":"全部展开"})}),c(Ae,{accessible:!0,children:a?k(Te,{wrap:!0,children:[c(Z,{loading:D,onClick:()=>{var y;r(!1),m((y=u==null?void 0:u.selectedTreeData)!=null?y:[])},children:"取消编辑"}),c(Z,{type:"primary",ghost:!0,icon:c(ft,{}),loading:D,onClick:()=>P({menuIds:e}),children:"保存"})]}):c(Z,{type:"primary",ghost:!0,icon:c(ht,{}),onClick:()=>{var y,h;r(!0),t((y=u==null?void 0:u.selectedMenuIds)!=null?y:[]),m((h=u==null?void 0:u.treeData)!=null?h:[])},children:"编辑菜单权限"})})]}),k(ze,{spinning:g,children:[c("div",{className:"pl-1 mb-2",children:a&&c(vt,{indeterminate:p,onChange:y=>E(y.target.checked),checked:s,children:"全选/全不选"})}),i.length>0?c(yt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:a,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:y=>l(y),onCheck:y=>{t(y.checked)}}):c(Xe,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const br=()=>{const{md:e,xl:t}=Za(),{open:a}=Ne();return c(xa,{children:k(fe,{ghost:!0,gutter:[16,16],wrap:!e,children:[c(fe,{title:"角色列表",colSpan:"450px",extra:k(Te,{children:[c(cr,{}),c(lr,{})]}),children:c(ur,{})}),a?k(fe,{split:"horizontal",title:"角色详情",extra:k(Te,{children:[c(sr,{}),c(or,{})]}),children:[c(fe,{children:c(dr,{})}),k(fe,{split:t?"vertical":"horizontal",children:[c(fe,{children:c(pr,{})}),c(fe,{children:c(mr,{})})]})]}):c(fe,{title:"角色详情",className:"h-full",children:c(Xe,{description:"点击选择左侧角色查看详情"})})]})})};export{br as default};
