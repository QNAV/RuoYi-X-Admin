import{E as p,j as a,f as n,bA as g,r as m,A as T,b as c,p as f,bB as x,aC as b,bC as y,bD as A,a0 as C,a1 as j,X as I,bE as M,a7 as k,B as v}from"./index-9b04425e.js";import{u as B}from"./index-1bfa8f9d.js";import{u as P}from"./useMutation-4d311f48.js";import{U}from"./index-1e856b2d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=()=>{const e=p();return a(n,{icon:a(g,{}),type:"primary",onClick:()=>{e("/system/oss-config")},children:"配置管理"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const{Dragger:N}=U,O=async e=>{const{data:{code:t,msg:o}}=await A({file:e});return t!==200?Promise.reject(new Error(o)):o},R=()=>{const[e,{toggle:t}]=B(),[o,i]=m.useState([]),{message:l,modal:h}=T.useApp(),{mutate:d,isLoading:u}=P(O,{onSuccess:s=>{t(),h.info({title:"导入结果",content:s})},onError:()=>{l.error("导入失败")}});return c(f,{children:[a(n,{type:"primary",icon:a(x,{}),onClick:t,children:"上传文件"}),a(b,{title:"上传文件",open:e,onCancel:t,okText:"提交",onOk:()=>d(o[0].originFileObj),okButtonProps:{loading:u},children:c(N,{accept:".xlsx, .xls, .doc, .docx, .ppt, .pptx, .txt, .pdf",maxCount:1,beforeUpload:()=>!1,onChange:s=>i(s.fileList),fileList:o,onRemove:()=>i([]),children:[a("p",{className:"ant-upload-drag-icon",children:a(y,{})}),a("p",{className:"ant-upload-text",children:"点击或拖拽文件到此区域上传"}),a("p",{className:"ant-upload-text",children:"请上传大小不超过5MB格式为doc/xls/ppt/txt/pdf的文件"})]})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/oss/model/index.ts/atomMainTableActions",C(void 0));r.debugLabel="atomMainTableActions";const L=()=>j(r);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=[{title:"对象存储主键",dataIndex:"ossId",key:"ossId",valueType:"text",hideInSearch:!0},{title:"文件名",dataIndex:"fileName",key:"fileName",valueType:"text"},{title:"原名",dataIndex:"originalName",key:"originalName",valueType:"text"},{title:"文件后缀名",dataIndex:"fileSuffix",key:"fileSuffix",valueType:"text"},{title:"服务商",dataIndex:"service",key:"service",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0}],E=()=>{const e=L();return a(I,{rowKey:"ossId",actionRef:e,columns:S,request:(...t)=>M(k(...t)),toolbar:{actions:[a(R,{},"ModalFormUpdate"),a(w,{},"ButtonToConfigPage")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const q=()=>a(v,{children:a(E,{})});export{q as default};
