import{s as w,v as M,x as B,g as E,w as p,r as f,j as a,ai as T,e as n,aH as P,q as A,a2 as I,b4 as x,aI as O,ao as k,aZ as v,bj as R,bk as D,aj as y,aL as N,aM as q,ak as V,al as L,F as j,am as W,aq as X,ar as Y,as as G,O as H}from"./index.969ee356.js";import{p as K,e as g}from"./index.6d3e914b.js";import{b as _}from"./index.20aee0a7.js";import{a as Q,u as Z}from"./utils.ff7d86ce.js";import{u as $}from"./useQuery.esm.56fb3fb4.js";import{w as z,b as J,T as U}from"./index.f4f23c09.js";import{u as ee}from"./index.7265268c.js";import{u as te}from"./useMutation.esm.cc54b8c5.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",w(void 0));C.debugLabel="atomMainTableActions";const ae=()=>M(C),oe=()=>_(C),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",Q({open:!1,actionType:"add"}));d.debugLabel="atomAddOrEditModal";const se=()=>M(d),ce=()=>{const e=E(d);return()=>{e({open:!0,actionType:"add"})}},ie=()=>{const e=E(d);return t=>{e({open:!0,actionType:"edit",record:t})}},ne=()=>Z(d),re=["system","notice","dict"],F=()=>$(re,async()=>{const e=await K({dictType:"sys_notice_type"});return B(e).mapData});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function ue(e,t){return p("/system/notice/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function le(e,t){return p("/system/notice/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function de(e,t){return p("/system/notice/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function he(e,t){return p("/system/notice/remove",{method:"POST",params:{...e},...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me=()=>{const e=f.exports.useRef(),{data:t}=F(),{canAddSysNotice:i,canEditSysConfig:c}=g(),r=ae(),{open:u,actionType:o,record:h}=se(),m=ne(),b=()=>{var s;o==="edit"&&((s=e.current)==null||s.resetFields()),m()};return f.exports.useEffect(()=>{if(u&&o==="edit"){const s=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(h),clearTimeout(s)},0)}},[u]),a(T,{accessible:i||c,children:n(P,{formRef:e,width:800,title:o==="add"?"\u65B0\u589E\u516C\u544A":"\u7F16\u8F91\u516C\u544A",open:u,modalProps:{onCancel:b,okText:"\u63D0\u4EA4"},grid:!0,onFinish:async s=>{var l;o==="add"?(await ue(s),A.success("\u65B0\u589E\u6210\u529F")):(await le({...s,noticeId:h.noticeId}),A.success("\u7F16\u8F91\u6210\u529F")),r==null||r.reload(),m(),(l=e.current)==null||l.resetFields()},children:[a(I,{name:"noticeTitle",label:"\u516C\u544A\u6807\u9898",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(x,{name:"noticeType",label:"\u516C\u544A\u7C7B\u578B",required:!0,rules:[{required:!0}],valueEnum:t!=null?t:{},colProps:{span:12}}),a(O.Group,{name:"status",label:"\u72B6\u6001",valueEnum:k,initialValue:v.ENABLE}),a(R,{name:"noticeContent",label:"\u5185\u5BB9",children:a(D,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pe={title:"\u5E8F\u53F7",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},Ae={title:"\u516C\u544A\u6807\u9898",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const{canAddSysNotice:e}=g(),t=ce();return a(T,{accessible:e,children:a(y,{icon:a(N,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({record:e})=>{const t=ie();return a(y,{type:"link",icon:a(q,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({noticeId:e,noticeTitle:t,disabled:i,isBatch:c})=>{const r=c?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:u}=g(),o=ee(),{mutateAsync:h,isLoading:m}=te(async s=>{await he({noticeIds:s})},{onSuccess:()=>{var s;o==null||o.reload(),(s=o==null?void 0:o.clearSelected)==null||s.call(o),A.success("\u5220\u9664\u6210\u529F")}});return a(T,{accessible:u,children:a(y,{type:"link",danger:!0,disabled:i,icon:a(V,{}),onClick:()=>{L.confirm({title:"\u5220\u9664\u516C\u544A\u901A\u77E5",content:n(j,{children:["\u786E\u5B9A\u5220\u9664\u516C\u544A\u901A\u77E5",a(W.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>h(e),okButtonProps:{loading:m}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge="noticeId",Ce=({selectedRows:e})=>n(G,{children:[n("span",{children:["\u5DF2\u9009\u62E9 ",e.length," \u9879"]}),a(S,{isBatch:!0,disabled:e.length===0,noticeTitle:e.map(t=>t.noticeTitle).join(","),noticeId:e.map(t=>t.noticeId).join(",")})]}),be=()=>{const e=oe(),{data:t}=F();return a(X,{rowKey:ge,actionRef:e,columns:[pe,Ae,{title:"\u516C\u544A\u7C7B\u578B",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:t!=null?t:{}},z,J,U,{title:"\u64CD\u4F5C",valueType:"option",render:(i,c)=>n(j,{children:[a(ye,{record:c}),a(S,{noticeId:c.noticeId,noticeTitle:c.noticeTitle})]})}],request:async(...i)=>await de(Y(...i)),rowSelection:{alwaysShowAlert:!0},tableAlertRender:Ce,toolbar:{actions:[a(Te,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Pe=()=>n(H,{children:[a(be,{}),a(me,{})]});export{Pe as default};
