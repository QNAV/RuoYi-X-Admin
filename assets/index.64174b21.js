import{p as x,s as E,w as R,g as M,r as g,j as a,ah as A,e as y,aE as v,$ as T,a1 as m,aX as S,a$ as I,aF as L,aP as j,aQ as V,ai as b,aI as O,aJ as N,al as X,aj as Y,ak as q,F as P,am as W,b0 as $,an as G,ao as D,aW as K,K as H}from"./index.420d2bc2.js";import{e as C,k as J,l as Q,m as U,n as z,o as Z}from"./index.d0bd967d.js";import{b as _,c as ee}from"./index.f32b5ff9.js";import{a as te,u as ae}from"./utils.ecaa00bc.js";import{P as se}from"./index.1d3422e2.js";import{P as oe}from"./index.e5b483a5.js";import{u as k}from"./useMutation.esm.c2afcb52.js";import{u as ie}from"./index.d6d13ff3.js";import{o as ce}from"./SysDictTypeService.5950673a.js";import{u as ue}from"./useRequest.1de58386.js";import"./useQuery.esm.86c767cc.js";import"./utils.esm.283448c2.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",x(void 0));F.debugLabel="atomMainTableActions";const re=()=>E(F),de=()=>_(F),f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",x({dictType:"",dictName:""}));f.debugLabel="atomCurDictType";const ne=()=>E(f),le=()=>R(f),p=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",te({actionType:"add",open:!1}));p.debugLabel="atomAddOrEditModal";const he=()=>E(p),me=()=>ae(p),pe=()=>{const e=M(p);return()=>{e({actionType:"add",open:!0})}},ge=()=>{const e=M(p);return t=>{e({actionType:"edit",open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Te=()=>{const e=g.exports.useRef(),{canEditSysDict:t}=C(),u=re(),{open:i,actionType:r,record:l}=he(),c=me(),{dictType:d,dictName:h}=ne();return g.exports.useEffect(()=>{var o,s,n;i&&r==="add"&&((o=e.current)==null||o.setFieldsValue({dictType:d,dictName:h})),i&&r==="edit"&&((s=e.current)==null||s.setFieldsValue({...l,dictName:h})),i||(n=e.current)==null||n.resetFields()},[i]),a(A,{accessible:t,children:y(v,{formRef:e,width:500,title:"\u65B0\u589E\u5B57\u5178\u6570\u636E",open:i,modalProps:{onCancel:c,okText:"\u63D0\u4EA4"},onFinish:async o=>{var s;r==="add"?(await J(o),T.success("\u65B0\u589E\u6210\u529F")):(await Q({...o,dictCode:l.dictCode}),T.success("\u7F16\u8F91\u6210\u529F")),u==null||u.reload(),c(),(s=e.current)==null||s.resetFields()},children:[a(m,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",readonly:!0}),a(m,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",hidden:!0}),a(m,{name:"dictLabel",label:"\u6570\u636E\u6807\u7B7E",rules:[{required:!0}]}),a(m,{name:"dictValue",label:"\u6570\u636E\u952E\u503C",rules:[{required:!0}]}),a(m,{name:"cssClass",label:"\u6837\u5F0F\u5C5E\u6027"}),a(se,{name:"dictSort",label:"\u663E\u793A\u6392\u5E8F",initialValue:0}),a(S,{name:"listClass",label:"\u56DE\u663E\u6837\u5F0F",fieldProps:{options:I},initialValue:"default"}),a(L.Group,{name:"status",label:"\u72B6\u6001",valueEnum:j,initialValue:V.ENABLE}),a(oe,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const{canEditSysDict:e}=C(),t=pe();return a(A,{accessible:e,children:a(b,{icon:a(O,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({record:e})=>{const t=ge();return a(b,{type:"link",icon:a(N,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const be=({searchParams:e})=>{const t=C(),{isLoading:u,mutate:i}=k(()=>U(e),{onSuccess:()=>{T.success("\u5BFC\u51FA\u6210\u529F")}});return a(A,{accessible:t.canExportSysPost,children:a(b,{ghost:!0,type:"primary",icon:a(X,{}),loading:u,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({dictCode:e,dictLabel:t,disabled:u,isBatch:i})=>{const r=i?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:l}=C(),c=ie(),{mutateAsync:d,isLoading:h}=k(async s=>{await z({dictCodes:s})},{onSuccess:()=>{var s;c==null||c.reload(),(s=c==null?void 0:c.clearSelected)==null||s.call(c),T.success("\u5220\u9664\u6210\u529F")}});return a(A,{accessible:l,children:a(b,{type:"link",danger:!0,disabled:u,icon:a(Y,{}),onClick:()=>{q.confirm({title:"\u5220\u9664\u5B57\u5178\u6570\u636E",content:y(P,{children:["\u786E\u5B9A\u5220\u9664\u5B57\u5178\u6570\u636E",a(W.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>d(e),okButtonProps:{loading:h}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce="dictCode",Ee=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,dictCode:e.map(t=>t.dictCode).join(","),dictLabel:e.map(t=>t.dictLabel).join(",")}),Fe=()=>{const e=$(),[t,u]=g.exports.useState({}),i=de(),r=g.exports.useRef(),[l,c]=le(),{data:d,run:h}=ue(async()=>(await ce()).reduce((s,n)=>(s[n.dictType]=n.dictName,s),{}),{manual:!0,onSuccess:o=>{var n,B;const s=e.dictType;c({dictType:s,dictName:o[s]}),(n=r.current)==null||n.setFieldsValue({dictType:s}),(B=i==null?void 0:i.current)==null||B.reload()}});return ee("/system/dict/:dictType",()=>{h()}),a(G,{rowKey:Ce,actionRef:i,columns:[{title:"\u5B57\u5178\u7F16\u7801",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6807\u7B7E",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"\u5B57\u5178\u952E\u503C",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u6392\u5E8F",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:j},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(o,s)=>y(P,{children:[a(ye,{record:s}),a(w,{dictCode:s.dictCode,dictLabel:s.dictLabel})]})}],params:l,request:async(...o)=>{const s=D(...o);return u(s),await Z(D(...o))},tableAlertOptionRender:Ee,manualRequest:!0,toolbar:{actions:[a(be,{searchParams:t},"ButtonExport"),a(Ae,{},"ButtonAdd")]},headerTitle:a(K,{formRef:r,children:a(S,{name:"dictType",valueEnum:d!=null?d:{},allowClear:!1,showSearch:!0,fieldProps:{onChange:o=>{c({dictType:o,dictName:d[o]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ie=()=>y(H,{children:[a(Fe,{}),a(Te,{})]});export{Ie as default};
