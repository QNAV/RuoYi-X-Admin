import{r as g,j as a,af as r,g as B,ay as f,Y as h,$ as F,az as D,aH as T,aI as S,ag as n,aA as x,a as j,aU as k,aB as M,aj as I,aC as w,ai as A,ah as P,ak as v,al as R,F as O,I as q}from"./index.075c34ed.js";import{a as d}from"./index.2ec77453.js";import{u as C,a as N,b as V,S as L,c as H,d as W,e as $,f as z,g as G,h as K,i as U,j as Y}from"./SysDictTypeService.30224edb.js";import{P as J}from"./index.1483570d.js";import{u as E}from"./useMutation.esm.401ada06.js";import"./useQuery.esm.17e173d1.js";import"./utils.esm.32fb8c14.js";import"./SysLoginService.918889e8.js";import"./index.3c28dcd5.js";import"./utils.1c1875ff.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Q=()=>{const e=g.exports.useRef(),{canAddSysDict:t,canEditSysDict:s}=d(),i=C(),{open:o,actionType:u,record:p}=N(),m=V(),y=()=>{var c;u==="edit"&&((c=e.current)==null||c.resetFields()),m()};return g.exports.useEffect(()=>{if(o&&u==="edit"){const c=setTimeout(()=>{var l;(l=e.current)==null||l.setFieldsValue(p),clearTimeout(c)},0)}},[o]),a(r,{accessible:t||s,children:B(f,{formRef:e,width:500,title:u==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:o,modalProps:{onCancel:y,okText:"\u63D0\u4EA4"},onFinish:async c=>{var l;u==="add"?(await L(c),h.success("\u65B0\u589E\u6210\u529F")):(await H({...c,dictId:p.dictId}),h.success("\u7F16\u8F91\u6210\u529F")),i==null||i.reload(),m(),(l=e.current)==null||l.resetFields()},children:[a(F,{name:"dictName",label:"\u5B57\u5178\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(F,{name:"dictType",label:"\u5B57\u5178\u7C7B\u578B",required:!0,rules:[{required:!0}]}),a(D.Group,{name:"status",label:"\u72B6\u6001",valueEnum:T,initialValue:S.ENABLE}),a(J,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const X=()=>{const{canAddSysDict:e}=d(),t=W();return a(r,{accessible:e,children:a(n,{icon:a(x,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Z=({dictType:e})=>{const t=j();return a(n,{type:"link",icon:a(k,{}),onClick:()=>t(e),children:"\u67E5\u770B"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const _=({record:e})=>{const t=$(),{canEditSysDict:s}=d();return a(r,{accessible:s,children:a(n,{type:"link",icon:a(M,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=({searchParams:e})=>{const{canExportSysDict:t}=d(),{isLoading:s,mutate:i}=E(()=>z(e),{onSuccess:()=>{h.success("\u5BFC\u51FA\u6210\u529F")}});return a(r,{accessible:t,children:a(n,{ghost:!0,type:"primary",icon:a(I,{}),loading:s,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const{canRemoveSysDict:e}=d();return a(r,{accessible:e,children:a(n,{danger:!0,icon:a(w,{}),onClick:()=>{A.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u5B57\u5178\u6570\u636E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await G(),h.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b=({dictId:e,disabled:t,isBatch:s})=>{const i=s?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:o}=d(),u=C(),{mutateAsync:p,isLoading:m}=E(()=>K({dictIds:e}),{onSuccess:()=>{var c;u==null||u.reload(),(c=u==null?void 0:u.clearSelected)==null||c.call(u),h.success("\u5220\u9664\u6210\u529F")}});return a(r,{accessible:o,children:a(n,{type:"link",danger:!0,disabled:t,icon:a(P,{}),onClick:()=>{A.confirm({title:"\u5220\u9664\u5B57\u5178",content:`\u786E\u5B9A\u5220\u9664\u5B57\u5178\u7F16\u53F7\u4E3A ${e} \u7684\u5B57\u5178\u5417\uFF1F`,onOk:async()=>p(),okButtonProps:{loading:m}})},children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>[{title:"\u5B57\u5178\u7F16\u53F7",dataIndex:"dictId",key:"dictId",valueType:"text",hideInSearch:!0},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"dictName",key:"dictName",valueType:"text"},{title:"\u5B57\u5178\u7C7B\u578B",dataIndex:"dictType",key:"dictType",valueType:"text"},{title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"select",valueEnum:T},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"\u64CD\u4F5C",valueType:"option",render:(e,t)=>B(O,{children:[a(Z,{dictType:t.dictType}),a(_,{record:t}),a(b,{dictId:t.dictId})]})}],ue=({selectedRows:e})=>a(b,{disabled:e.length===0,isBatch:!0,dictId:e.map(t=>t.dictId).join(",")}),ce=()=>{const e=U(),t=ae(),[s,i]=g.exports.useState({});return a(v,{rowKey:"dictId",actionRef:e,columns:t,tableAlertOptionRender:ue,request:async(...o)=>{const u=R(...o);return i(u),await Y(u)},toolbar:{actions:[a(te,{},"ButtonRefresh"),a(ee,{searchParams:s},"ButtonExport"),a(X,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>B(q,{children:[a(ce,{}),a(Q,{})]});export{ge as default};
