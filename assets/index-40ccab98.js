import{A as p,r as u,bE as C,j as e,aq as b,bF as T,bG as M,a2 as y,at as O,Z as j,bH as B,a6 as w,b as E,B as F}from"./index-186fd45b.js";import{u as P,a as x,O as R,b as S,c as h,d as I,e as q,f as V,g as k,B as G}from"./index-764e72be.js";import{u as H}from"./useRequest-c7d91432.js";import"./useMutation-c1b56ef0.js";import"./utils-36153baf.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const $=()=>{const{message:s}=p.useApp(),t=u.useRef(),o=P(),{open:i,actionType:n,ossConfigId:r}=x(),d=R[n],l=S(),g=()=>{var a;n===h.Edit&&((a=t.current)==null||a.resetFields()),l()},[,f]=u.useTransition();H(()=>C({ossConfigId:r}),{ready:i&&h.Edit&&!!r,onSuccess:a=>{f(()=>{var c;(c=t.current)==null||c.setFieldsValue(a)})},refreshDeps:[i]});const A=async a=>{var c;n===h.Add?await T(a):await M({ossConfigId:r,...a}),o==null||o.reload(),(c=t.current)==null||c.resetFields(),l(),s.success(`${d}成功`)},m=I();return e(b,{layoutType:"ModalForm",title:`${d}配置`,formRef:t,modalProps:{centered:!0,okText:"提交",onCancel:g},width:680,open:i,onFinish:A,columns:m})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const v=()=>{const s=q();return e(y,{accessKey:"system:oss:add",children:e(O,{onClick:s})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const D=({selectedRowKeys:s})=>e(G,{disabled:s.length===0,batch:!0,ossConfigIds:s}),K=()=>{const s=V(),t=k();return e(j,{rowKey:"ossConfigId",actionRef:s,columns:t,request:(...o)=>B(w(...o)),toolbar:{actions:[e(v,{},"ButtonAdd")]},tableAlertOptionRender:D})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(s,t){return this.cache.has(s)?this.cache.get(s):(this.cache.set(s,t),t)}};const N=()=>E(F,{children:[e(K,{}),e($,{})]});export{N as default};
