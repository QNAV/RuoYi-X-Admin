import{r,g as C,h as m,l as w,m as d,e as b,F as j,j as f,b as v,n as S,u as x,o as k,p as T,q as y}from"./index.0317b1cc.js";import{u as K,S as R}from"./index.11709832.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const P=e=>{const t=r.exports.useRef(),n=C(e);return r.exports.useEffect(()=>{t!=null&&t.current&&n(t.current)},[]),t};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const E=5,q=e=>{const[t,n]=K(),o=m(),a=w.find(c=>d(c,e)),s=a!==void 0;return r.exports.useEffect(()=>{s&&n(c=>{const h={...c,[a]:{children:o,pathname:e}},p=Object.keys(h);return p.length>E&&delete h[p[0]],h})},[e]),b(j,{children:[Object.entries(t).map(([c,h])=>f("div",{hidden:e!==h.pathname,children:h.children},c)),f("div",{hidden:s,children:!s&&o})]})},B=(e,t,n=!1)=>{const[o,a]=r.exports.useState(n),{pathname:s}=v();r.exports.useEffect(()=>{const c=d(e,s);!c&&o&&a(!1),!(!c||o)&&(a(!0),t())},[o,s])};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const D=()=>{const e=S(),t=x();return async()=>{await R(),k(),e.clear(),t("/login")}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const I=(e,t="checkbox",n=!0)=>{const[o,a]=r.exports.useState([]),[s,c]=r.exports.useState([]);return{selectedRows:s,selectedRowKeys:o,rowSelection:{alwaysShowAlert:n,type:t,selectedRowKeys:o,onChange:(i,l)=>{c(l),a(i)}},onClick:i=>{const l=i[e];let g=[i],u=[l];if(t==="checkbox")if(u=[...o],g=T(s),u.includes(l)){const A=o.indexOf(l);u.splice(A,1),g.splice(A,1)}else g.push(i),u.push(l);c(g),a(u)},clearSelection:()=>{c([]),a([])},setSelectedRowKeys:a,checkRowSelection:async(i="\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61")=>(s==null?void 0:s.length)===0?(y.warning(i),Promise.reject(i)):Promise.resolve(s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};export{q as a,P as b,I as c,B as d,D as u};
