import{s as P,v as B,g as E,w as h,r as T,j as a,ai as d,e as p,aH as k,q as l,a2 as A,aI as O,aJ as j,aK as R,aj as g,aL as I,aM as v,ap as D,aN as N,al as M,ak as q,F as V,am as K,aq as Y,aO as L,ar as W,O as X}from"./index.567b26ef.js";import{d as m}from"./index.6a149814.js";import{b as H,c as G}from"./index.313f45f7.js";import{a as J,u as U}from"./utils.00c28264.js";import{P as z}from"./index.eb70be5f.js";import{C as Q,a as Z,b as _}from"./index.2a557949.js";import{u as S}from"./useMutation.esm.d7b1d693.js";import"./useQuery.esm.ea9972e2.js";import"./utils.esm.b58c0c3e.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",P(void 0));F.debugLabel="atomMainTableActions";const x=()=>B(F),$=()=>H(F),f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",J({open:!1,actionType:"add"}));f.debugLabel="atomAddOrEditModal";const ee=()=>B(f),te=()=>{const e=E(f);return()=>{e({open:!0,actionType:"add"})}},ae=()=>{const e=E(f);return t=>{e({open:!0,actionType:"edit",record:t})}},oe=()=>U(f);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};async function se(e,t){return h("/system/config/add",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ce(e,t){return h("/system/config/export",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ie(e,t){return h("/system/config/list",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}async function ue(e){return h("/system/config/refreshCache",{method:"POST",...e||{}})}async function ne(e,t){return h("/system/config/remove",{method:"POST",params:{...e},...t||{}})}async function re(e,t){return h("/system/config/updateByKey",{method:"POST",headers:{"Content-Type":"application/json"},data:e,...t||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he=()=>{const e=T.exports.useRef(),{canAddSysConfig:t,canEditSysConfig:n}=m(),i=x(),{open:r,actionType:s,record:o}=ee(),C=oe(),y=()=>{var u;s==="edit"&&((u=e.current)==null||u.resetFields()),C()};return T.exports.useEffect(()=>{if(r&&s==="edit"){const u=setTimeout(()=>{var c;(c=e.current)==null||c.setFieldsValue(o),clearTimeout(u)},0)}},[r]),a(d,{accessible:t||n,children:p(k,{formRef:e,width:500,title:s==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:r,modalProps:{onCancel:y,okText:"\u63D0\u4EA4"},onFinish:async u=>{var c;s==="add"?(await se(u),l.success("\u65B0\u589E\u6210\u529F")):(await re({...u,configId:o.configId}),l.success("\u7F16\u8F91\u6210\u529F")),i==null||i.reload(),C(),(c=e.current)==null||c.resetFields()},children:[a(A,{name:"configName",label:"\u53C2\u6570\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"configKey",label:"\u53C2\u6570\u952E\u540D",required:!0,rules:[{required:!0}]}),a(A,{name:"configValue",label:"\u53C2\u6570\u952E\u503C",required:!0,rules:[{required:!0}]}),a(O.Group,{name:"configType",label:"\u7CFB\u7EDF\u5185\u7F6E",valueEnum:j,initialValue:R.YES}),a(z,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le={title:"\u53C2\u6570\u4E3B\u952E",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},de={title:"\u53C2\u6570\u540D\u79F0",dataIndex:"configName",key:"configName",valueType:"text"},ge={title:"\u53C2\u6570\u952E\u540D",dataIndex:"configKey",key:"configKey",valueType:"text"},me={title:"\u53C2\u6570\u952E\u503C",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},fe={title:"\u7CFB\u7EDF\u5185\u7F6E",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:j};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const{canAddSysConfig:e}=m(),t=te();return a(d,{accessible:e,children:a(g,{icon:a(I,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pe=({record:e})=>{const t=ae();return a(g,{type:"link",icon:a(v,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=({searchParams:e})=>{const{canExportSysConfig:t}=m(),{isLoading:n,mutate:i}=S(()=>ce(e),{onSuccess:()=>{l.success("\u5BFC\u51FA\u6210\u529F")}});return a(d,{accessible:t,children:a(g,{ghost:!0,type:"primary",icon:a(D,{}),loading:n,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const{canRemoveSysConfig:e}=m();return a(d,{accessible:e,children:a(g,{danger:!0,icon:a(N,{}),onClick:()=>{M.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u53C2\u6570\u8BBE\u7F6E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await ue(),l.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({configId:e,configName:t,disabled:n,isBatch:i})=>{const r=i?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:s}=m(),o=x(),{mutateAsync:C,isLoading:y}=S(async c=>{await ne({configIds:c})},{onSuccess:()=>{var c;o==null||o.reload(),(c=o==null?void 0:o.clearSelected)==null||c.call(o),l.success("\u5220\u9664\u6210\u529F")}});return a(d,{accessible:s,children:a(g,{type:"link",danger:!0,disabled:n,icon:a(q,{}),onClick:()=>{M.confirm({title:"\u5220\u9664\u53C2\u6570",content:p(V,{children:["\u786E\u5B9A\u5220\u9664\u53C2\u6570",a(K.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>C(e),okButtonProps:{loading:y}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b="configId",Te=({selectedRows:e})=>a(w,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(","),configName:e.map(t=>t.configName).join(",")}),Fe=()=>{const{rowSelection:e,onClick:t}=G(b),n=$(),[i,r]=T.exports.useState({});return a(Y,{rowKey:b,actionRef:n,columns:[le,de,ge,me,fe,Q,Z,_,{title:"\u64CD\u4F5C",valueType:"option",fixed:"right",render:(s,o)=>p(L,{children:[a(pe,{record:o}),a(w,{configId:o.configId,configName:o.configName})]})}],tableAlertOptionRender:Te,rowSelection:e,onRow:s=>({onClick:()=>{t(s)}}),request:async(...s)=>{const o=W(...s);return r(o),await ie(o)},toolbar:{actions:[a(Ae,{},"ButtonRefresh"),a(ye,{searchParams:i},"ButtonExport"),a(Ce,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ke=()=>p(X,{children:[a(Fe,{}),a(he,{})]});export{ke as default};
