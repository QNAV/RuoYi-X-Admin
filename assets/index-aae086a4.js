import{r as m,a,j as x,F as N}from"./jsx-runtime-f6344dff.js";import{ai as O,a9 as X,bN as Y,aw as M,bO as q,bP as K,bi as W,bj as $,bh as G,c2 as z,bk as H,bW as Q,aC as U}from"./index-a97495ec.js";import{L as D,i as j}from"./index-08a2e909.js";import{g as w}from"./index-fd3a1dc3.js";import{b as J,c as Z}from"./index-50e8979f.js";import{a as R,b as E,c as _,u as B}from"./index-fd298a71.js";import{a as ee,u as te}from"./utils-8a2715c5.js";import{x as ae,y as se,z as oe,A as ie,B as ce,C as re}from"./vanilla-b6611f9a.js";import{P as p}from"./index-7b09b545.js";import{P as de}from"./index-9e7bc3e5.js";import{P as I}from"./index-ede8e3e3.js";import{P as ne}from"./index-17c9a701.js";import{P as le}from"./index-45790abc.js";import{A as f}from"./index-b7d53254.js";import{u as F}from"./useMutation.esm-9d03bfaf.js";import{u as ue}from"./useRequest-560efa44.js";import"./utils.esm-ba37751a.js";import"./mutation.esm-1a12604b.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",R(void 0));S.debugLabel="atomMainTableActions";const V=()=>E(S),he=()=>J(S),v=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",R({dictType:"",dictName:""}));v.debugLabel="atomCurDictType";const me=()=>E(v),pe=()=>_(v);var C=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(C||{});const ye={[0]:"新增",[1]:"编辑"},y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",ee({actionType:0,open:!1}));y.debugLabel="atomAddOrEditModal";const Te=()=>E(y),ge=()=>te(y),be=()=>{const e=B(y);return()=>{e({actionType:0,open:!0})}},Ae=()=>{const e=B(y);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const e=m.useRef(),t=V(),{open:c,actionType:s,record:h}=Te(),u=ge(),T=()=>{var o;s===C.Edit&&((o=e.current)==null||o.resetFields()),u()},l=ye[s],{dictType:g,dictName:b}=me(),{defaultValueSysNormalDisable:d,valueEnumSysNormalDisable:i}=w(),n=async o=>{var r;s===C.Add?await ae(o):await se({...o,dictCode:h.dictCode}),u(),(r=e.current)==null||r.resetFields(),M.success(`${l}成功`),t==null||t.reload()};return m.useEffect(()=>{c&&m.startTransition(()=>{var o,r;s===C.Add?(o=e.current)==null||o.setFieldsValue({dictType:g,dictName:b}):(r=e.current)==null||r.setFieldsValue({...h,dictName:b})})},[c]),a(O,{accessible:!0,fallback:a(X,{children:"111"}),children:x(Y,{formRef:e,width:500,title:`${l}字典数据`,open:c,modalProps:{onCancel:T,okText:"提交"},onFinish:n,children:[a(p,{name:"dictName",label:"字典名称",readonly:!0}),a(p,{name:"dictType",label:"字典类型",hidden:!0}),a(p,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"样式属性"}),a(de,{name:"dictSort",label:"显示排序",initialValue:0}),a(I,{name:"listClass",label:"回显样式",valueEnum:D,initialValue:"default"}),a(ne.Group,{name:"status",label:"状态",valueEnum:i,initialValue:d}),a(le,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>{const e=be();return a(f,{accessKey:"system:dict:edit",children:a(q,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=({record:e})=>{const t=Ae();return a(f,{accessKey:"system:dict:edit",children:a(K,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=({searchParams:e})=>{const{isLoading:t,mutate:c}=F(oe,{onSuccess:()=>{M.success("导出成功")}});return a(f,{accessKey:"system:dict:export",children:a(W,{loading:t,onClick:()=>c(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=({dictCode:e,disabled:t,batch:c})=>{const s=V(),{mutateAsync:h,isLoading:u}=F(ie,{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),M.success("删除成功")}});return a(f,{accessKey:"system:dict:edit",children:a($,{batch:c,disabled:t,onClick:()=>{G.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>h({dictCodes:e}),okButtonProps:{loading:u}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ee=()=>{const{valueEnumSysNormalDisable:e}=w();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:D},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,c)=>x(N,{children:[a(xe,{record:c}),a(L,{dictCode:c.dictCode})]})}]},Se=({selectedRows:e})=>a(L,{disabled:e.length===0,batch:!0,dictCode:e.map(t=>t.dictCode).join(",")});let k;const ve=()=>{const e=z(),[t,c]=m.useState({}),s=he(),h=Ee(),u=m.useRef(),[T,l]=pe(),{data:g,run:b}=ue(async()=>(await ce()).reduce((i,n)=>(i[n.dictType]=n.dictName,i),{}),{ready:!!e.dictType,onSuccess:d=>{const i=e.dictType;l({dictType:i,dictName:d[i]}),m.startTransition(()=>{var n,o,r,A,P;(n=u.current)==null||n.setFieldsValue({dictType:i}),(r=(o=s==null?void 0:s.current)==null?void 0:o.clearSelected)==null||r.call(o),(P=(A=s.current)==null?void 0:A.reloadAndRest)==null||P.call(A)})}});return Z(()=>{e.dictType===void 0||e.dictType===k||(k=e.dictType,b())}),a(H,{rowKey:"dictCode",actionRef:s,columns:h,params:T,request:async(...d)=>{const i=j(...d);return c(i),await re(j(...d))},tableAlertOptionRender:Se,manualRequest:!0,toolbar:{actions:[a(Me,{searchParams:t},"ButtonExport"),a(fe,{},"ButtonAdd")]},headerTitle:a(Q,{formRef:u,children:a(I,{name:"dictType",valueEnum:g??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:d=>{var i,n,o,r;(n=(i=s==null?void 0:s.current)==null?void 0:i.clearSelected)==null||n.call(i),(r=(o=s.current)==null?void 0:o.reset)==null||r.call(o),l({dictType:d,dictName:g[d]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $e=()=>x(U,{children:[a(ve,{}),a(Ce,{})]});export{$e as default};
