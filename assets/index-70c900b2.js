import{Q as k,X as S,V as q,aS as G,aj as I,r as h,ak as N,a4 as B,j as a,aT as W,f as $,b as x,al as K,aU as Q,aV as U,p as M,Y as f,ao as H,ap as Z,aW as _,a0 as z,aX as J,a1 as ee,$ as te,aY as ae,aZ as se,a_ as oe,a2 as ce,a3 as w,a$ as ie,aI as re,q as ne,B as le}from"./index-b4f947db.js";import{a as de,u as ue}from"./utils-ca7c5bb3.js";import{P as T}from"./index-30b27df1.js";import{P}from"./index-a369b695.js";import{P as he}from"./index-1b56c351.js";import{P as V}from"./index-425b959c.js";import{P as me}from"./index-fd72065e.js";import{u as F}from"./useMutation-343b08de.js";import{u as pe}from"./useRequest-71d7981b.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};var O=(e=>(e.NONE="none",e.DEFAULT="default",e.ERROR="error",e.SUCCESS="success",e.PROCESSING="processing",e.WARNING="warning",e))(O||{});const Y=new Map([["none",{text:"无"}],["default",{text:"默认",status:"Default"}],["processing",{text:"进行中",status:"Processing"}],["warning",{text:"警告",status:"Warning"}],["error",{text:"错误",status:"Error"}],["success",{text:"成功",status:"Success"}]]);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const v=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",k(void 0));v.debugLabel="atomMainTableActions";const X=()=>S(v),ye=()=>q(v),D=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",k({dictType:"",dictName:""}));D.debugLabel="atomCurDictType";const Te=()=>S(D),ge=()=>G(D);var C=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(C||{});const Ae={[0]:"新增",[1]:"编辑"},g=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",de({actionType:0,open:!1}));g.debugLabel="atomAddOrEditModal";const be=()=>S(g),Ce=()=>ue(g),fe=()=>{const e=I(g);return()=>{e({actionType:0,open:!0})}},Ee=()=>{const e=I(g);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Se=()=>{const e=h.useRef(),t=X(),{open:n,actionType:s,record:i}=be(),m=Ce(),p=()=>{var o;s===C.Edit&&((o=e.current)==null||o.resetFields()),m()},u=Ae[s],{dictType:A,dictName:y}=Te(),{valueEnumSysYesNo:E}=N(),{defaultValueSysNormalDisable:l,valueEnumSysNormalDisable:c}=B(),d=async o=>{var r;s===C.Add?await Q(o):await U({...o,dictCode:i.dictCode}),m(),(r=e.current)==null||r.resetFields(),M.success(`${u}成功`),t==null||t.reload()};return h.useEffect(()=>{n&&h.startTransition(()=>{var o,r;s===C.Add?(o=e.current)==null||o.setFieldsValue({dictType:A,dictName:y}):(r=e.current)==null||r.setFieldsValue({...i,dictName:y})})},[n]),a(W,{accessible:!0,fallback:a($,{children:"111"}),children:x(K,{formRef:e,width:500,title:`${u}字典数据`,open:n,modalProps:{onCancel:p,okText:"提交"},onFinish:d,children:[a(T,{name:"dictName",label:"字典名称",readonly:!0}),a(T,{name:"dictType",label:"字典类型",hidden:!0}),a(T,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(T,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(P.Group,{name:"isDefault",label:"是否默认值",valueEnum:E}),a(T,{name:"cssClass",label:"样式属性"}),a(he,{name:"dictSort",label:"显示排序",initialValue:0}),a(V,{name:"listClass",label:"回显样式",valueEnum:Y,initialValue:O.NONE}),a(P.Group,{name:"status",label:"状态",valueEnum:c,initialValue:l}),a(me,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=()=>{const e=fe();return a(f,{accessKey:"system:dict:edit",children:a(H,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=({record:e})=>{const t=Ee();return a(f,{accessKey:"system:dict:edit",children:a(Z,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ve=({searchParams:e})=>{const{isLoading:t,mutate:n}=F(_,{onSuccess:()=>{M.success("导出成功")}});return a(f,{accessKey:"system:dict:export",children:a(z,{loading:t,onClick:()=>n(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=({dictCode:e,disabled:t,batch:n})=>{const s=X(),{mutateAsync:i,isLoading:m}=F(J,{onSuccess:()=>{var u;s==null||s.reload(),(u=s==null?void 0:s.clearSelected)==null||u.call(s),M.success("删除成功")}});return a(f,{accessKey:"system:dict:edit",children:a(ee,{batch:n,disabled:t,onClick:()=>{te.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>i({dictCodes:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const De=()=>{const{valueEnumSysNormalDisable:e}=B(),{valueEnumSysYesNo:t}=N();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"是否默认值",dataIndex:"isDefault",key:"isDefault",valueType:"radio",valueEnum:t,hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:Y},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(n,s)=>x(ne,{children:[a(Me,{record:s}),a(L,{dictCode:[s.dictCode]})]})}]},je=({selectedRowKeys:e})=>a(L,{disabled:e.length===0,batch:!0,dictCode:e});let R;const we="/system/dict/:dictType",Pe=()=>{const e=ae(),[t,n]=h.useState({}),s=se(we),i=ye(),m=De(),p=h.useRef(),[u,A]=ge(),{data:y,run:E}=pe(async()=>(await oe()).reduce((c,d)=>(c[d.dictType]=d.dictName,c),{}),{ready:!!e.dictType,onSuccess:l=>{const c=e.dictType;A({dictType:c,dictName:l[c]}),h.startTransition(()=>{var d,o,r,b,j;(d=p.current)==null||d.setFieldsValue({dictType:c}),(r=(o=i==null?void 0:i.current)==null?void 0:o.clearSelected)==null||r.call(o),(j=(b=i.current)==null?void 0:b.reloadAndRest)==null||j.call(b)})}});return h.useEffect(()=>{e.dictType===void 0||e.dictType===R||(R=e.dictType,E())},[s]),a(ce,{rowKey:"dictCode",actionRef:i,columns:m,params:u,request:async(...l)=>{const c=w(...l);return n(c),await ie(w(...l))},tableAlertOptionRender:je,manualRequest:!0,toolbar:{actions:[a(ve,{searchParams:t},"ButtonExport"),a(xe,{},"ButtonAdd")]},headerTitle:a(re,{formRef:p,children:a(V,{name:"dictType",valueEnum:y??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:l=>{var c,d,o,r;(d=(c=i==null?void 0:i.current)==null?void 0:c.clearSelected)==null||d.call(c),(r=(o=i.current)==null?void 0:o.reset)==null||r.call(o),A({dictType:l,dictName:y[l]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Xe=()=>x(le,{children:[a(Pe,{}),a(Se,{})]});export{Xe as default};
