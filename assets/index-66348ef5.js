import{aX as p,aY as f,d as a,aZ as i,aA as y,a_ as x,aH as c,a$ as u,b0 as T,b1 as I,r as b,au as C,b2 as v,b3 as k}from"./index-f3a5cdc1.js";import{a as A}from"./index-5aae54de.js";import{s as B,a as j,b as S,c as L}from"./Monitor-863f9ca1.js";import{u as r}from"./useMutation.esm-fd8ba37c.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",p(void 0));h.debugLabel="atomMainTableActions";const d=()=>f(h),M=()=>A(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const P=()=>{const e=d(),{isLoading:t,mutate:s}=r(B,{onSuccess:()=>{var n;c.success("清空成功"),e==null||e.reload(),(n=e==null?void 0:e.clearSelected)==null||n.call(e)}});return a(i,{accessKey:"monitor:logininfor:remove",children:a(y,{danger:!0,icon:a(x,{}),onClick:()=>{u.confirm({title:"操作确认",content:"确认清空访问记录吗？",okButtonProps:{loading:t},onOk:()=>s({})})},children:"清空"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const w=({searchParams:e})=>{const{isLoading:t,mutate:s}=r(j,{onSuccess:()=>{c.success("导出成功")}});return a(i,{accessKey:"monitor:logininfor:export",children:a(T,{loading:t,onClick:()=>s(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g=({infoId:e,disabled:t,batch:s})=>{const o=d(),{mutateAsync:n,isLoading:m}=r(S,{onSuccess:()=>{var l;c.success("删除成功"),o==null||o.reload(),(l=o==null?void 0:o.clearSelected)==null||l.call(o)}});return a(i,{accessKey:"monitor:logininfor:remove",children:a(I,{batch:s,disabled:t,onClick:()=>{u.confirm({title:"操作确认",content:`确定删除访问编号为 ${e} 的访问记录吗？`,onOk:()=>n({infoIds:e}),okButtonProps:{loading:m}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const R=[{title:"访问编号",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"用户名称",dataIndex:"userName",key:"userName",valueType:"text"},{title:"登录地址",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"登录地点",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"浏览器",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"操作信息",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"登录日期",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"操作",dataIndex:"option",key:"option",valueType:"option",fixed:"right",render:(e,t)=>a(g,{infoId:t.infoId})}],E=({selectedRows:e})=>a(g,{batch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")}),N=()=>{const e=M(),[t,s]=b.exports.useState({});return a(C,{children:a(v,{rowKey:"infoId",actionRef:e,columns:R,request:async(...o)=>{const n=k(...o);return s(n),await L(n)},toolbar:{actions:[a(P,{},"ButtonCleanUp"),a(w,{searchParams:t},"ButtonExport")]},tableAlertOptionRender:E})})};export{N as default};
