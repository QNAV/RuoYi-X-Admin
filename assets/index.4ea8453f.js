import{h as f,l as E,j as a,af as r,ag as h,ah as p,ai as F,Y as l,aj as x,g as c,F as T,ak as I,r as S,I as b,al as k,am as v,an as j}from"./index.7d45cff2.js";import{a as d}from"./index.80ac3ade.js";import{a as L}from"./index.5925ae2e.js";import{e as w,f as D,g as M,h as P}from"./SysLoginService.1dbc923f.js";import{u as g}from"./useMutation.esm.06815742.js";import"./useQuery.esm.9cf59493.js";import"./utils.esm.a4b259b3.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/monitor/logininfor/model/index.ts/atomMainTableActions",f(void 0));m.debugLabel="atomMainTableActions";const B=()=>E(m),R=()=>L(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const O=()=>{const{canRemoveSysOperLog:e}=d(),t=B(),{isLoading:s,mutate:u}=g(()=>w(),{onSuccess:()=>{t==null||t.reload(),l.success("\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55\u6210\u529F")}});return a(r,{accessible:e,children:a(h,{danger:!0,icon:a(p,{}),onClick:()=>F.confirm({title:"\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55",content:"\u6E05\u7A7A\u8BBF\u95EE\u8BB0\u5F55\u540E\u5C06\u65E0\u6CD5\u6062\u590D,\u786E\u8BA4\u6E05\u7A7A\u5417\uFF1F",okButtonProps:{loading:s},onOk:u}),children:"\u6E05\u7A7A"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=({searchParams:e})=>{const{canExportSysOperLog:t}=d(),{isLoading:s,mutate:u}=g(()=>D(e),{onSuccess:()=>{l.success("\u5BFC\u51FA\u6210\u529F")}});return a(r,{accessible:t,children:a(h,{ghost:!0,type:"primary",icon:a(x,{}),loading:s,onClick:()=>u(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=({infoId:e,disabled:t,isBatch:s})=>{const u=s?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysOperLog:n}=d(),o=B(),{mutateAsync:A,isLoading:C}=g(async i=>{await M({infoIds:i})},{onSuccess:()=>{var i;o==null||o.reload(),(i=o==null?void 0:o.clearSelected)==null||i.call(o),l.success("\u5220\u9664\u6210\u529F")}});return a(r,{accessible:n,children:a(h,{type:"link",danger:!0,disabled:t,icon:a(p,{}),onClick:()=>{F.confirm({title:"\u5220\u9664\u7CFB\u7EDF\u8BBF\u95EE\u8BB0\u5F55",content:c(T,{children:["\u786E\u5B9A\u5220\u9664\u8BBF\u95EE\u8BB0\u5F55",a(I.Text,{code:!0,children:e}),"\u5417\uFF1F"]}),onOk:async()=>A(e),okButtonProps:{loading:C}})},children:u})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Y=({selectedRows:e})=>c(j,{children:[c("span",{children:["\u5DF2\u9009\u62E9 ",e.length," \u9879"]}),a(y,{isBatch:!0,disabled:e.length===0,infoId:e.map(t=>t.infoId).join(",")})]}),J=()=>{const e=R(),[t,s]=S.exports.useState({});return a(b,{children:a(k,{rowKey:"infoId",actionRef:e,columns:[{title:"\u8BBF\u95EE\u7F16\u53F7",dataIndex:"infoId",key:"infoId",valueType:"text",hideInSearch:!0},{title:"\u7528\u6237\u540D\u79F0",dataIndex:"userName",key:"userName",valueType:"text"},{title:"\u767B\u5F55\u5730\u5740",dataIndex:"ipaddr",key:"ipaddr",valueType:"text"},{title:"\u767B\u5F55\u5730\u70B9",dataIndex:"loginLocation",key:"loginLocation",valueType:"text",hideInSearch:!0},{title:"\u6D4F\u89C8\u5668",dataIndex:"browser",key:"browser",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u64CD\u4F5C\u4FE1\u606F",dataIndex:"msg",key:"msg",valueType:"text",hideInSearch:!0},{title:"\u767B\u5F55\u65E5\u671F",dataIndex:"loginTime",key:"loginTime",valueType:"dateTime",hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",key:"option",valueType:"option",render:(u,n)=>a(y,{infoId:n.infoId}),fixed:"right"}],request:async(...u)=>{const n=v(...u);return s(n),await P(n)},toolbar:{actions:[a(O,{},"ButtonCleanUp"),a(V,{searchParams:t},"ButtonExport")]},rowSelection:{alwaysShowAlert:!0},tableAlertRender:Y})})};export{J as default};
