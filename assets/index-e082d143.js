import{b as R,F as b,j as f}from"./antdProComponents-6fa50338.js";import{a7 as x,h as i,F as p,Q as h,U as M,ao as A,T as y,ap as S,aq as L,ar as T}from"./index-dffabdf2.js";import{bm as j,J as C}from"./antd-5b22be5a.js";import{u as F}from"./useMutation-dd6321b2.js";import{a as m,u as l}from"./utils-300c3bed.js";import"./iconPark-f28c66b3.js";import"./wangEditor-77edb64d.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const g="systemMenu",u=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomSelectedMenuData",m({hasSelected:!1,selectedMenuId:0,selectedMenuName:"根目录"}));u.debugLabel="atomSelectedMenuData";const O=()=>l(u),B=()=>x(u),H=()=>i(u),c=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomModalAdd",m(!1));c.debugLabel="atomModalAdd";const K=()=>l(c),J=()=>{const e=p(c);return()=>e(!0)},U=()=>i(c),d=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomDrawerSelectIcon",m({open:!1,onSelected:void 0}));d.debugLabel="atomDrawerSelectIcon";const W=()=>l(d),z=()=>{const e=p(d);return t=>e({open:!0,onSelected:t})},E=()=>i(d),I=[g,"list"],G=(e={},t)=>h(I,async()=>{const s=await A(e),o=y(s,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:S(o),map:s.reduce((n,a)=>n.set(a.menuId,a),new Map),parentIds:Array.from(s.reduce((n,a)=>n.add(a.parentId),new Set))}},{onSuccess:s=>{t(s.parentIds)}}),Q=()=>{const e=M();return()=>e.invalidateQueries(I)},w=[g,"options"],Z=()=>h(w,async()=>{const e=await A({}),t=y(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:L(S(t)),map:e.reduce((s,o)=>s.set(o.menuId,o),new Map)}}),P=()=>{const e=M();return()=>e.invalidateQueries(w)},_=()=>{const e=Q(),t=P(),s=O(),{message:o,modal:n}=j.useApp(),{mutateAsync:a,isLoading:D}=F(async r=>{await T({menuId:r})},{onSuccess:async()=>{s(),await Promise.all([e(),t()]),o.success("删除成功")}});return r=>{n.confirm({title:"操作确认",content:R(b,{children:["确定删除菜单",f(C.Text,{code:!0,children:r.menuName}),"吗？"]}),onOk:()=>a(r.menuId),okButtonProps:{loading:D}})}};export{B as useAtomStateSelectedMenuData,E as useAtomValueDrawerSelectIcon,U as useAtomValueModalAdd,H as useAtomValueSelectedMenuData,_ as useDeleteMenu,W as useHideDrawerSelectIcon,K as useHideModalAdd,G as useQueryMenuList,Z as useQueryMenuOptions,Q as useReFetchMenuList,P as useReFetchMenuOptions,O as useResetSelectedMenuData,z as useShowDrawerSelectIcon,J as useShowModalAdd};
