import{cz as S,aY as c,aj as I,am as d,c9 as i,cX as l,cb as m,cY as M,cZ as D,a_ as w,j as R,h as C,d as b,cd as f,aH as j,c_ as x}from"./index-e0d25bb9.js";import{a as p,u as h}from"./utils-c91fee38.js";import{u as L}from"./useMutation.esm-003175c7.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const y="systemMenu",u=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomSelectedMenuData",p({hasSelected:!1,selectedMenuId:0,selectedMenuName:"根目录"}));u.debugLabel="atomSelectedMenuData";const O=()=>h(u),X=()=>S(u),k=()=>c(u),r=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/menu/model/index.tsx/atomAddModal",p(!1));r.debugLabel="atomAddModal";const q=()=>h(r),v=()=>{const e=I(r);return()=>e(!0)},N=()=>c(r),A=[y,"list"],T=()=>{const e=d();return()=>e.invalidateQueries(A)},V=(e={},a)=>i(A,async()=>{const t=await l(e),n=m(t,{id:"menuId",pId:"parentId",rootPId:null});return{treeData:M(n),map:t.reduce((o,s)=>o.set(s.menuId,s),new Map),parentIds:Array.from(t.reduce((o,s)=>o.add(s.parentId),new Set))}},{onSuccess:t=>{a(t.parentIds)}}),g=[y,"options"],P=()=>{const e=d();return()=>e.invalidateQueries(g)},B=()=>i(g,async()=>{const e=await l({}),a=m(e,{id:"menuId",pId:"parentId",rootPId:null});return{options:D(M(a)),map:e.reduce((t,n)=>t.set(n.menuId,n),new Map)}}),H=()=>{const e=T(),a=P(),t=O(),{mutateAsync:n,isLoading:o}=L(async s=>{await x({menuId:s})},{onSuccess:async()=>{t(),await Promise.all([e(),a()]),j.success("删除成功")}});return s=>{w.confirm({title:"操作确认",content:R(C,{children:["确定删除菜单",b(f.Text,{code:!0,children:s.menuName}),"吗？"]}),onOk:()=>n(s.menuId),okButtonProps:{loading:o}})}};export{X as useAtomStateSelectedMenuData,N as useAtomValueCreateModal,k as useAtomValueSelectedMenuData,H as useDeleteMenu,q as useHideCreateModal,V as useQueryMenuList,B as useQueryMenuOptions,T as useReFetchMenuList,P as useReFetchMenuOptions,O as useResetSelectedMenuData,v as useShowCreateModal};
