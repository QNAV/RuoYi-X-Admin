import{r as d,ar as qe,c as J,R as j,ao as le,a,bt as At,bb as Nt,ap as _t,aq as Dt,bD as Mt,N as Kt,g as Se,dm as Bt,q as Be,dn as zt,bM as Ue,ba as Lt,cn as Le,dp as kt,b as We,n as rt,k as Ge,d as c,j as L,h as Ae,A as Ot,_ as N,bi as Ce,dq as jt,dr as Ht,ds as $t,dt as qt,u as Wt,du as Gt,aX as Ft,aY as it,aj as Vt,ce as ot,dv as Xt,dw as Qt,dx as lt,dy as st,dz as ct,am as Yt,aH as ke,dA as Ut,ch as Fe,b$ as _e,dB as Jt,c3 as Zt,dC as ea,a0 as ta,aA as pe,dD as aa,aM as na,ca as ra,a_ as ia,dE as oa,ay as la,aG as sa,dF as ca,b1 as da,dG as ua,aF as ma,dH as pa,v as Ne,dI as dt,bT as ut,cp as mt,cq as pt,aD as ft,cs as ht,cm as Ve,dJ as fa,av as ha}from"./index-7040b8de.js";import{a as ga,b as xa}from"./index-ff3051fa.js";import{a as va,u as ya}from"./utils-b496a842.js";import{u as gt}from"./useMutation.esm-2ff2ea44.js";import{P as Je}from"./index-61c73354.js";import{S as Ze}from"./Skeleton-d6b166a4.js";import{i as et,u as Ca}from"./useRequest-7586f3c5.js";import{P as Sa}from"./index-841b52f1.js";var xt=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},ba=function(t){var r=t.prefixCls,n=t.className,o=t.avatar,l=t.title,i=t.description,m=xt(t,["prefixCls","className","avatar","title","description"]),s=d.exports.useContext(qe),S=s.getPrefixCls,p=S("list",r),f=J(p+"-item-meta",n),g=j.createElement("div",{className:p+"-item-meta-content"},l&&j.createElement("h4",{className:p+"-item-meta-title"},l),i&&j.createElement("div",{className:p+"-item-meta-description"},i));return j.createElement("div",le({},m,{className:f}),o&&j.createElement("div",{className:p+"-item-meta-avatar"},o),(l||i)&&g)},wa=function(t,r){var n=t.prefixCls,o=t.children,l=t.actions,i=t.extra,m=t.className,s=t.colStyle,S=xt(t,["prefixCls","children","actions","extra","className","colStyle"]),p=d.exports.useContext(Xe),f=p.grid,g=p.itemLayout,u=d.exports.useContext(qe),C=u.getPrefixCls,M=function(){var D;return d.exports.Children.forEach(o,function(I){typeof I=="string"&&(D=!0)}),D&&d.exports.Children.count(o)>1},P=function(){return g==="vertical"?!!i:!M()},w=C("list",n),E=l&&l.length>0&&j.createElement("ul",{className:w+"-item-action",key:"actions"},l.map(function(_,D){return j.createElement("li",{key:w+"-item-action-"+D},_,D!==l.length-1&&j.createElement("em",{className:w+"-item-action-split"}))})),y=f?"div":"li",h=j.createElement(y,le({},S,f?{}:{ref:r},{className:J(w+"-item",a({},w+"-item-no-flex",!P()),m)}),g==="vertical"&&i?[j.createElement("div",{className:w+"-item-main",key:"content"},o,E),j.createElement("div",{className:w+"-item-extra",key:"extra"},i)]:[o,E,At(i,{key:"extra"})]);return f?j.createElement(Nt,{ref:r,flex:1,style:s},h):h},vt=d.exports.forwardRef(wa);vt.Meta=ba;const Ia=vt;var Ea=function(t){var r,n,o=t.listBorderedCls,l=t.componentCls,i=t.paddingLG,m=t.margin,s=t.padding,S=t.listItemPaddingSM,p=t.marginLG,f=t.borderRadiusLG;return n={},a(n,""+o,(r={border:t.lineWidth+"px "+t.lineType+" "+t.colorBorder,borderRadius:f},a(r,l+"-header,"+l+"-footer,"+l+"-item",{paddingInline:i}),a(r,l+"-pagination",{margin:m+"px "+p+"px"}),r)),a(n,""+o+l+"-sm",a({},l+"-item,"+l+"-header,"+l+"-footer",{padding:S})),a(n,""+o+l+"-lg",a({},l+"-item,"+l+"-header,"+l+"-footer",{padding:s+"px "+i+"px"})),n},Ra=function(t){var r,n,o,l,i=t.componentCls,m=t.screenSM,s=t.screenMD,S=t.marginLG,p=t.marginSM,f=t.margin;return l={},a(l,"@media screen and (max-width:"+s+")",(r={},a(r,""+i,a({},i+"-item",a({},i+"-item-action",{marginInlineStart:S}))),a(r,i+"-vertical",a({},i+"-item",a({},i+"-item-extra",{marginInlineStart:S}))),r)),a(l,"@media screen and (max-width: "+m+")",(o={},a(o,""+i,a({},i+"-item",a({flexWrap:"wrap"},i+"-action",{marginInlineStart:p}))),a(o,i+"-vertical",a({},i+"-item",(n={flexWrap:"wrap-reverse"},a(n,i+"-item-main",{minWidth:t.contentWidth}),a(n,i+"-item-extra",{margin:"auto auto "+f+"px"}),n))),o)),l},Pa=function(t){var r,n,o,l,i,m,s=t.componentCls,S=t.antCls,p=t.controlHeight,f=t.minHeight,g=t.paddingSM,u=t.marginLG,C=t.padding,M=t.listItemPadding,P=t.colorPrimary,w=t.listItemPaddingSM,E=t.listItemPaddingLG,y=t.paddingXS,h=t.margin,_=t.colorText,D=t.colorTextDescription,I=t.motionDurationSlow,Z=t.lineWidth;return m={},a(m,""+s,le(le({},Mt(t)),(l={position:"relative","*":{outline:"none"}},a(l,s+"-header, "+s+"-footer",{background:"transparent",paddingBlock:g}),a(l,s+"-pagination",a({marginBlockStart:u,textAlign:"end"},S+"-pagination-options",{textAlign:"start"})),a(l,s+"-spin",{minHeight:f,textAlign:"center"}),a(l,s+"-items",{margin:0,padding:0,listStyle:"none"}),a(l,s+"-item",(o={display:"flex",alignItems:"center",justifyContent:"space-between",padding:M,color:_},a(o,s+"-item-meta",(r={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(r,s+"-item-meta-avatar",{marginInlineEnd:C}),a(r,s+"-item-meta-content",{flex:"1 0",width:0,color:_}),a(r,s+"-item-meta-title",{marginBottom:t.marginXXS,color:_,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":a({color:_,transition:"all "+I},"&:hover",{color:P})}),a(r,s+"-item-meta-description",{color:D,fontSize:t.fontSize,lineHeight:t.lineHeight}),r)),a(o,s+"-item-action",(n={flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(n,"& > li",a({position:"relative",display:"inline-block",padding:"0 "+y+"px",color:D,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(n,s+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:Z,height:Math.ceil(t.fontSize*t.lineHeight)-t.marginXXS*2,transform:"translateY(-50%)",backgroundColor:t.colorSplit}),n)),o)),a(l,s+"-empty",{padding:C+"px 0",color:D,fontSize:t.fontSizeSM,textAlign:"center"}),a(l,s+"-empty-text",{padding:C,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"}),a(l,s+"-item-no-flex",{display:"block"}),l))),a(m,s+"-grid "+S+"-col > "+s+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"}),a(m,s+"-vertical "+s+"-item",(i={alignItems:"initial"},a(i,s+"-item-main",{display:"block",flex:1}),a(i,s+"-item-extra",{marginInlineStart:u}),a(i,s+"-item-meta",a({marginBlockEnd:C},s+"-item-meta-title",{marginBlockEnd:g,color:_,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG})),a(i,s+"-item-action",{marginBlockStart:C,marginInlineStart:"auto","> li":a({padding:"0 "+C+"px"},"&:first-child",{paddingInlineStart:0})}),i)),a(m,s+"-split "+s+"-item",a({borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit},"&:last-child",{borderBlockEnd:"none"})),a(m,s+"-split "+s+"-header",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(m,s+"-split"+s+"-empty "+s+"-footer",{borderTop:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(m,s+"-loading "+s+"-spin-nested-loading",{minHeight:p}),a(m,s+"-split"+s+"-something-after-last-item "+S+"-spin-container > "+s+"-items > "+s+"-item:last-child",{borderBlockEnd:t.lineWidth+"px "+t.lineType+" "+t.colorSplit}),a(m,s+"-lg "+s+"-item",{padding:E}),a(m,s+"-sm "+s+"-item",{padding:w}),a(m,s+":not("+s+"-vertical)",a({},s+"-item-no-flex",a({},s+"-item-action",{float:"right"}))),m};const Ta=_t("List",function(e){var t=Dt(e,{listBorderedCls:e.componentCls+"-bordered",minHeight:e.controlHeightLG,listItemPadding:e.paddingContentVertical+"px "+e.paddingContentHorizontalLG+"px",listItemPaddingSM:e.paddingContentVerticalSM+"px "+e.paddingContentHorizontal+"px",listItemPaddingLG:e.paddingContentVerticalLG+"px "+e.paddingContentHorizontalLG+"px"});return[Pa(t),Ea(t),Ra(t)]},{contentWidth:220});var Aa=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},Xe=d.exports.createContext({});Xe.Consumer;function ze(e){var t,r=e.pagination,n=r===void 0?!1:r,o=e.prefixCls,l=e.bordered,i=l===void 0?!1:l,m=e.split,s=m===void 0?!0:m,S=e.className,p=e.children,f=e.itemLayout,g=e.loadMore,u=e.grid,C=e.dataSource,M=C===void 0?[]:C,P=e.size,w=e.header,E=e.footer,y=e.loading,h=y===void 0?!1:y,_=e.rowKey,D=e.renderItem,I=e.locale,Z=Aa(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),x=n&&Kt(n)==="object"?n:{},k=d.exports.useState(x.defaultCurrent||1),fe=Se(k,2),ne=fe[0],G=fe[1],he=d.exports.useState(x.defaultPageSize||10),se=Se(he,2),ge=se[0],ee=se[1],te=d.exports.useContext(qe),Y=te.getPrefixCls,K=te.renderEmpty,X=te.direction,O={current:1,total:0},A=function(T){return function(V,W){G(V),ee(W),n&&n[T]&&n[T](V,W)}},H=A("onChange"),$=A("onShowSizeChange"),ce=function(T,V){if(!D)return null;var W;return typeof _=="function"?W=_(T):_?W=T[_]:W=T.key,W||(W="list-item-"+V),d.exports.createElement(d.exports.Fragment,{key:W},D(T,V))},Q=function(){return!!(g||n||E)},de=function(T,V){return d.exports.createElement("div",{className:T+"-empty-text"},I&&I.emptyText||V("List"))},B=Y("list",o),Re=Ta(B),be=Se(Re,2),ae=be[0],Pe=be[1],U=h;typeof U=="boolean"&&(U={spinning:U});var q=U&&U.spinning,b="";switch(P){case"large":b="lg";break;case"small":b="sm";break}var z=J(B,(t={},a(t,B+"-vertical",f==="vertical"),a(t,B+"-"+b,b),a(t,B+"-split",s),a(t,B+"-bordered",i),a(t,B+"-loading",q),a(t,B+"-grid",!!u),a(t,B+"-something-after-last-item",Q()),a(t,B+"-rtl",X==="rtl"),t),S,Pe),v=le(le(le({},O),{total:M.length,current:ne,pageSize:ge}),n||{}),re=Math.ceil(v.total/v.pageSize);v.current>re&&(v.current=re);var ue=n?d.exports.createElement("div",{className:B+"-pagination"},d.exports.createElement(Bt,le({},v,{onChange:H,onShowSizeChange:$}))):null,ie=Be(M);n&&M.length>(v.current-1)*v.pageSize&&(ie=Be(M).splice((v.current-1)*v.pageSize,v.pageSize));var me=Object.keys(u||{}).some(function(R){return["xs","sm","md","lg","xl","xxl"].includes(R)}),we=zt(me),oe=d.exports.useMemo(function(){for(var R=0;R<Ue.length;R+=1){var T=Ue[R];if(we[T])return T}},[we]),xe=d.exports.useMemo(function(){if(!!u){var R=oe&&u[oe]?u[oe]:u.column;if(R)return{width:100/R+"%",maxWidth:100/R+"%"}}},[u==null?void 0:u.column,oe]),ve=q&&d.exports.createElement("div",{style:{minHeight:53}});if(ie.length>0){var Ie=ie.map(function(R,T){return ce(R,T)});ve=u?d.exports.createElement(Lt,{gutter:u.gutter},d.exports.Children.map(Ie,function(R){return d.exports.createElement("div",{key:R==null?void 0:R.key,style:xe},R)})):d.exports.createElement("ul",{className:B+"-items"},Ie)}else!p&&!q&&(ve=de(B,K||kt));var F=v.position||"bottom",ye=d.exports.useMemo(function(){return{grid:u,itemLayout:f}},[JSON.stringify(u),f]);return ae(d.exports.createElement(Xe.Provider,{value:ye},d.exports.createElement("div",le({className:z},Z),(F==="top"||F==="both")&&ue,w&&d.exports.createElement("div",{className:B+"-header"},w),d.exports.createElement(Le,le({},U),ve,p),E&&d.exports.createElement("div",{className:B+"-footer"},E),g||(F==="bottom"||F==="both")&&ue)))}ze.Item=Ia;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});var Na=yt.default=_a;function _a(e,t){for(var r=e,n=0;n<t.length;n+=1){if(r==null)return;r=r[t[n]]}return r}var Da=["title","subTitle","avatar","description","extra","content","actions","type"],Ma=Da.reduce(function(e,t){return e.set(t,!0),e},new Map),Ct={};function Me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Me=function(r){return typeof r}:Me=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Me(e)}Object.defineProperty(Ct,"__esModule",{value:!0});var Ka=Ct.default=Ha,He=Ba(d.exports);function St(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return St=function(){return e},e}function Ba(e){if(e&&e.__esModule)return e;if(e===null||Me(e)!=="object"&&typeof e!="function")return{default:e};var t=St();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=n?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function za(e,t){return ja(e)||Oa(e,t)||ka(e,t)||La()}function La(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ka(e,t){if(!!e){if(typeof e=="string")return tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(e,t)}}function tt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oa(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,l=void 0;try{for(var i=e[Symbol.iterator](),m;!(n=(m=i.next()).done)&&(r.push(m.value),!(t&&r.length===t));n=!0);}catch(s){o=!0,l=s}finally{try{!n&&i.return!=null&&i.return()}finally{if(o)throw l}}return r}}function ja(e){if(Array.isArray(e))return e}function Ha(e,t){var r=t||{},n=r.defaultValue,o=r.value,l=r.onChange,i=r.postState,m=He.useState(function(){return o!==void 0?o:n!==void 0?typeof n=="function"?n():n:typeof e=="function"?e():e}),s=za(m,2),S=s[0],p=s[1],f=o!==void 0?o:S;i&&(f=i(f));function g(C){p(C),f!==C&&l&&l(C,f)}var u=He.useRef(!0);return He.useEffect(function(){if(u.current){u.current=!1;return}o===void 0&&p(o)},[o]),[f,g]}var $a=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function qa(e){var t,r=e.prefixCls,n=e.expandIcon,o=n===void 0?c(jt,{}):n,l=e.onExpand,i=e.expanded,m=e.record,s=o,S="".concat(r,"-row-expand-icon"),p=function(g){l(!i),g.stopPropagation()};return typeof o=="function"&&(s=o({expanded:i,onExpand:l,record:m})),c("span",{className:J(S,(t={},a(t,"".concat(r,"-row-expanded"),i),a(t,"".concat(r,"-row-collapsed"),!i),t)),onClick:p,children:s})}function Wa(e){var t,r,n,o,l,i=e.prefixCls,m=d.exports.useContext(We.ConfigContext),s=m.getPrefixCls,S=d.exports.useContext(rt),p=S.hashId,f=s("pro-list",i),g="".concat(f,"-row"),u=e.title,C=e.subTitle,M=e.content,P=e.itemTitleRender;e.prefixCls;var w=e.actions;e.item,e.recordKey;var E=e.avatar,y=e.cardProps,h=e.description,_=e.isEditable,D=e.checkbox,I=e.index,Z=e.selected,x=e.loading,k=e.expand,fe=e.onExpand,ne=e.expandable,G=e.rowSupportExpand,he=e.showActions,se=e.showExtra,ge=e.type,ee=e.style,te=e.className,Y=te===void 0?g:te,K=e.record,X=e.onRow,O=e.onItem,A=e.itemHeaderRender,H=e.cardActionProps,$=e.extra,ce=Ge(e,$a),Q=ne||{},de=Q.expandedRowRender,B=Q.expandIcon,Re=Q.expandRowByClick,be=Q.indentSize,ae=be===void 0?8:be,Pe=Q.expandedRowClassName,U=Ka(!!k,{value:k,onChange:fe}),q=Se(U,2),b=q[0],z=q[1],v=J((t={},a(t,"".concat(g,"-selected"),!y&&Z),a(t,"".concat(g,"-show-action-hover"),he==="hover"),a(t,"".concat(g,"-type-").concat(ge),!!ge),a(t,"".concat(g,"-editable"),_),a(t,"".concat(g,"-show-extra-hover"),se==="hover"),t),p,g),re=J(p,a({},"".concat(Y,"-extra"),se==="hover")),ue=b||Object.values(ne||{}).length===0,ie=de&&de(K,I,ae,b),me=d.exports.useMemo(function(){if(!(!w||H==="actions"))return[c("div",{onClick:function(T){return T.stopPropagation()},children:w},"action")]},[w,H]),we=d.exports.useMemo(function(){if(!(!w||!H||H==="extra"))return[c("div",{onClick:function(T){return T.stopPropagation()},children:w},"action")]},[w,H]),oe=u||C?L("div",{className:"".concat(v,"-header-title ").concat(p),children:[u&&c("div",{className:"".concat(v,"-title ").concat(p),children:u}),C&&c("div",{className:"".concat(v,"-subTitle ").concat(p),children:C})]}):null,xe=(r=P&&(P==null?void 0:P(K,I,oe)))!==null&&r!==void 0?r:oe,ve=xe||E||C||h?c(ze.Item.Meta,{avatar:E,title:xe,description:h&&ue&&c("div",{className:"".concat(v,"-description ").concat(p),children:h})}):null,Ie=J(p,(n={},a(n,"".concat(v,"-item-has-checkbox"),D),a(n,"".concat(v,"-item-has-avatar"),E),a(n,v,v),n)),F=d.exports.useMemo(function(){return E||u?L(Ae,{children:[E&&c(Ot,{size:22,src:E,className:"".concat(s("list-item-meta-avatar")," ").concat(p)}),c("span",{className:"".concat(s("list-item-meta-title")," ").concat(p),children:u})]}):null},[E,s,p,u]),ye=y?c(Ce,N(N(N({bordered:!0,loading:x,hoverable:!0},y),{},{title:F,subTitle:C,extra:me,actions:we,bodyStyle:N({padding:24},y.bodyStyle)},O==null?void 0:O(K,I)),{},{children:c(Ze,{avatar:!0,title:!1,loading:x,active:!0,children:L("div",{className:"".concat(v,"-header ").concat(p),children:[P&&(P==null?void 0:P(K,I,oe)),M]})})})):c(ze.Item,N(N(N(N({className:J(Ie,a({},Y,Y!==g))},ce),{},{actions:me,extra:!!$&&c("div",{className:re,children:$})},X==null?void 0:X(K,I)),O==null?void 0:O(K,I)),{},{onClick:function(T){var V,W,De,je;X==null||(V=X(K,I))===null||V===void 0||(W=V.onClick)===null||W===void 0||W.call(V,T),O==null||(De=O(K,I))===null||De===void 0||(je=De.onClick)===null||je===void 0||je.call(De,T),Re&&z(!b)},children:L(Ze,{avatar:!0,title:!1,loading:x,active:!0,children:[L("div",{className:"".concat(v,"-header ").concat(p),children:[L("div",{className:"".concat(v,"-header-option ").concat(p),children:[!!D&&c("div",{className:"".concat(v,"-checkbox ").concat(p),children:D}),Object.values(ne||{}).length>0&&G&&qa({prefixCls:f,expandIcon:B,onExpand:z,expanded:b,record:K})]}),(o=A&&(A==null?void 0:A(K,I,ve)))!==null&&o!==void 0?o:ve]}),ue&&(M||ie)&&L("div",{className:"".concat(v,"-content ").concat(p),children:[M,de&&G&&c("div",{className:Pe&&Pe(K,I,ae),children:ie})]})]})}));return y?c("div",{className:J(p,(l={},a(l,"".concat(v,"-card"),y),a(l,Y,Y!==g),l)),style:ee,children:ye}):ye}var Ga=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Fa(e){var t=e.dataSource,r=e.columns,n=e.rowKey,o=e.showActions,l=e.showExtra,i=e.prefixCls,m=e.actionRef,s=e.itemTitleRender,S=e.renderItem,p=e.itemCardProps,f=e.itemHeaderRender,g=e.expandable,u=e.rowSelection,C=e.pagination,M=e.onRow,P=e.onItem,w=e.rowClassName,E=Ge(e,Ga),y=d.exports.useContext(rt),h=y.hashId,_=d.exports.useContext(We.ConfigContext),D=_.getPrefixCls,I=j.useMemo(function(){return typeof n=="function"?n:function(q,b){return q[n]||b}},[n]),Z=Ht(t,"children",I),x=Se(Z,1),k=x[0],fe=$t(t.length,N({responsive:!0},C),function(){}),ne=Se(fe,1),G=ne[0],he=j.useMemo(function(){if(C===!1||!G.pageSize||t.length<G.total)return t;var q=G.current,b=q===void 0?1:q,z=G.pageSize,v=z===void 0?10:z,re=t.slice((b-1)*v,b*v);return re},[t,G,C]),se=D("pro-list",i),ge=qt(u,{getRowKey:I,getRecordByKey:k,prefixCls:se,data:t,pageData:he,expandType:"row",childrenColumnName:"children",locale:{}}),ee=Se(ge,2),te=ee[0],Y=ee[1],K=g||{},X=K.expandedRowKeys,O=K.defaultExpandedRowKeys,A=K.defaultExpandAllRows,H=A===void 0?!0:A,$=K.onExpand,ce=K.onExpandedRowsChange,Q=K.rowExpandable,de=j.useState(function(){return O||(H!==!1?t.map(I):[])}),B=Se(de,2),Re=B[0],be=B[1],ae=j.useMemo(function(){return new Set(X||Re||[])},[X,Re]),Pe=j.useCallback(function(q){var b=I(q,t.indexOf(q)),z,v=ae.has(b);v?(ae.delete(b),z=Be(ae)):z=[].concat(Be(ae),[b]),be(z),$&&$(!v,q),ce&&ce(z)},[I,ae,t,$,ce]),U=te([])[0];return c(ze,N(N({},E),{},{className:J(D("pro-list-container",i),h,E.className),dataSource:he,pagination:C&&G,renderItem:function(b,z){var v,re,ue,ie={className:typeof w=="function"?w(b,z):w};r==null||r.forEach(function(F){var ye=F.listKey,R=F.cardActionProps;if(!!Ma.has(ye)){var T=F.dataIndex||ye||F.key,V=Array.isArray(T)?Na(b,T):b[T];R==="actions"&&ye==="actions"&&(ie.cardActionProps=R);var W=F.render?F.render(V,b,z):V;W!=="-"&&(ie[F.listKey]=W)}});var me;U&&U.render&&(me=U.render(b,b,z)||void 0);var we=((v=m.current)===null||v===void 0?void 0:v.isEditable(N(N({},b),{},{index:z})))||{},oe=we.isEditable,xe=we.recordKey,ve=Y.has(xe||z),Ie=c(Wa,N(N({cardProps:E.grid?N(N(N({},p),E.grid),{},{checked:ve,onChecked:j.isValidElement(me)?(re=me)===null||re===void 0||(ue=re.props)===null||ue===void 0?void 0:ue.onChange:void 0}):void 0},ie),{},{recordKey:xe,isEditable:oe||!1,expandable:g,expand:ae.has(I(b,z)),onExpand:function(){Pe(b)},index:z,record:b,item:b,showActions:o,showExtra:l,itemTitleRender:s,itemHeaderRender:f,rowSupportExpand:!Q||Q&&Q(b),selected:Y.has(I(b,z)),checkbox:me,onRow:M,onItem:P}),xe);return S?S(b,z,Ie):Ie}}))}var Va=function(t){var r,n,o,l,i,m;return a({},t.componentCls,(m={backgroundColor:"transparent"},a(m,"".concat(t.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(m,"&-row",(i={borderBlockEnd:"1px solid ".concat(t.colorSplit)},a(i,"".concat(t.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(i,"&:last-child",a({borderBlockEnd:"none"},"".concat(t.antCls,"-list-item"),{borderBlockEnd:"none"})),a(i,"&:hover",(r={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(r,"".concat(t.antCls,"-list-item-action"),{display:"block"}),a(r,"".concat(t.antCls,"-list-item-extra"),{display:"flex"}),a(r,"".concat(t.componentCls,"-row-extra"),{display:"block"}),a(r,"".concat(t.componentCls,"-row-subheader-actions"),{display:"block"}),r)),a(i,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(t.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(i,"&".concat(t.componentCls,"-row-editable"),a({},"".concat(t.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(i,"&".concat(t.componentCls,"-row-selected"),{backgroundColor:t.colorPrimaryBgHover,"&:hover":{backgroundColor:t.colorPrimaryBgHover}}),a(i,"&".concat(t.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),a(i,"&".concat(t.componentCls,"-row-type-inline"),a({},"".concat(t.componentCls,"-row-title"),{fontWeight:"normal"})),a(i,"&".concat(t.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(i,"&-show-action-hover",(n={},a(n,"".concat(t.antCls,`-list-item-action,
            `).concat(t.proComponentsCls,`-card-extra,
            `).concat(t.proComponentsCls,"-card-actions"),{display:"none"}),a(n,"&:hover",a({},"".concat(t.proComponentsCls,"-card-extra,").concat(t.proComponentsCls,"-card-actions"),{display:"flex"})),n)),a(i,"&-show-extra-hover",a({},"".concat(t.antCls,"-list-item-extra"),{display:"none"})),a(i,"&-extra",{display:"none"}),a(i,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:t.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(i,"&-expand-icon",{marginInlineEnd:8,color:t.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(i,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(i,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:t.colorPrimary}}),a(i,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(i,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(i,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(i,"&-avatar",{display:"flex"}),a(i,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),a(i,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(i,"&-header-option",{display:"flex"}),a(i,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(i,"&-no-split",(o={},a(o,"".concat(t.componentCls,"-row"),{borderBlockEnd:"none"}),a(o,"".concat(t.antCls,"-list ").concat(t.antCls,"-list-item"),{borderBlockEnd:"none"}),o)),a(i,"&-bordered",a({},"".concat(t.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(t.colorSplit)})),a(i,"".concat(t.antCls,"-list-vertical"),(l={},a(l,"".concat(t.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(l,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(l,"&-content",{marginBlock:0,marginInline:0}),a(l,"&-subTitle",{marginBlockStart:8}),a(l,"".concat(t.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(t.componentCls,"-row-description"),{marginBlockStart:16})),a(l,"".concat(t.antCls,"-list-bordered ").concat(t.antCls,"-list-item"),{paddingInline:0}),a(l,"".concat(t.componentCls,"-row-show-extra-hover"),a({},"".concat(t.antCls,"-list-item-extra "),{display:"none"})),l)),a(i,"".concat(t.antCls,"-list-pagination"),{marginBlockEnd:t.marginLG}),a(i,"".concat(t.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(i,"".concat(t.antCls,"-list-vertical .").concat(t.proComponentsCls,"-list-row ").concat(t.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(t.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(i,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),i)),m))};function Xa(e){return Wt("ProList",function(t){var r=N(N({},t),{},{componentCls:".".concat(e)});return[Va(r)]})}var Qa=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Ya(e){var t=e.metas,r=e.split,n=e.footer,o=e.rowKey,l=e.tooltip,i=e.className,m=e.options,s=m===void 0?!1:m,S=e.search,p=S===void 0?!1:S,f=e.expandable,g=e.showActions,u=e.showExtra,C=e.rowSelection,M=C===void 0?!1:C,P=e.pagination,w=P===void 0?!1:P,E=e.itemLayout,y=e.renderItem,h=e.grid,_=e.itemCardProps,D=e.onRow,I=e.onItem,Z=e.rowClassName,x=e.locale,k=e.itemHeaderRender,fe=e.itemTitleRender,ne=Ge(e,Qa),G=d.exports.useRef();d.exports.useImperativeHandle(ne.actionRef,function(){return G.current});var he=d.exports.useContext(We.ConfigContext),se=he.getPrefixCls,ge=d.exports.useMemo(function(){var O=[];return Object.keys(t||{}).forEach(function(A){var H=t[A]||{},$=H.valueType;$||(A==="avatar"&&($="avatar"),A==="actions"&&($="option"),A==="description"&&($="textarea")),O.push(N(N({listKey:A,dataIndex:(H==null?void 0:H.dataIndex)||A},H),{},{valueType:$}))}),O},[t]),ee=se("pro-list",e.prefixCls),te=Xa(ee),Y=te.wrapSSR,K=te.hashId,X=J(ee,K,a({},"".concat(ee,"-no-split"),!r));return Y(c(Gt,N(N({tooltip:l},ne),{},{actionRef:G,pagination:w,type:"list",rowSelection:M,search:p,options:s,className:J(ee,i,X),columns:ge,rowKey:o,tableViewRender:function(A){var H=A.columns,$=A.size,ce=A.pagination,Q=A.rowSelection,de=A.dataSource,B=A.loading;return c(Fa,{grid:h,itemCardProps:_,itemTitleRender:fe,prefixCls:e.prefixCls,columns:H,renderItem:y,actionRef:G,dataSource:de||[],size:$,footer:n,split:r,rowKey:o,expandable:f,rowSelection:M===!1?void 0:Q,showActions:g,showExtra:u,pagination:ce,itemLayout:E,loading:B,itemHeaderRender:k,onRow:D,onItem:I,rowClassName:Z,locale:x})}})))}var bt=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ua=globalThis&&globalThis.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,l=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)l.push(o.value)}catch(m){i={error:m}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return l},Ke=new Set,Ee,at={xs:0,sm:576,md:768,lg:992,xl:1200};function nt(){var e,t,r=Ee;if(wt(),r!==Ee)try{for(var n=bt(Ke),o=n.next();!o.done;o=n.next()){var l=o.value;l()}}catch(i){e={error:i}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}var $e=!1;function wt(){var e,t,r=window.innerWidth,n={},o=!1;try{for(var l=bt(Object.keys(at)),i=l.next();!i.done;i=l.next()){var m=i.value;n[m]=r>=at[m],n[m]!==Ee[m]&&(o=!0)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}o&&(Ee=n)}function Ja(){et&&!$e&&(Ee={},wt(),window.addEventListener("resize",nt),$e=!0);var e=Ua(d.exports.useState(Ee),2),t=e[0],r=e[1];return d.exports.useEffect(function(){if(!!et){var n=function(){r(Ee)};return Ke.add(n),function(){Ke.delete(n),Ke.size===0&&(window.removeEventListener("resize",nt),$e=!1)}}},[]),t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",Ft(void 0));Qe.debugLabel="atomRoleListActions";const Ye=()=>it(Qe),Za=()=>ga(Qe),Oe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",va({open:!1,roleId:0}));Oe.debugLabel="atomRoleDetails";const en=()=>ya(Oe),tn=()=>{const e=Vt(Oe);return t=>{e({open:!0,roleId:t})}},Te=()=>it(Oe),It="sysRole",Et=[It,"details"],Rt=e=>{const{roleId:t}=Te(),r=ot(Et,()=>Xt({roleId:t}),{onSuccess:e,enabled:!1});return d.exports.useEffect(()=>{t>0&&r.refetch()},[t]),r},Pt=[It,"tree"],an=e=>{const{roleId:t}=Te(),r=ot(Pt,async()=>{const{menus:n,checkedKeys:o}=await Qt({roleId:t});return{treeData:n,selectedMenuIds:o,selectedTreeData:lt(n,o),allMenuIds:st(n),allExpandedKeys:ct(n)}},{onSuccess:n=>{e(n.selectedTreeData)},enabled:!1});return d.exports.useEffect(()=>{t>0&&r.refetch()},[t]),r},Tt=e=>{const t=Yt();return gt(async r=>{const n=t.getQueryData(Et),o=t.getQueryData(Pt);await Ut({roleId:n.roleId,roleKey:n.roleKey,roleName:n.roleName,roleSort:n.roleSort,status:n.status,menuIds:o.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...r})},{onSuccess:async()=>{e(),ke.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const nn=()=>{const e=d.exports.useRef(),t=Ye(),{defaultValueSysNormalDisable:r,valueEnumSysNormalDisable:n}=Fe();return c(_e,{accessKey:"system:role:add",children:c(Jt,{title:"新增角色",trigger:c(Zt,{}),formRef:e,onFinish:async o=>{var l;return await ea({...o,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),t==null||t.reload(),ke.success("新增成功"),(l=e.current)==null||l.resetFields(),!0},width:500,modalProps:{okText:"提交"},layoutType:"ModalForm",columns:[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:n,valueType:"radio",formItemProps:{initialValue:r,required:!0,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{initialValue:0,required:!0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const rn=()=>{const e=ta(),{roleId:t,open:r}=Te();return c(_e,{accessKey:"system:user:edit",children:c(pe,{type:"primary",ghost:!0,onClick:()=>e(aa("/system/role-auth/:roleId",{roleId:t.toString()})),icon:c(na,{}),disabled:!r,children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const on=()=>{const e=Ye(),t=en(),{roleId:r,open:n}=Te();return c(_e,{accessKey:"system:role:remove",children:c(ra,{type:"primary",size:"middle",disabled:!n,onClick:()=>ia.confirm({title:"操作确认",content:`确定删除角色编号为 ${r} 的数据吗？`,onOk:async()=>{var l;await oa({roleIds:r}),e==null||e.reload(),(l=e==null?void 0:e.clearSelected)==null||l.call(e),t(),ke.success("删除成功")}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ln=()=>{const[e,t]=d.exports.useState([]),[r]=la.useForm(),{valueEnumSysNormalDisable:n}=Fe(),o=Ye(),{data:l,isFetching:i,refetch:m}=Rt(()=>{t([]),r.resetFields()}),{mutateAsync:s}=Tt(()=>{m(),o==null||o.reload()}),p=xa()("system:role:edit")?{form:r,editableKeys:e,onChange:(f,g)=>{if(t(f),f.length>0){const u=f[0];r.setFieldsValue({[u]:g[u]})}},onSave:async(f,g)=>{await s({[f]:g[f]})}}:void 0;return L(Le,{spinning:i,children:[c(Je,{column:2,columns:[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],dataSource:l}),c(sa,{}),c(Je,{column:2,columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:n,valueType:"radio"},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit"},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}],dataSource:l,editable:p})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const sn=()=>{const e=Za(),t=tn(),{valueEnumSysNormalDisable:r}=Fe();return c(Ya,{ghost:!0,rowKey:"roleId",actionRef:e,metas:{title:{title:"角色名称",dataIndex:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:r},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}},tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:n})=>{t(n)}},search:{filterType:"light"},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:(...n)=>ca(da(...n))})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const cn=()=>{const[e,t]=d.exports.useState([]),[r,n]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,m]=d.exports.useState([]),[s,S]=d.exports.useState(!1),[p,f]=d.exports.useState(!0),[g,u]=d.exports.useState(),C=d.exports.useRef(),{open:M,roleId:P}=Te(),{refetch:w}=Rt(({dataScope:x})=>{var k;u(x),(k=C.current)==null||k.setFieldsValue({dataScope:x})}),{loading:E,refresh:y,data:h}=Ca(async()=>{const{depts:x,checkedKeys:k}=await ua({roleId:P});return{treeData:x,selectedMenuIds:k,selectedTreeData:lt(x,k),allMenuIds:st(x),allExpandedKeys:ct(x)}},{ready:M,refreshDeps:[P],onSuccess:x=>{n(!1),m(x.selectedTreeData)}}),{isLoading:_,mutate:D}=gt(async()=>{await fa({roleId:P,dataScope:g,deptIds:e})},{onSuccess:()=>{y(),w(),ke.success("保存成功")}}),I=o.length===(h==null?void 0:h.allExpandedKeys.length),Z=x=>{var k;if(x||p){t((k=h==null?void 0:h.allMenuIds)!=null?k:[]);return}t([])};return d.exports.useEffect(()=>{if((h==null?void 0:h.allMenuIds.length)===e.length){S(!0),f(!1);return}if(e.length===0){S(!1),f(!1);return}f(!0)},[h==null?void 0:h.allMenuIds,e]),L(Ae,{children:[L("header",{className:"flex justify-between items-start flex-wrap",children:[c(ma,{formRef:C,submitter:!1,layout:"horizontal",children:c(Sa,{name:"dataScope",label:"数据权限范围",fieldProps:{options:pa,onChange:x=>{u(x)}},readonly:!r})}),c(_e,{accessKey:"system:role:edit",children:r?L(Ne,{children:[c(pe,{loading:_,onClick:()=>{var x;n(!1),m((x=h==null?void 0:h.selectedTreeData)!=null?x:[])},children:"取消编辑"}),c(pe,{type:"primary",ghost:!0,icon:c(dt,{}),loading:_,onClick:()=>D(),children:"保存"})]}):c(pe,{type:"primary",ghost:!0,icon:c(ut,{}),onClick:()=>{var x,k;n(!0),t((x=h==null?void 0:h.selectedMenuIds)!=null?x:[]),m((k=h==null?void 0:h.treeData)!=null?k:[])},children:"编辑数据权限"})})]}),g==="2"&&L(Ae,{children:[L(Ne,{wrap:!0,className:"my-2",children:[i.length>0&&c(pe,{size:"small",icon:I?c(mt,{}):c(pt,{}),onClick:()=>l(I?[]:h.allExpandedKeys),children:I?"全部折叠":"全部展开"}),r&&c(ft,{indeterminate:p,onChange:x=>Z(x.target.checked),checked:s,children:"全选/全不选"})]}),c(Le,{spinning:E,children:i.length>0?c(ht,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:x=>l(x),onCheck:x=>{t(x.checked)}}):c(Ve,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const dn=()=>{const[e,t]=d.exports.useState([]),[r,n]=d.exports.useState(!1),[o,l]=d.exports.useState([]),[i,m]=d.exports.useState([]),[s,S]=d.exports.useState(!1),[p,f]=d.exports.useState(!0),{isFetching:g,data:u,refetch:C}=an(y=>{n(!1),m(y)}),{isLoading:M,mutate:P}=Tt(()=>{C()}),w=o.length===(u==null?void 0:u.allExpandedKeys.length),E=y=>{var h;if(y||p){t((h=u==null?void 0:u.allMenuIds)!=null?h:[]);return}t([])};return d.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===e.length){S(!0),f(!1);return}if(e.length===0){S(!1),f(!1);return}f(!0)},[u==null?void 0:u.allMenuIds,e]),L(Ae,{children:[L("header",{className:"flex justify-between mb-2",children:[c(Ne,{wrap:!0,children:i.length>0&&c(pe,{size:"small",icon:w?c(mt,{}):c(pt,{}),onClick:()=>l(w?[]:u.allExpandedKeys),children:w?"全部折叠":"全部展开"})}),c(_e,{accessKey:"system:role:edit",children:r?L(Ne,{wrap:!0,children:[c(pe,{loading:M,onClick:()=>{var y;n(!1),m((y=u==null?void 0:u.selectedTreeData)!=null?y:[])},children:"取消编辑"}),c(pe,{type:"primary",ghost:!0,icon:c(dt,{}),loading:M,onClick:()=>P({menuIds:e}),children:"保存"})]}):c(pe,{type:"primary",ghost:!0,icon:c(ut,{}),onClick:()=>{var y,h;n(!0),t((y=u==null?void 0:u.selectedMenuIds)!=null?y:[]),m((h=u==null?void 0:u.treeData)!=null?h:[])},children:"编辑菜单权限"})})]}),L(Le,{spinning:g,children:[c("div",{className:"pl-1 mb-2",children:r&&c(ft,{indeterminate:p,onChange:y=>E(y.target.checked),checked:s,children:"全选/全不选"})}),i.length>0?c(ht,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:r,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:e,treeData:i,expandedKeys:o,onExpand:y=>l(y),onCheck:y=>{t(y.checked)}}):c(Ve,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const yn=()=>{const{xl:e}=Ja(),{open:t}=Te();return c(ha,{children:L(Ce,{ghost:!0,gutter:[16,16],wrap:!0,children:[c(Ce,{title:"角色列表",colSpan:{xxl:7,xl:10,lg:13,md:24,sm:24,xs:24},extra:c(nn,{}),children:c(sn,{})}),c(Ce,{split:"horizontal",title:"角色详情",colSpan:{xxl:17,xl:14,lg:11,md:24,sm:24,xs:24},extra:L(Ne,{children:[c(on,{}),c(rn,{})]}),className:"h-full",children:t?L(Ae,{children:[c(Ce,{children:c(ln,{})}),L(Ce,{split:e?"vertical":"horizontal",children:[c(Ce,{children:c(dn,{})}),c(Ce,{children:c(cn,{})})]})]}):c(Ve,{description:"点击选择左侧角色查看详情"})})]})})};export{yn as default};
