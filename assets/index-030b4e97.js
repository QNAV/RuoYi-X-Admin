import{j as o,B as v}from"./antdProComponents-d97761a4.js";import{e as S,h as C,f as w,F as b,A as g,G as B,as as R,l as P,g as i,at as F,au as N,av as O,aw as k,ax as L,L as V,d as q,ay as X,m as Y,B as K}from"./index-7df8d6db.js";import{a as W,u as $}from"./utils-6d3e551f.js";import{b6 as j,r as T}from"./antd-79b0e736.js";import{u as D}from"./useMutation-6894a2eb.js";import"./iconPark-31f72c99.js";import"./wangEditor-f0c73729.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const A=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",S(void 0));A.debugLabel="atomMainTableActions";const x=()=>C(A),Q=()=>w(A);var m=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(m||{});const G={0:"新增",1:"编辑"},n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:0}));n.debugLabel="atomAddOrEditModal";const H=()=>C(n),_=()=>{const e=b(n);return()=>{e({open:!0,actionType:0})}},z=()=>{const e=b(n);return t=>{e({open:!0,actionType:1,record:t})}},J=()=>$(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const U=({record:e})=>{const t=z();return o.jsx(g,{accessKey:"system:notice:edit",children:o.jsx(B,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=({noticeIds:e,disabled:t,batch:a})=>{const s=x(),{message:r,modal:l}=j.useApp(),{mutate:u,isLoading:p}=D(R,{onSuccess:()=>{var h;s==null||s.reload(),(h=s==null?void 0:s.clearSelected)==null||h.call(s),r.success("删除成功")}}),d=()=>{l.confirm({title:"操作确认",content:`确定删除公告编号为 ${e.join(",")} 的公告通知吗？`,onOk:()=>u({noticeIds:e}),okButtonProps:{loading:p}})};return o.jsx(g,{accessKey:"system:notice:remove",children:o.jsx(P,{batch:a,disabled:t,onClick:d})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const[Z]=i({title:"公告编号",dataIndex:"noticeId",table:{valueType:"text",hideInSearch:!0}}),[ee,,te]=i({title:"公告标题",dataIndex:"noticeTitle",table:{valueType:"text"},form:{valueType:"text",formItemProps:{rules:[{required:!0}]}}}),I=()=>{const{valueEnumSysNoticeType:e}=N();return i({title:"公告类型",dataIndex:"noticeType",valueEnum:e,table:{valueType:"select"},form:{valueType:"select",formItemProps:{rules:[{required:!0}]}}})},oe="NORMAL",M=()=>{const{valueEnumSysNoticeStatus:e}=O();return i({title:"状态",dataIndex:"status",valueEnum:e,table:{valueType:"select",hideInSearch:!0},form:{valueType:"radio",formItemProps:{rules:[{required:!0}]},initialValue:oe}})},[se]=i({title:"创建者",dataIndex:"createBy",table:{valueType:"text"}}),[ae]=i({title:"创建时间",dataIndex:"createTime",table:{valueType:"dateTime",hideInSearch:!0,sorter:!0}}),ce=()=>{const[e]=I(),[t]=M();return[Z,ee,e,t,se,ae,{title:"操作",valueType:"option",render:(a,s)=>o.jsxs(o.Fragment,{children:[o.jsx(U,{record:s}),o.jsx(f,{noticeIds:[s.noticeId]})]})}]},ie=()=>{const[,,e]=I(),[,,t]=M();return[te,e,t,{name:"noticeContent",title:"内容",colProps:{span:24},renderFormItem:()=>o.jsx(F,{})}]};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const e=T.useRef(),{message:t}=j.useApp(),a=x(),{open:s,actionType:r,record:l}=H(),u=J(),p=()=>{var c;r===m.Edit&&((c=e.current)==null||c.resetFields()),u()},d=G[r],h=async c=>{var y;r===m.Add?await k(c):await L({...c,noticeId:l.noticeId}),u(),(y=e.current)==null||y.resetFields(),a==null||a.reload(),t.success(`${d}成功`)},E=ie();return T.useEffect(()=>{s&&m.Edit&&T.startTransition(()=>{var c;(c=e.current)==null||c.setFieldsValue(l)})},[s]),o.jsx(v,{title:`${d}公告通知`,layoutType:"ModalForm",grid:!0,colProps:{span:12},open:s,modalProps:{onCancel:p,okText:"提交"},columns:E,formRef:e,width:800,onFinish:h})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{const e=_();return o.jsx(g,{accessKey:"system:notice:add",children:o.jsx(V,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=({selectedRowKeys:e})=>o.jsx(f,{batch:!0,disabled:e.length===0,noticeIds:e}),ue=()=>{const e=Q(),t=ce();return o.jsx(q,{rowKey:"noticeId",actionRef:e,columns:t,request:(...a)=>X(Y(...a)),tableAlertOptionRender:le,toolbar:{actions:[o.jsx(ne,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ye=()=>o.jsxs(K,{children:[o.jsx(ue,{}),o.jsx(re,{})]});export{ye as default};
