import{r as u,R as O,j as c,a as z,F as Ae}from"./jsx-runtime-ade36ecc.js";import{am as Ge,q as J,aj as se,p as a,aY as Et,be as Rt,ak as Pt,al as Tt,aS as At,a2 as Nt,w as Ce,c1 as _t,G as Be,c2 as Mt,aW as Ze,bd as Dt,aO as Le,c3 as Kt,C as Fe,D as it,z as Ve,Q as Bt,_ as A,aP as ye,c4 as zt,c5 as Lt,c6 as kt,c7 as Ot,o as jt,c8 as $t,i as ke,c9 as Ht,bD as Wt,h as Gt,ae as Te,ca as Ft,aH as Vt,bb as qt,M as Xt,aw as Qt,aD as Yt,aC as Ut,O as We,cb as Jt,b2 as Zt,bJ as ea,bK as ta,aA as st,bM as lt,bI as qe,cc as aa,cd as na,as as ra}from"./index-b934b6f1.js";import{A as Ne}from"./index-f3aaf2f1.js";import{g as Xe}from"./index-82dd668d.js";import{d as oa,u as ia}from"./index-e8ebb2fb.js";import{b as sa,c as ct,u as la,a as dt,W as ca,X as da,Y as ua,Z as ma,_ as pa,$ as fa,a0 as ha,a1 as ga}from"./index-f0c25568.js";import{x as ut,y as mt,z as pt,j as xa,O as va}from"./index-38bde88c.js";import{a as ya,u as Ca}from"./utils-0003b888.js";import{u as Sa}from"./utils.esm-a5e05982.js";import{u as Qe}from"./useMutation.esm-6b615c1b.js";import{P as et}from"./index-b7521d51.js";import{S as tt}from"./Skeleton-51d752d9.js";import{i as at,u as ba}from"./useRequest-99548ac9.js";import{P as wa}from"./index-09123ebf.js";import"./mutation.esm-938fa488.js";var ft=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ia=function(e){var n=e.prefixCls,r=e.className,i=e.avatar,s=e.title,o=e.description,m=ft(e,["prefixCls","className","avatar","title","description"]),l=u.exports.useContext(Ge),C=l.getPrefixCls,p=C("list",n),f=J(p+"-item-meta",r),h=O.createElement("div",{className:p+"-item-meta-content"},s&&O.createElement("h4",{className:p+"-item-meta-title"},s),o&&O.createElement("div",{className:p+"-item-meta-description"},o));return O.createElement("div",se({},m,{className:f}),i&&O.createElement("div",{className:p+"-item-meta-avatar"},i),(s||o)&&h)},Ea=function(e,n){var r=e.prefixCls,i=e.children,s=e.actions,o=e.extra,m=e.className,l=e.colStyle,C=ft(e,["prefixCls","children","actions","extra","className","colStyle"]),p=u.exports.useContext(Ye),f=p.grid,h=p.itemLayout,d=u.exports.useContext(Ge),y=d.getPrefixCls,B=function(){var _;return u.exports.Children.forEach(i,function(b){typeof b=="string"&&(_=!0)}),_&&u.exports.Children.count(i)>1},R=function(){return h==="vertical"?!!o:!B()},I=y("list",r),g=s&&s.length>0&&O.createElement("ul",{className:I+"-item-action",key:"actions"},s.map(function(N,_){return O.createElement("li",{key:I+"-item-action-"+_},N,_!==s.length-1&&O.createElement("em",{className:I+"-item-action-split"}))})),L=f?"div":"li",x=O.createElement(L,se({},C,f?{}:{ref:n},{className:J(I+"-item",a({},I+"-item-no-flex",!R()),m)}),h==="vertical"&&o?[O.createElement("div",{className:I+"-item-main",key:"content"},i,g),O.createElement("div",{className:I+"-item-extra",key:"extra"},o)]:[i,g,Et(o,{key:"extra"})]);return f?O.createElement(Rt,{ref:n,flex:1,style:l},x):x},ht=u.exports.forwardRef(Ea);ht.Meta=Ia;const Ra=ht;var Pa=function(e){var n,r,i=e.listBorderedCls,s=e.componentCls,o=e.paddingLG,m=e.margin,l=e.padding,C=e.listItemPaddingSM,p=e.marginLG,f=e.borderRadiusLG;return r={},a(r,""+i,(n={border:e.lineWidth+"px "+e.lineType+" "+e.colorBorder,borderRadius:f},a(n,s+"-header,"+s+"-footer,"+s+"-item",{paddingInline:o}),a(n,s+"-pagination",{margin:m+"px "+p+"px"}),n)),a(r,""+i+s+"-sm",a({},s+"-item,"+s+"-header,"+s+"-footer",{padding:C})),a(r,""+i+s+"-lg",a({},s+"-item,"+s+"-header,"+s+"-footer",{padding:l+"px "+o+"px"})),r},Ta=function(e){var n,r,i,s,o=e.componentCls,m=e.screenSM,l=e.screenMD,C=e.marginLG,p=e.marginSM,f=e.margin;return s={},a(s,"@media screen and (max-width:"+l+")",(n={},a(n,""+o,a({},o+"-item",a({},o+"-item-action",{marginInlineStart:C}))),a(n,o+"-vertical",a({},o+"-item",a({},o+"-item-extra",{marginInlineStart:C}))),n)),a(s,"@media screen and (max-width: "+m+")",(i={},a(i,""+o,a({},o+"-item",a({flexWrap:"wrap"},o+"-action",{marginInlineStart:p}))),a(i,o+"-vertical",a({},o+"-item",(r={flexWrap:"wrap-reverse"},a(r,o+"-item-main",{minWidth:e.contentWidth}),a(r,o+"-item-extra",{margin:"auto auto "+f+"px"}),r))),i)),s},Aa=function(e){var n,r,i,s,o,m,l=e.componentCls,C=e.antCls,p=e.controlHeight,f=e.minHeight,h=e.paddingSM,d=e.marginLG,y=e.padding,B=e.listItemPadding,R=e.colorPrimary,I=e.listItemPaddingSM,g=e.listItemPaddingLG,L=e.paddingXS,x=e.margin,N=e.colorText,_=e.colorTextDescription,b=e.motionDurationSlow,Z=e.lineWidth;return m={},a(m,""+l,se(se({},At(e)),(s={position:"relative","*":{outline:"none"}},a(s,l+"-header, "+l+"-footer",{background:"transparent",paddingBlock:h}),a(s,l+"-pagination",a({marginBlockStart:d,textAlign:"end"},C+"-pagination-options",{textAlign:"start"})),a(s,l+"-spin",{minHeight:f,textAlign:"center"}),a(s,l+"-items",{margin:0,padding:0,listStyle:"none"}),a(s,l+"-item",(i={display:"flex",alignItems:"center",justifyContent:"space-between",padding:B,color:N},a(i,l+"-item-meta",(n={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(n,l+"-item-meta-avatar",{marginInlineEnd:y}),a(n,l+"-item-meta-content",{flex:"1 0",width:0,color:N}),a(n,l+"-item-meta-title",{marginBottom:e.marginXXS,color:N,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":a({color:N,transition:"all "+b},"&:hover",{color:R})}),a(n,l+"-item-meta-description",{color:_,fontSize:e.fontSize,lineHeight:e.lineHeight}),n)),a(i,l+"-item-action",(r={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(r,"& > li",a({position:"relative",display:"inline-block",padding:"0 "+L+"px",color:_,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(r,l+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:Z,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),r)),i)),a(s,l+"-empty",{padding:y+"px 0",color:_,fontSize:e.fontSizeSM,textAlign:"center"}),a(s,l+"-empty-text",{padding:y,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),a(s,l+"-item-no-flex",{display:"block"}),s))),a(m,l+"-grid "+C+"-col > "+l+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:x,paddingBlock:0,borderBlockEnd:"none"}),a(m,l+"-vertical "+l+"-item",(o={alignItems:"initial"},a(o,l+"-item-main",{display:"block",flex:1}),a(o,l+"-item-extra",{marginInlineStart:d}),a(o,l+"-item-meta",a({marginBlockEnd:y},l+"-item-meta-title",{marginBlockEnd:h,color:N,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),a(o,l+"-item-action",{marginBlockStart:y,marginInlineStart:"auto","> li":a({padding:"0 "+y+"px"},"&:first-child",{paddingInlineStart:0})}),o)),a(m,l+"-split "+l+"-item",a({borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit},"&:last-child",{borderBlockEnd:"none"})),a(m,l+"-split "+l+"-header",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),a(m,l+"-split"+l+"-empty "+l+"-footer",{borderTop:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),a(m,l+"-loading "+l+"-spin-nested-loading",{minHeight:p}),a(m,l+"-split"+l+"-something-after-last-item "+C+"-spin-container > "+l+"-items > "+l+"-item:last-child",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),a(m,l+"-lg "+l+"-item",{padding:g}),a(m,l+"-sm "+l+"-item",{padding:I}),a(m,l+":not("+l+"-vertical)",a({},l+"-item-no-flex",a({},l+"-item-action",{float:"right"}))),m};const Na=Pt("List",function(t){var e=Tt(t,{listBorderedCls:t.componentCls+"-bordered",minHeight:t.controlHeightLG,listItemPadding:t.paddingContentVertical+"px "+t.paddingContentHorizontalLG+"px",listItemPaddingSM:t.paddingContentVerticalSM+"px "+t.paddingContentHorizontal+"px",listItemPaddingLG:t.paddingContentVerticalLG+"px "+t.paddingContentHorizontalLG+"px"});return[Aa(e),Pa(e),Ta(e)]},{contentWidth:220});var _a=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ye=u.exports.createContext({});Ye.Consumer;function ze(t){var e,n=t.pagination,r=n===void 0?!1:n,i=t.prefixCls,s=t.bordered,o=s===void 0?!1:s,m=t.split,l=m===void 0?!0:m,C=t.className,p=t.children,f=t.itemLayout,h=t.loadMore,d=t.grid,y=t.dataSource,B=y===void 0?[]:y,R=t.size,I=t.header,g=t.footer,L=t.loading,x=L===void 0?!1:L,N=t.rowKey,_=t.renderItem,b=t.locale,Z=_a(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),w=r&&Nt(r)==="object"?r:{},q=u.exports.useState(w.defaultCurrent||1),pe=Ce(q,2),ne=pe[0],G=pe[1],fe=u.exports.useState(w.defaultPageSize||10),le=Ce(fe,2),he=le[0],ee=le[1],te=u.exports.useContext(Ge),Y=te.getPrefixCls,M=te.renderEmpty,X=te.direction,k={current:1,total:0},T=function(P){return function(V,W){G(V),ee(W),r&&r[P]&&r[P](V,W)}},j=T("onChange"),$=T("onShowSizeChange"),ce=function(P,V){if(!_)return null;var W;return typeof N=="function"?W=N(P):N?W=P[N]:W=P.key,W||(W="list-item-"+V),u.exports.createElement(u.exports.Fragment,{key:W},_(P,V))},Q=function(){return!!(h||r||g)},de=function(P,V){return u.exports.createElement("div",{className:P+"-empty-text"},b&&b.emptyText||V("List"))},D=Y("list",i),Ee=Na(D),Se=Ce(Ee,2),ae=Se[0],Re=Se[1],U=x;typeof U=="boolean"&&(U={spinning:U});var H=U&&U.spinning,S="";switch(R){case"large":S="lg";break;case"small":S="sm";break}var K=J(D,(e={},a(e,D+"-vertical",f==="vertical"),a(e,D+"-"+S,S),a(e,D+"-split",l),a(e,D+"-bordered",o),a(e,D+"-loading",H),a(e,D+"-grid",!!d),a(e,D+"-something-after-last-item",Q()),a(e,D+"-rtl",X==="rtl"),e),C,Re),v=se(se(se({},k),{total:B.length,current:ne,pageSize:he}),r||{}),re=Math.ceil(v.total/v.pageSize);v.current>re&&(v.current=re);var ue=r?u.exports.createElement("div",{className:D+"-pagination"},u.exports.createElement(_t,se({},v,{onChange:j,onShowSizeChange:$}))):null,oe=Be(B);r&&B.length>(v.current-1)*v.pageSize&&(oe=Be(B).splice((v.current-1)*v.pageSize,v.pageSize));var me=Object.keys(d||{}).some(function(E){return["xs","sm","md","lg","xl","xxl"].includes(E)}),be=Mt(me),ie=u.exports.useMemo(function(){for(var E=0;E<Ze.length;E+=1){var P=Ze[E];if(be[P])return P}},[be]),ge=u.exports.useMemo(function(){if(d){var E=ie&&d[ie]?d[ie]:d.column;if(E)return{width:100/E+"%",maxWidth:100/E+"%"}}},[d==null?void 0:d.column,ie]),xe=H&&u.exports.createElement("div",{style:{minHeight:53}});if(oe.length>0){var we=oe.map(function(E,P){return ce(E,P)});xe=d?u.exports.createElement(Dt,{gutter:d.gutter},u.exports.Children.map(we,function(E){return u.exports.createElement("div",{key:E==null?void 0:E.key,style:ge},E)})):u.exports.createElement("ul",{className:D+"-items"},we)}else!p&&!H&&(xe=de(D,M||Kt));var F=v.position||"bottom",ve=u.exports.useMemo(function(){return{grid:d,itemLayout:f}},[JSON.stringify(d),f]);return ae(u.exports.createElement(Ye.Provider,{value:ve},u.exports.createElement("div",se({className:K},Z),(F==="top"||F==="both")&&ue,I&&u.exports.createElement("div",{className:D+"-header"},I),u.exports.createElement(Le,se({},U),xe,p),g&&u.exports.createElement("div",{className:D+"-footer"},g),h||(F==="bottom"||F==="both")&&ue)))}ze.Item=Ra;var gt={};Object.defineProperty(gt,"__esModule",{value:!0});var Ma=gt.default=Da;function Da(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}var Ka=["title","subTitle","avatar","description","extra","content","actions","type"],Ba=Ka.reduce(function(t,e){return t.set(e,!0),t},new Map),xt={};function De(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?De=function(n){return typeof n}:De=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},De(t)}Object.defineProperty(xt,"__esModule",{value:!0});var za=xt.default=Wa,$e=La(u.exports);function vt(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return vt=function(){return t},t}function La(t){if(t&&t.__esModule)return t;if(t===null||De(t)!=="object"&&typeof t!="function")return{default:t};var e=vt();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=r?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function ka(t,e){return Ha(t)||$a(t,e)||ja(t,e)||Oa()}function Oa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ja(t,e){if(t){if(typeof t=="string")return nt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(t,e)}}function nt(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $a(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),m;!(r=(m=o.next()).done)&&(n.push(m.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,s=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function Ha(t){if(Array.isArray(t))return t}function Wa(t,e){var n=e||{},r=n.defaultValue,i=n.value,s=n.onChange,o=n.postState,m=$e.useState(function(){return i!==void 0?i:r!==void 0?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=ka(m,2),C=l[0],p=l[1],f=i!==void 0?i:C;o&&(f=o(f));function h(y){p(y),f!==y&&s&&s(y,f)}var d=$e.useRef(!0);return $e.useEffect(function(){if(d.current){d.current=!1;return}i===void 0&&p(i)},[i]),[f,h]}var Ga=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function Fa(t){var e,n=t.prefixCls,r=t.expandIcon,i=r===void 0?c(zt,{}):r,s=t.onExpand,o=t.expanded,m=t.record,l=i,C="".concat(n,"-row-expand-icon"),p=function(h){s(!o),h.stopPropagation()};return typeof i=="function"&&(l=i({expanded:o,onExpand:s,record:m})),c("span",{className:J(C,(e={},a(e,"".concat(n,"-row-expanded"),o),a(e,"".concat(n,"-row-collapsed"),!o),e)),onClick:p,children:l})}function Va(t){var e,n,r,i,s,o=t.prefixCls,m=u.exports.useContext(Fe.ConfigContext),l=m.getPrefixCls,C=u.exports.useContext(it),p=C.hashId,f=l("pro-list",o),h="".concat(f,"-row"),d=t.title,y=t.subTitle,B=t.content,R=t.itemTitleRender;t.prefixCls;var I=t.actions;t.item,t.recordKey;var g=t.avatar,L=t.cardProps,x=t.description,N=t.isEditable,_=t.checkbox,b=t.index,Z=t.selected,w=t.loading,q=t.expand,pe=t.onExpand,ne=t.expandable,G=t.rowSupportExpand,fe=t.showActions,le=t.showExtra,he=t.type,ee=t.style,te=t.className,Y=te===void 0?h:te,M=t.record,X=t.onRow,k=t.onItem,T=t.itemHeaderRender,j=t.cardActionProps,$=t.extra,ce=Ve(t,Ga),Q=ne||{},de=Q.expandedRowRender,D=Q.expandIcon,Ee=Q.expandRowByClick,Se=Q.indentSize,ae=Se===void 0?8:Se,Re=Q.expandedRowClassName,U=za(!!q,{value:q,onChange:pe}),H=Ce(U,2),S=H[0],K=H[1],v=J((e={},a(e,"".concat(h,"-selected"),!L&&Z),a(e,"".concat(h,"-show-action-hover"),fe==="hover"),a(e,"".concat(h,"-type-").concat(he),!!he),a(e,"".concat(h,"-editable"),N),a(e,"".concat(h,"-show-extra-hover"),le==="hover"),e),p,h),re=J(p,a({},"".concat(Y,"-extra"),le==="hover")),ue=S||Object.values(ne||{}).length===0,oe=de&&de(M,b,ae,S),me=u.exports.useMemo(function(){if(!(!I||j==="actions"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:I},"action")]},[I,j]),be=u.exports.useMemo(function(){if(!(!I||!j||j==="extra"))return[c("div",{onClick:function(P){return P.stopPropagation()},children:I},"action")]},[I,j]),ie=d||y?z("div",{className:"".concat(v,"-header-title ").concat(p),children:[d&&c("div",{className:"".concat(v,"-title ").concat(p),children:d}),y&&c("div",{className:"".concat(v,"-subTitle ").concat(p),children:y})]}):null,ge=(n=R&&(R==null?void 0:R(M,b,ie)))!==null&&n!==void 0?n:ie,xe=ge||g||y||x?c(ze.Item.Meta,{avatar:g,title:ge,description:x&&ue&&c("div",{className:"".concat(v,"-description ").concat(p),children:x})}):null,we=J(p,(r={},a(r,"".concat(v,"-item-has-checkbox"),_),a(r,"".concat(v,"-item-has-avatar"),g),a(r,v,v),r)),F=u.exports.useMemo(function(){return g||d?z(Ae,{children:[g&&c(Bt,{size:22,src:g,className:"".concat(l("list-item-meta-avatar")," ").concat(p)}),c("span",{className:"".concat(l("list-item-meta-title")," ").concat(p),children:d})]}):null},[g,l,p,d]),ve=L?c(ye,A(A(A({bordered:!0,loading:w,hoverable:!0},L),{},{title:F,subTitle:y,extra:me,actions:be,bodyStyle:A({padding:24},L.bodyStyle)},k==null?void 0:k(M,b)),{},{children:c(tt,{avatar:!0,title:!1,loading:w,active:!0,children:z("div",{className:"".concat(v,"-header ").concat(p),children:[R&&(R==null?void 0:R(M,b,ie)),B]})})})):c(ze.Item,A(A(A(A({className:J(we,a({},Y,Y!==h))},ce),{},{actions:me,extra:!!$&&c("div",{className:re,children:$})},X==null?void 0:X(M,b)),k==null?void 0:k(M,b)),{},{onClick:function(P){var V,W,_e,je;X==null||(V=X(M,b))===null||V===void 0||(W=V.onClick)===null||W===void 0||W.call(V,P),k==null||(_e=k(M,b))===null||_e===void 0||(je=_e.onClick)===null||je===void 0||je.call(_e,P),Ee&&K(!S)},children:z(tt,{avatar:!0,title:!1,loading:w,active:!0,children:[z("div",{className:"".concat(v,"-header ").concat(p),children:[z("div",{className:"".concat(v,"-header-option ").concat(p),children:[!!_&&c("div",{className:"".concat(v,"-checkbox ").concat(p),children:_}),Object.values(ne||{}).length>0&&G&&Fa({prefixCls:f,expandIcon:D,onExpand:K,expanded:S,record:M})]}),(i=T&&(T==null?void 0:T(M,b,xe)))!==null&&i!==void 0?i:xe]}),ue&&(B||oe)&&z("div",{className:"".concat(v,"-content ").concat(p),children:[B,de&&G&&c("div",{className:Re&&Re(M,b,ae),children:oe})]})]})}));return L?c("div",{className:J(p,(s={},a(s,"".concat(v,"-card"),L),a(s,Y,Y!==h),s)),style:ee,children:ve}):ve}var qa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function Xa(t){var e=t.dataSource,n=t.columns,r=t.rowKey,i=t.showActions,s=t.showExtra,o=t.prefixCls,m=t.actionRef,l=t.itemTitleRender,C=t.renderItem,p=t.itemCardProps,f=t.itemHeaderRender,h=t.expandable,d=t.rowSelection,y=t.pagination,B=t.onRow,R=t.onItem,I=t.rowClassName,g=Ve(t,qa),L=u.exports.useContext(it),x=L.hashId,N=u.exports.useContext(Fe.ConfigContext),_=N.getPrefixCls,b=O.useMemo(function(){return typeof r=="function"?r:function(H,S){return H[r]||S}},[r]),Z=Lt(e,"children",b),w=Ce(Z,1),q=w[0],pe=kt(e.length,A({responsive:!0},y),function(){}),ne=Ce(pe,1),G=ne[0],fe=O.useMemo(function(){if(y===!1||!G.pageSize||e.length<G.total)return e;var H=G.current,S=H===void 0?1:H,K=G.pageSize,v=K===void 0?10:K,re=e.slice((S-1)*v,S*v);return re},[e,G,y]),le=_("pro-list",o),he=Ot(d,{getRowKey:b,getRecordByKey:q,prefixCls:le,data:e,pageData:fe,expandType:"row",childrenColumnName:"children",locale:{}}),ee=Ce(he,2),te=ee[0],Y=ee[1],M=h||{},X=M.expandedRowKeys,k=M.defaultExpandedRowKeys,T=M.defaultExpandAllRows,j=T===void 0?!0:T,$=M.onExpand,ce=M.onExpandedRowsChange,Q=M.rowExpandable,de=O.useState(function(){return k||(j!==!1?e.map(b):[])}),D=Ce(de,2),Ee=D[0],Se=D[1],ae=O.useMemo(function(){return new Set(X||Ee||[])},[X,Ee]),Re=O.useCallback(function(H){var S=b(H,e.indexOf(H)),K,v=ae.has(S);v?(ae.delete(S),K=Be(ae)):K=[].concat(Be(ae),[S]),Se(K),$&&$(!v,H),ce&&ce(K)},[b,ae,e,$,ce]),U=te([])[0];return c(ze,A(A({},g),{},{className:J(_("pro-list-container",o),x,g.className),dataSource:fe,pagination:y&&G,renderItem:function(S,K){var v,re,ue,oe={className:typeof I=="function"?I(S,K):I};n==null||n.forEach(function(F){var ve=F.listKey,E=F.cardActionProps;if(Ba.has(ve)){var P=F.dataIndex||ve||F.key,V=Array.isArray(P)?Ma(S,P):S[P];E==="actions"&&ve==="actions"&&(oe.cardActionProps=E);var W=F.render?F.render(V,S,K):V;W!=="-"&&(oe[F.listKey]=W)}});var me;U&&U.render&&(me=U.render(S,S,K)||void 0);var be=((v=m.current)===null||v===void 0?void 0:v.isEditable(A(A({},S),{},{index:K})))||{},ie=be.isEditable,ge=be.recordKey,xe=Y.has(ge||K),we=c(Va,A(A({cardProps:g.grid?A(A(A({},p),g.grid),{},{checked:xe,onChecked:O.isValidElement(me)?(re=me)===null||re===void 0||(ue=re.props)===null||ue===void 0?void 0:ue.onChange:void 0}):void 0},oe),{},{recordKey:ge,isEditable:ie||!1,expandable:h,expand:ae.has(b(S,K)),onExpand:function(){Re(S)},index:K,record:S,item:S,showActions:i,showExtra:s,itemTitleRender:l,itemHeaderRender:f,rowSupportExpand:!Q||Q&&Q(S),selected:Y.has(b(S,K)),checkbox:me,onRow:B,onItem:R}),ge);return C?C(S,K,we):we}}))}var Qa=function(e){var n,r,i,s,o,m;return a({},e.componentCls,(m={backgroundColor:"transparent"},a(m,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(m,"&-row",(o={borderBlockEnd:"1px solid ".concat(e.colorSplit)},a(o,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(o,"&:last-child",a({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),a(o,"&:hover",(n={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(n,"".concat(e.antCls,"-list-item-action"),{display:"block"}),a(n,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),a(n,"".concat(e.componentCls,"-row-extra"),{display:"block"}),a(n,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),n)),a(o,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(o,"&".concat(e.componentCls,"-row-editable"),a({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(o,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),a(o,"&".concat(e.componentCls,"-row-type-new"),{animationName:"techUiListActive",animationDuration:"3s"}),a(o,"&".concat(e.componentCls,"-row-type-inline"),a({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),a(o,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(o,"&-show-action-hover",(r={},a(r,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),a(r,"&:hover",a({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),r)),a(o,"&-show-extra-hover",a({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),a(o,"&-extra",{display:"none"}),a(o,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(o,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(o,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(o,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),a(o,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(o,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(o,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(o,"&-avatar",{display:"flex"}),a(o,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start",h4:{margin:0,padding:0}}),a(o,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(o,"&-header-option",{display:"flex"}),a(o,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(o,"&-no-split",(i={},a(i,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),a(i,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),i)),a(o,"&-bordered",a({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),a(o,"".concat(e.antCls,"-list-vertical"),(s={},a(s,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(s,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(s,"&-content",{marginBlock:0,marginInline:0}),a(s,"&-subTitle",{marginBlockStart:8}),a(s,"".concat(e.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),a(s,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),a(s,"".concat(e.componentCls,"-row-show-extra-hover"),a({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),s)),a(o,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),a(o,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(o,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(o,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),o)),m))};function Ya(t){return jt("ProList",function(e){var n=A(A({},e),{},{componentCls:".".concat(t)});return[Qa(n)]})}var Ua=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function Ja(t){var e=t.metas,n=t.split,r=t.footer,i=t.rowKey,s=t.tooltip,o=t.className,m=t.options,l=m===void 0?!1:m,C=t.search,p=C===void 0?!1:C,f=t.expandable,h=t.showActions,d=t.showExtra,y=t.rowSelection,B=y===void 0?!1:y,R=t.pagination,I=R===void 0?!1:R,g=t.itemLayout,L=t.renderItem,x=t.grid,N=t.itemCardProps,_=t.onRow,b=t.onItem,Z=t.rowClassName,w=t.locale,q=t.itemHeaderRender,pe=t.itemTitleRender,ne=Ve(t,Ua),G=u.exports.useRef();u.exports.useImperativeHandle(ne.actionRef,function(){return G.current});var fe=u.exports.useContext(Fe.ConfigContext),le=fe.getPrefixCls,he=u.exports.useMemo(function(){var k=[];return Object.keys(e||{}).forEach(function(T){var j=e[T]||{},$=j.valueType;$||(T==="avatar"&&($="avatar"),T==="actions"&&($="option"),T==="description"&&($="textarea")),k.push(A(A({listKey:T,dataIndex:(j==null?void 0:j.dataIndex)||T},j),{},{valueType:$}))}),k},[e]),ee=le("pro-list",t.prefixCls),te=Ya(ee),Y=te.wrapSSR,M=te.hashId,X=J(ee,M,a({},"".concat(ee,"-no-split"),!n));return Y(c($t,A(A({tooltip:s},ne),{},{actionRef:G,pagination:I,type:"list",rowSelection:B,search:p,options:l,className:J(ee,o,X),columns:he,rowKey:i,tableViewRender:function(T){var j=T.columns,$=T.size,ce=T.pagination,Q=T.rowSelection,de=T.dataSource,D=T.loading;return c(Xa,{grid:x,itemCardProps:N,itemTitleRender:pe,prefixCls:t.prefixCls,columns:j,renderItem:L,actionRef:G,dataSource:de||[],size:$,footer:r,split:n,rowKey:i,expandable:f,rowSelection:B===!1?void 0:Q,showActions:h,showExtra:d,pagination:ce,itemLayout:g,loading:D,itemHeaderRender:q,onRow:_,onItem:b,rowClassName:Z,locale:w})}})))}const Ke=new Set;let Ie,rt={xs:0,sm:576,md:768,lg:992,xl:1200};function He(){const t=Ie;if(yt(),t!==Ie)for(const e of Ke)e()}let Me=!1;function yt(){const t=window.innerWidth,e={};let n=!1;for(const r of Object.keys(rt))e[r]=t>=rt[r],e[r]!==Ie[r]&&(n=!0);n&&(Ie=e)}function Za(){at&&!Me&&(Ie={},yt(),window.addEventListener("resize",He),Me=!0);const[t,e]=u.exports.useState(Ie);return u.exports.useEffect(()=>{if(!at)return;Me||window.addEventListener("resize",He);const n=()=>{e(Ie)};return Ke.add(n),()=>{Ke.delete(n),Ke.size===0&&(window.removeEventListener("resize",He),Me=!1)}},[]),t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ue=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleListActions",sa(void 0));Ue.debugLabel="atomRoleListActions";const Je=()=>ct(Ue),en=()=>oa(Ue),Oe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/atomRoleDetails",ya({open:!1,roleId:0}));Oe.debugLabel="atomRoleDetails";const tn=()=>Ca(Oe),an=()=>{const t=la(Oe);return e=>{t({open:!0,roleId:e})}},Pe=()=>ct(Oe),Ct="sysRole",St=[Ct,"details"],bt=t=>{const{roleId:e}=Pe(),n=dt(St,()=>ca({roleId:e}),{onSuccess:t,enabled:!1});return u.exports.useEffect(()=>{e>0&&n.refetch()},[e]),n},wt=[Ct,"tree"],nn=t=>{const{roleId:e}=Pe(),n=dt(wt,async()=>{const{menus:r,checkedKeys:i}=await da({roleId:e});return{treeData:r,selectedMenuIds:i,selectedTreeData:ut(r,i),allMenuIds:mt(r),allExpandedKeys:pt(r)}},{onSuccess:r=>{t(r.selectedTreeData)},enabled:!1});return u.exports.useEffect(()=>{e>0&&n.refetch()},[e]),n},It=t=>{const e=Sa();return Qe(async n=>{const r=e.getQueryData(St),i=e.getQueryData(wt);await ua({roleId:r.roleId,roleKey:r.roleKey,roleName:r.roleName,roleSort:r.roleSort,status:r.status,menuIds:i.selectedMenuIds,menuCheckStrictly:!1,deptCheckStrictly:!1,...n})},{onSuccess:async()=>{t(),ke.success("保存成功")}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const rn=()=>{const{defaultValueSysNormalDisable:t,valueEnumSysNormalDisable:e}=Xe();return[{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{rules:[{required:!0,message:"请输入角色名称"}]}},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{rules:[{required:!0,message:"请输入权限字符"}]}},{valueType:"group",columns:[{title:"状态",dataIndex:"status",key:"status",valueEnum:e,valueType:"radio",formItemProps:{initialValue:t,rules:[{required:!0,message:"请选择状态"}]}},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit",formItemProps:{initialValue:0,rules:[{required:!0,message:"请输入显示排序"}]}}]},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"}]},on=()=>{const t=u.exports.useRef(),e=Je(),n=rn();return c(Ne,{accessKey:"system:role:add",children:c(Ht,{title:"新增角色",trigger:c(Wt,{}),formRef:t,onFinish:async i=>{var s;return await ma({...i,menuIds:[],menuCheckStrictly:!1,deptCheckStrictly:!1}),e==null||e.reload(),ke.success("新增成功"),(s=t.current)==null||s.resetFields(),!0},width:500,modalProps:{okText:"提交"},layoutType:"ModalForm",columns:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const sn=()=>{const t=Gt(),{roleId:e,open:n}=Pe();return c(Ne,{accessKey:"system:user:edit",children:c(Te,{type:"primary",ghost:!0,onClick:()=>t(Ft("/system/role-auth/:roleId",{roleId:e.toString()})),icon:c(Vt,{}),disabled:!n,children:"分配用户"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ln=()=>{const t=Je(),e=tn(),{roleId:n,open:r}=Pe(),{isLoading:i,mutateAsync:s}=Qe(pa,{onSuccess:()=>{var m;t==null||t.reload(),(m=t==null?void 0:t.clearSelected)==null||m.call(t),e(),ke.success("删除成功")}});return c(Ne,{accessKey:"system:role:remove",children:c(qt,{type:"primary",size:"middle",disabled:!r,onClick:()=>Xt.confirm({title:"操作确认",content:`确定删除角色编号为 ${n} 的角色吗？`,onOk:()=>s({roleIds:n}),okButtonProps:{loading:i}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const cn=[{title:"角色编号",dataIndex:"roleId",key:"roleId",valueType:"text"},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime"}],dn=()=>{const{valueEnumSysNormalDisable:t}=Xe();return[{title:"状态",dataIndex:"status",key:"status",valueEnum:t,valueType:"radio"},{title:"显示排序",dataIndex:"roleSort",key:"roleSort",valueType:"digit"},{title:"角色名称",dataIndex:"roleName",key:"roleName",valueType:"text",formItemProps:{required:!0,rules:[{required:!0,message:"请输入角色名称"}]}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea"},{title:"权限字符",dataIndex:"roleKey",key:"roleKey",valueType:"text",tooltip:"控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasRole('admin')`)",formItemProps:{required:!0,rules:[{required:!0,message:"请输入权限字符"}]}}]},un=()=>{const[t,e]=u.exports.useState([]),[n]=Qt.useForm(),r=dn(),i=Je(),{data:s,isFetching:o,refetch:m}=bt(()=>{e([]),n.resetFields()}),{mutateAsync:l}=It(()=>{m(),i==null||i.reload()}),p=ia()("system:role:edit")?{form:n,editableKeys:t,onChange:(f,h)=>{if(e(f),f.length>0){const d=f[0];n.setFieldsValue({[d]:h[d]})}},onSave:async(f,h)=>{await l({[f]:h[f]})}}:void 0;return z(Le,{spinning:o,children:[c(et,{column:2,columns:cn,dataSource:s}),c(Yt,{}),c(et,{column:2,columns:r,dataSource:s,editable:p})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const mn=()=>{const{valueEnumSysNormalDisable:t}=Xe();return{title:{title:"角色名称",dataIndex:"roleName",valueType:"text"},subTitle:{title:"状态",dataIndex:"status",valueType:"select",valueEnum:t},description:{title:"权限字符",dataIndex:"roleKey",valueType:"text"}}},pn=()=>{const t=en(),e=an(),n=mn();return c(Ja,{ghost:!0,rowKey:"roleId",actionRef:t,metas:n,tableAlertRender:!1,rowSelection:{type:"radio",onSelect:({roleId:r})=>{e(r)}},search:{filterType:"light"},pagination:{defaultPageSize:10,defaultCurrent:1,showSizeChanger:!0},request:(...r)=>fa(xa(...r))})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const fn=()=>{const[t,e]=u.exports.useState([]),[n,r]=u.exports.useState(!1),[i,s]=u.exports.useState([]),[o,m]=u.exports.useState([]),[l,C]=u.exports.useState(!1),[p,f]=u.exports.useState(!0),[h,d]=u.exports.useState(),y=u.exports.useRef(),{open:B,roleId:R}=Pe(),{refetch:I}=bt(({dataScope:w})=>{var q;d(w),(q=y.current)==null||q.setFieldsValue({dataScope:w})}),{loading:g,refresh:L,data:x}=ba(async()=>{const{depts:w,checkedKeys:q}=await ha({roleId:R});return{treeData:w,selectedMenuIds:q,selectedTreeData:ut(w,q),allMenuIds:mt(w),allExpandedKeys:pt(w)}},{ready:B,refreshDeps:[R],onSuccess:w=>{r(!1),m(w.selectedTreeData)}}),{isLoading:N,mutate:_}=Qe(async()=>{await ga({roleId:R,dataScope:h,deptIds:t})},{onSuccess:()=>{L(),I(),ke.success("保存成功")}}),b=i.length===(x==null?void 0:x.allExpandedKeys.length),Z=w=>{if(w||p){e((x==null?void 0:x.allMenuIds)??[]);return}e([])};return u.exports.useEffect(()=>{if((x==null?void 0:x.allMenuIds.length)===t.length){C(!0),f(!1);return}if(t.length===0){C(!1),f(!1);return}f(!0)},[x==null?void 0:x.allMenuIds,t]),z(Ae,{children:[z("header",{className:"flex justify-between items-start flex-wrap",children:[c(Ut,{formRef:y,submitter:!1,layout:"horizontal",children:c(wa,{name:"dataScope",label:"数据权限范围",fieldProps:{options:va,onChange:w=>{d(w)}},readonly:!n})}),c(Ne,{accessKey:"system:role:edit",children:n?z(We,{children:[c(Te,{loading:N,onClick:()=>{r(!1),m((x==null?void 0:x.selectedTreeData)??[])},children:"取消编辑"}),c(Te,{type:"primary",ghost:!0,icon:c(Jt,{}),loading:N,onClick:()=>_(),children:"保存"})]}):c(Te,{type:"primary",ghost:!0,icon:c(Zt,{}),onClick:()=>{r(!0),e((x==null?void 0:x.selectedMenuIds)??[]),m((x==null?void 0:x.treeData)??[])},children:"编辑数据权限"})})]}),h==="2"&&z(Ae,{children:[z(We,{wrap:!0,className:"my-2",children:[o.length>0&&c(Te,{size:"small",icon:b?c(ea,{}):c(ta,{}),onClick:()=>s(b?[]:x.allExpandedKeys),children:b?"全部折叠":"全部展开"}),n&&c(st,{indeterminate:p,onChange:w=>Z(w.target.checked),checked:l,children:"全选/全不选"})]}),c(Le,{spinning:g,children:o.length>0?c(lt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:n,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:i,onExpand:w=>s(w),onCheck:w=>{e(w.checked)}}):c(qe,{description:"暂未分配数据权限"})})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const hn=()=>{const[t,e]=u.exports.useState([]),[n,r]=u.exports.useState(!1),[i,s]=u.exports.useState([]),[o,m]=u.exports.useState([]),[l,C]=u.exports.useState(!1),[p,f]=u.exports.useState(!0),{isFetching:h,data:d,refetch:y}=nn(g=>{r(!1),m(g)}),{isLoading:B,mutate:R}=It(()=>{y()}),I=g=>{if(g||p){e((d==null?void 0:d.allMenuIds)??[]);return}e([])};return u.exports.useEffect(()=>{if((d==null?void 0:d.allMenuIds.length)===t.length){C(!0),f(!1);return}if(t.length===0){C(!1),f(!1);return}f(!0)},[d==null?void 0:d.allMenuIds,t]),z(Ae,{children:[z("header",{className:"flex justify-between items-end mb-2",children:[c(aa,{expanded:i.length===(d==null?void 0:d.allExpandedKeys.length),onChange:g=>{s(g?(d==null?void 0:d.allExpandedKeys)??[]:[])}}),c(Ne,{accessKey:"system:role:edit",children:c(na,{editable:n,loading:B,onCancel:()=>{r(!1),m((d==null?void 0:d.selectedTreeData)??[])},onSave:()=>R({menuIds:t}),onStartEdit:()=>{r(!0),e((d==null?void 0:d.selectedMenuIds)??[]),m((d==null?void 0:d.treeData)??[])}})})]}),z(Le,{spinning:h,children:[c("div",{className:"pl-1 mb-1",children:n&&c(st,{indeterminate:p,onChange:g=>I(g.target.checked),checked:l,children:"全选/全不选"})}),o.length>0?c(lt,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:n,checkStrictly:!0,fieldNames:{title:"label",key:"id"},checkedKeys:t,treeData:o,expandedKeys:i,onExpand:g=>s(g),onCheck:g=>{e(g.checked)},height:500}):c(qe,{description:"暂未分配菜单权限"})]})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ot={list:{xxl:7,xl:10,lg:13,md:24,sm:24,xs:24},details:{xxl:17,xl:14,lg:11,md:24,sm:24,xs:24}},_n=()=>{const{xl:t}=Za(),{open:e}=Pe();return c(ra,{children:z(ye,{ghost:!0,gutter:[16,16],wrap:!0,children:[c(ye,{title:"角色列表",colSpan:ot.list,extra:c(on,{}),children:c(pn,{})}),c(ye,{split:"horizontal",title:"角色详情",colSpan:ot.details,extra:z(We,{children:[c(ln,{}),c(sn,{})]}),className:"h-full",children:e?z(Ae,{children:[c(ye,{children:c(un,{})}),z(ye,{split:t?"vertical":"horizontal",children:[c(ye,{children:c(hn,{})}),c(ye,{children:c(fn,{})})]})]}):c(qe,{description:"点击选择左侧角色查看详情"})})]})})};export{_n as default};
