import{r as m,a,j as x,F as L}from"./jsx-runtime-f6344dff.js";import{ai as N,a9 as O,bN as X,aw as M,bO as Y,bP as q,bi as K,bj as W,bh as $,c2 as G,bk as z,bW as H,aC as Q}from"./index-0cc72bc5.js";import{L as k,j as v}from"./index-f7881e43.js";import{f as w}from"./index-3011f4b1.js";import{b as U,c as J}from"./index-166a336f.js";import{a as D,b as E,c as Z,u as R}from"./index-88ffc593.js";import{a as _,u as ee}from"./utils-7c8fe9f2.js";import{x as te,y as ae,z as se,A as oe,B as ce,C as ie}from"./vanilla-3fa884d6.js";import{P as p}from"./index-dc3dcd4f.js";import{P as re}from"./index-ec58b3ec.js";import{P as B}from"./index-7edae443.js";import{P as de}from"./index-98e3a4fa.js";import{P as ne}from"./index-0d15af73.js";import{A as C}from"./index-65db7775.js";import{u as I}from"./useMutation.esm-345c3001.js";import{u as le}from"./useRequest-f550dc85.js";import"./utils.esm-376a1e3d.js";import"./mutation.esm-786b6dc1.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomMainTableActions",D(void 0));S.debugLabel="atomMainTableActions";const F=()=>E(S),ue=()=>U(S),P=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomCurDictType",D({dictType:"",dictName:""}));P.debugLabel="atomCurDictType";const he=()=>E(P),me=()=>Z(P);var A=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(A||{});const pe={[0]:"新增",[1]:"编辑"},y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/dictDetails/model/index.ts/atomAddOrEditModal",_({actionType:0,open:!1}));y.debugLabel="atomAddOrEditModal";const ye=()=>E(y),Te=()=>ee(y),ge=()=>{const e=R(y);return()=>{e({actionType:0,open:!0})}},be=()=>{const e=R(y);return t=>{e({actionType:1,open:!0,record:t})}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const e=m.useRef(),t=F(),{open:i,actionType:s,record:h}=ye(),u=Te(),T=()=>{var o;s===A.Edit&&((o=e.current)==null||o.resetFields()),u()},l=pe[s],{dictType:g,dictName:f}=he(),{defaultValueSysNormalDisable:d,valueEnumSysNormalDisable:c}=w(),n=async o=>{var r;s===A.Add?await te(o):await ae({...o,dictCode:h.dictCode}),u(),(r=e.current)==null||r.resetFields(),M.success(`${l}成功`),t==null||t.reload()};return m.useEffect(()=>{i&&m.startTransition(()=>{var o,r;s===A.Add?(o=e.current)==null||o.setFieldsValue({dictType:g,dictName:f}):(r=e.current)==null||r.setFieldsValue({...h,dictName:f})})},[i]),a(N,{accessible:!0,fallback:a(O,{children:"111"}),children:x(X,{formRef:e,width:500,title:`${l}字典数据`,open:i,modalProps:{onCancel:T,okText:"提交"},onFinish:n,children:[a(p,{name:"dictName",label:"字典名称",readonly:!0}),a(p,{name:"dictType",label:"字典类型",hidden:!0}),a(p,{name:"dictLabel",label:"数据标签",rules:[{required:!0}]}),a(p,{name:"dictValue",label:"数据键值",rules:[{required:!0}]}),a(p,{name:"cssClass",label:"样式属性"}),a(re,{name:"dictSort",label:"显示排序",initialValue:0}),a(B,{name:"listClass",label:"回显样式",valueEnum:k,initialValue:"default"}),a(de.Group,{name:"status",label:"状态",valueEnum:c,initialValue:d}),a(ne,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const e=ge();return a(C,{accessKey:"system:dict:edit",children:a(Y,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=({record:e})=>{const t=be();return a(C,{accessKey:"system:dict:edit",children:a(q,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xe=({searchParams:e})=>{const{isLoading:t,mutate:i}=I(se,{onSuccess:()=>{M.success("导出成功")}});return a(C,{accessKey:"system:dict:export",children:a(K,{loading:t,onClick:()=>i(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=({dictCode:e,disabled:t,batch:i})=>{const s=F(),{mutateAsync:h,isLoading:u}=I(oe,{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),M.success("删除成功")}});return a(C,{accessKey:"system:dict:edit",children:a(W,{batch:i,disabled:t,onClick:()=>{$.confirm({title:"操作确认",content:`确定删除字典编码为 ${e} 的字典数据吗？`,onOk:()=>h({dictCodes:e}),okButtonProps:{loading:u}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Me=()=>{const{valueEnumSysNormalDisable:e}=w();return[{title:"字典编码",dataIndex:"dictCode",key:"dictCode",valueType:"text",hideInSearch:!0},{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",valueType:"text"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",valueType:"text",hideInSearch:!0},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",valueType:"text",hideInSearch:!0},{title:"回显样式",dataIndex:"listClass",key:"listClass",valueType:"select",valueEnum:k},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:e},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},{title:"创建时间",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0},{title:"操作",valueType:"option",render:(t,i)=>x(L,{children:[a(fe,{record:i}),a(V,{dictCode:i.dictCode})]})}]},Ee=({selectedRows:e})=>a(V,{disabled:e.length===0,batch:!0,dictCode:e.map(t=>t.dictCode).join(",")}),Se=()=>{const e=G(),[t,i]=m.useState({}),s=ue(),h=Me(),u=m.useRef(),[T,l]=me(),{data:g,run:f}=le(async()=>(await ce()).reduce((c,n)=>(c[n.dictType]=n.dictName,c),{}),{ready:!!e.dictType,onSuccess:d=>{const c=e.dictType;l({dictType:c,dictName:d[c]}),m.startTransition(()=>{var n,o,r,b,j;(n=u.current)==null||n.setFieldsValue({dictType:c}),(r=(o=s==null?void 0:s.current)==null?void 0:o.clearSelected)==null||r.call(o),(j=(b=s.current)==null?void 0:b.reloadAndRest)==null||j.call(b)})}});return J(),a(z,{rowKey:"dictCode",actionRef:s,columns:h,params:T,request:async(...d)=>{const c=v(...d);return i(c),await ie(v(...d))},tableAlertOptionRender:Ee,manualRequest:!0,toolbar:{actions:[a(xe,{searchParams:t},"ButtonExport"),a(Ce,{},"ButtonAdd")]},headerTitle:a(H,{formRef:u,children:a(B,{name:"dictType",valueEnum:g??{},allowClear:!1,showSearch:!0,fieldProps:{onChange:d=>{var c,n,o,r;(n=(c=s==null?void 0:s.current)==null?void 0:c.clearSelected)==null||n.call(c),(r=(o=s.current)==null?void 0:o.reset)==null||r.call(o),l({dictType:d,dictName:g[d]})}}})})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const We=()=>x(Q,{children:[a(Se,{}),a(Ae,{})]});export{We as default};
