import{J as v,V as h,W as D,aG as x,r as y,aI as F,D as e,aH as R,cV as I,b5 as P,cC as n,cW as k,ac as g,aJ as C}from"./index.98ae5275.js";import{B}from"./index.4f67218f.js";import{C as E,b as _}from"./common.cec51158.js";import{u as w,A as U,P as M}from"./useAccess.bdeb68c5.js";import"./keepAlive.1c84fcf6.js";import{u as X,c as Y}from"./useInitActionType.ed84b75d.js";import{u as j}from"./index.4ff2423d.js";import{u as q}from"./useMutation.07bbd0ff.js";import{M as V,T as $}from"./Tree.87469cba.js";import{P as O}from"./Table.4ad621d6.js";import{E as L}from"./index.eabf19b2.js";import{a as G}from"./SysDeptService.1a46c701.js";import{P as N}from"./index.3568eae8.js";import"./RouteContext.b3801464.js";import"./index.21b1c34d.js";import"./index.373c6b62.js";import"./unstated-next.d5bd656d.js";const J={dataIndex:"userId",key:"userId",title:"\u7528\u6237\u7F16\u53F7",valueType:"text",editable:!1,hideInSearch:!0},W={dataIndex:"userName",key:"userName",title:"\u7528\u6237\u540D\u79F0",valueType:"text"},H={dataIndex:"nickName",key:"nickName",title:"\u7528\u6237\u6635\u79F0",valueType:"text",hideInSearch:!0},K={dataIndex:["dept","deptName"],key:"deptDeptName",title:"\u90E8\u95E8\u540D\u79F0",valueType:"text",hideInSearch:!0},z={dataIndex:"phoneNumber",key:"phoneNumber",title:"\u624B\u673A\u53F7\u7801",valueType:"text"},A="systemUser",S=v({key:`${A}AtomMainTableActions`,default:void 0}),Q=()=>h(S),Z=()=>X(S),T=v({key:`${A}AtomSelectedDeptId`,default:0}),ee=()=>h(T),ae=()=>D(T);async function oe(o,u){return x("/system/user/add",{method:"POST",headers:{"Content-Type":"application/json"},data:o,...u||{}})}async function ue(o,u){return x("/system/user/list",{method:"POST",headers:{"Content-Type":"application/json"},data:o,...u||{}})}var a="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/components/ButtonAdd.tsx";const se=()=>{const o=w(),[u,{toggle:t}]=j(),s=y.exports.useRef(),i=Q(),{isLoading:l,mutate:c}=q(async()=>{var m,f;const p=await((f=(m=s.current)==null?void 0:m.validateFieldsReturnFormatValue)==null?void 0:f.call(m));!p||await oe(p)},{onSuccess:()=>{i==null||i.reload(),F.success("\u6DFB\u52A0\u6210\u529F")}});return e(U,{accessible:o.canAddSysUser,children:[e(R,{type:"primary",icon:e(I,{},void 0,!1,{fileName:a,lineNumber:42,columnNumber:36},void 0),onClick:t,children:"\u65B0\u589E"},void 0,!1,{fileName:a,lineNumber:42,columnNumber:7},void 0),e(V,{title:"\u6DFB\u52A0\u7528\u6237",open:u,onCancel:t,confirmLoading:l,okText:"\u63D0\u4EA4",onOk:()=>c(),children:e(P,{submitter:!1,formRef:s,grid:!0,colProps:{span:12},children:[e(n,{name:"nickName",label:"\u7528\u6237\u6635\u79F0",rules:[{required:!0}]},void 0,!1,{fileName:a,lineNumber:62,columnNumber:11},void 0),e(n,{name:"phoneNumber",label:"\u624B\u673A\u53F7\u7801"},void 0,!1,{fileName:a,lineNumber:64,columnNumber:11},void 0),e(n,{name:"email",label:"\u90AE\u7BB1"},void 0,!1,{fileName:a,lineNumber:66,columnNumber:11},void 0),e(n,{name:"userName",label:"\u7528\u6237\u540D\u79F0",rules:[{required:!0}]},void 0,!1,{fileName:a,lineNumber:68,columnNumber:11},void 0),e(n.Password,{name:"password",label:"\u7528\u6237\u5BC6\u7801",rules:[{required:!0}]},void 0,!1,{fileName:a,lineNumber:70,columnNumber:11},void 0),e(M.Group,{name:"status",label:"\u72B6\u6001"},void 0,!1,{fileName:a,lineNumber:72,columnNumber:11},void 0)]},void 0,!0,{fileName:a,lineNumber:54,columnNumber:9},void 0)},void 0,!1,{fileName:a,lineNumber:46,columnNumber:7},void 0)]},void 0,!0,{fileName:a,lineNumber:41,columnNumber:5},void 0)};var b="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/components/TableMain.tsx";const te=[J,W,H,K,z,E,_],re=()=>{const o=Z(),u=ee(),t=u>0?{deptId:u}:{};return e(O,{rowKey:"userId",actionRef:o,columns:te,params:t,search:{span:{xs:24,sm:24,md:12,lg:12,xl:12,xxl:6}},request:(...s)=>ue(Y(...s)),toolbar:{actions:[e(se,{},"ButtonAdd",!1,{fileName:b,lineNumber:34,columnNumber:19},void 0)]}},void 0,!1,{fileName:b,lineNumber:17,columnNumber:5},void 0)};var d="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/components/TreeDept.tsx";const ie=()=>{const[o,u]=y.exports.useState(""),t=ae(),{data:s,loading:i}=k(()=>G({deptName:o}),{refreshDeps:[o]});return s?e(g,{spinning:i,children:[e(C.Search,{allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",className:"mb-3",onSearch:l=>{u(l)}},void 0,!1,{fileName:d,lineNumber:29,columnNumber:7},void 0),e($,{treeData:s,defaultExpandAll:!0,fieldNames:{title:"label",key:"id"},onSelect:(l,{node:{key:c}})=>{t(c)}},void 0,!1,{fileName:d,lineNumber:38,columnNumber:7},void 0)]},void 0,!0,{fileName:d,lineNumber:28,columnNumber:5},void 0):e(L,{},void 0,!1,{fileName:d,lineNumber:24,columnNumber:12},void 0)};var r="/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/user/index.tsx";const Fe=()=>e(B,{children:e(N,{ghost:!0,gutter:24,children:[e(N,{colSpan:"300px",className:"h-full",children:e(ie,{},void 0,!1,{fileName:r,lineNumber:12,columnNumber:11},void 0)},void 0,!1,{fileName:r,lineNumber:11,columnNumber:9},void 0),e(N,{ghost:!0,className:"h-full",children:e(re,{},void 0,!1,{fileName:r,lineNumber:16,columnNumber:11},void 0)},void 0,!1,{fileName:r,lineNumber:15,columnNumber:9},void 0)]},void 0,!0,{fileName:r,lineNumber:10,columnNumber:7},void 0)},void 0,!1,{fileName:r,lineNumber:9,columnNumber:5},void 0);export{Fe as default};
