import{q as R,r as k,s as D,t as x,C as v,j as I,b as V}from"./index.78ff361d.js";import{s as q,v as S,g as j,j as s,az as g,ai as C,aA as L,b5 as N,w as p,q as F,b6 as W,aF as X,aB as w,e as h,F as y,aG as Y,r as A,Z as G,a1 as E,aC as z,aD as H,aE as K,M as Z,ah as J,b7 as Q}from"./index.73864f95.js";import{b as U,c as _}from"./index.33ae8221.js";import{d as b}from"./index.66f97a50.js";import{a as $,u as tt}from"./utils.21e32551.js";import{u as P}from"./useMutation.esm.5e633970.js";import{P as et}from"./index.d8eb471f.js";import{P as st}from"./index.c55f571a.js";import"./useQuery.esm.decb43da.js";import"./utils.esm.e6431697.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomMainTableActions",q(void 0));f.debugLabel="AtomMainTableActions";const ot=()=>U(f),B=()=>S(f),m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/AtomAddOrEditModal",$({open:!1,actionType:"add"}));m.debugLabel="AtomAddOrEditModal";const at=()=>{const t=j(m);return()=>t({open:!0,actionType:"add"})},ct=()=>{const t=j(m);return e=>t({open:!0,actionType:"edit",record:e})},rt=()=>tt(m),it=()=>S(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const nt=()=>{const t=b(),e=at();return s(g,{accessible:t.canAddSysPost,children:s(C,{type:"primary",icon:s(L,{}),onClick:e,children:"\u65B0\u5EFA"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const ut=({record:t})=>{const e=b(),a=ct();return s(g,{accessible:e.canEditSysPost,children:s(C,{type:"link",icon:s(N,{}),onClick:()=>a(t),children:"\u7F16\u8F91"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};async function dt(t,e){return p("/system/post/add",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function lt(t,e){return p("/system/post/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function ht(t,e){return p("/system/post/export",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function pt(t,e){return p("/system/post/list",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function mt(t,e){return p("/system/post/remove",{method:"POST",params:{...t},...e||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const At=({searchParams:t})=>{const e=b(),{isLoading:a,mutate:i}=P(()=>ht(t),{onSuccess:()=>{F.success("\u5BFC\u51FA\u6210\u529F")}});return s(g,{accessible:e.canExportSysPost,children:s(C,{type:"link",icon:s(W,{}),loading:a,onClick:()=>i(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const O=({postId:t,postName:e,isBatch:a,disabled:i})=>{const l=a?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",d=b(),c=B(),{mutateAsync:r,isLoading:n}=P(async o=>{await mt({postIds:o})},{onSuccess:()=>{var o;c==null||c.reload(),(o=c==null?void 0:c.clearSelected)==null||o.call(c),F.success("\u5220\u9664\u6210\u529F")}}),u=()=>{w.confirm({title:"\u5220\u9664\u5C97\u4F4D",content:h(y,{children:["\u786E\u5B9A\u5220\u9664\u5C97\u4F4D",s(Y.Text,{code:!0,children:e}),"\u5417\uFF1F"]}),onOk:async()=>r(t),okButtonProps:{loading:n}})};return s(g,{accessible:d.canRemoveSysPost,children:s(C,{type:"link",danger:!0,disabled:i,icon:s(X,{}),onClick:u,children:l})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const gt=()=>{var u;const t=A.exports.useRef(),{open:e,actionType:a,record:i}=it(),l=rt(),d=B(),c=()=>{var o;l(),(o=t.current)==null||o.resetFields()},{mutate:r,isLoading:n}=P(async()=>{var T;const o=await((T=t.current)==null?void 0:T.validateFields());if(!!o){if(a==="add"){await dt(o);return}await lt({...o,postId:i.postId})}},{onSuccess:()=>{d==null||d.reload(),c(),F.success(a==="add"?"\u65B0\u5EFA\u6210\u529F":"\u4FDD\u5B58\u6210\u529F")}});return A.exports.useEffect(()=>{var o;a==="edit"&&i&&((o=t.current)==null?void 0:o.setFieldsValue)&&t.current.setFieldsValue(i)},[a,(u=t.current)==null?void 0:u.setFieldsValue]),s(w,{open:e,onCancel:c,okText:"\u63D0\u4EA4",okButtonProps:{loading:n},onOk:()=>r(),title:a==="add"?"\u65B0\u5EFA\u5C97\u4F4D":"\u7F16\u8F91\u5C97\u4F4D\u4FE1\u606F",children:h(G,{submitter:!1,formRef:t,children:[s(E,{name:"postName",label:"\u5C97\u4F4D\u540D\u79F0",rules:[{required:!0}]}),s(E,{name:"postCode",label:"\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0}]}),s(et,{name:"postSort",label:"\u663E\u793A\u987A\u5E8F",rules:[{required:!0}],initialValue:0}),s(z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:H,initialValue:K.ENABLE}),s(st,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ct=[R,k,D,x,v,I,V,{title:"\u64CD\u4F5C",valueType:"option",render:(t,e)=>h(y,{children:[s(ut,{record:e}),s(O,{postId:e.postId,postName:e.postName})]})}],M="postId",wt=()=>{const[t,e]=A.exports.useState({}),a=A.exports.useRef(),i=ot(),{rowSelection:l,onClick:d}=_(M);return h(Z,{children:[s(J,{formRef:a,actionRef:i,rowKey:M,request:async(...r)=>{const n=Q(...r);return e(n),await pt(n)},columns:Ct,toolbar:{actions:[s(nt,{},"ButtonAdd")]},rowSelection:l,onRow:r=>({onClick:()=>d(r)}),tableAlertOptionRender:({selectedRows:r})=>{const n=r.length===0;return h(y,{children:[s(O,{disabled:n,isBatch:!0,postId:r.map(u=>u.postId).join(","),postName:r.map(u=>u.postName).join(",")}),s(At,{searchParams:t})]})}}),s(gt,{})]})};export{wt as default};
