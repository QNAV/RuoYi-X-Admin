import{r as m,a as o,j as p,F as I}from"./jsx-runtime-06f68cbc.js";import{bE as w,bZ as R,ag as f,bF as B,bG as k,bd as F,ba as N,bb as O,be as V,ay as K}from"./index-37fcb888.js";import{A as u,W as L}from"./index-fe98e209.js";import{i as M,j as E}from"./index-e1a999e8.js";import{b as W}from"./index-5fe6230a.js";import{b as X,c as v,u as C,K as Y,L as q,M as D,N as $}from"./react-6339a4c6.js";import{a as G,u as Q}from"./utils-fa51161f.js";import{P as H}from"./index-6de84089.js";import{P as Z}from"./index-07678be4.js";import{P as z}from"./index-79dca7fe.js";import{u as J}from"./useMutation-40f4a884.js";import{j as U}from"./index-2513ff0c.js";import"./utils-d35e7a32.js";import"./mutation-f7cba2e9.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",X(void 0));y.debugLabel="atomMainTableActions";const j=()=>v(y),_=()=>W(y);var l=(e=>(e[e.Add=0]="Add",e[e.Edit=1]="Edit",e))(l||{});const ee={[0]:"新增",[1]:"编辑"},n=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",G({open:!1,actionType:0}));n.debugLabel="atomAddOrEditModal";const te=()=>v(n),oe=()=>{const e=C(n);return()=>{e({open:!0,actionType:0})}},ae=()=>{const e=C(n);return t=>{e({open:!0,actionType:1,record:t})}},se=()=>Q(n);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{const e=m.useRef(),{defaultValueSysNoticeType:t,valueEnumSysNoticeType:c}=M(),{defaultValueSysNoticeStatus:a,valueEnumSysNoticeStatus:h}=E(),r=j(),{open:d,actionType:i,record:g}=te(),T=se(),x=()=>{var s;i===l.Edit&&((s=e.current)==null||s.resetFields()),T()},A=ee[i],P=async s=>{var b;i===l.Add?await Y(s):await q({...s,noticeId:g.noticeId}),T(),(b=e.current)==null||b.resetFields(),r==null||r.reload(),f.success(`${A}成功`)};return m.useEffect(()=>{d&&l.Edit&&m.startTransition(()=>{var s;(s=e.current)==null||s.setFieldsValue(g)})},[d]),o(u,{accessKey:["system:notice:add","system:notice:edit"],children:p(w,{formRef:e,width:800,title:`${A}公告通知`,open:d,modalProps:{onCancel:x,okText:"提交"},grid:!0,onFinish:P,children:[o(H,{name:"noticeTitle",label:"公告标题",rules:[{required:!0}],colProps:{span:12}}),o(Z,{name:"noticeType",label:"公告类型",rules:[{required:!0}],valueEnum:c,initialValue:t,colProps:{span:12}}),o(z.Group,{name:"status",label:"状态",valueEnum:h,initialValue:a}),o(R,{name:"noticeContent",label:"内容",children:o(L,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ie=()=>{const e=oe();return o(u,{accessKey:"system:notice:add",children:o(B,{onClick:e})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({record:e})=>{const t=ae();return o(u,{accessKey:"system:notice:edit",children:o(k,{onClick:()=>t(e)})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({noticeId:e,disabled:t,batch:c})=>{const a=j(),{mutateAsync:h,isLoading:r}=J(D,{onSuccess:async()=>{var i;a==null||a.reload(),(i=a==null?void 0:a.clearSelected)==null||i.call(a),f.success("删除成功")}});return o(u,{accessKey:"system:notice:remove",children:o(F,{batch:c,disabled:t,icon:o(N,{}),onClick:()=>{O.confirm({title:"操作确认",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>h({noticeIds:e}),okButtonProps:{loading:r}})}})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=()=>{const{valueEnumSysNoticeType:e}=M(),{valueEnumSysNoticeStatus:t}=E();return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:e},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:t},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(c,a)=>p(I,{children:[o(re,{record:a}),o(S,{noticeId:[a.noticeId]})]})}]},de=({selectedRowKeys:e})=>o(S,{batch:!0,disabled:e.length===0,noticeId:e}),le=()=>{const e=_(),t=ne();return o(V,{rowKey:"noticeId",actionRef:e,columns:t,request:(...c)=>$(U(...c)),tableAlertOptionRender:de,toolbar:{actions:[o(ie,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const je=()=>p(K,{children:[o(le,{}),o(ce,{})]});export{je as default};
