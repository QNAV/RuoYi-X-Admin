import{aX as I,aY as C,aj as j,r as M,b9 as h,d as a,af as g,j as A,b_ as E,d0 as v,aH as p,d1 as w,d2 as k,d3 as R,aA as T,c1 as O,bT as B,d4 as F,aZ as _,a_ as D,b0 as V,d5 as q,b1 as X,h as Y,av as L}from"./index-e0d25bb9.js";import{a as H}from"./index-13bb39a7.js";import{a as W,u as G}from"./utils-c91fee38.js";import{P as K}from"./index-a79838df.js";import{P as Q}from"./index-444f1e70.js";import{P as Z}from"./index-292320f2.js";import{u as $}from"./useMutation.esm-003175c7.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const b=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomMainTableActions",I(void 0));b.debugLabel="atomMainTableActions";const P=()=>C(b),z=()=>H(b),l=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/notice/model/index.ts/atomAddOrEditModal",W({open:!1,actionType:"add"}));l.debugLabel="atomAddOrEditModal";const J=()=>C(l),U=()=>{const e=j(l);return()=>{e({open:!0,actionType:"add"})}},N=()=>{const e=j(l);return t=>{e({open:!0,actionType:"edit",record:t})}},S=()=>G(l);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{var y,f;const e=M.exports.useRef(),{data:t}=h("sys_notice_type"),{data:o}=h("sys_notice_status"),i=P(),{open:s,actionType:c,record:u}=J(),m=S(),n=()=>{var r;c==="edit"&&((r=e.current)==null||r.resetFields()),m()};return M.exports.useEffect(()=>{if(s&&c==="edit"){const r=setTimeout(()=>{var d;(d=e.current)==null||d.setFieldsValue(u),clearTimeout(r)},0)}},[s]),a(g,{accessible:!0,children:A(E,{formRef:e,width:800,title:c==="add"?"新增公告":"编辑公告",open:s,modalProps:{onCancel:n,okText:"提交"},grid:!0,onFinish:async r=>{var d;return c==="add"?(await v(r),p.success("新增成功")):(await w({...r,noticeId:u.noticeId}),p.success("编辑成功")),i==null||i.reload(),m(),(d=e.current)==null||d.resetFields(),!0},children:[a(K,{name:"noticeTitle",label:"公告标题",required:!0,rules:[{required:!0}],colProps:{span:12}}),a(Q,{name:"noticeType",label:"公告类型",required:!0,rules:[{required:!0}],valueEnum:(y=t==null?void 0:t.mapData)!=null?y:{},colProps:{span:12}}),a(Z.Group,{name:"status",label:"状态",valueEnum:(f=o==null?void 0:o.mapData)!=null?f:{},initialValue:o==null?void 0:o.defaultValue}),a(k,{name:"noticeContent",label:"内容",children:a(R,{})})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=U();return a(g,{accessible:!0,children:a(T,{icon:a(O,{}),type:"primary",onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=N();return a(T,{type:"link",icon:a(B,{}),onClick:()=>t(e),children:"编辑"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const x=({noticeId:e,disabled:t,isBatch:o})=>{const i=o?"批量删除":"删除",s=P(),{mutateAsync:c,isLoading:u}=$(async n=>{await F({noticeIds:n})},{onSuccess:()=>{var n;s==null||s.reload(),(n=s==null?void 0:s.clearSelected)==null||n.call(s),p.success("删除成功")}});return a(g,{accessible:!0,children:a(T,{type:"link",danger:!0,disabled:t,icon:a(_,{}),onClick:()=>{D.confirm({title:"删除公告通知",content:`确定删除公告编号为 ${e} 的公告通知吗？`,onOk:async()=>c(e),okButtonProps:{loading:u}})},children:i})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{var o,i;const{data:e}=h("sys_notice_type"),{data:t}=h("sys_notice_status");return[{title:"公告编号",dataIndex:"noticeId",key:"noticeId",valueType:"text",hideInSearch:!0},{title:"公告标题",dataIndex:"noticeTitle",key:"noticeTitle",valueType:"text"},{title:"公告类型",dataIndex:"noticeType",key:"noticeType",valueType:"select",valueEnum:(o=e==null?void 0:e.mapData)!=null?o:{}},{title:"创建者",dataIndex:"createBy",key:"createBy",valueType:"text"},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(i=t==null?void 0:t.mapData)!=null?i:{}},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(s,c)=>A(Y,{children:[a(ae,{record:c}),a(x,{noticeId:c.noticeId})]})}]},se=({selectedRows:e})=>a(x,{isBatch:!0,disabled:e.length===0,noticeId:e.map(t=>t.noticeId).join(",")}),ce=()=>{const e=z(),t=oe();return a(V,{rowKey:"noticeId",actionRef:e,columns:t,request:(...o)=>q(X(...o)),tableAlertOptionRender:se,toolbar:{actions:[a(te,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const me=()=>A(L,{children:[a(ce,{}),a(ee,{})]});export{me as default};
