import{j as e,b as P,k as o,i as R}from"./antdProComponents-6fa50338.js";import{B as G,d}from"./index-dffabdf2.js";import{descriptionsColumns as M,useCacheNameTableColumns as O,useCacheKeyTableColumns as q}from"./index-95bf503a.js";import{a as E,b as v,d as z,e as F,f as H,g as I}from"./Monitor-5ac84834.js";import{u as n}from"./useRequest-f9345e2b.js";import{r as C,bm as J,B as r,b7 as g,bs as Q,aa as U}from"./antd-5b22be5a.js";import{u as l}from"./useMutation-dd6321b2.js";import"./iconPark-f28c66b3.js";import"./wangEditor-77edb64d.js";import"./tslib.es6-3c43c0a4.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(a,t){return this.cache.has(a)?this.cache.get(a):(this.cache.set(a,t),t)}};const ce=()=>{const[a,t]=C.useState(),[c,p]=C.useState(),{message:i}=J.useApp(),{data:f,refresh:h,loading:y}=n(E),{data:K,refresh:u,loading:N,mutate:b}=n(async()=>(await v(a)).map(A=>({cacheKey:A})),{ready:!!a,refreshDeps:[a]}),{data:w,mutate:m,loading:x}=n(()=>z(a,c),{ready:!!c,refreshDeps:[c]}),{mutate:B,isLoading:D}=l(async s=>{await F(s),s===a&&b([]),h(),i.success("操作成功")}),{mutate:L,isLoading:S}=l(async s=>{await H(a,s),s===c&&m({}),u(),i.success("操作成功")}),{mutate:T,isLoading:V}=l(async()=>{await I(),m({}),i.success("操作成功")}),j=O(B),k=q(L);return e(G,{children:P(o,{ghost:!0,gutter:[8,8],children:[e(o,{title:"缓存列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:h,loading:D},"Button")],children:e(d,{rowKey:"cacheName",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:j,options:!1,dataSource:f,scroll:{},loading:y,onRow:s=>({onClick:()=>t(s.cacheName)})})}),e(o,{title:"键名列表",extra:[e(r,{type:"text",icon:e(g,{}),onClick:u,loading:S},"Button")],children:e(d,{rowKey:"cacheKey",ghost:!0,search:!1,rowSelection:!1,pagination:!1,columns:k,options:!1,dataSource:K,scroll:{},loading:N,onRow:s=>({onClick:()=>p(s.cacheKey)})})}),e(o,{title:"缓存内容",extra:[e(r,{type:"text",icon:e(Q,{}),onClick:()=>T(),loading:V},"Button")],children:e(U,{spinning:x,children:e(R,{column:1,columns:M,dataSource:w})})})]})})};export{ce as default};
