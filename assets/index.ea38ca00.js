import{s as w,v as b,g as B,r as y,j as a,ai as l,e as f,aH as k,q as h,a2 as A,aI as R,aJ as E,aK as I,aj as d,aL as P,aM as O,ap as v,aN as D,al as M,ak as N,F as V,am as q,aq as K,aO as Y,ar as L,O as W}from"./index.2175b018.js";import{e as g}from"./index.785b50e6.js";import{b as X,c as H}from"./index.775f7cba.js";import{a as G,u as J}from"./utils.4e5a0818.js";import{S as U,a as z,b as Q,c as Z,d as _,e as $}from"./SysConfigService.3bd0b7c4.js";import{P as ee}from"./index.2cfd4742.js";import{C as te,T as ae,a as oe}from"./index.ad0428f3.js";import{u as j}from"./useMutation.esm.1baf61b5.js";import"./useQuery.esm.0e716d28.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomMainTableActions",w(void 0));T.debugLabel="atomMainTableActions";const x=()=>b(T),se=()=>X(T),m=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/config/model/index.ts/atomAddOrEditModal",G({open:!1,actionType:"add"}));m.debugLabel="atomAddOrEditModal";const ce=()=>b(m),ue=()=>{const e=B(m);return()=>{e({open:!0,actionType:"add"})}},ie=()=>{const e=B(m);return t=>{e({open:!0,actionType:"edit",record:t})}},ne=()=>J(m);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=()=>{const e=y.exports.useRef(),{canAddSysConfig:t,canEditSysConfig:n}=g(),u=x(),{open:r,actionType:s,record:o}=ce(),C=ne(),p=()=>{var i;s==="edit"&&((i=e.current)==null||i.resetFields()),C()};return y.exports.useEffect(()=>{if(r&&s==="edit"){const i=setTimeout(()=>{var c;(c=e.current)==null||c.setFieldsValue(o),clearTimeout(i)},0)}},[r]),a(l,{accessible:t||n,children:f(k,{formRef:e,width:500,title:s==="add"?"\u65B0\u589E\u5B57\u5178\u7C7B\u578B":"\u7F16\u8F91\u5B57\u5178\u7C7B\u578B",open:r,modalProps:{onCancel:p,okText:"\u63D0\u4EA4"},onFinish:async i=>{var c;s==="add"?(await U(i),h.success("\u65B0\u589E\u6210\u529F")):(await z({...i,configId:o.configId}),h.success("\u7F16\u8F91\u6210\u529F")),u==null||u.reload(),C(),(c=e.current)==null||c.resetFields()},children:[a(A,{name:"configName",label:"\u53C2\u6570\u540D\u79F0",required:!0,rules:[{required:!0}]}),a(A,{name:"configKey",label:"\u53C2\u6570\u952E\u540D",required:!0,rules:[{required:!0}]}),a(A,{name:"configValue",label:"\u53C2\u6570\u952E\u503C",required:!0,rules:[{required:!0}]}),a(R.Group,{name:"configType",label:"\u7CFB\u7EDF\u5185\u7F6E",valueEnum:E,initialValue:I.YES}),a(ee,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const he={title:"\u53C2\u6570\u4E3B\u952E",dataIndex:"configId",key:"configId",valueType:"text",hideInSearch:!0},le={title:"\u53C2\u6570\u540D\u79F0",dataIndex:"configName",key:"configName",valueType:"text"},de={title:"\u53C2\u6570\u952E\u540D",dataIndex:"configKey",key:"configKey",valueType:"text"},ge={title:"\u53C2\u6570\u952E\u503C",dataIndex:"configValue",key:"configValue",valueType:"text",hideInSearch:!0},me={title:"\u7CFB\u7EDF\u5185\u7F6E",dataIndex:"configType",key:"configType",valueType:"select",valueEnum:E};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ce=()=>{const{canAddSysConfig:e}=g(),t=ue();return a(l,{accessible:e,children:a(d,{icon:a(P,{}),type:"primary",onClick:t,children:"\u65B0\u589E"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=({record:e})=>{const t=ie();return a(d,{type:"link",icon:a(O,{}),onClick:()=>t(e),children:"\u7F16\u8F91"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const pe=({searchParams:e})=>{const{canExportSysConfig:t}=g(),{isLoading:n,mutate:u}=j(()=>Q(e),{onSuccess:()=>{h.success("\u5BFC\u51FA\u6210\u529F")}});return a(l,{accessible:t,children:a(d,{ghost:!0,type:"primary",icon:a(v,{}),loading:n,onClick:()=>u(),children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ae=()=>{const{canRemoveSysConfig:e}=g();return a(l,{accessible:e,children:a(d,{danger:!0,icon:a(D,{}),onClick:()=>{M.confirm({title:"\u786E\u5B9A\u8981\u5237\u65B0\u7F13\u5B58\u5417\uFF1F",content:"\u5237\u65B0\u7F13\u5B58\u540E\uFF0C\u6240\u6709\u53C2\u6570\u8BBE\u7F6E\u5C06\u91CD\u65B0\u52A0\u8F7D",onOk:async()=>{await Z(),h.success("\u5237\u65B0\u6210\u529F")}})},children:"\u5237\u65B0\u7F13\u5B58"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({configId:e,configName:t,disabled:n,isBatch:u})=>{const r=u?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",{canRemoveSysDict:s}=g(),o=x(),{mutateAsync:C,isLoading:p}=j(async c=>{await _({configIds:c})},{onSuccess:()=>{var c;o==null||o.reload(),(c=o==null?void 0:o.clearSelected)==null||c.call(o),h.success("\u5220\u9664\u6210\u529F")}});return a(l,{accessible:s,children:a(d,{type:"link",danger:!0,disabled:n,icon:a(N,{}),onClick:()=>{M.confirm({title:"\u5220\u9664\u53C2\u6570",content:f(V,{children:["\u786E\u5B9A\u5220\u9664\u53C2\u6570",a(q.Text,{code:!0,children:t}),"\u5417\uFF1F"]}),onOk:async()=>C(e),okButtonProps:{loading:p}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const F="configId",ye=({selectedRows:e})=>a(S,{disabled:e.length===0,isBatch:!0,configId:e.map(t=>t.configId).join(","),configName:e.map(t=>t.configName).join(",")}),Te=()=>{const{rowSelection:e,onClick:t}=H(F),n=se(),[u,r]=y.exports.useState({});return a(K,{rowKey:F,actionRef:n,columns:[he,le,de,ge,me,te,ae,oe,{title:"\u64CD\u4F5C",valueType:"option",fixed:"right",render:(s,o)=>f(Y,{children:[a(fe,{record:o}),a(S,{configId:o.configId,configName:o.configName})]})}],tableAlertOptionRender:ye,rowSelection:e,onRow:s=>({onClick:()=>{t(s)}}),request:async(...s)=>{const o=L(...s);return r(o),await $(o)},toolbar:{actions:[a(Ae,{},"ButtonRefresh"),a(pe,{searchParams:u},"ButtonExport"),a(Ce,{},"ButtonAdd")]}})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ke=()=>f(W,{children:[a(Te,{}),a(re,{})]});export{ke as default};
