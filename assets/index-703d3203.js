import{aX as E,aY as M,ag as P,r as m,bj as x,d as a,a_ as C,j as A,aF as v,aH as b,dj as I,dk as R,ac as p,aA as g,dl as S,bZ as O,dm as B,a$ as F,dn as V,aZ as L,b0 as X,b1 as Y,dp as _,h as q,au as D}from"./index-9a700e01.js";import{a as N}from"./index-fe1eed34.js";import{a as H,u as Z}from"./utils-af7beb7e.js";import{u as y}from"./useMutation.esm-f5941c20.js";import{P as f}from"./index-222fb3bc.js";import{P as $}from"./index-d91736c0.js";import{P as G}from"./index-4e60f16d.js";import{P as K}from"./index-90b87575.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const T=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",E(void 0));T.debugLabel="atomMainTableActions";const Q=()=>N(T),j=()=>M(T),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",H({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const W=()=>{const e=P(h);return()=>e({open:!0,actionType:"add"})},z=()=>{const e=P(h);return t=>e({open:!0,actionType:"edit",record:t})},J=()=>Z(h),U=()=>M(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ee=()=>{const e=m.exports.useRef(),{open:t,actionType:o,record:n}=U(),s=J(),l=()=>{var c;o==="edit"&&((c=e.current)==null||c.resetFields()),s()},r=j(),{data:i}=x("sys_normal_disable"),{mutate:d,isLoading:w}=y(async()=>{var u;const c=await((u=e.current)==null?void 0:u.validateFields());if(!!c){if(o==="add"){await I(c);return}await R({...c,postId:n.postId})}},{onSuccess:()=>{r==null||r.reload(),l(),b.success(o==="add"?"新增成功":"保存成功")}});return m.exports.useEffect(()=>{if(t&&o==="edit"){const c=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(n),clearTimeout(c)},0)}},[t]),a(C,{open:t,onCancel:l,okText:"提交",okButtonProps:{loading:w},onOk:()=>d(),title:o==="add"?"新增岗位":"编辑岗位信息",children:A(v,{submitter:!1,formRef:e,children:[a(f,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),a(f,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),a($,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),a(G.Group,{name:"status",label:"状态",valueEnum:(i==null?void 0:i.valueEnum)??{},initialValue:i==null?void 0:i.defaultValue}),a(K,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const te=()=>{const e=W();return a(p,{accessible:!0,children:a(g,{type:"primary",icon:a(S,{}),onClick:e,children:"新增"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=({record:e})=>{const t=z();return a(p,{accessible:!0,children:a(g,{type:"link",icon:a(O,{}),onClick:()=>t(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=({searchParams:e})=>{const{isLoading:t,mutate:o}=y(()=>B(e),{onSuccess:()=>{b.success("导出成功")}});return a(p,{accessible:!0,children:a(g,{type:"primary",ghost:!0,icon:a(F,{}),loading:t,onClick:()=>o(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const k=({postId:e,isBatch:t,disabled:o})=>{const n=t?"批量删除":"删除",s=j(),{mutateAsync:l,isLoading:r}=y(async d=>{await V({postIds:d})},{onSuccess:()=>{var d;s==null||s.reload(),(d=s==null?void 0:s.clearSelected)==null||d.call(s),b.success("删除成功")}});return a(p,{accessible:!0,children:a(g,{type:"link",danger:!0,disabled:o,icon:a(L,{}),onClick:()=>{C.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>l(e),okButtonProps:{loading:r}})},children:n})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=()=>{const{data:e}=x("sys_normal_disable");return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(e==null?void 0:e.valueEnum)??{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(t,o)=>A(q,{children:[a(ae,{record:o}),a(k,{postId:o.postId})]})}]},re=({selectedRows:e})=>a(k,{disabled:e.length===0,isBatch:!0,postId:e.map(t=>t.postId).join(",")}),ce=()=>{const[e,t]=m.exports.useState({}),o=m.exports.useRef(),n=Q(),s=se();return a(X,{formRef:o,actionRef:n,rowKey:"postId",request:async(...l)=>{const r=Y(...l);return t(r),await _(r)},columns:s,toolbar:{actions:[a(oe,{searchParams:e},"ButtonExport"),a(te,{},"ButtonAdd")]},tableAlertOptionRender:re})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=()=>A(D,{children:[a(ce,{}),a(ee,{})]});export{ge as default};
