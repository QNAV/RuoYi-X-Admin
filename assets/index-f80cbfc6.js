import{ad as I,af as C,ag as k,r as m,d as a,b5 as j,j as A,aP as v,aR as y,b3 as p,aK as g,b_ as R,bS as O,b6 as B,b4 as F,b7 as V,b8 as L,k as D,aF as _}from"./index-324581e1.js";import{d as w,b}from"./index-0faee625.js";import{a as q}from"./index-8805c201.js";import{a as N,u as X}from"./utils-abad75c4.js";import{L as Y,M as K,N as G,O as H,P as Q}from"./System-c33174c5.js";import{u as T}from"./useMutation.esm-34ecafff.js";import{P as x}from"./index-1ac72251.js";import{P as W}from"./index-cc2add67.js";import{P as $}from"./index-8e1b5495.js";import{P as z}from"./index-a615f312.js";import"./utils.esm-d0713da8.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const f=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomMainTableActions",I(void 0));f.debugLabel="atomMainTableActions";const J=()=>q(f),E=()=>C(f),h=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/post/model/index.ts/atomAddOrEditModal",N({open:!1,actionType:"add"}));h.debugLabel="atomAddOrEditModal";const U=()=>{const e=k(h);return()=>e({open:!0,actionType:"add"})},Z=()=>{const e=k(h);return t=>e({open:!0,actionType:"edit",record:t})},ee=()=>X(h),te=()=>C(h);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ae=()=>{var M;const e=m.exports.useRef(),{open:t,actionType:o,record:r}=te(),d=ee(),s=()=>{var n;o==="edit"&&((n=e.current)==null||n.resetFields()),d()},c=E(),{data:i}=w("sys_normal_disable"),{mutate:P,isLoading:l}=T(async()=>{var u;const n=await((u=e.current)==null?void 0:u.validateFields());if(!!n){if(o==="add"){await Y(n);return}await K({...n,postId:r.postId})}},{onSuccess:()=>{c==null||c.reload(),s(),y.success(o==="add"?"新建成功":"保存成功")}});return m.exports.useEffect(()=>{if(t&&o==="edit"){const n=setTimeout(()=>{var u;(u=e.current)==null||u.setFieldsValue(r),clearTimeout(n)},0)}},[t]),a(j,{open:t,onCancel:s,okText:"提交",okButtonProps:{loading:l},onOk:()=>P(),title:o==="add"?"新建岗位":"编辑岗位信息",children:A(v,{submitter:!1,formRef:e,children:[a(x,{name:"postName",label:"岗位名称",rules:[{required:!0}]}),a(x,{name:"postCode",label:"岗位编码",rules:[{required:!0}]}),a(W,{name:"postSort",label:"显示顺序",rules:[{required:!0}],initialValue:0}),a($.Group,{name:"status",label:"状态",valueEnum:(M=i==null?void 0:i.mapData)!=null?M:{},initialValue:i==null?void 0:i.defaultValue}),a(z,{name:"remark",label:"备注"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const oe=()=>{const{canAddSysPost:e}=b(),t=U();return a(p,{accessible:e,children:a(g,{type:"primary",icon:a(R,{}),onClick:t,children:"新建"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const se=({record:e})=>{const{canEditSysPost:t}=b(),o=Z();return a(p,{accessible:t,children:a(g,{type:"link",icon:a(O,{}),onClick:()=>o(e),children:"编辑"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const re=({searchParams:e})=>{const{canExportSysPost:t}=b(),{isLoading:o,mutate:r}=T(()=>G(e),{onSuccess:()=>{y.success("导出成功")}});return a(p,{accessible:t,children:a(g,{type:"primary",ghost:!0,icon:a(B,{}),loading:o,onClick:()=>r(),children:"导出当前列表"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const S=({postId:e,isBatch:t,disabled:o})=>{const r=t?"批量删除":"删除",{canRemoveSysPost:d}=b(),s=E(),{mutateAsync:c,isLoading:i}=T(async l=>{await H({postIds:l})},{onSuccess:()=>{var l;s==null||s.reload(),(l=s==null?void 0:s.clearSelected)==null||l.call(s),y.success("删除成功")}});return a(p,{accessible:d,children:a(g,{type:"link",danger:!0,disabled:o,icon:a(F,{}),onClick:()=>{j.confirm({title:"删除岗位",content:`确定删除岗位编号为 ${e} 的岗位吗？`,onOk:async()=>c(e),okButtonProps:{loading:i}})},children:r})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=()=>{var t;const{data:e}=w("sys_normal_disable");return[{dataIndex:"postId",key:"postId",title:"岗位编号",valueType:"text",hideInSearch:!0},{dataIndex:"postCode",key:"postCode",title:"岗位编码",valueType:"text"},{dataIndex:"postName",key:"postName",title:"岗位名称",valueType:"text"},{dataIndex:"postSort",key:"postSort",title:"显示顺序",valueType:"text",hideInSearch:!0},{title:"状态",dataIndex:"status",key:"status",valueType:"select",valueEnum:(t=e==null?void 0:e.mapData)!=null?t:{}},{title:"备注",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},{title:"创建时间",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},{title:"操作",valueType:"option",render:(o,r)=>A(D,{children:[a(se,{record:r}),a(S,{postId:r.postId})]})}]},ie=({selectedRows:e})=>a(S,{disabled:e.length===0,isBatch:!0,postId:e.map(t=>t.postId).join(",")}),ne=()=>{const[e,t]=m.exports.useState({}),o=m.exports.useRef(),r=J(),d=ce();return a(V,{formRef:o,actionRef:r,rowKey:"postId",request:async(...s)=>{const c=L(...s);return t(c),await Q(c)},columns:d,toolbar:{actions:[a(re,{searchParams:e},"ButtonExport"),a(oe,{},"ButtonAdd")]},tableAlertOptionRender:ie})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe=()=>A(_,{children:[a(ne,{}),a(ae,{})]});export{fe as default};
