import{r as x,bb as Me,Y as U,d as M,j as r,U as a,bc as lt,ao as st,bd as dt,be as ut,bf as Pe,bg as mt,bh as ht,bi as Ce,bj as pt,bk as Ne,bl as gt,bm as ke,an as ft,aM as Ue,bn as xt,X as _e,bo as Qe,V as Le,bp as vt,F as ze,ap as Ct,_ as P,a9 as Ge,aw as Te,bq as yt,az as Re,br as bt,bs as St,bt as wt,bu as It,bv as Rt,Q as Et,ak as Pt,q as At,t as Ze,g as Tt,a1 as Ae,aC as je,bw as Nt,al as Ee,aD as Bt,p as Ke,a3 as We,aF as Dt,aG as Mt,aH as et,aI as _t,aE as Lt,aJ as Ve,bx as zt,by as jt,aT as Xe,aN as Kt,aO as Ft,bz as $t,aR as Ot,aL as tt,aK as Ht,at as qe,$ as Ye,aS as Je,ba as kt,O as Gt}from"./index.d531c2da.js";import{b as Fe}from"./index.f7334c43.js";import{a as Wt,b as Vt}from"./index.a87f8b83.js";import{a as Xt,u as qt}from"./utils.ae739263.js";import{P as Yt}from"./index.a13da23f.js";import{P as Jt}from"./index.7d177a0e.js";import{u as Ut,b as Qt,C as Zt,v as ea,w as ta,j as aa,x as na}from"./index.ac2871c7.js";import{e as oa}from"./SysMenuService.5e5ce42f.js";import{u as at}from"./useRequest.080c736d.js";import{u as nt}from"./useMutation.esm.949ab06c.js";import"./useQuery.esm.69b78184.js";import"./utils.esm.2f50ebda.js";var ot=globalThis&&globalThis.__rest||function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(c[o[s]]=t[o[s]]);return c},ia=function(e){var c=e.prefixCls,o=e.className,s=e.avatar,i=e.title,n=e.description,d=ot(e,["prefixCls","className","avatar","title","description"]),l=x.exports.useContext(Me),C=l.getPrefixCls,m=C("list",c),y=U("".concat(m,"-item-meta"),o),h=M("div",{className:"".concat(m,"-item-meta-content"),children:[i&&r("h4",{className:"".concat(m,"-item-meta-title"),children:i}),n&&r("div",{className:"".concat(m,"-item-meta-description"),children:n})]});return M("div",{...d,className:y,children:[s&&r("div",{className:"".concat(m,"-item-meta-avatar"),children:s}),(i||n)&&h]})},ra=function(e,c){var o=e.prefixCls,s=e.children,i=e.actions,n=e.extra,d=e.className,l=e.colStyle,C=ot(e,["prefixCls","children","actions","extra","className","colStyle"]),m=x.exports.useContext($e),y=m.grid,h=m.itemLayout,p=x.exports.useContext(Me),u=p.getPrefixCls,L=function(){var g;return x.exports.Children.forEach(s,function(f){typeof f=="string"&&(g=!0)}),g&&x.exports.Children.count(s)>1},N=function(){return h==="vertical"?!!n:!L()},S=u("list",o),b=i&&i.length>0&&r("ul",{className:"".concat(S,"-item-action"),children:i.map(function(A,g){return M("li",{children:[A,g!==i.length-1&&r("em",{className:"".concat(S,"-item-action-split")})]},"".concat(S,"-item-action-").concat(g))})},"actions"),D=y?"div":"li",$=r(D,{...C,...y?{}:{ref:c},className:U("".concat(S,"-item"),a({},"".concat(S,"-item-no-flex"),!N()),d),children:h==="vertical"&&n?[M("div",{className:"".concat(S,"-item-main"),children:[s,b]},"content"),r("div",{className:"".concat(S,"-item-extra"),children:n},"extra")]:[s,b,lt(n,{key:"extra"})]});return y?r(st,{ref:c,flex:1,style:l,children:$}):$},it=x.exports.forwardRef(ra);it.Meta=ia;const ca=it;var la=function(e){var c,o,s=e.listBorderedCls,i=e.componentCls,n=e.paddingLG,d=e.margin,l=e.padding,C=e.listItemPaddingSM,m=e.marginLG,y=e.radiusLG;return o={},a(o,"".concat(s),(c={border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:y},a(c,"".concat(i,"-header,").concat(i,"-footer,").concat(i,"-item"),{paddingInline:n}),a(c,"".concat(i,"-pagination"),{margin:"".concat(d,"px ").concat(m,"px")}),c)),a(o,"".concat(s).concat(i,"-sm"),a({},"".concat(i,"-item,").concat(i,"-header,").concat(i,"-footer"),{padding:C})),a(o,"".concat(s).concat(i,"-lg"),a({},"".concat(i,"-item,").concat(i,"-header,").concat(i,"-footer"),{padding:"".concat(l,"px ").concat(n,"px")})),o},sa=function(e){var c,o,s,i,n=e.componentCls,d=e.screenSM,l=e.screenMD,C=e.marginLG,m=e.marginSM,y=e.margin;return i={},a(i,"@media screen and (max-width:".concat(l,")"),(c={},a(c,"".concat(n),a({},"".concat(n,"-item"),a({},"".concat(n,"-item-action"),{marginInlineStart:C}))),a(c,"".concat(n,"-vertical"),a({},"".concat(n,"-item"),a({},"".concat(n,"-item-extra"),{marginInlineStart:C}))),c)),a(i,"@media screen and (max-width: ".concat(d,")"),(s={},a(s,"".concat(n),a({},"".concat(n,"-item"),a({flexWrap:"wrap"},"".concat(n,"-action"),{marginInlineStart:m}))),a(s,"".concat(n,"-vertical"),a({},"".concat(n,"-item"),(o={flexWrap:"wrap-reverse"},a(o,"".concat(n,"-item-main"),{minWidth:e.contentWidth}),a(o,"".concat(n,"-item-extra"),{margin:"auto auto ".concat(y,"px")}),o))),s)),i},da=function(e){var c,o,s,i,n,d,l=e.componentCls,C=e.antCls,m=e.controlHeight,y=e.minHeight,h=e.paddingSM,p=e.marginLG,u=e.padding,L=e.listItemPadding,N=e.colorPrimary,S=e.listItemPaddingSM,b=e.listItemPaddingLG,D=e.paddingXS,$=e.margin,A=e.colorText,g=e.colorTextDescription,f=e.motionDurationSlow,ie=e.lineWidth;return d={},a(d,"".concat(l),Pe(Pe({},mt(e)),(i={position:"relative","*":{outline:"none"}},a(i,"".concat(l,"-header, ").concat(l,"-footer"),{background:"transparent",paddingBlock:h}),a(i,"".concat(l,"-pagination"),a({marginBlockStart:p,textAlign:"end"},"".concat(C,"-pagination-options"),{textAlign:"start"})),a(i,"".concat(l,"-spin"),{minHeight:y,textAlign:"center"}),a(i,"".concat(l,"-items"),{margin:0,padding:0,listStyle:"none"}),a(i,"".concat(l,"-item"),(s={display:"flex",alignItems:"center",justifyContent:"space-between",padding:L,color:A},a(s,"".concat(l,"-item-meta"),(c={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},a(c,"".concat(l,"-item-meta-avatar"),{marginInlineEnd:u}),a(c,"".concat(l,"-item-meta-content"),{flex:"1 0",width:0,color:A}),a(c,"".concat(l,"-item-meta-title"),{marginBottom:e.marginXXS,color:A,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":a({color:A,transition:"all ".concat(f)},"&:hover",{color:N})}),a(c,"".concat(l,"-item-meta-description"),{color:g,fontSize:e.fontSize,lineHeight:e.lineHeight}),c)),a(s,"".concat(l,"-item-action"),(o={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},a(o,"& > li",a({position:"relative",display:"inline-block",padding:"0 ".concat(D,"px"),color:g,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),a(o,"".concat(l,"-item-action-split"),{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:ie,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),o)),s)),a(i,"".concat(l,"-empty"),{padding:"".concat(u,"px 0"),color:g,fontSize:e.fontSizeSM,textAlign:"center"}),a(i,"".concat(l,"-empty-text"),{padding:u,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),a(i,"".concat(l,"-item-no-flex"),{display:"block"}),i))),a(d,"".concat(l,"-grid ").concat(C,"-col > ").concat(l,"-item"),{display:"block",maxWidth:"100%",marginBlockEnd:$,paddingBlock:0,borderBlockEnd:"none"}),a(d,"".concat(l,"-vertical ").concat(l,"-item"),(n={alignItems:"initial"},a(n,"".concat(l,"-item-main"),{display:"block",flex:1}),a(n,"".concat(l,"-item-extra"),{marginInlineStart:p}),a(n,"".concat(l,"-item-meta"),a({marginBlockEnd:u},"".concat(l,"-item-meta-title"),{marginBlockEnd:h,color:A,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),a(n,"".concat(l,"-item-action"),{marginBlockStart:u,marginInlineStart:"auto","> li":a({padding:"0 ".concat(u,"px")},"&:first-child",{paddingInlineStart:0})}),n)),a(d,"".concat(l,"-split ").concat(l,"-item"),a({borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.controlLineType," ").concat(e.colorSplit)},"&:last-child",{borderBlockEnd:"none"})),a(d,"".concat(l,"-split ").concat(l,"-header"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-split").concat(l,"-empty ").concat(l,"-footer"),{borderTop:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-loading ").concat(l,"-spin-nested-loading"),{minHeight:m}),a(d,"".concat(l,"-split").concat(l,"-something-after-last-item ").concat(C,"-spin-container > ").concat(l,"-items > ").concat(l,"-item:last-child"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),a(d,"".concat(l,"-lg ").concat(l,"-item"),{padding:b}),a(d,"".concat(l,"-sm ").concat(l,"-item"),{padding:S}),a(d,"".concat(l,":not(").concat(l,"-vertical)"),a({},"".concat(l,"-item-no-flex"),a({},"".concat(l,"-item-action"),{float:"right"}))),d};const ua=dt("List",function(t){var e=ut(t,{listBorderedCls:"".concat(t.componentCls,"-bordered"),minHeight:t.controlHeightLG,listItemPadding:"".concat(t.paddingSM,"px 0"),listItemPaddingSM:"".concat(t.paddingXS,"px ").concat(t.padding,"px"),listItemPaddingLG:"".concat(t.padding,"px ").concat(t.paddingLG,"px")});return[da(e),la(e),sa(e)]},{contentWidth:220});var ma=globalThis&&globalThis.__rest||function(t,e){var c={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(c[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(t);s<o.length;s++)e.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(t,o[s])&&(c[o[s]]=t[o[s]]);return c},$e=x.exports.createContext({});$e.Consumer;function Be(t){var e,c=t.pagination,o=c===void 0?!1:c,s=t.prefixCls,i=t.bordered,n=i===void 0?!1:i,d=t.split,l=d===void 0?!0:d,C=t.className,m=t.children,y=t.itemLayout,h=t.loadMore,p=t.grid,u=t.dataSource,L=u===void 0?[]:u,N=t.size,S=t.header,b=t.footer,D=t.loading,$=D===void 0?!1:D,A=t.rowKey,g=t.renderItem,f=t.locale,ie=ma(t,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),ae=o&&ht(o)==="object"?o:{},ue=x.exports.useState(ae.defaultCurrent||1),me=Ce(ue,2),ne=me[0],H=me[1],he=x.exports.useState(ae.defaultPageSize||10),re=Ce(he,2),pe=re[0],Q=re[1],Z=x.exports.useContext(Me),q=Z.getPrefixCls,B=Z.renderEmpty,k=Z.direction,K={current:1,total:0},E={},F=function(T){return function(V,X){H(V),Q(X),o&&o[T]&&o[T](V,X)}},O=F("onChange"),ce=F("onShowSizeChange"),G=function(T,V){if(!g)return null;var X;return typeof A=="function"?X=A(T):A?X=T[A]:X=T.key,X||(X="list-item-".concat(V)),E[V]=X,g(T,V)},le=function(){return!!(h||o||b)},ge=function(T,V){return r("div",{className:"".concat(T,"-empty-text"),children:f&&f.emptyText||V("List")})},_=q("list",s),be=ua(_),Y=Ce(be,2),Se=Y[0],ye=Y[1],z=$;typeof z=="boolean"&&(z={spinning:z});var v=z&&z.spinning,I="";switch(N){case"large":I="lg";break;case"small":I="sm";break}var w=U(_,(e={},a(e,"".concat(_,"-vertical"),y==="vertical"),a(e,"".concat(_,"-").concat(I),I),a(e,"".concat(_,"-split"),l),a(e,"".concat(_,"-bordered"),n),a(e,"".concat(_,"-loading"),v),a(e,"".concat(_,"-grid"),!!p),a(e,"".concat(_,"-something-after-last-item"),le()),a(e,"".concat(_,"-rtl"),k==="rtl"),e),C,ye),j=Pe(Pe(Pe({},K),{total:L.length,current:ne,pageSize:pe}),o||{}),se=Math.ceil(j.total/j.pageSize);j.current>se&&(j.current=se);var de=o?r("div",{className:"".concat(_,"-pagination"),children:r(pt,{...j,onChange:O,onShowSizeChange:ce})}):null,ee=Ne(L);o&&L.length>(j.current-1)*j.pageSize&&(ee=Ne(L).splice((j.current-1)*j.pageSize,j.pageSize));var we=Object.keys(p||{}).some(function(R){return["xs","sm","md","lg","xl","xxl"].includes(R)}),fe=gt(we),te=x.exports.useMemo(function(){for(var R=0;R<ke.length;R+=1){var T=ke[R];if(fe[T])return T}},[fe]),Ie=x.exports.useMemo(function(){if(!!p){var R=te&&p[te]?p[te]:p.column;if(R)return{width:"".concat(100/R,"%"),maxWidth:"".concat(100/R,"%")}}},[p==null?void 0:p.column,te]),xe=v&&r("div",{style:{minHeight:53}});if(ee.length>0){var W=ee.map(function(R,T){return G(R,T)}),ve=x.exports.Children.map(W,function(R,T){return r("div",{style:Ie,children:R},E[T])});xe=p?r(ft,{gutter:p.gutter,children:ve}):r("ul",{className:"".concat(_,"-items"),children:W})}else!m&&!v&&(xe=ge(_,B||xt));var oe=j.position||"bottom",J=x.exports.useMemo(function(){return{grid:p,itemLayout:y}},[JSON.stringify(p),y]);return Se(r($e.Provider,{value:J,children:M("div",{className:w,...ie,children:[(oe==="top"||oe==="both")&&de,S&&r("div",{className:"".concat(_,"-header"),children:S}),M(Ue,{...z,children:[xe,m]}),b&&r("div",{className:"".concat(_,"-footer"),children:b}),h||(oe==="bottom"||oe==="both")&&de]})}))}Be.Item=ca;var ha=["title","subTitle","content","itemTitleRender","prefixCls","actions","item","recordKey","avatar","cardProps","description","isEditable","checkbox","index","selected","loading","expand","onExpand","expandable","rowSupportExpand","showActions","showExtra","type","style","className","record","onRow","onItem","itemHeaderRender","cardActionProps","extra"];function pa(t){var e,c=t.prefixCls,o=t.expandIcon,s=o===void 0?r(yt,{}):o,i=t.onExpand,n=t.expanded,d=t.record,l=s,C="".concat(c,"-row-expand-icon"),m=function(h){i(!n),h.stopPropagation()};return typeof s=="function"&&(l=s({expanded:n,onExpand:i,record:d})),r("span",{className:U(C,(e={},a(e,"".concat(c,"-row-expanded"),n),a(e,"".concat(c,"-row-collapsed"),!n),e)),onClick:m,children:l})}function ga(t){var e,c,o,s,i,n=t.prefixCls,d=x.exports.useContext(_e.ConfigContext),l=d.getPrefixCls,C=Qe(),m=C.hashId,y=l("pro-list",n),h="".concat(y,"-row"),p=t.title,u=t.subTitle,L=t.content,N=t.itemTitleRender;t.prefixCls;var S=t.actions;t.item,t.recordKey;var b=t.avatar,D=t.cardProps,$=t.description,A=t.isEditable,g=t.checkbox,f=t.index,ie=t.selected,ae=t.loading,ue=t.expand,me=t.onExpand,ne=t.expandable,H=t.rowSupportExpand,he=t.showActions,re=t.showExtra,pe=t.type,Q=t.style,Z=t.className,q=Z===void 0?h:Z,B=t.record,k=t.onRow,K=t.onItem,E=t.itemHeaderRender,F=t.cardActionProps,O=t.extra,ce=Le(t,ha),G=ne||{},le=G.expandedRowRender,ge=G.expandIcon,_=G.expandRowByClick,be=G.indentSize,Y=be===void 0?8:be,Se=G.expandedRowClassName,ye=vt(!!ue,{value:ue,onChange:me}),z=Ce(ye,2),v=z[0],I=z[1],w=U((e={},a(e,"".concat(h,"-selected"),!D&&ie),a(e,"".concat(h,"-show-action-hover"),he==="hover"),a(e,"".concat(h,"-type-").concat(pe),!!pe),a(e,"".concat(h,"-editable"),A),a(e,"".concat(h,"-show-extra-hover"),re==="hover"),e),m,h),j=U(m,a({},"".concat(q,"-extra"),re==="hover")),se=v||Object.values(ne||{}).length===0,de=le&&le(B,f,Y,v),ee=x.exports.useMemo(function(){if(!(!S||F==="actions"))return[r("div",{onClick:function(J){return J.stopPropagation()},children:S},"action")]},[S,F]),we=x.exports.useMemo(function(){if(!(!S||!F||F==="extra"))return[r("div",{onClick:function(J){return J.stopPropagation()},children:S},"action")]},[S,F]),fe=p||u?M("div",{className:"".concat(w,"-header-title ").concat(m),children:[p&&r("div",{className:"".concat(w,"-title ").concat(m),children:p}),u&&r("div",{className:"".concat(w,"-subTitle ").concat(m),children:u})]}):null,te=(c=N&&(N==null?void 0:N(B,f,fe)))!==null&&c!==void 0?c:fe,Ie=te||b||u||$?r(Be.Item.Meta,{avatar:b,title:te,description:$&&se&&r("div",{className:"".concat(w,"-description ").concat(m),children:$})}):null,xe=U(m,(o={},a(o,"".concat(w,"-item-has-checkbox"),g),a(o,"".concat(w,"-item-has-avatar"),b),a(o,w,w),o)),W=x.exports.useMemo(function(){return b||p?M(ze,{children:[b&&r(Ct,{size:22,src:b,className:"".concat(l("list-item-meta-avatar")," ").concat(m)}),r("span",{className:"".concat(l("list-item-meta-title")," ").concat(m),children:p})]}):null},[b,l,m,p]),ve=D?r(Te,P(P(P({bordered:!0,loading:ae,hoverable:!0},D),{},{title:W,subTitle:u,extra:ee,actions:we,bodyStyle:P({padding:24},D.bodyStyle)},K==null?void 0:K(B,f)),{},{children:r(Ge,{avatar:!0,title:!1,loading:ae,active:!0,children:M("div",{className:"".concat(w,"-header ").concat(m),children:[N&&(N==null?void 0:N(B,f,fe)),L]})})})):r(Be.Item,P(P(P(P({className:U(xe,a({},q,q!==h))},ce),{},{actions:ee,extra:!!O&&r("div",{className:j,children:O})},k==null?void 0:k(B,f)),K==null?void 0:K(B,f)),{},{onClick:function(J){var R,T,V,X;k==null||(R=k(B,f))===null||R===void 0||(T=R.onClick)===null||T===void 0||T.call(R,J),K==null||(V=K(B,f))===null||V===void 0||(X=V.onClick)===null||X===void 0||X.call(V,J),_&&I(!v)},children:M(Ge,{avatar:!0,title:!1,loading:ae,active:!0,children:[M("div",{className:"".concat(w,"-header ").concat(m),children:[M("div",{className:"".concat(w,"-header-option ").concat(m),children:[!!g&&r("div",{className:"".concat(w,"-checkbox ").concat(m),children:g}),Object.values(ne||{}).length>0&&H&&pa({prefixCls:y,expandIcon:ge,onExpand:I,expanded:v,record:B})]}),(s=E&&(E==null?void 0:E(B,f,Ie)))!==null&&s!==void 0?s:Ie]}),se&&(L||de)&&M("div",{className:"".concat(w,"-content ").concat(m),children:[L,le&&H&&r("div",{className:Se&&Se(B,f,Y),children:de})]})]})}));return D?r("div",{className:U(m,(i={},a(i,"".concat(w,"-card"),D),a(i,q,q!==h),i)),style:Q,children:ve}):ve}var fa=["dataSource","columns","rowKey","showActions","showExtra","prefixCls","actionRef","itemTitleRender","renderItem","itemCardProps","itemHeaderRender","expandable","rowSelection","pagination","onRow","onItem","rowClassName"];function xa(t){var e=t.dataSource,c=t.columns,o=t.rowKey,s=t.showActions,i=t.showExtra,n=t.prefixCls,d=t.actionRef,l=t.itemTitleRender,C=t.renderItem,m=t.itemCardProps,y=t.itemHeaderRender,h=t.expandable,p=t.rowSelection,u=t.pagination,L=t.onRow,N=t.onItem,S=t.rowClassName,b=Le(t,fa),D=Qe(),$=D.hashId,A=x.exports.useContext(_e.ConfigContext),g=A.getPrefixCls,f=Re.useMemo(function(){return typeof o=="function"?o:function(z,v){return z[o]||v}},[o]),ie=bt(e,"children",f),ae=Ce(ie,1),ue=ae[0],me=St(e.length,P({responsive:!0},u),function(){}),ne=Ce(me,1),H=ne[0],he=Re.useMemo(function(){if(u===!1||!H.pageSize||e.length<H.total)return e;var z=H.current,v=z===void 0?1:z,I=H.pageSize,w=I===void 0?10:I,j=e.slice((v-1)*w,v*w);return j},[e,H,u]),re=g("pro-list",n),pe=wt(p,{getRowKey:f,getRecordByKey:ue,prefixCls:re,data:e,pageData:he,expandType:"row",childrenColumnName:"children",locale:{}}),Q=Ce(pe,2),Z=Q[0],q=Q[1],B=h||{},k=B.expandedRowKeys,K=B.defaultExpandedRowKeys,E=B.defaultExpandAllRows,F=E===void 0?!0:E,O=B.onExpand,ce=B.onExpandedRowsChange,G=B.rowExpandable,le=Re.useState(function(){return K||(F!==!1?e.map(f):[])}),ge=Ce(le,2),_=ge[0],be=ge[1],Y=Re.useMemo(function(){return new Set(k||_||[])},[k,_]),Se=Re.useCallback(function(z){var v=f(z,e.indexOf(z)),I,w=Y.has(v);w?(Y.delete(v),I=Ne(Y)):I=[].concat(Ne(Y),[v]),be(I),O&&O(!w,z),ce&&ce(I)},[f,Y,e,O,ce]),ye=Z([])[0];return r(Be,P(P({},b),{},{className:U(g("pro-list-container",n),$,b.className),dataSource:he,pagination:u&&H,renderItem:function(v,I){var w,j,se,de={className:typeof S=="function"?S(v,I):S};c==null||c.forEach(function(W){var ve=W.listKey,oe=W.cardActionProps;if(!!It.has(ve)){var J=W.dataIndex||ve||W.key,R=Array.isArray(J)?Rt(v,J):v[J];oe==="actions"&&ve==="actions"&&(de.cardActionProps=oe);var T=W.render?W.render(R,v,I):R;T!=="-"&&(de[W.listKey]=T)}});var ee;ye&&ye.render&&(ee=ye.render(v,v,I)||void 0);var we=((w=d.current)===null||w===void 0?void 0:w.isEditable(P(P({},v),{},{index:I})))||{},fe=we.isEditable,te=we.recordKey,Ie=q.has(te||I),xe=r(ga,P(P({cardProps:b.grid?P(P(P({},m),b.grid),{},{checked:Ie,onChecked:Re.isValidElement(ee)?(j=ee)===null||j===void 0||(se=j.props)===null||se===void 0?void 0:se.onChange:void 0}):void 0},de),{},{recordKey:te,isEditable:fe||!1,expandable:h,expand:Y.has(f(v,I)),onExpand:function(){Se(v)},index:I,record:v,item:v,showActions:s,showExtra:i,itemTitleRender:l,itemHeaderRender:y,rowSupportExpand:!G||G&&G(v),selected:q.has(f(v,I)),checkbox:ee,onRow:L,onItem:N}),te);return C?C(v,I,xe):xe}}))}var va=function(e){var c,o,s,i,n,d;return a({},e.componentCls,(d={backgroundColor:"transparent"},a(d,"".concat(e.proComponentsCls,"-table-alert"),{marginBlockEnd:"16px"}),a(d,"&-row",(n={borderBlockEnd:"1px solid ".concat(e.colorSplit)},a(n,"".concat(e.antCls,"-list-item-meta-title"),{borderBlockEnd:"none",margin:0}),a(n,"&:last-child",a({borderBlockEnd:"none"},"".concat(e.antCls,"-list-item"),{borderBlockEnd:"none"})),a(n,"&:hover",(c={backgroundColor:"rgba(0, 0, 0, 0.02)",transition:"background-color 0.3s"},a(c,"".concat(e.antCls,"-list-item-action"),{display:"block"}),a(c,"".concat(e.antCls,"-list-item-extra"),{display:"flex"}),a(c,"".concat(e.componentCls,"-row-extra"),{display:"block"}),a(c,"".concat(e.componentCls,"-row-subheader-actions"),{display:"block"}),c)),a(n,"&-card",a({marginBlock:8,marginInline:0,paddingBlock:0,paddingInline:8,"&:hover":{backgroundColor:"transparent"}},"".concat(e.antCls,"-list-item-meta-title"),{flexShrink:9,marginBlock:0,marginInline:0,lineHeight:"22px"})),a(n,"&".concat(e.componentCls,"-row-editable"),a({},"".concat(e.componentCls,"-list-item"),{"&-meta":{"&-avatar,&-description,&-title":{paddingBlock:6,paddingInline:0}},"&-action":{display:"block"}})),a(n,"&".concat(e.componentCls,"-row-selected"),{backgroundColor:e.colorPrimaryBgHover,"&:hover":{backgroundColor:e.colorPrimaryBgHover}}),a(n,"&".concat(e.componentCls,"-row-type-new"),{animation:"techUiListActive 3s"}),a(n,"&".concat(e.componentCls,"-row-type-inline"),a({},"".concat(e.componentCls,"-row-title"),{fontWeight:"normal"})),a(n,"&".concat(e.componentCls,"-row-type-top"),{backgroundImage:"url('https://gw.alipayobjects.com/zos/antfincdn/DehQfMbOJb/icon.svg')",backgroundRepeat:"no-repeat",backgroundPosition:"left top",backgroundSize:"12px 12px"}),a(n,"&-show-action-hover",(o={},a(o,"".concat(e.antCls,`-list-item-action,
            `).concat(e.proComponentsCls,`-card-extra,
            `).concat(e.proComponentsCls,"-card-actions"),{display:"none"}),a(o,"&:hover",a({},"".concat(e.proComponentsCls,"-card-extra,").concat(e.proComponentsCls,"-card-actions"),{display:"flex"})),o)),a(n,"&-show-extra-hover",a({},"".concat(e.antCls,"-list-item-extra"),{display:"none"})),a(n,"&-extra",{display:"none"}),a(n,"&-subheader",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"44px",paddingInline:24,paddingBlock:0,color:e.colorTextSecondary,lineHeight:"44px",background:"rgba(0, 0, 0, 0.02)","&-actions":{display:"none"},"&-actions *":{marginInlineEnd:8,"&:last-child":{marginInlineEnd:0}}}),a(n,"&-expand-icon",{marginInlineEnd:8,color:e.colorTextSecondary,"> .anticon > svg":{transition:"0.3s"}}),a(n,"&-expanded",{" > .anticon > svg":{transform:"rotate(90deg)"}}),a(n,"&-title",{marginInlineEnd:"16px",wordBreak:"break-all",cursor:"pointer","&:hover":{color:e.colorPrimary}}),a(n,"&-content",{position:"relative",display:"flex",flex:"1",flexDirection:"column",marginBlock:0,marginInline:32}),a(n,"&-subTitle",{color:"rgba(0, 0, 0, 0.45)"}),a(n,"&-description",{marginBlockStart:"4px",wordBreak:"break-all"}),a(n,"&-avatar",{display:"flex"}),a(n,"&-header",{display:"flex",flex:"1",justifyContent:"flex-start"}),a(n,"&-header-title",{display:"flex",alignItems:"center",justifyContent:"flex-start"}),a(n,"&-header-option",{display:"flex"}),a(n,"&-checkbox",{width:"16px",marginInlineEnd:"12px"}),a(n,"&-no-split",(s={},a(s,"".concat(e.componentCls,"-row"),{borderBlockEnd:"none"}),a(s,"".concat(e.antCls,"-list ").concat(e.antCls,"-list-item"),{borderBlockEnd:"none"}),s)),a(n,"&-bordered",a({},"".concat(e.componentCls,"-toolbar"),{borderBlockEnd:"1px solid ".concat(e.colorSplit)})),a(n,"".concat(e.antCls,"-list-vertical"),(i={},a(i,"".concat(e.componentCls,"-row"),{borderBlockEnd:"12px 18px 12px 24px"}),a(i,"&-header-title",{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"}),a(i,"&-content",{marginBlock:0,marginInline:0}),a(i,"&-subTitle",{marginBlockStart:8}),a(i,"".concat(e.antCls,"-list-item-extra"),a({display:"flex",alignItems:"center",marginInlineStart:"32px"},"".concat(e.componentCls,"-row-description"),{marginBlockStart:16})),a(i,"".concat(e.antCls,"-list-bordered ").concat(e.antCls,"-list-item"),{paddingInline:0}),a(i,"".concat(e.componentCls,"-row-show-extra-hover"),a({},"".concat(e.antCls,"-list-item-extra "),{display:"none"})),i)),a(n,"".concat(e.antCls,"-list-pagination"),{marginBlockEnd:e.marginLG}),a(n,"".concat(e.antCls,"-list-list"),{"&-item":{cursor:"pointer",paddingBlock:12,paddingInline:12}}),a(n,"".concat(e.antCls,"-list-vertical .").concat(e.proComponentsCls,"-list-row ").concat(e.antCls,"-list"),a({"&-header":{paddingBlock:0,paddingInline:0,borderBlockEnd:"none"}},"".concat(e.antCls,"-list-item"),{width:"100%",paddingBlock:12,paddingInlineStart:24,paddingInlineEnd:18,"&-meta-avatar":{display:"flex",alignItems:"center",marginInlineEnd:8},"&-action-split":{display:"none"},"&-meta-title":{marginBlock:0,marginInline:0}})),a(n,"@keyframes techUiListActive",{"0%":{backgroundColor:"unset"},"30%":{background:"#fefbe6"},"100%":{backgroundColor:"unset"}}),n)),d))};function Ca(t){return Et("ProList",function(e){var c=P(P({},e),{},{componentCls:".".concat(t)});return[va(c)]})}var ya=["metas","split","footer","rowKey","tooltip","className","options","search","expandable","showActions","showExtra","rowSelection","pagination","itemLayout","renderItem","grid","itemCardProps","onRow","onItem","rowClassName","locale","itemHeaderRender","itemTitleRender"];function ba(t){var e=t.metas,c=t.split,o=t.footer,s=t.rowKey,i=t.tooltip,n=t.className,d=t.options,l=d===void 0?!1:d,C=t.search,m=C===void 0?!1:C,y=t.expandable,h=t.showActions,p=t.showExtra,u=t.rowSelection,L=u===void 0?!1:u,N=t.pagination,S=N===void 0?!1:N,b=t.itemLayout,D=t.renderItem,$=t.grid,A=t.itemCardProps,g=t.onRow,f=t.onItem,ie=t.rowClassName,ae=t.locale,ue=t.itemHeaderRender,me=t.itemTitleRender,ne=Le(t,ya),H=x.exports.useRef();x.exports.useImperativeHandle(ne.actionRef,function(){return H.current});var he=x.exports.useContext(_e.ConfigContext),re=he.getPrefixCls,pe=x.exports.useMemo(function(){var K=[];return Object.keys(e||{}).forEach(function(E){var F=e[E]||{},O=F.valueType;O||(E==="avatar"&&(O="avatar"),E==="actions"&&(O="option"),E==="description"&&(O="textarea")),K.push(P(P({listKey:E,dataIndex:(F==null?void 0:F.dataIndex)||E},F),{},{valueType:O}))}),K},[e]),Q=re("pro-list",t.prefixCls),Z=Ca(Q),q=Z.wrapSSR,B=Z.hashId,k=U(Q,B,a({},"".concat(Q,"-no-split"),!c));return q(r(Pt,P(P({tooltip:i},ne),{},{actionRef:H,pagination:S,type:"list",rowSelection:L,search:m,options:l,className:U(Q,n,k),columns:pe,rowKey:s,tableViewRender:function(E){var F=E.columns,O=E.size,ce=E.pagination,G=E.rowSelection,le=E.dataSource,ge=E.loading;return r(xa,{grid:$,itemCardProps:A,itemTitleRender:me,prefixCls:t.prefixCls,columns:F,renderItem:D,actionRef:H,dataSource:le||[],size:O,footer:o,split:c,rowKey:s,expandable:y,rowSelection:L===!1?void 0:G,showActions:h,showExtra:p,pagination:ce,itemLayout:b,loading:ge,itemHeaderRender:ue,onRow:g,onItem:f,rowClassName:ie,locale:ae})}})))}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Oe=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/AtomRoleListActions",At(void 0));Oe.debugLabel="AtomRoleListActions";const He=()=>Ze(Oe),Sa=()=>Wt(Oe),De=globalThis.jotaiAtomCache.get("/home/runner/work/RuoYi-X-Admin/RuoYi-X-Admin/src/pages/system/role/model/index.ts/AtomRoleDetails",Xt({visible:!1,roleId:0,roleName:""}));De.debugLabel="AtomRoleDetails";const wa=()=>qt(De),Ia=()=>Tt(De),rt=()=>Ze(De);globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};async function Ra(t,e){return Ae("/system/role/add",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Ea(t,e){return Ae("/system/role/edit",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Pa(t,e){return Ae("/system/role/info",{method:"GET",params:{...t},...e||{}})}async function Aa(t,e){return Ae("/system/role/list",{method:"POST",headers:{"Content-Type":"application/json"},data:t,...e||{}})}async function Ta(t,e){return Ae("/system/role/remove",{method:"POST",params:{...t},...e||{}})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Na=()=>{const t=Fe(),e=x.exports.useRef(),c=He();return r(je,{accessible:t.canAddSysRole,children:M(Nt,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:r(Ee,{type:"primary",icon:r(Bt,{}),children:"\u65B0\u5EFA"}),formRef:e,onFinish:async o=>{var s;return await Ra({...o,menuIds:[],menuCheckStrictly:!0}),c==null||c.reload(),(s=e.current)==null||s.resetFields(),Ke.success("\u65B0\u5EFA\u6210\u529F"),!0},width:500,children:[r(We,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),r(We,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),r(Yt,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),r(Dt.Group,{name:"status",label:"\u72B6\u6001",valueEnum:Mt,initialValue:et.ENABLE}),r(Jt,{name:"remark",label:"\u5907\u6CE8"})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ba=()=>{const t=Fe(),e=He(),c=wa(),{roleId:o,roleName:s}=rt(),i=()=>Lt.confirm({title:"\u5220\u9664\u786E\u8BA4",content:M(ze,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",r(Ve.Text,{code:!0,children:s}),"\u8FDB\u884C",r(Ve.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:async()=>{var n;await Ta({roleIds:o}),e==null||e.reload(),(n=e==null?void 0:e.clearSelected)==null||n.call(e),c(),Ke.success("\u5220\u9664\u6210\u529F")}});return r(je,{accessible:t.canRemoveSysRole,children:r(Ee,{danger:!0,ghost:!0,icon:r(_t,{}),onClick:i,children:"\u5220\u9664"})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Da={title:"label",key:"id",children:"children"},ct=t=>{const e=[];return t.forEach(({id:c,children:o})=>{e.push(c),o&&e.push(...ct(o))}),e},Ma=({roleId:t,handleEdit:e})=>{var A;const[c,o]=x.exports.useState([]),[s,i]=x.exports.useState(!1),[n,d]=x.exports.useState([]),[l,C]=x.exports.useState([]),[m,y]=x.exports.useState(!1),[h,p]=x.exports.useState(!0),{data:u,refresh:L}=at(async()=>{const{menus:g,checkedKeys:f}=await oa({roleId:t});return{treeData:g,selectedMenuIds:f,selectedTreeData:zt(g,f),allMenuIds:jt(g)}},{ready:t>0,refreshDeps:[t],onSuccess:g=>{i(!1),C(g.selectedTreeData)}}),{isLoading:N,mutate:S}=nt(async()=>{await e({menuIds:c}),L()}),b=ct((A=u==null?void 0:u.treeData)!=null?A:[]),D=(n==null?void 0:n.length)!==0&&(n==null?void 0:n.length)===(b==null?void 0:b.length),$=g=>{var f;if(g||h){o((f=u==null?void 0:u.allMenuIds)!=null?f:[]);return}o([])};return x.exports.useEffect(()=>{if((u==null?void 0:u.allMenuIds.length)===c.length){y(!0),p(!1);return}if(c.length===0){y(!1),p(!1);return}p(!0)},[u==null?void 0:u.allMenuIds,c]),M(ze,{children:[M("header",{className:"flex justify-between mb-2",children:[M(Xe,{children:[l.length>0&&r(Ee,{size:"small",icon:D?r(Kt,{}):r(Ft,{}),onClick:()=>d(D?[]:b),children:D?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),s&&r($t,{indeterminate:h,onChange:g=>$(g.target.checked),checked:m,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),r(je,{accessible:!0,children:s?M(Xe,{children:[r(Ee,{loading:N,onClick:()=>{var g;i(!1),C((g=u==null?void 0:u.selectedTreeData)!=null?g:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),r(Ee,{type:"primary",ghost:!0,loading:N,onClick:()=>S(),children:"\u4FDD\u5B58"})]}):r(Ee,{type:"primary",ghost:!0,onClick:()=>{var g,f;i(!0),o((g=u==null?void 0:u.selectedMenuIds)!=null?g:[]),C((f=u==null?void 0:u.treeData)!=null?f:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),r("div",{className:"h-[390px] overflow-y-auto",children:l.length>0?r(Ot,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:s,checkStrictly:!0,fieldNames:Da,checkedKeys:c,treeData:l,expandedKeys:n,onExpand:g=>d(g),onCheck:g=>{o(g.checked)}}):r(tt,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const _a=()=>{const[t,e]=x.exports.useState([]),[c]=Ht.useForm(),o=Fe(),s=He(),{roleId:i,visible:n}=rt(),{data:d,loading:l,refresh:C}=at(()=>Pa({roleId:i}),{ready:n&&i>0,refreshDeps:[i],onSuccess:()=>{e([])}}),{mutateAsync:m}=nt(async h=>{var p;await Ea({roleId:i,menuIds:(p=d==null?void 0:d.menuIds)!=null?p:[],roleKey:d.roleKey,roleName:d.roleName,roleSort:d.roleSort,status:d.status,...h})},{onSuccess:()=>{C(),s==null||s.reload(),Ke.success("\u4FDD\u5B58\u6210\u529F")}}),y=o.canEditSysRole&&d?{form:c,editableKeys:t,onChange:(h,p)=>{e(h),h.length===1&&!Array.isArray(p)&&c.setFieldsValue({[h[0]]:p[h[0]]})},onSave:async(h,p)=>{await m({[h]:p[h]})}}:void 0;return n?M(Ue,{spinning:l,children:[r(qe,{column:2,columns:[Ut,Qt],dataSource:d}),r(Ye,{}),r(qe,{column:2,columns:[Zt,ea,ta,aa,na],dataSource:d,editable:y}),r(Ye,{}),r(Ma,{roleId:i,handleEdit:h=>m(h)})]}):r(tt,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const La=()=>{const t=Sa(),e=Ia(),{onClick:c,rowSelection:o,selectedRows:s}=Vt("roleId","radio");return x.exports.useEffect(()=>{s.length===1&&e({roleId:s[0].roleId,roleName:s[0].roleName,visible:!0})},[s]),r(ba,{ghost:!0,rowKey:"roleId",actionRef:t,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:i=>i===et.ENABLE?r(Je,{color:"success",children:"\u542F\u7528\u4E2D"}):r(Je,{color:"error",children:"\u5DF2\u7981\u7528"})}},tableAlertRender:!1,onRow:i=>({onClick:()=>c(i)}),rowSelection:o,pagination:{pageSize:10},request:(...i)=>Aa(kt(...i))})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const qa=()=>r(Gt,{children:M(Te,{ghost:!0,gutter:24,children:[r(Te,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:r(Na,{}),children:r(La,{})}),r(Te,{title:"\u89D2\u8272\u8BE6\u60C5",extra:r(Ba,{}),children:r(_a,{})})]})});export{qa as default};
