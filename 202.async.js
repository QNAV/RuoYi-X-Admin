"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[202],{41202:function(ln,X,R){R.d(X,{Z:function(){return sn}});var d=R(50959),Y=function(e){return function(n,t){var u=(0,d.useRef)(!1);e(function(){return function(){u.current=!1}},[]),e(function(){if(!u.current)u.current=!0;else return n()},t)}},dn=null,U=Y(d.useEffect),$=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},V=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat($(arguments[e]));return r},G=function(e,n){var t=n.manual,u=n.ready,i=u===void 0?!0:u,o=n.defaultParams,f=o===void 0?[]:o,l=n.refreshDeps,a=l===void 0?[]:l,c=n.refreshDepsAction,s=(0,d.useRef)(!1);return s.current=!1,U(function(){!t&&i&&(s.current=!0,e.run.apply(e,V(f)))},[i]),U(function(){s.current||t||(s.current=!0,c?c():e.refresh())},V(a)),{onBefore:function(){if(!i)return{stopNow:!0}}}};G.onInit=function(r){var e=r.ready,n=e===void 0?!0:e,t=r.manual;return{loading:!t&&n}};var k=G;function ee(r,e){if(r===e)return!0;for(var n=0;n<r.length;n++)if(!Object.is(r[n],e[n]))return!1;return!0}function I(r,e){var n=(0,d.useRef)({deps:e,obj:void 0,initialized:!1}).current;return(n.initialized===!1||!ee(n.deps,e))&&(n.deps=e,n.obj=r(),n.initialized=!0),n.obj}function ne(r){var e=(0,d.useRef)(r);return e.current=r,e}var Z=ne,vn=function(e){return e!==null&&typeof e=="object"},j=function(e){return typeof e=="function"},hn=function(e){return typeof e=="string"},gn=function(e){return typeof e=="boolean"},mn=function(e){return typeof e=="number"},pn=function(e){return typeof e>"u"},re=!1,L=re,te=function(e){L&&(j(e)||console.error("useUnmount expected parameter is a function, got "+typeof e));var n=Z(e);(0,d.useEffect)(function(){return function(){n.current()}},[])},W=te,F=function(){return F=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u])}return r},F.apply(this,arguments)},S=new Map,ue=function(e,n,t){var u=S.get(e);u!=null&&u.timer&&clearTimeout(u.timer);var i=void 0;n>-1&&(i=setTimeout(function(){S.delete(e)},n)),S.set(e,F(F({},t),{timer:i}))},ie=function(e){return S.get(e)},yn=function(e){if(e){var n=Array.isArray(e)?e:[e];n.forEach(function(t){return S.delete(t)})}else S.clear()},A=new Map,ae=function(e){return A.get(e)},oe=function(e,n){A.set(e,n),n.then(function(t){return A.delete(e),t}).catch(function(){A.delete(e)})},_={},ce=function(e,n){_[e]&&_[e].forEach(function(t){return t(n)})},H=function(e,n){return _[e]||(_[e]=[]),_[e].push(n),function(){var u=_[e].indexOf(n);_[e].splice(u,1)}},fe=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},se=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(fe(arguments[e]));return r},le=function(e,n){var t=n.cacheKey,u=n.cacheTime,i=u===void 0?5*60*1e3:u,o=n.staleTime,f=o===void 0?0:o,l=n.setCache,a=n.getCache,c=(0,d.useRef)(),s=(0,d.useRef)(),g=function(p,v){l?l(v):ue(p,i,v),ce(p,v.data)},m=function(p,v){return v===void 0&&(v=[]),a?a(v):ie(p)};return I(function(){if(!!t){var h=m(t);h&&Object.hasOwnProperty.call(h,"data")&&(e.state.data=h.data,e.state.params=h.params,(f===-1||new Date().getTime()-h.time<=f)&&(e.state.loading=!1)),c.current=H(t,function(p){e.setState({data:p})})}},[]),W(function(){var h;(h=c.current)===null||h===void 0||h.call(c)}),t?{onBefore:function(p){var v=m(t,p);return!v||!Object.hasOwnProperty.call(v,"data")?{}:f===-1||new Date().getTime()-v.time<=f?{loading:!1,data:v==null?void 0:v.data,error:void 0,returnNow:!0}:{data:v==null?void 0:v.data,error:void 0}},onRequest:function(p,v){var y=ae(t);return y&&y!==s.current?{servicePromise:y}:(y=p.apply(void 0,se(v)),s.current=y,oe(t,y),{servicePromise:y})},onSuccess:function(p,v){var y;t&&((y=c.current)===null||y===void 0||y.call(c),g(t,{data:p,params:v,time:new Date().getTime()}),c.current=H(t,function(B){e.setState({data:B})}))},onMutate:function(p){var v;t&&((v=c.current)===null||v===void 0||v.call(c),g(t,{data:p,params:e.state.params,time:new Date().getTime()}),c.current=H(t,function(y){e.setState({data:y})}))}}:{}},de=le,ve=R(66292),he=R.n(ve),ge=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},me=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(ge(arguments[e]));return r},pe=function(e,n){var t=n.debounceWait,u=n.debounceLeading,i=n.debounceTrailing,o=n.debounceMaxWait,f=(0,d.useRef)(),l=(0,d.useMemo)(function(){var a={};return u!==void 0&&(a.leading=u),i!==void 0&&(a.trailing=i),o!==void 0&&(a.maxWait=o),a},[u,i,o]);return(0,d.useEffect)(function(){if(t){var a=e.runAsync.bind(e);return f.current=he()(function(c){c()},t,l),e.runAsync=function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];return new Promise(function(g,m){var h;(h=f.current)===null||h===void 0||h.call(f,function(){a.apply(void 0,me(c)).then(g).catch(m)})})},function(){var c;(c=f.current)===null||c===void 0||c.cancel(),e.runAsync=a}}},[t,l]),t?{onCancel:function(){var c;(c=f.current)===null||c===void 0||c.cancel()}}:{}},ye=pe,be=function(e,n){var t=n.loadingDelay,u=(0,d.useRef)();if(!t)return{};var i=function(){u.current&&clearTimeout(u.current)};return{onBefore:function(){return i(),u.current=setTimeout(function(){e.setState({loading:!0})},t),{loading:!1}},onFinally:function(){i()},onCancel:function(){i()}}},_e=be,we=!!(typeof window<"u"&&window.document&&window.document.createElement),D=we;function N(){return D?document.visibilityState!=="hidden":!0}var x=[];function Pe(r){return x.push(r),function(){var n=x.indexOf(r);x.splice(n,1)}}if(D){var Re=function(){if(!!N())for(var e=0;e<x.length;e++){var n=x[e];n()}};window.addEventListener("visibilitychange",Re,!1)}var Se=Pe,Oe=function(e,n){var t=n.pollingInterval,u=n.pollingWhenHidden,i=u===void 0?!0:u,o=n.pollingErrorRetryCount,f=o===void 0?-1:o,l=(0,d.useRef)(),a=(0,d.useRef)(),c=(0,d.useRef)(0),s=function(){var m;l.current&&clearTimeout(l.current),(m=a.current)===null||m===void 0||m.call(a)};return U(function(){t||s()},[t]),t?{onBefore:function(){s()},onError:function(){c.current+=1},onSuccess:function(){c.current=0},onFinally:function(){f===-1||f!==-1&&c.current<=f?l.current=setTimeout(function(){!i&&!N()?a.current=Se(function(){e.refresh()}):e.refresh()},t):c.current=0},onCancel:function(){s()}}:{}},Ce=Oe,xe=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},Te=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(xe(arguments[e]));return r};function Ee(r,e){var n=!1;return function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];n||(n=!0,r.apply(void 0,Te(t)),setTimeout(function(){n=!1},e))}}function je(){return D&&typeof navigator.onLine<"u"?navigator.onLine:!0}var T=[];function Fe(r){return T.push(r),function(){var n=T.indexOf(r);T.splice(n,1)}}if(D){var J=function(){if(!(!N()||!je()))for(var e=0;e<T.length;e++){var n=T[e];n()}};window.addEventListener("visibilitychange",J,!1),window.addEventListener("focus",J,!1)}var Ae=Fe,De=function(e,n){var t=n.refreshOnWindowFocus,u=n.focusTimespan,i=u===void 0?5e3:u,o=(0,d.useRef)(),f=function(){var a;(a=o.current)===null||a===void 0||a.call(o)};return(0,d.useEffect)(function(){if(t){var l=Ee(e.refresh.bind(e),i);o.current=Ae(function(){l()})}return function(){f()}},[t,i]),W(function(){f()}),{}},Be=De,Me=function(e,n){var t=n.retryInterval,u=n.retryCount,i=(0,d.useRef)(),o=(0,d.useRef)(0),f=(0,d.useRef)(!1);return u?{onBefore:function(){f.current||(o.current=0),f.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){o.current=0},onError:function(){if(o.current+=1,u===-1||o.current<=u){var a=t??Math.min(1e3*Math.pow(2,o.current),3e4);i.current=setTimeout(function(){f.current=!0,e.refresh()},a)}else o.current=0},onCancel:function(){o.current=0,i.current&&clearTimeout(i.current)}}:{}},Ue=Me,Le=R(38209),We=R.n(Le),He=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},Ne=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(He(arguments[e]));return r},ze=function(e,n){var t=n.throttleWait,u=n.throttleLeading,i=n.throttleTrailing,o=(0,d.useRef)(),f={};return u!==void 0&&(f.leading=u),i!==void 0&&(f.trailing=i),(0,d.useEffect)(function(){if(t){var l=e.runAsync.bind(e);return o.current=We()(function(a){a()},t,f),e.runAsync=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return new Promise(function(s,g){var m;(m=o.current)===null||m===void 0||m.call(o,function(){l.apply(void 0,Ne(a)).then(s).catch(g)})})},function(){var a;e.runAsync=l,(a=o.current)===null||a===void 0||a.cancel()}}},[t,u,i]),t?{onCancel:function(){var a;(a=o.current)===null||a===void 0||a.cancel()}}:{}},qe=ze;function Ve(r){L&&(j(r)||console.error("useMemoizedFn expected parameter is a function, got "+typeof r));var e=(0,d.useRef)(r);e.current=(0,d.useMemo)(function(){return r},[r]);var n=(0,d.useRef)();return n.current||(n.current=function(){for(var t=[],u=0;u<arguments.length;u++)t[u]=arguments[u];return e.current.apply(this,t)}),n.current}var O=Ve,Ge=function(e){L&&(j(e)||console.error('useMount: parameter `fn` expected to be a function, but got "'+typeof e+'".')),(0,d.useEffect)(function(){e==null||e()},[])},Ie=Ge,Ze=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},Je=function(){var e=Ze((0,d.useState)({}),2),n=e[1];return(0,d.useCallback)(function(){return n({})},[])},Ke=Je,b=function(){return b=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u])}return r},b.apply(this,arguments)},Qe=function(r,e,n,t){function u(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function f(c){try{a(t.next(c))}catch(s){o(s)}}function l(c){try{a(t.throw(c))}catch(s){o(s)}}function a(c){c.done?i(c.value):u(c.value).then(f,l)}a((t=t.apply(r,e||[])).next())})},Xe=function(r,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},t,u,i,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(a){return function(c){return l([a,c])}}function l(a){if(t)throw new TypeError("Generator is already executing.");for(;n;)try{if(t=1,u&&(i=a[0]&2?u.return:a[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,a[1])).done)return i;switch(u=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,u=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(r,n)}catch(c){a=[6,c],u=0}finally{t=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ye=function(r,e){var n={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,t=Object.getOwnPropertySymbols(r);u<t.length;u++)e.indexOf(t[u])<0&&Object.prototype.propertyIsEnumerable.call(r,t[u])&&(n[t[u]]=r[t[u]]);return n},$e=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},C=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat($e(arguments[e]));return r},ke=function(){function r(e,n,t,u){u===void 0&&(u={}),this.serviceRef=e,this.options=n,this.subscribe=t,this.initState=u,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=b(b(b({},this.state),{loading:!n.manual}),u)}return r.prototype.setState=function(e){e===void 0&&(e={}),this.state=b(b({},this.state),e),this.subscribe()},r.prototype.runPluginHandler=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var u=this.pluginImpls.map(function(i){var o;return(o=i[e])===null||o===void 0?void 0:o.call.apply(o,C([i],n))}).filter(Boolean);return Object.assign.apply(Object,C([{}],u))},r.prototype.runAsync=function(){for(var e,n,t,u,i,o,f,l,a,c,s=[],g=0;g<arguments.length;g++)s[g]=arguments[g];return Qe(this,void 0,void 0,function(){var m,h,p,v,y,B,q,M,w,P,Q;return Xe(this,function(E){switch(E.label){case 0:if(this.count+=1,m=this.count,h=this.runPluginHandler("onBefore",s),p=h.stopNow,v=p===void 0?!1:p,y=h.returnNow,B=y===void 0?!1:y,q=Ye(h,["stopNow","returnNow"]),v)return[2,new Promise(function(){})];if(this.setState(b({loading:!0,params:s},q)),B)return[2,Promise.resolve(q.data)];(n=(e=this.options).onBefore)===null||n===void 0||n.call(e,s),E.label=1;case 1:return E.trys.push([1,3,,4]),M=this.runPluginHandler("onRequest",this.serviceRef.current,s).servicePromise,M||(M=(Q=this.serviceRef).current.apply(Q,C(s))),[4,M];case 2:return w=E.sent(),m!==this.count?[2,new Promise(function(){})]:(this.setState({data:w,error:void 0,loading:!1}),(u=(t=this.options).onSuccess)===null||u===void 0||u.call(t,w,s),this.runPluginHandler("onSuccess",w,s),(o=(i=this.options).onFinally)===null||o===void 0||o.call(i,s,w,void 0),m===this.count&&this.runPluginHandler("onFinally",s,w,void 0),[2,w]);case 3:if(P=E.sent(),m!==this.count)return[2,new Promise(function(){})];throw this.setState({error:P,loading:!1}),(l=(f=this.options).onError)===null||l===void 0||l.call(f,P,s),this.runPluginHandler("onError",P,s),(c=(a=this.options).onFinally)===null||c===void 0||c.call(a,s,void 0,P),m===this.count&&this.runPluginHandler("onFinally",s,void 0,P),P;case 4:return[2]}})})},r.prototype.run=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.runAsync.apply(this,C(n)).catch(function(u){e.options.onError||console.error(u)})},r.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},r.prototype.refresh=function(){this.run.apply(this,C(this.state.params||[]))},r.prototype.refreshAsync=function(){return this.runAsync.apply(this,C(this.state.params||[]))},r.prototype.mutate=function(e){var n=j(e)?e(this.state.data):e;this.runPluginHandler("onMutate",n),this.setState({data:n})},r}(),en=ke,z=function(){return z=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++){e=arguments[n];for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(r[u]=e[u])}return r},z.apply(this,arguments)},nn=function(r,e){var n={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,t=Object.getOwnPropertySymbols(r);u<t.length;u++)e.indexOf(t[u])<0&&Object.prototype.propertyIsEnumerable.call(r,t[u])&&(n[t[u]]=r[t[u]]);return n},rn=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},K=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(rn(arguments[e]));return r};function tn(r,e,n){e===void 0&&(e={}),n===void 0&&(n=[]);var t=e.manual,u=t===void 0?!1:t,i=nn(e,["manual"]),o=z({manual:u},i),f=Z(r),l=Ke(),a=I(function(){var c=n.map(function(s){var g;return(g=s==null?void 0:s.onInit)===null||g===void 0?void 0:g.call(s,o)}).filter(Boolean);return new en(f,o,l,Object.assign.apply(Object,K([{}],c)))},[]);return a.options=o,a.pluginImpls=n.map(function(c){return c(a,o)}),Ie(function(){if(!u){var c=a.state.params||e.defaultParams||[];a.run.apply(a,K(c))}}),W(function(){a.cancel()}),{loading:a.state.loading,data:a.state.data,error:a.state.error,params:a.state.params||[],cancel:O(a.cancel.bind(a)),refresh:O(a.refresh.bind(a)),refreshAsync:O(a.refreshAsync.bind(a)),run:O(a.run.bind(a)),runAsync:O(a.runAsync.bind(a)),mutate:O(a.mutate.bind(a))}}var un=tn,an=function(r,e){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var t=n.call(r),u,i=[],o;try{for(;(e===void 0||e-- >0)&&!(u=t.next()).done;)i.push(u.value)}catch(f){o={error:f}}finally{try{u&&!u.done&&(n=t.return)&&n.call(t)}finally{if(o)throw o.error}}return i},on=function(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(an(arguments[e]));return r};function cn(r,e,n){return un(r,e,on(n||[],[ye,_e,Ce,Be,qe,k,de,Ue]))}var fn=cn,sn=fn}}]);
