"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[427],{33921:function(ue,O,t){t.d(O,{ew:function(){return q},Jx:function(){return S},iT:function(){return D},Zi:function(){return F},Bw:function(){return E},eJ:function(){return L},fk:function(){return r},sE:function(){return M},WW:function(){return $},sy:function(){return W},E$:function(){return V},_M:function(){return ae},tC:function(){return l},wX:function(){return P},oh:function(){return Z},Uc:function(){return R},x:function(){return n},Mw:function(){return X},p_:function(){return N},$V:function(){return K},Qo:function(){return J},$9:function(){return ne},Jy:function(){return z},VP:function(){return s},g4:function(){return u},Fu:function(){return a},Rj:function(){return _},tE:function(){return i},iO:function(){return re},q2:function(){return U},jR:function(){return te},BP:function(){return Y},au:function(){return T}});var g=t(75786),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",width:60},L={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},T={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},M={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:g.IZ},r={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},s={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},te={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},U={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},S={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},$={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},F={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},D={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},E={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},K={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:g.Xp,width:90},N={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},Z={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:g.sv},P={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:g.sv},R={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:g.sv},n={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:g.sv},X={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:g.sv},z={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:g.g7,width:70},Y={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:g.m$},ne={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},J={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},q={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},W={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},ae={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:g.WZ},V={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},re={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},_={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},u={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},a={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},i={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},12575:function(ue,O,t){t.d(O,{Z:function(){return L}});var g=t(50959),l=t(87130),L=function(M){var r=(0,g.useRef)(),s=(0,l.Zl)(M);return(0,g.useEffect)(function(){r!=null&&r.current&&s(r.current)},[]),r}},14412:function(ue,O,t){t.r(O),t.d(O,{default:function(){return Ee}});var g=t(18172),l=t.n(g),L=t(3849),T=t.n(L),M=t(29960),r=t.n(M),s=t(33921),te=t(40457),U=t(12575),S=t(87130),$="toolGen",F=(0,S.cn)({key:"".concat($,"TableActions"),default:void 0}),D=(0,S.cn)({key:"".concat($,"PreviewIdAtom"),default:0}),E=t(90586),K=t(71224),N=t(90964),Z=t(44506),P=t(44631),R=t(2891),n=t(11527),X=function(c){var o=c.tableIds,h=c.isBatch,C=h===void 0?!1:h,j=C?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",b=o.length===0&&C,v=(0,S.sJ)(F),p=(0,R.Db)(E.LV,{onSuccess:function(){var I;v==null||v.reload(),v==null||(I=v.clearSelected)===null||I===void 0||I.call(v),N.ZP.success("\u5220\u9664\u6210\u529F")}}),k=p.mutateAsync,y=p.isLoading,d=function(){Z.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(o.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var I=l()(r().mark(function w(){return r().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,k({tableIds:o});case 2:case"end":return H.stop()}},w)}));function m(){return I.apply(this,arguments)}return m}()})};return(0,n.jsx)(P.Z,{loading:y,icon:(0,n.jsx)(K.Z,{}),type:"link",onClick:d,disabled:b,children:j})},z=X,Y=t(85078),ne=t(11227),J=function(c){var o=c.rows,h=o===void 0?[]:o,C=c.isBatch,j=C===void 0?!1:C,b=j?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",v=h.length===0&&j,p=(0,R.Db)(l()(r().mark(function d(){var x;return r().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,E.XS)({tables:h.map(function(w){return w.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:x=m.sent,(0,ne.saveAs)(new Blob([x.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return m.stop()}},d)})),{onSuccess:function(){N.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),k=p.isLoading,y=p.mutate;return(0,n.jsx)(P.Z,{loading:k,onClick:function(){return y()},type:"link",icon:(0,n.jsx)(Y.Z,{}),disabled:v,children:b})},q=J,W=t(17073),ae=t(77996),V=function(c){var o=c.tableId,h=(0,ae.useNavigate)();return(0,n.jsx)(P.Z,{type:"link",icon:(0,n.jsx)(W.Z,{}),onClick:function(){return h("/tool/gen-edit/".concat(o))},children:"\u7F16\u8F91"})},re=V,_=t(41595),u=t(42267),a=t(19432),i=t(76922),f=t(50959),e=[s.tC,s.jR,s.q2,s.eJ,s.au,s.fk],G=function(){var c=(0,f.useRef)(),o=(0,S.sJ)(F),h=(0,i.Z)(),C=T()(h,2),j=C[0],b=C[1].toggle,v=(0,f.useState)([]),p=T()(v,2),k=p[0],y=p[1],d=(0,R.Db)(E.qm,{onSuccess:function(){var m,w;o==null||o.reload(),b(),N.ZP.success("\u5BFC\u5165\u6210\u529F"),c==null||(m=c.current)===null||m===void 0||(w=m.clearSelected)===null||w===void 0||w.call(m)}}),x=d.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P.Z,{type:"primary",onClick:b,icon:(0,n.jsx)(u.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(Z.Z,{visible:j,onCancel:b,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return x({tables:k.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(a.Z,{ghost:!0,size:"small",actionRef:c,pagination:{pageSize:10,current:1},columns:e,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(m){y(m)}},options:!1,request:function(){var I=l()(r().mark(function m(w,Q,H){var B,ie,le;return r().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return console.log(Q,H),ee.next=3,(0,E.we)((0,_.h$)(w,Q),(0,_.Yw)(w));case 3:return B=ee.sent,ie=B.rows,le=B.total,ee.abrupt("return",{data:ie,total:le});case 7:case"end":return ee.stop()}},m)}));return function(m,w,Q){return I.apply(this,arguments)}}()})})]})},se=G,ce=t(8667),de=function(c){var o=c.tableId,h=(0,S.Zl)(D);return(0,n.jsx)(P.Z,{onClick:function(){return h(o)},type:"link",icon:(0,n.jsx)(ce.Z,{}),children:"\u9884\u89C8"})},me=de,ve=t(59138),pe=function(c){var o=c.tableName,h=(0,R.Db)(l()(r().mark(function b(){return r().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,E.He)({tableName:o});case 2:case"end":return p.stop()}},b)})),{onSuccess:function(){N.ZP.success("\u540C\u6B65\u6210\u529F")}}),C=h.isLoading,j=h.mutate;return(0,n.jsx)(P.Z,{loading:C,type:"link",icon:(0,n.jsx)(ve.Z,{}),onClick:function(){return j()},children:"\u540C\u6B65"})},he=pe,fe=t(42020),ye=t(34179),oe=t(41146),ge=t(46842),Te=t(15912),Ce=t.n(Te),be=t(62913),Pe=t(99886),xe=oe.Z.TabPane,Ie=function(c){Ce()(c),N.ZP.success("\u590D\u5236\u6210\u529F")},we=function(){var c=(0,S.rb)(D),o=(0,S.sJ)(D),h=o>0,C=(0,ye.Z)(l()(r().mark(function v(){var p;return r().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,E.Zd)({tableId:o});case 2:return p=y.sent,y.abrupt("return",Object.keys(p).map(function(d){return{tab:d,key:d,content:p[d],highlightContent:be.Z.highlightAuto(p[d]).value}}));case 4:case"end":return y.stop()}},v)})),{ready:h,refreshDeps:[o]}),j=C.data,b=C.loading;return(0,n.jsx)(Z.Z,{visible:h,onCancel:c,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(ge.Z,{spinning:b,children:(0,n.jsx)(oe.Z,{tabPosition:"left",children:j&&j.map(function(v){var p=v.key,k=v.tab,y=v.content,d=v.highlightContent;return(0,n.jsxs)(xe,{tab:k,className:"relative",children:[(0,n.jsx)(P.Z,{icon:(0,n.jsx)(fe.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Ie(y)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:d}})})})]},p)})})})})},je=we,Ge=[s.tC,s.jR,s.q2,s.Jx,s.eJ,s.au,s.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(c,o){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(me,{tableId:o.tableId}),(0,n.jsx)(re,{tableId:o.tableId}),(0,n.jsx)(z,{tableIds:[o.tableId]}),(0,n.jsx)(he,{tableName:o.tableName}),(0,n.jsx)(q,{rows:[{tableName:o.tableName,genType:o.genType,genPath:o.genPath}]})]})}}],Se=function(){var c=(0,U.Z)(F),o=(0,f.useState)([]),h=T()(o,2),C=h[0],j=h[1],b=(0,f.useState)([]),v=T()(b,2),p=v[0],k=v[1];return(0,n.jsxs)(te.AC,{children:[(0,n.jsx)(a.Z,{actionRef:c,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(d,x){j(d),k(x)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z,{tableIds:C,isBatch:!0}),(0,n.jsx)(q,{rows:p.map(function(d){var x=d.tableName,I=d.genType,m=d.genPath;return{tableName:x,genType:I,genPath:m}}),isBatch:!0})]})},columns:Ge,toolbar:{actions:[(0,n.jsx)(se,{},"ButtonCreate")]},request:function(){var y=l()(r().mark(function d(x,I){var m,w,Q;return r().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,E.DT)((0,_.h$)(x,I),(0,_.Yw)(x));case 2:return m=B.sent,w=m.total,Q=m.rows,B.abrupt("return",{data:Q,success:!0,total:w});case 6:case"end":return B.stop()}},d)}));return function(d,x){return y.apply(this,arguments)}}()}),(0,n.jsx)(je,{})]})},Ee=Se},90586:function(ue,O,t){t.d(O,{DI:function(){return N},DT:function(){return ne},He:function(){return re},LV:function(){return ae},XS:function(){return te},Zd:function(){return q},cj:function(){return z},qm:function(){return n},we:function(){return F}});var g=t(55980),l=t.n(g),L=t(18172),T=t.n(L),M=t(29960),r=t.n(M),s=t(41595);function te(u,a){return U.apply(this,arguments)}function U(){return U=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/batchGenCode",l()({method:"GET",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),U.apply(this,arguments)}function S(u,a){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),$.apply(this,arguments)}function F(u,a,i){return D.apply(this,arguments)}function D(){return D=T()(r().mark(function u(a,i,f){return r().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,s.h3)("/tool/gen/db/list",l()({method:"POST",headers:{"Content-Type":"application/json"},params:l()({},a),data:i},f||{})));case 1:case"end":return G.stop()}},u)})),D.apply(this,arguments)}function E(u,a){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),K.apply(this,arguments)}function N(u,a){return Z.apply(this,arguments)}function Z(){return Z=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/edit",l()({method:"POST",headers:{"Content-Type":"application/json"},data:a},i||{})));case 1:case"end":return e.stop()}},u)})),Z.apply(this,arguments)}function P(u,a){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime.mark(function u(a,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),R.apply(this,arguments)}function n(u,a){return X.apply(this,arguments)}function X(){return X=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/importTable",l()({method:"POST",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),X.apply(this,arguments)}function z(u,a){return Y.apply(this,arguments)}function Y(){return Y=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/info",l()({method:"GET",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),Y.apply(this,arguments)}function ne(u,a,i){return J.apply(this,arguments)}function J(){return J=T()(r().mark(function u(a,i,f){return r().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,s.h3)("/tool/gen/list",l()({method:"POST",headers:{"Content-Type":"application/json"},params:l()({},a),data:i},f||{})));case 1:case"end":return G.stop()}},u)})),J.apply(this,arguments)}function q(u,a){return W.apply(this,arguments)}function W(){return W=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/preview",l()({method:"GET",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),W.apply(this,arguments)}function ae(u,a){return V.apply(this,arguments)}function V(){return V=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/remove",l()({method:"POST",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),V.apply(this,arguments)}function re(u,a){return _.apply(this,arguments)}function _(){return _=T()(r().mark(function u(a,i){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/synchDb",l()({method:"GET",params:l()({},a)},i||{})));case 1:case"end":return e.stop()}},u)})),_.apply(this,arguments)}}}]);
