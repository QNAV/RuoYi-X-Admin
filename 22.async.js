"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[427],{33921:function(ne,B,t){t.d(B,{Jx:function(){return h},eJ:function(){return k},fk:function(){return o},sE:function(){return L},tC:function(){return i},g4:function(){return j},Fu:function(){return E},Rj:function(){return M},tE:function(){return _},q2:function(){return J},jR:function(){return l},au:function(){return b}});var $=t(75786),i={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder"},k={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},b={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0},L={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:$.IZ},o={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(I){return{beginCreateTime:I[0],endCreateTime:I[1]}}}},l={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},J={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},h={title:"\u5B9E\u4F53",dataIndex:"className",key:"className",valueType:"text"},M={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},j={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},E={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},_={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},39536:function(ne,B,t){t.r(B),t.d(B,{default:function(){return ge}});var $=t(18172),i=t.n($),k=t(3849),b=t.n(k),L=t(29960),o=t.n(L),l=t(33921),J=t(71989),h=t(87130),M="toolGen",j=(0,h.cn)({key:"".concat(M,"TableActions"),default:void 0}),E=(0,h.cn)({key:"".concat(M,"PreviewIdAtom"),default:0}),_=t(90586),W=t(71224),I=t(43668),U=t(75815),R=t(16278),z=t(2891),a=t(11527),V=function(s){var c=s.tableIds,f=c===void 0?[]:c,m=(0,h.sJ)(j),w=(0,z.Db)(_.LV,{onSuccess:function(){var d;m==null||m.reload(),m==null||(d=m.clearSelected)===null||d===void 0||d.call(m),I.ZP.success("\u5220\u9664\u6210\u529F")}}),P=w.mutateAsync,g=w.isLoading,p=function(){U.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(f.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var d=i()(o().mark(function G(){return o().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,P({tableIds:f});case 2:case"end":return y.stop()}},G)}));function C(){return d.apply(this,arguments)}return C}()})};return(0,a.jsx)(R.Z,{loading:g,icon:(0,a.jsx)(W.Z,{}),type:"link",onClick:p,children:"\u5220\u9664"})},O=V,H=t(17073),K=t(80630),Q=function(s){var c=s.tableId,f=(0,K.useNavigate)();return(0,a.jsx)(R.Z,{type:"link",icon:(0,a.jsx)(H.Z,{}),onClick:function(){return f("/tool/gen-edit/".concat(c))},children:"\u7F16\u8F91"})},N=Q,q=t(8513),A=t(54923),ee=t(29586),x=t(50959),re=[l.tC,l.jR,l.q2,l.eJ,l.au],F=function(){var s=(0,x.useRef)(),c=(0,h.sJ)(j),f=(0,ee.Z)(),m=b()(f,2),w=m[0],P=m[1].toggle,g=(0,x.useState)([]),p=b()(g,2),S=p[0],d=p[1],C=(0,z.Db)(_.qm,{onSuccess:function(){var y,Y;c==null||c.reload(),P(),I.ZP.success("\u5BFC\u5165\u6210\u529F"),s==null||(y=s.current)===null||y===void 0||(Y=y.clearSelected)===null||Y===void 0||Y.call(y)}}),G=C.mutate;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.Z,{type:"primary",onClick:P,children:"\u5BFC\u5165"}),(0,a.jsx)(U.Z,{visible:w,onCancel:P,title:"\u5BFC\u5165\u8868",onOk:function(){return G({tables:S.join(",")})},width:900,children:(0,a.jsx)(A.Z,{ghost:!0,size:"small",actionRef:s,pagination:{pageSize:10,current:1},columns:re,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(y){d(y)}},options:{setting:!1,density:!1},request:function(){var X=i()(o().mark(function y(Y){var te,ue,oe;return o().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,_.we)((0,q.AF)(Y),{});case 2:return te=Z.sent,ue=te.rows,oe=te.total,Z.abrupt("return",{data:ue,total:oe});case 6:case"end":return Z.stop()}},y)}));return function(y){return X.apply(this,arguments)}}()})})]})},n=F,r=t(8667),u=function(s){var c=s.tableId,f=(0,h.Zl)(E);return(0,a.jsx)(R.Z,{onClick:function(){return f(c)},type:"link",icon:(0,a.jsx)(r.Z,{}),children:"\u9884\u89C8"})},v=u,e=t(42020),T=t(3989),ae=t(6250),le=t(95253),se=t(15912),ie=t.n(se),ce=t(62913),ye=t(99886),de=ae.Z.TabPane,me=function(s){ie()(s),I.ZP.success("\u590D\u5236\u6210\u529F")},pe=function(){var s=(0,h.rb)(E),c=(0,h.sJ)(E),f=c>0,m=(0,T.Z)(i()(o().mark(function g(){var p;return o().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,_.Zd)({tableId:c});case 2:return p=d.sent,d.abrupt("return",Object.keys(p).map(function(C){return{tab:C,key:C,content:p[C],highlightContent:ce.Z.highlightAuto(p[C]).value}}));case 4:case"end":return d.stop()}},g)})),{ready:f,refreshDeps:[c]}),w=m.data,P=m.loading;return(0,a.jsx)(U.Z,{visible:f,onCancel:s,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,a.jsx)(le.Z,{spinning:P,children:(0,a.jsx)(ae.Z,{tabPosition:"left",children:w&&w.map(function(g){var p=g.key,S=g.tab,d=g.content,C=g.highlightContent;return(0,a.jsxs)(de,{tab:S,className:"relative",children:[(0,a.jsx)(R.Z,{icon:(0,a.jsx)(e.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return me(d)},children:"\u590D\u5236\u4EE3\u7801"}),(0,a.jsx)("pre",{children:(0,a.jsx)("code",{children:(0,a.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:C}})})})]},p)})})})})},ve=pe,he=[l.tC,l.jR,l.q2,l.Jx,l.eJ,l.au,{title:"\u64CD\u4F5C",valueType:"option",render:function(s,c){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N,{tableId:c.tableId}),(0,a.jsx)(O,{tableIds:[c.tableId]}),(0,a.jsx)(v,{tableId:c.tableId})]})}}],fe=function(){var s=(0,x.useRef)(),c=(0,x.useState)([]),f=b()(c,2),m=f[0],w=f[1],P=(0,h.Zl)(j);return(0,x.useEffect)(function(){s!=null&&s.current&&P(s.current)},[]),(0,a.jsxs)(J.AC,{children:[(0,a.jsx)(A.Z,{actionRef:s,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(p){w(p)}},tableAlertRender:function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(O,{tableIds:m})})},columns:he,toolbar:{actions:[(0,a.jsx)(n,{},"ButtonCreate")]},request:i()(o().mark(function g(){var p,S,d;return o().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,_.DT)({},{});case 2:return p=G.sent,S=p.total,d=p.rows,G.abrupt("return",{data:d,success:!0,total:S});case 6:case"end":return G.stop()}},g)}))}),(0,a.jsx)(ve,{})]})},ge=fe},90586:function(ne,B,t){t.d(B,{DI:function(){return U},DT:function(){return Q},LV:function(){return ee},Zd:function(){return q},cj:function(){return H},qm:function(){return V},we:function(){return E}});var $=t(55980),i=t.n($),k=t(18172),b=t.n(k),L=t(29960),o=t.n(L),l=t(8513);function J(n,r){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,u){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/batchGenCode",_objectSpread({method:"GET",params:_objectSpread({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),h.apply(this,arguments)}function M(n,r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,u){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),j.apply(this,arguments)}function E(n,r,u){return _.apply(this,arguments)}function _(){return _=b()(o().mark(function n(r,u,v){return o().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,l.h3)("/tool/gen/db/list",i()({method:"POST",headers:{"Content-Type":"application/json"},params:i()({},r),data:u},v||{})));case 1:case"end":return T.stop()}},n)})),_.apply(this,arguments)}function W(n,r){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,u){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function U(n,r){return R.apply(this,arguments)}function R(){return R=b()(o().mark(function n(r,u){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/edit",i()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return e.stop()}},n)})),R.apply(this,arguments)}function z(n,r){return a.apply(this,arguments)}function a(){return a=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,u){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),a.apply(this,arguments)}function V(n,r){return O.apply(this,arguments)}function O(){return O=b()(o().mark(function n(r,u){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/importTable",i()({method:"POST",params:i()({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),O.apply(this,arguments)}function H(n,r){return K.apply(this,arguments)}function K(){return K=b()(o().mark(function n(r,u){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/info",i()({method:"GET",params:i()({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),K.apply(this,arguments)}function Q(n,r,u){return N.apply(this,arguments)}function N(){return N=b()(o().mark(function n(r,u,v){return o().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.abrupt("return",(0,l.h3)("/tool/gen/list",i()({method:"POST",headers:{"Content-Type":"application/json"},params:i()({},r),data:u},v||{})));case 1:case"end":return T.stop()}},n)})),N.apply(this,arguments)}function q(n,r){return A.apply(this,arguments)}function A(){return A=b()(o().mark(function n(r,u){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/preview",i()({method:"GET",params:i()({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),A.apply(this,arguments)}function ee(n,r){return x.apply(this,arguments)}function x(){return x=b()(o().mark(function n(r,u){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,l.h3)("/tool/gen/remove",i()({method:"POST",params:i()({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),x.apply(this,arguments)}function re(n,r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime.mark(function n(r,u){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/synchDb",_objectSpread({method:"GET",params:_objectSpread({},r)},u||{})));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}}}]);
