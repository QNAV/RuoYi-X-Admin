"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[427],{33921:function(ue,P,a){a.d(P,{Jx:function(){return B},eJ:function(){return $},fk:function(){return s},sE:function(){return D},tC:function(){return v},g4:function(){return G},Fu:function(){return W},Rj:function(){return m},tE:function(){return S},q2:function(){return k},jR:function(){return p},au:function(){return I}});var E=a(75786),v={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder"},$={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0},I={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0},D={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:E.IZ},s={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(j){return{beginCreateTime:j[0],endCreateTime:j[1]}}}},p={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},k={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},B={title:"\u5B9E\u4F53",dataIndex:"className",key:"className",valueType:"text"},m={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},G={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},W={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},S={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},14804:function(ue,P,a){a.r(P),a.d(P,{default:function(){return De}});var E=a(18172),v=a.n(E),$=a(3849),I=a.n($),D=a(29960),s=a.n(D),p=a(33921),k=a(71989),B=a(55980),m=a.n(B),G=a(8513);function W(r,t){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/batchGenCode",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function oe(r,t){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),j.apply(this,arguments)}function se(r,t,n){return A.apply(this,arguments)}function A(){return A=v()(s().mark(function r(t,n,o){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,G.h3)("/tool/gen/db/list",m()({method:"POST",headers:{"Content-Type":"application/json"},params:m()({},t),data:n},o||{})));case 1:case"end":return l.stop()}},r)})),A.apply(this,arguments)}function ke(r,t){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),O.apply(this,arguments)}function Be(r,t){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:t},n||{})));case 1:case"end":return e.stop()}},r)})),N.apply(this,arguments)}function Ae(r,t){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),L.apply(this,arguments)}function le(r,t){return F.apply(this,arguments)}function F(){return F=v()(s().mark(function r(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,G.h3)("/tool/gen/importTable",m()({method:"POST",params:m()({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function Oe(r,t){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/info",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),K.apply(this,arguments)}function ie(r,t,n){return J.apply(this,arguments)}function J(){return J=v()(s().mark(function r(t,n,o){return s().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,G.h3)("/tool/gen/list",m()({method:"POST",headers:{"Content-Type":"application/json"},params:m()({},t),data:n},o||{})));case 1:case"end":return l.stop()}},r)})),J.apply(this,arguments)}function ce(r,t){return M.apply(this,arguments)}function M(){return M=v()(s().mark(function r(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,G.h3)("/tool/gen/preview",m()({method:"GET",params:m()({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function de(r,t){return z.apply(this,arguments)}function z(){return z=v()(s().mark(function r(t,n){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,G.h3)("/tool/gen/remove",m()({method:"POST",params:m()({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),z.apply(this,arguments)}function Ne(r,t){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime.mark(function r(t,n){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/synchDb",_objectSpread({method:"GET",params:_objectSpread({},t)},n||{})));case 1:case"end":return e.stop()}},r)})),H.apply(this,arguments)}var pe=a(71224),U=a(75815),Z=a(16278),X=a(2891),u=a(11527),me=function(t){var n=t.tableIds,o=n===void 0?[]:n,e=(0,X.Db)(de,{onSuccess:function(){}}),l=e.mutateAsync,y=e.isLoading,d=function(){U.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(o.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var g=v()(s().mark(function h(){return s().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,l({tableIds:o});case 2:case"end":return b.stop()}},h)}));function c(){return g.apply(this,arguments)}return c}()})};return(0,u.jsx)(Z.Z,{loading:y,icon:(0,u.jsx)(pe.Z,{}),type:"link",onClick:d,children:"\u5220\u9664"})},Y=me,C=a(87130),q="toolGen",_=(0,C.cn)({key:"".concat(q,"TableActionsAtom")}),Q=(0,C.cn)({key:"".concat(q,"PreviewIdAtom"),default:0}),ee=a(54923),ve=a(29586),te=a(43668),x=a(50959),he=[p.tC,p.jR,p.q2,p.eJ,p.au],fe=function(){var t=(0,x.useRef)(),n=(0,C.sJ)(_),o=(0,ve.Z)(),e=I()(o,2),l=e[0],y=e[1].toggle,d=(0,x.useState)([]),i=I()(d,2),g=i[0],c=i[1],h=(0,X.Db)(le,{onSuccess:function(){var T,R;n==null||n.reload(),y(),te.ZP.success("\u5BFC\u5165\u6210\u529F"),t==null||(T=t.current)===null||T===void 0||(R=T.clearSelected)===null||R===void 0||R.call(T)}}),f=h.mutate;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Z.Z,{type:"primary",onClick:y,children:"\u5BFC\u5165"}),(0,u.jsx)(U.Z,{visible:l,onCancel:y,title:"\u5BFC\u5165\u8868",onOk:function(){return f({tables:g.join(",")})},width:900,children:(0,u.jsx)(ee.Z,{ghost:!0,size:"small",actionRef:t,pagination:{pageSize:10,current:1},columns:he,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(T){c(T)}},options:{setting:!1,density:!1},request:function(){var b=v()(s().mark(function T(R){var V,re,ae;return s().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,se(R,{});case 2:return V=w.sent,re=V.rows,ae=V.total,w.abrupt("return",{data:re,total:ae});case 6:case"end":return w.stop()}},T)}));return function(T){return b.apply(this,arguments)}}()})})]})},ye=fe,ge=a(8667),be=function(t){var n=t.tableId,o=(0,C.Zl)(Q);return(0,u.jsx)(Z.Z,{onClick:function(){return o(n)},type:"link",icon:(0,u.jsx)(ge.Z,{}),children:"\u9884\u89C8"})},Te=be,Ge=a(42020),Ce=a(3989),ne=a(6250),je=a(95253),we=a(15912),Ie=a.n(we),Se=a(62913),Le=a(99886),xe=ne.Z.TabPane,Re=function(t){Ie()(t),te.ZP.success("\u590D\u5236\u6210\u529F")},Pe=function(){var t=(0,C.rb)(Q),n=(0,C.sJ)(Q),o=n>0,e=(0,Ce.Z)(v()(s().mark(function d(){var i;return s().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,ce({tableId:n});case 2:return i=c.sent,c.abrupt("return",Object.keys(i).map(function(h){return{tab:h,key:h,content:i[h],highlightContent:Se.Z.highlightAuto(i[h]).value}}));case 4:case"end":return c.stop()}},d)})),{ready:o,refreshDeps:[n]}),l=e.data,y=e.loading;return(0,u.jsx)(U.Z,{visible:o,onCancel:t,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,u.jsx)(je.Z,{spinning:y,children:(0,u.jsx)(ne.Z,{tabPosition:"left",children:l&&l.map(function(d){var i=d.key,g=d.tab,c=d.content,h=d.highlightContent;return(0,u.jsxs)(xe,{tab:g,className:"relative",children:[(0,u.jsx)(Z.Z,{icon:(0,u.jsx)(Ge.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Re(c)},children:"\u590D\u5236\u4EE3\u7801"}),(0,u.jsx)("pre",{children:(0,u.jsx)("code",{children:(0,u.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:h}})})})]},i)})})})})},Ze=Pe,Ee=[p.tC,p.jR,p.q2,p.Jx,p.eJ,p.au,{title:"\u64CD\u4F5C",valueType:"option",render:function(t,n){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(Y,{tableIds:[n.tableId]}),(0,u.jsx)(Te,{tableId:n.tableId})]})}}],$e=function(){var t=(0,x.useRef)(),n=(0,x.useState)([]),o=I()(n,2),e=o[0],l=o[1],y=(0,C.Zl)(_);return(0,x.useEffect)(function(){t!=null&&t.current&&y(t.current)},[t]),(0,u.jsxs)(k.AC,{children:[(0,u.jsx)(ee.Z,{actionRef:t,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(i){l(i)}},tableAlertOptionRender:function(){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(Y,{tableIds:e})})},columns:Ee,toolbar:{actions:[(0,u.jsx)(ye,{},"ButtonCreate")]},request:v()(s().mark(function d(){var i,g,c;return s().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ie({},{});case 2:return i=f.sent,g=i.total,c=i.rows,f.abrupt("return",{data:c,success:!0,total:g});case 6:case"end":return f.stop()}},d)}))}),(0,u.jsx)(Ze,{})]})},De=$e}}]);
