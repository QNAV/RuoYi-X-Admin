"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[427],{33921:function(ue,X,t){t.d(X,{ew:function(){return ne},Jx:function(){return E},iT:function(){return N},Zi:function(){return Y},Bw:function(){return J},eJ:function(){return Q},fk:function(){return o},sE:function(){return H},WW:function(){return $},sy:function(){return O},E$:function(){return M},_M:function(){return ae},tC:function(){return l},wX:function(){return W},oh:function(){return P},Uc:function(){return _},x:function(){return A},Mw:function(){return n},p_:function(){return q},$V:function(){return j},Qo:function(){return L},$9:function(){return te},Jy:function(){return ee},VP:function(){return s},g4:function(){return a},Fu:function(){return r},Rj:function(){return U},tE:function(){return i},iO:function(){return re},q2:function(){return S},jR:function(){return z},BP:function(){return Z},au:function(){return g}});var I=t(75786),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",width:60},Q={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},g={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",hideInSearch:!0,sorter:!0},H={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:I.IZ},o={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(e){return{beginCreateTime:e[0],endCreateTime:e[1]}}}},s={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},z={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},S={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},E={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},$={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},Y={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},N={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},J={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},j={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:I.Xp,width:90},q={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},P={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:I.sv},W={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:I.sv},_={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:I.sv},A={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:I.sv},n={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:I.sv},ee={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:I.g7,width:70},Z={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:I.m$},te={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},L={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},ne={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},O={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},ae={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:I.WZ},M={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},re={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},U={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},a={title:"\u89D2\u8272ID",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},r={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},i={title:"\u89D2\u8272\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},58734:function(ue,X,t){t.r(X),t.d(X,{default:function(){return Se}});var I=t(18172),l=t.n(I),Q=t(3849),g=t.n(Q),H=t(29960),o=t.n(H),s=t(33921),z=t(40457),S=t(50959),E=t(87130),$=function(c){var u=(0,S.useRef)(),v=(0,E.Zl)(c);return(0,S.useEffect)(function(){u!=null&&u.current&&v(u.current)},[]),u},Y="toolGen",N=(0,E.cn)({key:"".concat(Y,"TableActions"),default:void 0}),J=(0,E.cn)({key:"".concat(Y,"PreviewIdAtom"),default:0}),j=t(90586),q=t(71224),P=t(90964),W=t(44506),_=t(44631),A=t(2891),n=t(11527),ee=function(c){var u=c.tableIds,v=c.isBatch,y=v===void 0?!1:v,G=y?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",C=u.length===0&&y,p=(0,E.sJ)(N),h=(0,A.Db)(j.LV,{onSuccess:function(){var x;p==null||p.reload(),p==null||(x=p.clearSelected)===null||x===void 0||x.call(p),P.ZP.success("\u5220\u9664\u6210\u529F")}}),B=h.mutateAsync,f=h.isLoading,d=function(){W.Z.confirm({title:"\u5220\u9664\u751F\u6210\u4EE3\u7801",content:"\u786E\u5B9A\u5220\u9664 \u8868ID \u4E3A ".concat(u.join(",")," \u751F\u6210\u7684\u4EE3\u7801\u5417\uFF1F"),onOk:function(){var x=l()(o().mark(function w(){return o().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,B({tableIds:u});case 2:case"end":return K.stop()}},w)}));function m(){return x.apply(this,arguments)}return m}()})};return(0,n.jsx)(_.Z,{loading:f,icon:(0,n.jsx)(q.Z,{}),type:"link",onClick:d,disabled:C,children:G})},Z=ee,te=t(85078),L=t(11227),ne=function(c){var u=c.rows,v=u===void 0?[]:u,y=c.isBatch,G=y===void 0?!1:y,C=G?"\u6279\u91CF\u4E0B\u8F7D":"\u4E0B\u8F7D",p=v.length===0&&G,h=(0,A.Db)(l()(o().mark(function d(){var b;return o().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,j.XS)({tables:v.map(function(w){return w.tableName}).join(",")},{skipErrorHandler:!0,responseType:"blob"});case 2:b=m.sent,(0,L.saveAs)(new Blob([b.data],{type:"application/zip"}),"ruoyi");case 4:case"end":return m.stop()}},d)})),{onSuccess:function(){P.ZP.success("\u4E0B\u8F7D\u6210\u529F")}}),B=h.isLoading,f=h.mutate;return(0,n.jsx)(_.Z,{loading:B,onClick:function(){return f()},type:"link",icon:(0,n.jsx)(te.Z,{}),disabled:p,children:C})},O=ne,ae=t(17073),M=t(77996),re=function(c){var u=c.tableId,v=(0,M.useNavigate)();return(0,n.jsx)(_.Z,{type:"link",icon:(0,n.jsx)(ae.Z,{}),onClick:function(){return v("/tool/gen-edit/".concat(u))},children:"\u7F16\u8F91"})},U=re,a=t(41595),r=t(42267),i=t(84893),T=t(76922),e=[s.tC,s.jR,s.q2,s.eJ,s.au,s.fk],R=function(){var c=(0,S.useRef)(),u=(0,E.sJ)(N),v=(0,T.Z)(),y=g()(v,2),G=y[0],C=y[1].toggle,p=(0,S.useState)([]),h=g()(p,2),B=h[0],f=h[1],d=(0,A.Db)(j.qm,{onSuccess:function(){var m,w;u==null||u.reload(),C(),P.ZP.success("\u5BFC\u5165\u6210\u529F"),c==null||(m=c.current)===null||m===void 0||(w=m.clearSelected)===null||w===void 0||w.call(m)}}),b=d.mutate;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.Z,{type:"primary",onClick:C,icon:(0,n.jsx)(r.Z,{}),children:"\u5BFC\u5165"}),(0,n.jsx)(W.Z,{visible:G,onCancel:C,title:"\u5BFC\u5165\u8868\u7ED3\u6784",onOk:function(){return b({tables:B.join(",")})},width:900,okText:"\u63D0\u4EA4",children:(0,n.jsx)(i.Z,{ghost:!0,size:"small",actionRef:c,pagination:{pageSize:10,current:1},columns:e,rowKey:"tableName",search:{filterType:"light"},rowSelection:{onChange:function(m){f(m)}},options:!1,request:function(){var x=l()(o().mark(function m(w,F,K){var D,ie,le;return o().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return console.log(F,K),V.next=3,(0,j.we)((0,a.h$)(w,F),(0,a.Yw)(w));case 3:return D=V.sent,ie=D.rows,le=D.total,V.abrupt("return",{data:ie,total:le});case 7:case"end":return V.stop()}},m)}));return function(m,w,F){return x.apply(this,arguments)}}()})})]})},se=R,ce=t(8667),de=function(c){var u=c.tableId,v=(0,E.Zl)(J);return(0,n.jsx)(_.Z,{onClick:function(){return v(u)},type:"link",icon:(0,n.jsx)(ce.Z,{}),children:"\u9884\u89C8"})},me=de,ve=t(59138),pe=function(c){var u=c.tableName,v=(0,A.Db)(l()(o().mark(function C(){return o().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,j.He)({tableName:u});case 2:case"end":return h.stop()}},C)})),{onSuccess:function(){P.ZP.success("\u540C\u6B65\u6210\u529F")}}),y=v.isLoading,G=v.mutate;return(0,n.jsx)(_.Z,{loading:y,type:"link",icon:(0,n.jsx)(ve.Z,{}),onClick:function(){return G()},children:"\u540C\u6B65"})},he=pe,fe=t(42020),ye=t(34179),oe=t(41146),ge=t(46842),Te=t(15912),Ce=t.n(Te),be=t(62913),Ee=t(99886),xe=oe.Z.TabPane,Ie=function(c){Ce()(c),P.ZP.success("\u590D\u5236\u6210\u529F")},we=function(){var c=(0,E.rb)(J),u=(0,E.sJ)(J),v=u>0,y=(0,ye.Z)(l()(o().mark(function p(){var h;return o().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,j.Zd)({tableId:u});case 2:return h=f.sent,f.abrupt("return",Object.keys(h).map(function(d){return{tab:d,key:d,content:h[d],highlightContent:be.Z.highlightAuto(h[d]).value}}));case 4:case"end":return f.stop()}},p)})),{ready:v,refreshDeps:[u]}),G=y.data,C=y.loading;return(0,n.jsx)(W.Z,{visible:v,onCancel:c,width:"80%",footer:!1,title:"\u9884\u89C8\u4EE3\u7801",bodyStyle:{height:"700px"},children:(0,n.jsx)(ge.Z,{spinning:C,children:(0,n.jsx)(oe.Z,{tabPosition:"left",children:G&&G.map(function(p){var h=p.key,B=p.tab,f=p.content,d=p.highlightContent;return(0,n.jsxs)(xe,{tab:B,className:"relative",children:[(0,n.jsx)(_.Z,{icon:(0,n.jsx)(fe.Z,{}),type:"link",className:"absolute top-0 right-1",onClick:function(){return Ie(f)},children:"\u590D\u5236\u4EE3\u7801"}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:(0,n.jsx)("div",{className:"h-[650px] overflow-auto",dangerouslySetInnerHTML:{__html:d}})})})]},h)})})})})},je=we,_e=[s.tC,s.jR,s.q2,s.Jx,s.eJ,s.au,s.fk,{title:"\u64CD\u4F5C",valueType:"option",render:function(c,u){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(me,{tableId:u.tableId}),(0,n.jsx)(U,{tableId:u.tableId}),(0,n.jsx)(Z,{tableIds:[u.tableId]}),(0,n.jsx)(he,{tableName:u.tableName}),(0,n.jsx)(O,{rows:[{tableName:u.tableName,genType:u.genType,genPath:u.genPath}]})]})}}],Ge=function(){var c=$(N),u=(0,S.useState)([]),v=g()(u,2),y=v[0],G=v[1],C=(0,S.useState)([]),p=g()(C,2),h=p[0],B=p[1];return(0,n.jsxs)(z.AC,{children:[(0,n.jsx)(i.Z,{actionRef:c,rowKey:"tableId",rowSelection:{alwaysShowAlert:!0,onChange:function(d,b){G(d),B(b)}},tableAlertOptionRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z,{tableIds:y,isBatch:!0}),(0,n.jsx)(O,{rows:h.map(function(d){var b=d.tableName,x=d.genType,m=d.genPath;return{tableName:b,genType:x,genPath:m}}),isBatch:!0})]})},columns:_e,toolbar:{actions:[(0,n.jsx)(se,{},"ButtonCreate")]},request:function(){var f=l()(o().mark(function d(b,x){var m,w,F;return o().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,j.DT)((0,a.h$)(b,x),(0,a.Yw)(b));case 2:return m=D.sent,w=m.total,F=m.rows,D.abrupt("return",{data:F,success:!0,total:w});case 6:case"end":return D.stop()}},d)}));return function(d,b){return f.apply(this,arguments)}}()}),(0,n.jsx)(je,{})]})},Se=Ge},90586:function(ue,X,t){t.d(X,{DI:function(){return q},DT:function(){return te},He:function(){return re},LV:function(){return ae},XS:function(){return z},Zd:function(){return ne},cj:function(){return ee},qm:function(){return A},we:function(){return Y}});var I=t(55980),l=t.n(I),Q=t(18172),g=t.n(Q),H=t(29960),o=t.n(H),s=t(41595);function z(a,r){return S.apply(this,arguments)}function S(){return S=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/batchGenCode",l()({method:"GET",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),S.apply(this,arguments)}function E(a,r){return $.apply(this,arguments)}function $(){return $=_asyncToGenerator(_regeneratorRuntime.mark(function a(r,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/column/list",_objectSpread({method:"GET",params:_objectSpread({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),$.apply(this,arguments)}function Y(a,r,i){return N.apply(this,arguments)}function N(){return N=g()(o().mark(function a(r,i,T){return o().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,s.h3)("/tool/gen/db/list",l()({method:"POST",headers:{"Content-Type":"application/json"},params:l()({},r),data:i},T||{})));case 1:case"end":return R.stop()}},a)})),N.apply(this,arguments)}function J(a,r){return j.apply(this,arguments)}function j(){return j=_asyncToGenerator(_regeneratorRuntime.mark(function a(r,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/download",_objectSpread({method:"GET",params:_objectSpread({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),j.apply(this,arguments)}function q(a,r){return P.apply(this,arguments)}function P(){return P=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/edit",l()({method:"POST",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return e.stop()}},a)})),P.apply(this,arguments)}function W(a,r){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime.mark(function a(r,i){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/tool/gen/genCode",_objectSpread({method:"GET",params:_objectSpread({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),_.apply(this,arguments)}function A(a,r){return n.apply(this,arguments)}function n(){return n=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/importTable",l()({method:"POST",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),n.apply(this,arguments)}function ee(a,r){return Z.apply(this,arguments)}function Z(){return Z=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/info",l()({method:"GET",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),Z.apply(this,arguments)}function te(a,r,i){return L.apply(this,arguments)}function L(){return L=g()(o().mark(function a(r,i,T){return o().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,s.h3)("/tool/gen/list",l()({method:"POST",headers:{"Content-Type":"application/json"},params:l()({},r),data:i},T||{})));case 1:case"end":return R.stop()}},a)})),L.apply(this,arguments)}function ne(a,r){return O.apply(this,arguments)}function O(){return O=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/preview",l()({method:"GET",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),O.apply(this,arguments)}function ae(a,r){return M.apply(this,arguments)}function M(){return M=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/remove",l()({method:"POST",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),M.apply(this,arguments)}function re(a,r){return U.apply(this,arguments)}function U(){return U=g()(o().mark(function a(r,i){return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.h3)("/tool/gen/synchDb",l()({method:"GET",params:l()({},r)},i||{})));case 1:case"end":return e.stop()}},a)})),U.apply(this,arguments)}}}]);
