"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[990],{44574:function(qe,Se,v){var y=v(84045),l=v(40107),Z=v(11527),ce=v(42277),Ze=["fieldProps","proFieldProps"],ee=["fieldProps","proFieldProps"],te="text",Le=function(Q){var pe=Q.fieldProps,we=Q.proFieldProps,Ie=(0,l.Z)(Q,Ze);return(0,Z.jsx)(ce.Z,(0,y.Z)({valueType:te,fieldProps:pe,filedConfig:{valueType:te},proFieldProps:we},Ie))},M=function(Q){var pe=Q.fieldProps,we=Q.proFieldProps,Ie=(0,l.Z)(Q,ee);return(0,Z.jsx)(ce.Z,(0,y.Z)({valueType:"password",fieldProps:pe,proFieldProps:we,filedConfig:{valueType:te}},Ie))},ve=Le;ve.Password=M,ve.displayName="ProFormComponent",Se.Z=ve},20182:function(qe,Se,v){v.d(Se,{Z:function(){return Bt}});var y=v(62081),l=v(50959),Z=v(82269),ce=v(43219),Ze=v(31307),ee=v(41384),te=v(17361),Le=v(19803),M=v.n(Le),ve=v(57642),Fe=v(73287),Q=v(80228),pe=v(68948),we=v(40107),Ie=v(77036),_e=v(5186);function et(n,t){var i="cannot ".concat(n.method," ").concat(n.action," ").concat(t.status,"'"),e=new Error(i);return e.status=t.status,e.method=n.method,e.url=n.action,e}function We(n){var t=n.responseText||n.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function tt(n){var t=new XMLHttpRequest;n.onProgress&&t.upload&&(t.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),n.onProgress(o)});var i=new FormData;n.data&&Object.keys(n.data).forEach(function(a){var o=n.data[a];if(Array.isArray(o)){o.forEach(function(c){i.append("".concat(a,"[]"),c)});return}i.append(a,o)}),n.file instanceof Blob?i.append(n.filename,n.file,n.file.name):i.append(n.filename,n.file),t.onerror=function(o){n.onError(o)},t.onload=function(){return t.status<200||t.status>=300?n.onError(et(n,t),We(t)):n.onSuccess(We(t),t)},t.open(n.method,n.action,!0),n.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var e=n.headers||{};return e["X-Requested-With"]!==null&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e).forEach(function(a){e[a]!==null&&t.setRequestHeader(a,e[a])}),t.send(i),{abort:function(){t.abort()}}}var nt=+new Date,rt=0;function Ne(){return"rc-upload-".concat(nt,"-").concat(++rt)}var at=v(24916),Oe=function(n,t){if(n&&t){var i=Array.isArray(t)?t:t.split(","),e=n.name||"",a=n.type||"",o=a.replace(/\/.*$/,"");return i.some(function(c){var s=c.trim();if(/^\*(\/\*)?$/.test(c))return!0;if(s.charAt(0)==="."){var r=e.toLowerCase(),u=s.toLowerCase(),d=[u];return(u===".jpg"||u===".jpeg")&&(d=[".jpg",".jpeg"]),d.some(function(h){return r.endsWith(h)})}return/\/\*$/.test(s)?o===s.replace(/\/.*$/,""):a===s?!0:/^\w+$/.test(s)?((0,at.ZP)(!1,"Upload takes an invalidate 'accept' type '".concat(s,"'.Skip for check.")),!0):!1})}return!0};function ot(n,t){var i=n.createReader(),e=[];function a(){i.readEntries(function(o){var c=Array.prototype.slice.apply(o);e=e.concat(c);var s=!c.length;s?t(e):a()})}a()}var it=function(t,i,e){var a=function o(c,s){c.path=s||"",c.isFile?c.file(function(r){e(r)&&(c.fullPath&&!r.webkitRelativePath&&(Object.defineProperties(r,{webkitRelativePath:{writable:!0}}),r.webkitRelativePath=c.fullPath.replace(/^\//,""),Object.defineProperties(r,{webkitRelativePath:{writable:!1}})),i([r]))}):c.isDirectory&&ot(c,function(r){r.forEach(function(u){o(u,"".concat(s).concat(c.name,"/"))})})};t.forEach(function(o){a(o.webkitGetAsEntry())})},lt=it,st=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],ct=function(n){(0,Q.Z)(i,n);var t=(0,pe.Z)(i);function i(){var e;(0,ve.Z)(this,i);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),e.state={uid:Ne()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(s){var r=e.props,u=r.accept,d=r.directory,h=s.target.files,g=(0,ee.Z)(h).filter(function(x){return!d||Oe(x,u)});e.uploadFiles(g),e.reset()},e.onClick=function(s){var r=e.fileInput;if(!!r){var u=e.props,d=u.children,h=u.onClick;if(d&&d.type==="button"){var g=r.parentNode;g.focus(),g.querySelector("button").blur()}r.click(),h&&h(s)}},e.onKeyDown=function(s){s.key==="Enter"&&e.onClick(s)},e.onFileDrop=function(s){var r=e.props.multiple;if(s.preventDefault(),s.type!=="dragover")if(e.props.directory)lt(Array.prototype.slice.call(s.dataTransfer.items),e.uploadFiles,function(d){return Oe(d,e.props.accept)});else{var u=(0,ee.Z)(s.dataTransfer.files).filter(function(d){return Oe(d,e.props.accept)});r===!1&&(u=u.slice(0,1)),e.uploadFiles(u)}},e.uploadFiles=function(s){var r=(0,ee.Z)(s),u=r.map(function(d){return d.uid=Ne(),e.processFile(d,r)});Promise.all(u).then(function(d){var h=e.props.onBatchStart;h==null||h(d.map(function(g){var x=g.origin,b=g.parsedFile;return{file:x,parsedFile:b}})),d.filter(function(g){return g.parsedFile!==null}).forEach(function(g){e.post(g)})})},e.processFile=function(){var s=(0,Ie.Z)((0,ce.Z)().mark(function r(u,d){var h,g,x,b,B,K,O,A,j;return(0,ce.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(h=e.props.beforeUpload,g=u,!h){m.next=14;break}return m.prev=3,m.next=6,h(u,d);case 6:g=m.sent,m.next=12;break;case 9:m.prev=9,m.t0=m.catch(3),g=!1;case 12:if(g!==!1){m.next=14;break}return m.abrupt("return",{origin:u,parsedFile:null,action:null,data:null});case 14:if(x=e.props.action,typeof x!="function"){m.next=21;break}return m.next=18,x(u);case 18:b=m.sent,m.next=22;break;case 21:b=x;case 22:if(B=e.props.data,typeof B!="function"){m.next=29;break}return m.next=26,B(u);case 26:K=m.sent,m.next=30;break;case 29:K=B;case 30:return O=((0,Ze.Z)(g)==="object"||typeof g=="string")&&g?g:u,O instanceof File?A=O:A=new File([O],u.name,{type:u.type}),j=A,j.uid=u.uid,m.abrupt("return",{origin:u,data:K,parsedFile:j,action:b});case 35:case"end":return m.stop()}},r,null,[[3,9]])}));return function(r,u){return s.apply(this,arguments)}}(),e.saveFileInput=function(s){e.fileInput=s},e}return(0,Fe.Z)(i,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(a){var o=this,c=a.data,s=a.origin,r=a.action,u=a.parsedFile;if(!!this._isMounted){var d=this.props,h=d.onStart,g=d.customRequest,x=d.name,b=d.headers,B=d.withCredentials,K=d.method,O=s.uid,A=g||tt,j={action:r,filename:x,data:c,file:u,headers:b,withCredentials:B,method:K||"post",onProgress:function(m){var S=o.props.onProgress;S==null||S(m,u)},onSuccess:function(m,S){var T=o.props.onSuccess;T==null||T(m,u,S),delete o.reqs[O]},onError:function(m,S){var T=o.props.onError;T==null||T(m,S,u),delete o.reqs[O]}};h(s),this.reqs[O]=A(j)}}},{key:"reset",value:function(){this.setState({uid:Ne()})}},{key:"abort",value:function(a){var o=this.reqs;if(a){var c=a.uid?a.uid:a;o[c]&&o[c].abort&&o[c].abort(),delete o[c]}else Object.keys(o).forEach(function(s){o[s]&&o[s].abort&&o[s].abort(),delete o[s]})}},{key:"render",value:function(){var a,o=this.props,c=o.component,s=o.prefixCls,r=o.className,u=o.disabled,d=o.id,h=o.style,g=o.multiple,x=o.accept,b=o.capture,B=o.children,K=o.directory,O=o.openFileDialogOnClick,A=o.onMouseEnter,j=o.onMouseLeave,$=(0,we.Z)(o,st),m=M()((a={},(0,Z.Z)(a,s,!0),(0,Z.Z)(a,"".concat(s,"-disabled"),u),(0,Z.Z)(a,r,r),a)),S=K?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},T=u?{}:{onClick:O?this.onClick:function(){},onKeyDown:O?this.onKeyDown:function(){},onMouseEnter:A,onMouseLeave:j,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return l.createElement(c,(0,y.Z)({},T,{className:m,role:"button",style:h}),l.createElement("input",(0,y.Z)({},(0,_e.Z)($,{aria:!0,data:!0}),{id:d,type:"file",ref:this.saveFileInput,onClick:function(G){return G.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:x},S,{multiple:g,onChange:this.onChange},b!=null?{capture:b}:{})),B)}}]),i}(l.Component),ut=ct;function Te(){}var Ke=function(n){(0,Q.Z)(i,n);var t=(0,pe.Z)(i);function i(){var e;(0,ve.Z)(this,i);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),e.uploader=void 0,e.saveUploader=function(s){e.uploader=s},e}return(0,Fe.Z)(i,[{key:"abort",value:function(a){this.uploader.abort(a)}},{key:"render",value:function(){return l.createElement(ut,(0,y.Z)({},this.props,{ref:this.saveUploader}))}}]),i}(l.Component);Ke.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:Te,onError:Te,onSuccess:Te,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var dt=Ke,ze=dt,vt=v(52334),pt=v(10422),ke=v(73164),ft=v(44754),mt=v(77583),ht=v(45131),gt=v(71634),He=v(12725),yt=v(93589),wt=v(62268),Me=v(61339),Ge=v(76742),It=v(38563),Et=v(67093),Re=v(1509);function be(n){return(0,y.Z)((0,y.Z)({},n),{lastModified:n.lastModified,lastModifiedDate:n.lastModifiedDate,name:n.name,size:n.size,type:n.type,uid:n.uid,percent:0,originFileObj:n})}function De(n,t){var i=(0,ee.Z)(t),e=i.findIndex(function(a){var o=a.uid;return o===n.uid});return e===-1?i.push(n):i[e]=n,i}function Ae(n,t){var i=n.uid!==void 0?"uid":"name";return t.filter(function(e){return e[i]===n[i]})[0]}function Ct(n,t){var i=n.uid!==void 0?"uid":"name",e=t.filter(function(a){return a[i]!==n[i]});return e.length===t.length?null:e}var Pt=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=t.split("/"),e=i[i.length-1],a=e.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]},Ve=function(t){return t.indexOf("image/")===0},Zt=function(t){if(t.type&&!t.thumbUrl)return Ve(t.type);var i=t.thumbUrl||t.url||"",e=Pt(i);return/^data:image\//.test(i)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(e)?!0:!(/^data:/.test(i)||e)},oe=200;function Ft(n){return new Promise(function(t){if(!n.type||!Ve(n.type)){t("");return}var i=document.createElement("canvas");i.width=oe,i.height=oe,i.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(oe,"px; height: ").concat(oe,"px; z-index: 9999; display: none;"),document.body.appendChild(i);var e=i.getContext("2d"),a=new Image;if(a.onload=function(){var c=a.width,s=a.height,r=oe,u=oe,d=0,h=0;c>s?(u=s*(oe/c),h=-(u-r)/2):(r=c*(oe/s),d=-(r-u)/2),e.drawImage(a,d,h,r,u);var g=i.toDataURL();document.body.removeChild(i),t(g)},a.crossOrigin="anonymous",n.type.startsWith("image/svg+xml")){var o=new FileReader;o.addEventListener("load",function(){o.result&&(a.src=o.result)}),o.readAsDataURL(n)}else a.src=window.URL.createObjectURL(n)})}var Rt=v(71224),bt=v(60666),Dt=v(43965),Ut=v(92887),xt=v(10220),St=l.forwardRef(function(n,t){var i,e=n.prefixCls,a=n.className,o=n.style,c=n.locale,s=n.listType,r=n.file,u=n.items,d=n.progress,h=n.iconRender,g=n.actionIconRender,x=n.itemRender,b=n.isImgUrl,B=n.showPreviewIcon,K=n.showRemoveIcon,O=n.showDownloadIcon,A=n.previewIcon,j=n.removeIcon,$=n.downloadIcon,m=n.onPreview,S=n.onDownload,T=n.onClose,ie,G,le=r.status,q=l.useState(le),fe=(0,te.Z)(q,2),z=fe[0],L=fe[1];l.useEffect(function(){le!=="removed"&&L(le)},[le]);var me=l.useState(!1),he=(0,te.Z)(me,2),ge=he[0],Ce=he[1],ue=l.useRef();l.useEffect(function(){return ue.current=setTimeout(function(){Ce(!0)},300),function(){window.clearTimeout(ue.current)}},[]);var se="".concat(e,"-span"),V=h(r),X=l.createElement("div",{className:"".concat(e,"-text-icon")},V);if(s==="picture"||s==="picture-card")if(z==="uploading"||!r.thumbUrl&&!r.url){var ne,ye=M()((ne={},(0,Z.Z)(ne,"".concat(e,"-list-item-thumbnail"),!0),(0,Z.Z)(ne,"".concat(e,"-list-item-file"),z!=="uploading"),ne));X=l.createElement("div",{className:ye},V)}else{var re,ae=b!=null&&b(r)?l.createElement("img",{src:r.thumbUrl||r.url,alt:r.name,className:"".concat(e,"-list-item-image"),crossOrigin:r.crossOrigin}):V,C=M()((re={},(0,Z.Z)(re,"".concat(e,"-list-item-thumbnail"),!0),(0,Z.Z)(re,"".concat(e,"-list-item-file"),b&&!b(r)),re));X=l.createElement("a",{className:C,onClick:function(P){return m(r,P)},href:r.url||r.thumbUrl,target:"_blank",rel:"noopener noreferrer"},ae)}var w=M()((i={},(0,Z.Z)(i,"".concat(e,"-list-item"),!0),(0,Z.Z)(i,"".concat(e,"-list-item-").concat(z),!0),(0,Z.Z)(i,"".concat(e,"-list-item-list-type-").concat(s),!0),i)),N=typeof r.linkProps=="string"?JSON.parse(r.linkProps):r.linkProps,W=K?g((typeof j=="function"?j(r):j)||l.createElement(Rt.Z,null),function(){return T(r)},e,c.removeFile):null,H=O&&z==="done"?g((typeof $=="function"?$(r):$)||l.createElement(bt.Z,null),function(){return S(r)},e,c.downloadFile):null,D=s!=="picture-card"&&l.createElement("span",{key:"download-delete",className:M()("".concat(e,"-list-item-card-actions"),{picture:s==="picture"})},H,W),_=M()("".concat(e,"-list-item-name")),de=r.url?[l.createElement("a",(0,y.Z)({key:"view",target:"_blank",rel:"noopener noreferrer",className:_,title:r.name},N,{href:r.url,onClick:function(P){return m(r,P)}}),r.name),D]:[l.createElement("span",{key:"view",className:_,onClick:function(P){return m(r,P)},title:r.name},r.name),D],J={pointerEvents:"none",opacity:.5},$e=B?l.createElement("a",{href:r.url||r.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:r.url||r.thumbUrl?void 0:J,onClick:function(P){return m(r,P)},title:c.previewFile},typeof A=="function"?A(r):A||l.createElement(Dt.Z,null)):null,Be=s==="picture-card"&&z!=="uploading"&&l.createElement("span",{className:"".concat(e,"-list-item-actions")},$e,z==="done"&&H,W),Pe;r.response&&typeof r.response=="string"?Pe=r.response:Pe=((ie=r.error)===null||ie===void 0?void 0:ie.statusText)||((G=r.error)===null||G===void 0?void 0:G.message)||c.uploadError;var xe=l.createElement("span",{className:se},X,de),k=l.useContext(ke.E_),f=k.getPrefixCls,E=f(),F=l.createElement("div",{className:w},l.createElement("div",{className:"".concat(e,"-list-item-info")},xe),Be,ge&&l.createElement(Me.Z,{motionName:"".concat(E,"-fade"),visible:z==="uploading",motionDeadline:2e3},function(U){var P=U.className,Y="percent"in r?l.createElement(Ut.Z,(0,y.Z)({},d,{type:"line",percent:r.percent})):null;return l.createElement("div",{className:M()("".concat(e,"-list-item-progress"),P)},Y)})),p=M()("".concat(e,"-list-").concat(s,"-container"),a),I=z==="error"?l.createElement(xt.Z,{title:Pe,getPopupContainer:function(P){return P.parentNode}},F):F;return l.createElement("div",{className:p,style:o,ref:t},x?x(I,r,u,{download:S.bind(null,r),preview:m.bind(null,r),remove:T.bind(null,r)}):I)}),Lt=St,Ue=(0,y.Z)({},Et.ZP);delete Ue.onAppearEnd,delete Ue.onEnterEnd,delete Ue.onLeaveEnd;var Nt=function(t,i){var e,a=t.listType,o=t.previewFile,c=t.onPreview,s=t.onDownload,r=t.onRemove,u=t.locale,d=t.iconRender,h=t.isImageUrl,g=t.prefixCls,x=t.items,b=x===void 0?[]:x,B=t.showPreviewIcon,K=t.showRemoveIcon,O=t.showDownloadIcon,A=t.removeIcon,j=t.previewIcon,$=t.downloadIcon,m=t.progress,S=t.appendAction,T=t.appendActionVisible,ie=t.itemRender,G=(0,It.Z)(),le=l.useState(!1),q=(0,te.Z)(le,2),fe=q[0],z=q[1];l.useEffect(function(){a!=="picture"&&a!=="picture-card"||(b||[]).forEach(function(C){typeof document>"u"||typeof window>"u"||!window.FileReader||!window.File||!(C.originFileObj instanceof File||C.originFileObj instanceof Blob)||C.thumbUrl!==void 0||(C.thumbUrl="",o&&o(C.originFileObj).then(function(w){C.thumbUrl=w||"",G()}))})},[a,b,o]),l.useEffect(function(){z(!0)},[]);var L=function(w,N){if(!!c)return N==null||N.preventDefault(),c(w)},me=function(w){typeof s=="function"?s(w):w.url&&window.open(w.url)},he=function(w){r==null||r(w)},ge=function(w){if(d)return d(w,a);var N=w.status==="uploading",W=h&&h(w)?l.createElement(wt.Z,null):l.createElement(gt.Z,null),H=N?l.createElement(He.Z,null):l.createElement(yt.Z,null);return a==="picture"?H=N?l.createElement(He.Z,null):W:a==="picture-card"&&(H=N?u.uploading:W),H},Ce=function(w,N,W,H){var D={type:"text",size:"small",title:H,onClick:function(J){N(),(0,Re.l$)(w)&&w.props.onClick&&w.props.onClick(J)},className:"".concat(W,"-list-item-card-actions-btn")};if((0,Re.l$)(w)){var _=(0,Re.Tm)(w,(0,y.Z)((0,y.Z)({},w.props),{onClick:function(){}}));return l.createElement(Ge.Z,(0,y.Z)({},D,{icon:_}))}return l.createElement(Ge.Z,(0,y.Z)({},D),l.createElement("span",null,w))};l.useImperativeHandle(i,function(){return{handlePreview:L,handleDownload:me}});var ue=l.useContext(ke.E_),se=ue.getPrefixCls,V=ue.direction,X=se("upload",g),ne=M()((e={},(0,Z.Z)(e,"".concat(X,"-list"),!0),(0,Z.Z)(e,"".concat(X,"-list-").concat(a),!0),(0,Z.Z)(e,"".concat(X,"-list-rtl"),V==="rtl"),e)),ye=(0,ee.Z)(b.map(function(C){return{key:C.uid,file:C}})),re=a==="picture-card"?"animate-inline":"animate",ae={motionDeadline:2e3,motionName:"".concat(X,"-").concat(re),keys:ye,motionAppear:fe};return a!=="picture-card"&&(ae=(0,y.Z)((0,y.Z)({},Ue),ae)),l.createElement("div",{className:ne},l.createElement(Me.V,(0,y.Z)({},ae,{component:!1}),function(C){var w=C.key,N=C.file,W=C.className,H=C.style;return l.createElement(Lt,{key:w,locale:u,prefixCls:X,className:W,style:H,file:N,items:b,progress:m,listType:a,isImgUrl:h,showPreviewIcon:B,showRemoveIcon:K,showDownloadIcon:O,removeIcon:A,previewIcon:j,downloadIcon:$,iconRender:ge,actionIconRender:Ce,itemRender:ie,onPreview:L,onDownload:me,onClose:he})}),S&&l.createElement(Me.Z,(0,y.Z)({},ae,{visible:T,forceRender:!0}),function(C){var w=C.className,N=C.style;return(0,Re.Tm)(S,function(W){return{className:M()(W.className,w),style:(0,y.Z)((0,y.Z)((0,y.Z)({},N),{pointerEvents:w?"none":void 0}),W.style)}})}))},Xe=l.forwardRef(Nt);Xe.defaultProps={listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,appendActionVisible:!0,previewFile:Ft,isImageUrl:Zt};var Ot=Xe,Tt=function(n,t,i,e){function a(o){return o instanceof i?o:new i(function(c){c(o)})}return new(i||(i=Promise))(function(o,c){function s(d){try{u(e.next(d))}catch(h){c(h)}}function r(d){try{u(e.throw(d))}catch(h){c(h)}}function u(d){d.done?o(d.value):a(d.value).then(s,r)}u((e=e.apply(n,t||[])).next())})},Ee="__LIST_IGNORE_".concat(Date.now(),"__"),kt=function(t,i){var e,a=t.fileList,o=t.defaultFileList,c=t.onRemove,s=t.showUploadList,r=t.listType,u=t.onPreview,d=t.onDownload,h=t.onChange,g=t.onDrop,x=t.previewFile,b=t.disabled,B=t.locale,K=t.iconRender,O=t.isImageUrl,A=t.progress,j=t.prefixCls,$=t.className,m=t.type,S=t.children,T=t.style,ie=t.itemRender,G=t.maxCount,le=l.useContext(ft.Z),q=b||le,fe=(0,vt.Z)(o||[],{value:a,postState:function(f){return f??[]}}),z=(0,te.Z)(fe,2),L=z[0],me=z[1],he=l.useState("drop"),ge=(0,te.Z)(he,2),Ce=ge[0],ue=ge[1],se=l.useRef();l.useMemo(function(){var k=Date.now();(a||[]).forEach(function(f,E){!f.uid&&!Object.isFrozen(f)&&(f.uid="__AUTO__".concat(k,"_").concat(E,"__"))})},[a]);var V=function(f,E,F){var p=(0,ee.Z)(E);G===1?p=p.slice(-1):G&&(p=p.slice(0,G)),(0,pt.flushSync)(function(){me(p)});var I={file:f,fileList:p};F&&(I.event=F),h==null||h(I)},X=function(f,E){return Tt(void 0,void 0,void 0,(0,ce.Z)().mark(function F(){var p,I,U,P;return(0,ce.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(p=t.beforeUpload,I=t.transformFile,U=f,!p){R.next=13;break}return R.next=5,p(f,E);case 5:if(P=R.sent,P!==!1){R.next=8;break}return R.abrupt("return",!1);case 8:if(delete f[Ee],P!==Ee){R.next=12;break}return Object.defineProperty(f,Ee,{value:!0,configurable:!0}),R.abrupt("return",!1);case 12:(0,Ze.Z)(P)==="object"&&P&&(U=P);case 13:if(!I){R.next=17;break}return R.next=16,I(U);case 16:U=R.sent;case 17:return R.abrupt("return",U);case 18:case"end":return R.stop()}},F)}))},ne=function(f){var E=f.filter(function(I){return!I.file[Ee]});if(!!E.length){var F=E.map(function(I){return be(I.file)}),p=(0,ee.Z)(L);F.forEach(function(I){p=De(I,p)}),F.forEach(function(I,U){var P=I;if(E[U].parsedFile)I.status="uploading";else{var Y=I.originFileObj,R;try{R=new File([Y],Y.name,{type:Y.type})}catch{R=new Blob([Y],{type:Y.type}),R.name=Y.name,R.lastModifiedDate=new Date,R.lastModified=new Date().getTime()}R.uid=I.uid,P=R}V(P,p)})}},ye=function(f,E,F){try{typeof f=="string"&&(f=JSON.parse(f))}catch{}if(!!Ae(E,L)){var p=be(E);p.status="done",p.percent=100,p.response=f,p.xhr=F;var I=De(p,L);V(p,I)}},re=function(f,E){if(!!Ae(E,L)){var F=be(E);F.status="uploading",F.percent=f.percent;var p=De(F,L);V(F,p,f)}},ae=function(f,E,F){if(!!Ae(F,L)){var p=be(F);p.error=f,p.response=E,p.status="error";var I=De(p,L);V(p,I)}},C=function(f){var E;Promise.resolve(typeof c=="function"?c(f):c).then(function(F){var p;if(F!==!1){var I=Ct(f,L);I&&(E=(0,y.Z)((0,y.Z)({},f),{status:"removed"}),L==null||L.forEach(function(U){var P=E.uid!==void 0?"uid":"name";U[P]===E[P]&&!Object.isFrozen(U)&&(U.status="removed")}),(p=se.current)===null||p===void 0||p.abort(E),V(E,I))}})},w=function(f){ue(f.type),f.type==="drop"&&(g==null||g(f))};l.useImperativeHandle(i,function(){return{onBatchStart:ne,onSuccess:ye,onProgress:re,onError:ae,fileList:L,upload:se.current}});var N=l.useContext(ke.E_),W=N.getPrefixCls,H=N.direction,D=W("upload",j),_=(0,y.Z)((0,y.Z)({onBatchStart:ne,onError:ae,onProgress:re,onSuccess:ye},t),{prefixCls:D,disabled:q,beforeUpload:X,onChange:void 0});delete _.className,delete _.style,(!S||q)&&delete _.id;var de=function(f,E){return s?l.createElement(mt.Z,{componentName:"Upload",defaultLocale:ht.Z.Upload},function(F){var p=typeof s=="boolean"?{}:s,I=p.showRemoveIcon,U=p.showPreviewIcon,P=p.showDownloadIcon,Y=p.removeIcon,R=p.previewIcon,Qe=p.downloadIcon;return l.createElement(Ot,{prefixCls:D,listType:r,items:L,previewFile:x,onPreview:u,onDownload:d,onRemove:C,showRemoveIcon:!q&&I,showPreviewIcon:U,showDownloadIcon:P,removeIcon:Y,previewIcon:R,downloadIcon:Qe,iconRender:K,locale:(0,y.Z)((0,y.Z)({},F),B),isImageUrl:O,progress:A,appendAction:f,appendActionVisible:E,itemRender:ie})}):f};if(m==="drag"){var J,$e=M()(D,(J={},(0,Z.Z)(J,"".concat(D,"-drag"),!0),(0,Z.Z)(J,"".concat(D,"-drag-uploading"),L.some(function(k){return k.status==="uploading"})),(0,Z.Z)(J,"".concat(D,"-drag-hover"),Ce==="dragover"),(0,Z.Z)(J,"".concat(D,"-disabled"),q),(0,Z.Z)(J,"".concat(D,"-rtl"),H==="rtl"),J),$);return l.createElement("span",null,l.createElement("div",{className:$e,onDrop:w,onDragOver:w,onDragLeave:w,style:T},l.createElement(ze,(0,y.Z)({},_,{ref:se,className:"".concat(D,"-btn")}),l.createElement("div",{className:"".concat(D,"-drag-container")},S))),de())}var Be=M()(D,(e={},(0,Z.Z)(e,"".concat(D,"-select"),!0),(0,Z.Z)(e,"".concat(D,"-select-").concat(r),!0),(0,Z.Z)(e,"".concat(D,"-disabled"),q),(0,Z.Z)(e,"".concat(D,"-rtl"),H==="rtl"),e)),Pe=function(f){return l.createElement("div",{className:Be,style:f},l.createElement(ze,(0,y.Z)({},_,{ref:se})))},xe=Pe(S?void 0:{display:"none"});return r==="picture-card"?l.createElement("span",{className:M()("".concat(D,"-picture-card-wrapper"),$)},de(xe,!!S)):l.createElement("span",{className:$},xe,de())},Je=l.forwardRef(kt);Je.defaultProps={type:"select",multiple:!1,action:"",data:{},accept:"",showUploadList:!0,listType:"text",className:"",disabled:!1,supportServerRender:!0};var Ye=Je,Mt=function(n,t){var i={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(i[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,e=Object.getOwnPropertySymbols(n);a<e.length;a++)t.indexOf(e[a])<0&&Object.prototype.propertyIsEnumerable.call(n,e[a])&&(i[e[a]]=n[e[a]]);return i},At=function(t,i){var e=t.style,a=t.height,o=Mt(t,["style","height"]);return l.createElement(Ye,(0,y.Z)({ref:i},o,{type:"drag",style:(0,y.Z)((0,y.Z)({},e),{height:a})}))},jt=l.forwardRef(At),$t=jt,je=Ye;je.Dragger=$t,je.LIST_IGNORE=Ee;var Bt=je}}]);
