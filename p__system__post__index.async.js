"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[631],{13026:function(ce,M,e){e.d(M,{gp:function(){return Z},jk:function(){return v},l:function(){return V},mJ:function(){return o},nj:function(){return O}});var i=e(50959),o={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},Z={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},v={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},O={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"},V=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,i.useMemo)(function(){return{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentId",key:"parentId",valueType:"treeSelect",fieldProps:{treeData:B,dropdownMatchSelectWidth:250,fieldNames:{value:"id"}}}},[B])}},14145:function(ce,M,e){e.d(M,{ew:function(){return ne},Jx:function(){return z},iT:function(){return q},Zi:function(){return F},Bw:function(){return _},eJ:function(){return Z},fk:function(){return V},nj:function(){return m.nj},sE:function(){return O},WW:function(){return U},sy:function(){return T},E$:function(){return ae},_M:function(){return A},tC:function(){return o},wX:function(){return ee},oh:function(){return p},Uc:function(){return j},x:function(){return a},Mw:function(){return $},p_:function(){return h},$V:function(){return L},gp:function(){return m.gp},Qo:function(){return J},xM:function(){return me},y4:function(){return B},$9:function(){return P},jk:function(){return m.jk},x_:function(){return d},C9:function(){return x},dy:function(){return C},QT:function(){return I},Jy:function(){return te},VP:function(){return y},g4:function(){return re},Fu:function(){return ve},Rj:function(){return g},tE:function(){return ue},iO:function(){return E},q2:function(){return G},jR:function(){return W},BP:function(){return Y},au:function(){return v},oo:function(){return se},HW:function(){return fe},VG:function(){return oe},D1:function(){return pe},l:function(){return m.l}});var i=e(43380),o={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},Z={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},v={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},O={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:i.al},V={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(H){return{beginCreateTime:H[0],endCreateTime:H[1]}}}},y={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},B={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},m=e(13026),W={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},G={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},z={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},U={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},F={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},q={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},_={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},L={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:i.gh,width:90},h={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},p={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:i.gc},ee={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:i.gc},j={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:i.gc},a={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:i.gc},$={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:i.gc},te={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:i.CX,width:70},Y={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:i.V},P={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},J={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},ne={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},T={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},A={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:i.LZ},ae={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},E={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},x={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},d={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},C={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},I={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},g={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},re={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},ve={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},ue={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},fe={dataIndex:"userId",key:"userId",title:"\u7528\u6237\u7F16\u53F7",valueType:"text",editable:!1,hideInSearch:!0},oe={dataIndex:"userName",key:"userName",title:"\u7528\u6237\u540D\u79F0",valueType:"text"},me={dataIndex:"nickName",key:"nickName",title:"\u7528\u6237\u6635\u79F0",valueType:"text",hideInSearch:!0},se={dataIndex:["dept","deptName"],key:"deptDeptName",title:"\u90E8\u95E8\u540D\u79F0",valueType:"text",hideInSearch:!0},pe={dataIndex:"phoneNumber",key:"phoneNumber",title:"\u624B\u673A\u53F7\u7801",valueType:"text"}},19993:function(ce,M,e){e.d(M,{Z:function(){return Z},n:function(){return q}});var i=e(50959),o=e(98205),Z=function(L){var h=(0,i.useRef)(),p=(0,o.Zl)(L);return(0,i.useEffect)(function(){h!=null&&h.current&&p(h.current)},[]),h},v=e(35290),O=e.n(v),V=e(411),y=e.n(V),B=e(94434),m=e.n(B),W=e(46686),G=e.n(W),z=e(28287),U=e(32222),F=e.n(U),q=function(L){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ee=(0,i.useState)([]),j=G()(ee,2),a=j[0],$=j[1],te=(0,i.useState)([]),Y=G()(te,2),P=Y[0],J=Y[1],ne={alwaysShowAlert:p,type:h,selectedRowKeys:a,onChange:function(x,d){J(d),$(x)}},T=function(x){var d=x[L],C=[x],I=[d];if(h==="checkbox")if(I=m()(a),C=F()(P),I.includes(d)){var g=a.indexOf(d);I.splice(g,1),C.splice(g,1)}else C.push(x),I.push(d);J(C),$(I)},A=function(){J([]),$([])},ae=function(){var E=y()(O()().mark(function x(){var d,C=arguments;return O()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=C.length>0&&C[0]!==void 0?C[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(P==null?void 0:P.length)!==0){g.next=4;break}return z.ZP.warning(d),g.abrupt("return",Promise.reject(d));case 4:return g.abrupt("return",Promise.resolve(P));case 5:case"end":return g.stop()}},x)}));return function(){return E.apply(this,arguments)}}();return{selectedRows:P,selectedRowKeys:a,rowSelection:ne,onClick:T,clearSelection:A,setSelectedRowKeys:$,checkRowSelection:ae}}},95634:function(ce,M,e){e.r(M),e.d(M,{default:function(){return Ae}});var i=e(35290),o=e.n(i),Z=e(411),v=e.n(Z),O=e(46686),V=e.n(O),y=e(14145),B=e(19993),m=e(98205),W="systemPost",G=(0,m.cn)({key:"".concat(W,"AtomMainTableActions"),default:void 0}),z=function(){return(0,B.Z)(G)},U=function(){return(0,m.sJ)(G)},F=(0,m.cn)({key:"".concat(W,"AtomAddOrEditModal"),default:{open:!1,actionType:"add"}}),q=function(){var t=(0,m.Zl)(F);return function(){return t({open:!0,actionType:"add"})}},_=function(){var t=(0,m.Zl)(F);return function(r){return t({open:!0,actionType:"edit",record:r})}},L=function(){return(0,m.rb)(F)},h=function(){return(0,m.sJ)(F)},p=e(65174),ee=e(54064),j=e(93066),a=e(11527),$=function(){var t=(0,p.md)(),r=q();return(0,a.jsx)(p.Nv,{accessible:t.canAddSysPost,children:(0,a.jsx)(j.Z,{type:"primary",icon:(0,a.jsx)(ee.Z,{}),onClick:r,children:"\u65B0\u5EFA"})})},te=$,Y=e(26099),P=function(t){var r=t.record,s=(0,p.md)(),n=_();return(0,a.jsx)(p.Nv,{accessible:s.canEditSysPost,children:(0,a.jsx)(j.Z,{type:"link",icon:(0,a.jsx)(Y.Z,{}),onClick:function(){return n(r)},children:"\u7F16\u8F91"})})},J=P,ne=e(30279),T=e.n(ne),A=e(26931);function ae(u,t){return E.apply(this,arguments)}function E(){return E=v()(o()().mark(function u(t,r){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/system/post/add",T()({method:"POST",headers:{"Content-Type":"application/json"},data:t},r||{})));case 1:case"end":return n.stop()}},u)})),E.apply(this,arguments)}function x(u,t){return d.apply(this,arguments)}function d(){return d=v()(o()().mark(function u(t,r){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/system/post/edit",T()({method:"POST",headers:{"Content-Type":"application/json"},data:t},r||{})));case 1:case"end":return n.stop()}},u)})),d.apply(this,arguments)}function C(u,t){return I.apply(this,arguments)}function I(){return I=v()(o()().mark(function u(t,r){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/system/post/export",T()({method:"POST",headers:{"Content-Type":"application/json"},data:t},r||{})));case 1:case"end":return n.stop()}},u)})),I.apply(this,arguments)}function g(u,t){return re.apply(this,arguments)}function re(){return re=_asyncToGenerator(_regeneratorRuntime().mark(function u(t,r){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",request("/system/post/info",_objectSpread({method:"GET",params:_objectSpread({},t)},r||{})));case 1:case"end":return n.stop()}},u)})),re.apply(this,arguments)}function ve(u,t){return ue.apply(this,arguments)}function ue(){return ue=v()(o()().mark(function u(t,r){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/system/post/list",T()({method:"POST",headers:{"Content-Type":"application/json"},data:t},r||{})));case 1:case"end":return n.stop()}},u)})),ue.apply(this,arguments)}function fe(u){return oe.apply(this,arguments)}function oe(){return oe=_asyncToGenerator(_regeneratorRuntime().mark(function u(t){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/post/optionSelect",_objectSpread({method:"GET"},t||{})));case 1:case"end":return s.stop()}},u)})),oe.apply(this,arguments)}function me(u,t){return se.apply(this,arguments)}function se(){return se=v()(o()().mark(function u(t,r){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,A.WY)("/system/post/remove",T()({method:"POST",params:T()({},t)},r||{})));case 1:case"end":return n.stop()}},u)})),se.apply(this,arguments)}var pe=e(90365),le=e(3650),H=e(28287),xe=function(t){var r=t.searchParams,s=(0,p.md)(),n=(0,le.useMutation)(function(){return C(r)},{onSuccess:function(){H.ZP.success("\u5BFC\u51FA\u6210\u529F")}}),S=n.isLoading,N=n.mutate;return(0,a.jsx)(p.Nv,{accessible:s.canExportSysPost,children:(0,a.jsx)(j.Z,{type:"link",icon:(0,a.jsx)(pe.Z,{}),loading:S,onClick:function(){return N()},children:"\u5BFC\u51FA\u5F53\u524D\u5217\u8868"})})},Ce=xe,Ie=e(39449),ye=e(48111),ge=function(t){var r=t.postId,s=t.isBatch,n=t.disabled,S=s?"\u6279\u91CF\u5220\u9664":"\u5220\u9664",N=(0,p.md)(),f=U(),k=(0,le.useMutation)(function(){var ie=v()(o()().mark(function l(R){return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,me({postIds:R});case 2:case"end":return X.stop()}},l)}));return function(l){return ie.apply(this,arguments)}}(),{onSuccess:function(){var l;f==null||f.reload(),f==null||(l=f.clearSelected)===null||l===void 0||l.call(f),H.ZP.success("\u5220\u9664\u6210\u529F")}}),b=k.mutateAsync,K=k.isLoading,w=function(){ye.Z.confirm({title:"\u5220\u9664\u5C97\u4F4D",content:"\u786E\u5B9A\u5220\u9664 \u5C97\u4F4D\u7F16\u53F7 \u4E3A ".concat(r," \u7684\u5C97\u4F4D\u5417\uFF1F"),onOk:function(){var l=v()(o()().mark(function Q(){return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b(r));case 1:case"end":return c.stop()}},Q)}));function R(){return l.apply(this,arguments)}return R}(),okButtonProps:{loading:K}})};return(0,a.jsx)(p.Nv,{accessible:N.canRemoveSysPost,children:(0,a.jsx)(j.Z,{type:"link",danger:!0,disabled:n,icon:(0,a.jsx)(Ie.Z,{}),onClick:w,children:S})})},he=ge,Te=e(43380),D=e(55633),de=e(50959),Se=function(){var t,r=(0,de.useRef)(),s=h(),n=s.open,S=s.actionType,N=s.record,f=L(),k=U(),b=function(){var R;f(),(R=r.current)===null||R===void 0||R.resetFields()},K=(0,le.useMutation)(v()(o()().mark(function l(){var R,Q;return o()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(R=r.current)===null||R===void 0?void 0:R.validateFields();case 2:if(Q=c.sent,Q){c.next=5;break}return c.abrupt("return");case 5:if(S!=="add"){c.next=9;break}return c.next=8,ae(Q);case 8:return c.abrupt("return");case 9:return c.next=11,x(T()(T()({},Q),{},{postId:N.postId}));case 11:case"end":return c.stop()}},l)})),{onSuccess:function(){k==null||k.reload(),b(),H.ZP.success(S==="add"?"\u65B0\u5EFA\u6210\u529F":"\u4FDD\u5B58\u6210\u529F")}}),w=K.mutate,ie=K.isLoading;return(0,de.useEffect)(function(){var l;S==="edit"&&N&&(l=r.current)!==null&&l!==void 0&&l.setFieldsValue&&r.current.setFieldsValue(N)},[S,(t=r.current)===null||t===void 0?void 0:t.setFieldsValue]),(0,a.jsx)(ye.Z,{open:n,onCancel:b,okText:"\u63D0\u4EA4",okButtonProps:{loading:ie},onOk:function(){return w()},title:S==="add"?"\u65B0\u5EFA\u5C97\u4F4D":"\u7F16\u8F91\u5C97\u4F4D\u4FE1\u606F",children:(0,a.jsxs)(D.A96,{submitter:!1,formRef:r,children:[(0,a.jsx)(D.VaQ,{name:"postName",label:"\u5C97\u4F4D\u540D\u79F0",rules:[{required:!0}]}),(0,a.jsx)(D.VaQ,{name:"postCode",label:"\u5C97\u4F4D\u7F16\u7801",rules:[{required:!0}]}),(0,a.jsx)(D.k_F,{name:"postSort",label:"\u663E\u793A\u987A\u5E8F",rules:[{required:!0}],initialValue:0}),(0,a.jsx)(D.$Oj.Group,{name:"status",label:"\u72B6\u6001",valueEnum:Te.al,initialValue:Te.vu.ENABLE}),(0,a.jsx)(D.$JJ,{name:"remark",label:"\u5907\u6CE8"})]})})},ke=Se,Re=[y.C9,y.x_,y.dy,y.QT,y.sE,y.VP,y.eJ,{title:"\u64CD\u4F5C",valueType:"option",render:function(t,r){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J,{record:r}),(0,a.jsx)(he,{postId:r.postId})]})}}],Pe=function(){var t=(0,de.useState)({}),r=V()(t,2),s=r[0],n=r[1],S=(0,de.useRef)(),N=z();return(0,a.jsxs)(D._zJ,{children:[(0,a.jsx)(D.QVr,{formRef:S,actionRef:N,rowKey:"postId",request:v()(o()().mark(function f(){var k,b=arguments;return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return k=A.h$.apply(void 0,b),n(k),w.next=4,ve(k);case 4:return w.abrupt("return",w.sent);case 5:case"end":return w.stop()}},f)})),columns:Re,toolbar:{actions:[(0,a.jsx)(te,{},"ButtonAdd")]},rowSelection:{alwaysShowAlert:!0},tableAlertOptionRender:function(k){var b=k.selectedRowKeys,K=b.length===0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(he,{disabled:K,isBatch:!0,postId:b.join(",")}),(0,a.jsx)(Ce,{searchParams:s})]})}}),(0,a.jsx)(ke,{})]})},Ae=Pe}}]);
