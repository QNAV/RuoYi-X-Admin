"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[650],{30041:function(oe,B,e){var A=e(84045),t=e(40107),D=e(11527),P=e(50959),a=e(83596),s=["fieldProps","min","proFieldProps","max"],h=function(y,j){var v=y.fieldProps,_=y.min,n=y.proFieldProps,m=y.max,p=(0,t.Z)(y,s);return(0,D.jsx)(a.Z,(0,A.Z)({valueType:"digit",fieldProps:(0,A.Z)({min:_,max:m},v),ref:j,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:n},p))};B.Z=P.forwardRef(h)},2090:function(oe,B,e){var A=e(83422),t=e(45554),D=e(84045),P=e(40107),a=e(11527),s=e(62630),h=e(50959),T=e(93439),y=e(83596),j=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],v=h.forwardRef(function(p,R){var W=p.fieldProps,ee=p.options,U=p.radioType,ue=p.layout,K=p.proFieldProps,l=p.valueEnum,c=(0,P.Z)(p,j);return(0,a.jsx)(y.Z,(0,D.Z)((0,D.Z)({valueType:U==="button"?"radioButton":"radio",ref:R,valueEnum:(0,s.h)(l,void 0)},c),{},{fieldProps:(0,D.Z)({options:ee,layout:ue},W),proFieldProps:K,filedConfig:{customLightMode:!0}}))}),_=h.forwardRef(function(p,R){var W=p.fieldProps,ee=p.children;return(0,a.jsx)(t.ZP,(0,D.Z)((0,D.Z)({},W),{},{ref:R,children:ee}))}),n=(0,T.G)(_,{valuePropName:"checked",ignoreWidth:!0}),m=n;m.Group=v,m.Button=t.ZP.Button,m.displayName="ProFormComponent",B.Z=m},64539:function(oe,B,e){var A=e(84045),t=e(40107),D=e(11527),P=e(83596),a=["fieldProps","proFieldProps"],s=["fieldProps","proFieldProps"],h="text",T=function(_){var n=_.fieldProps,m=_.proFieldProps,p=(0,t.Z)(_,a);return(0,D.jsx)(P.Z,(0,A.Z)({valueType:h,fieldProps:n,filedConfig:{valueType:h},proFieldProps:m},p))},y=function(_){var n=_.fieldProps,m=_.proFieldProps,p=(0,t.Z)(_,s);return(0,D.jsx)(P.Z,(0,A.Z)({valueType:"password",fieldProps:n,proFieldProps:m,filedConfig:{valueType:h}},p))},j=T;j.Password=y,j.displayName="ProFormComponent",B.Z=j},30942:function(oe,B,e){var A=e(84045),t=e(40107),D=e(11527),P=e(50959),a=e(83596),s=["fieldProps","proFieldProps"],h=function(y,j){var v=y.fieldProps,_=y.proFieldProps,n=(0,t.Z)(y,s);return(0,D.jsx)(a.Z,(0,A.Z)({ref:j,valueType:"textarea",fieldProps:v,proFieldProps:_},n))};B.Z=P.forwardRef(h)},80226:function(oe,B,e){e.r(B),e.d(B,{default:function(){return en}});var A=e(35290),t=e.n(A),D=e(411),P=e.n(D),a=e(85880),s=e(58075),h=e(17218),T=e(38562),y=e(20436),j=e(6394),v=e(84045),_=e(40107),n=e(11527),m=e(50959),p=e(83596),R=["fieldProps","request","params","proFieldProps"],W=function(r,M){var o=r.fieldProps,C=r.request,F=r.params,f=r.proFieldProps,x=(0,_.Z)(r,R);return(0,n.jsx)(p.Z,(0,v.Z)({valueType:"cascader",fieldProps:o,ref:M,request:C,params:F,filedConfig:{customLightMode:!0},proFieldProps:f},x))},ee=m.forwardRef(W),U=e(2090),ue=e(3720),K=e(58620),l=e(64539),c=e(30041),g=e(30942),Y=e(3650),u=e(25081),se=e(61857),_e=e(74444),ce=function(r,M){var o=[0];if(M===0)return o;var C=function F(f){var x;!(r!=null&&r[f])||(r!=null&&(x=r[f])!==null&&x!==void 0&&x.parentId&&F(r[f].parentId.toString()),r[f].menuType!==a.og.F&&o.push(Number(f)))};return C(M.toString()),o},$=function(){var r,M=(0,T.md)(),o=(0,m.useRef)(),C=(0,s.ms)(),F=(0,s.xK)(),f=(0,s.Wd)(),x=(0,s.YG)(),S=(0,s.ns)(),E=S.data,q=S.refetch,G=(0,Y.useMutation)(P()(t()().mark(function I(){var d,L,V;return t()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,(d=o.current)===null||d===void 0||(L=d.validateFieldsReturnFormatValue)===null||L===void 0?void 0:L.call(d);case 2:if(V=b.sent,V){b.next=5;break}return b.abrupt("return");case 5:return b.next=7,(0,h.FV)(V);case 7:case"end":return b.stop()}},I)})),{onSuccess:function(){var d;q(),F(),o==null||(d=o.current)===null||d===void 0||d.resetFields(),u.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),O=G.isLoading,z=G.mutate;return(0,m.useEffect)(function(){var I;if(o!=null&&(I=o.current)!==null&&I!==void 0&&I.setFieldsValue&&E!==null&&E!==void 0&&E.map){var d;o==null||(d=o.current)===null||d===void 0||d.setFieldsValue({parentId:ce(E.map,x)})}},[x,E==null?void 0:E.map,o==null?void 0:o.current]),(0,n.jsxs)(T.Nv,{accessible:M.canAddSysMenu,children:[(0,n.jsx)(se.Z,{type:"primary",onClick:function(){return C(!0)},icon:(0,n.jsx)(y.Z,{}),children:"\u65B0\u5EFA"}),(0,n.jsx)(_e.Z,{visible:f,onCancel:F,title:"\u65B0\u5EFA\u83DC\u5355",width:515,okText:"\u63D0\u4EA4",onOk:function(){return z()},okButtonProps:{loading:O},children:(0,n.jsxs)(j.A,{submitter:!1,formRef:o,children:[(0,n.jsx)(ee,{name:"parentId",label:"\u7236\u7EA7\u83DC\u5355",initialValue:ce((r=E==null?void 0:E.map)!==null&&r!==void 0?r:{},x),fieldProps:{options:E==null?void 0:E.options,fieldNames:{label:"menuName",value:"menuId",children:"children"},changeOnSelect:!0},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355"}],transform:function(d){return{parentId:d[d.length-1]}}}),(0,n.jsx)(U.Z.Group,{name:"menuType",label:"\u83DC\u5355\u7C7B\u578B",valueEnum:a.QZ,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u83DC\u5355\u7C7B\u578B"}]}),(0,n.jsx)(ue.Z,{name:["menuType"],children:function(d){var L=d.menuType;return L?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(K.UW,{children:[(0,n.jsx)(l.Z,{name:"menuName",label:"\u83DC\u5355\u540D\u79F0",width:"sm",rules:[{required:!0}]}),(0,n.jsx)(c.Z,{name:"orderNum",label:"\u663E\u793A\u6392\u5E8F",tooltip:"\u9ED8\u8BA4\u6570\u503C\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u6392\u5E8F\u8D8A\u9760\u540E\uFF0C\u6570\u503C\u76F8\u7B49\u6309\u7167\u521B\u5EFA\u65F6\u95F4\u5148\u540E\u6392\u5E8F",rules:[{required:!0}],width:"sm",initialValue:0})]}),L!==a.og.F&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(K.UW,{children:[(0,n.jsx)(U.Z.Group,{tooltip:"\u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE",name:"status",label:"\u83DC\u5355\u72B6\u6001",valueEnum:a.al,required:!0,initialValue:a.vu.ENABLE}),(0,n.jsx)(U.Z.Group,{name:"visible",label:"\u83DC\u5355\u662F\u5426\u663E\u793A",valueEnum:a.gc,required:!0,initialValue:a.Ve.YES,tooltip:"\u9009\u62E9\u5426\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE"}),(0,n.jsx)(U.Z.Group,{name:"isFrame",label:"\u662F\u5426\u5916\u94FE",valueEnum:a.gc,required:!0,initialValue:a.Ve.NO,tooltip:"\u9009\u62E9\u662F\u5916\u94FE\u5219\u8DEF\u7531\u5730\u5740\u9700\u8981\u4EE5`http(s)://`\u5F00\u5934"})]}),(0,n.jsxs)(K.UW,{children:[(0,n.jsx)(l.Z,{name:"icon",label:"\u83DC\u5355\u56FE\u6807",width:"sm",tooltip:"https://ant.design/components/icon-cn/"}),(0,n.jsx)(l.Z,{width:"sm",name:"path",label:"\u8DEF\u7531\u5730\u5740",tooltip:"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934",rules:[{required:!0}]})]})]}),L===a.og.C&&(0,n.jsx)(l.Z,{name:"queryParam",label:"\u8DEF\u7531\u53C2\u6570",tooltip:'\u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A{"id": 1, "name": "ry"}'}),L!==a.og.M&&(0,n.jsx)(l.Z,{name:"perms",label:"\u6743\u9650\u6807\u8BC6"})]}):null}}),(0,n.jsx)(g.Z,{name:"remark",label:"\u5907\u6CE8"})]})})]})},ne=$,te=e(71224),Q=function(){var r=(0,T.md)(),M=(0,s.YG)(),o=(0,s.XL)(),C=o.mutate,F=o.isLoading;return(0,n.jsx)(T.Nv,{accessible:r.canRemoveSysMenu,children:(0,n.jsx)(se.Z,{icon:(0,n.jsx)(te.Z,{}),loading:F,disabled:M===0,danger:!0,onClick:function(){return C(M)},children:"\u5220\u9664"})})},w=Q,H=e(93275),N=e.n(H),J=e(14267),X=e(72137),Pe=e(10979),fe=e(96022),Ee=e(95331),k={xs:1,sm:1,md:1,lg:1,xl:2},je=function(r){return(0,m.useMemo)(function(){var M=[];return r?(r!==a.og.F&&M.push({title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:a.al},{title:"\u662F\u5426\u663E\u793A",dataIndex:"visible",key:"visible",valueType:"radio",valueEnum:a.gc,tooltip:"\u9009\u62E9\u5426\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE"},{title:"\u662F\u5426\u5916\u94FE",dataIndex:"isFrame",key:"isFrame",valueType:"radio",valueEnum:a.gc,tooltip:"\u9009\u62E9\u662F\u5916\u94FE\u5219\u8DEF\u7531\u5730\u5740\u9700\u8981\u4EE5`http(s)://`\u5F00\u5934"},{title:"\u56FE\u6807",dataIndex:"icon",key:"icon",valueType:"text",tooltip:"https://ant.design/components/icon-cn/"},{title:"\u8DEF\u7531\u5730\u5740",dataIndex:"path",key:"path",valueType:"text",tooltip:"\u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934"},{title:"\u8DEF\u7531\u53C2\u6570",dataIndex:"queryParam",key:"queryParam",valueType:"code",tooltip:'\u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A{"id": 1, "name": "ry"}'}),r!==a.og.M&&M.push({title:"\u6743\u9650\u6807\u8BC6",dataIndex:"perms",key:"perms",valueType:"text",copyable:!0}),M):[]},[r])},Re=function(){var r=(0,T.md)(),M=(0,s.ns)(),o=M.refetch,C=(0,s.YG)(),F=(0,Pe.Z)(P()(t()().mark(function z(){return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,h.WJ)({menuId:C});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},z)})),{ready:C>0,refreshDeps:[C]}),f=F.data,x=F.loading,S=F.refresh,E=(0,Y.useMutation)(h.Yh,{onSuccess:function(){S(),o(),u.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),q=E.mutateAsync,G=je(f==null?void 0:f.menuType),O=r.canEditSysMenu?{onSave:function(){var z=P()(t()().mark(function d(L,V){var le,b,me,Z;return t()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return le=V.menuType,b=V.orderNum,me=V.menuName,Z=V.menuId,ie.next=3,q(N()({menuId:Z,menuType:le,orderNum:b,menuName:me},L,V[L]));case 3:case"end":return ie.stop()}},d)}));function I(d,L){return z.apply(this,arguments)}return I}()}:void 0;return C===0?(0,n.jsx)(J._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u83DC\u5355\u9879\u67E5\u770B\u8BE6\u60C5"}):(0,n.jsxs)(fe.Z,{spinning:x,children:[(0,n.jsx)(X.vY,{columns:[{title:"\u7C7B\u578B",dataIndex:"menuType",key:"menuType",valueType:"select",valueEnum:a.QZ,editable:!1},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1}],dataSource:f,column:k}),(0,n.jsx)(Ee.Z,{}),(0,n.jsx)(X.vY,{columns:[{title:"\u540D\u79F0",dataIndex:"menuName",key:"menuName",valueType:"text"},{title:"\u663E\u793A\u987A\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit",tooltip:"\u9ED8\u8BA4\u6570\u503C\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u6392\u5E8F\u8D8A\u9760\u540E\uFF0C\u6570\u503C\u76F8\u7B49\u6309\u7167\u521B\u5EFA\u65F6\u95F4\u5148\u540E\u6392\u5E8F"},{title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0}],dataSource:f,editable:O,column:k}),(0,n.jsx)(Ee.Z,{}),(0,n.jsx)(X.vY,{columns:G,dataSource:f,editable:O,column:k})]})},Se=Re,Oe=e(46686),pe=e.n(Oe),Ie=e(42020),Ze=e(8790),Be=e(98408),Ae=e(56524),De=e(62630),Fe=e(70793),Ue=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Le=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],be=m.forwardRef(function(i,r){var M=i.fieldProps,o=i.children,C=i.params,F=i.proFieldProps,f=i.mode,x=i.valueEnum,S=i.request,E=i.showSearch,q=i.options,G=(0,_.Z)(i,Ue),O=(0,m.useContext)(Fe.Z);return(0,n.jsx)(p.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,De.h)(x),request:S,params:C,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({options:q,mode:f,showSearch:E,getPopupContainer:O.getPopupContainer},M),ref:r,proFieldProps:F},G),{},{children:o}))}),We=m.forwardRef(function(i,r){var M=i.fieldProps,o=i.children,C=i.params,F=i.proFieldProps,f=i.mode,x=i.valueEnum,S=i.request,E=i.options,q=(0,_.Z)(i,Le),G=(0,v.Z)({options:E,mode:f||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},M),O=(0,m.useContext)(Fe.Z);return(0,n.jsx)(p.Z,(0,v.Z)((0,v.Z)({valueEnum:(0,De.h)(x),request:S,params:C,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,v.Z)({getPopupContainer:O.getPopupContainer},G),ref:r,proFieldProps:F},q),{},{children:o}))}),Ke=be,Ye=We,he=Ke;he.SearchSelect=Ye,he.displayName="ProFormComponent";var Ne=he,re=e(17324),xe=e(814),Xe=e(20837),Ge=e(35007),Ve=e(8346),Te=e(93591),$e=e(86322),Qe=e.n($e),ve={M:"blue",C:"green",F:"red"},we=function(r){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(re.Z,{color:"rgb(148 163 184)",children:r.orderNum}),(r==null?void 0:r.icon)&&(0,n.jsx)(J.z_,{name:r.icon,className:"mr-1"}),(0,n.jsx)(re.Z,{color:ve[r.menuType],style:{margin:"0 0 2px 0"},children:r.menuName}),(r==null?void 0:r.perms)&&(0,n.jsx)(re.Z,{style:{margin:"0 0 2px 2px"},children:(0,n.jsxs)(xe.Z,{size:"small",children:[r.perms,(0,n.jsx)(Ie.Z,{style:{color:"#1890ff"},onClick:function(o){Qe()(r.perms),u.ZP.success("\u590D\u5236\u6210\u529F"),o.stopPropagation()}})]})})]})},He=function(){return(0,n.jsxs)("div",{className:"mb-2",children:["\u6807\u7B7E\u542B\u4E49\uFF1A",(0,n.jsx)(re.Z,{color:"rgb(148 163 184)",children:"\u663E\u793A\u987A\u5E8F"}),(0,n.jsx)(re.Z,{color:ve[a.og.M],children:"\u76EE\u5F55"}),(0,n.jsx)(re.Z,{color:ve[a.og.C],children:"\u83DC\u5355"}),(0,n.jsx)(re.Z,{color:ve[a.og.F],children:"\u6309\u94AE"}),(0,n.jsx)(re.Z,{children:"\u6743\u9650\u6807\u8BC6"})]})},Je=function(){var r,M=(0,m.useState)({}),o=pe()(M,2),C=o[0],F=o[1],f=(0,m.useState)([]),x=pe()(f,2),S=x[0],E=x[1],q=(0,m.useState)([]),G=pe()(q,2),O=G[0],z=G[1],I=(0,s.bW)(),d=pe()(I,2),L=d[0],V=d[1],le=(0,s.BD)(),b=(0,s.ms)(),me=(0,s.ns)(C),Z=me.data,ge=me.refetch,ie=(0,s.XL)(),nn=ie.mutate,rn=function(de){E(de)},ye=(O==null?void 0:O.length)!==0&&(O==null?void 0:O.length)===(Z==null||(r=Z.parentIds)===null||r===void 0?void 0:r.length);return(0,m.useEffect)(function(){ge()},[C]),(0,m.useEffect)(function(){S!=null&&S[0]?V(S[0]):le()},[S]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(He,{}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(se.Z,{size:"small",className:"my-2",icon:ye?(0,n.jsx)(Ze.Z,{}):(0,n.jsx)(Be.Z,{}),onClick:function(){return z(ye?[]:Z==null?void 0:Z.parentIds)},children:ye?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),(0,n.jsxs)(Ae.M,{onFinish:function(){var ae=P()(t()().mark(function de(un){return t()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:E([]),z([]),F(un);case 3:case"end":return Ce.stop()}},de)}));return function(de){return ae.apply(this,arguments)}}(),children:[(0,n.jsx)(l.Z,{name:"menuName",label:"\u83DC\u5355\u540D\u79F0"}),(0,n.jsx)(Ne,{name:"status",label:"\u72B6\u6001",valueEnum:a.al})]})]}),(0,n.jsx)(Xe.Z,{overlay:(0,n.jsx)(Ge.Z,{items:[{label:"\u65B0\u5EFA",key:"create",onClick:function(){return b(!0)}},{label:"\u5728\u6839\u76EE\u5F55\u4E0B\u65B0\u5EFA",key:"create",onClick:function(){le(),b(!0)}},{label:"\u5220\u9664",key:"delete",danger:!0,disabled:S.length===0,onClick:function(){return nn(L)}}]}),trigger:["contextMenu"],children:(0,n.jsx)("div",{className:"max-h-[60vh] overflow-auto",children:Z!=null&&Z.treeData.length?(0,n.jsx)(Ve.Z,{blockNode:!0,selectedKeys:S,onSelect:rn,expandedKeys:O,titleRender:we,onExpand:z,showLine:{showLeafIcon:!1},fieldNames:{title:"menuName",key:"menuId",children:"children"},treeData:Z==null?void 0:Z.treeData,onRightClick:function(de){return E([de.node.key])}}):(0,n.jsx)(Te.Z,{image:Te.Z.PRESENTED_IMAGE_SIMPLE})})})]})},ze=Je,ke=e(47652),Me=e(24466),qe=function(){return(0,n.jsx)(ke.ZP,{children:(0,n.jsxs)(Me.Z,{ghost:!0,gutter:24,children:[(0,n.jsx)(Me.Z,{title:"\u83DC\u5355\u5217\u8868",colSpan:"550px",extra:(0,n.jsxs)(xe.Z,{children:[(0,n.jsx)(ne,{}),(0,n.jsx)(w,{})]}),children:(0,n.jsx)(ze,{})}),(0,n.jsx)(Me.Z,{title:"\u83DC\u5355\u8BE6\u60C5",children:(0,n.jsx)(Se,{})})]})})},en=qe},58075:function(oe,B,e){e.d(B,{BD:function(){return ue},Wd:function(){return u},XL:function(){return ce},YG:function(){return l},bW:function(){return K},ms:function(){return Y},ns:function(){return _e},xK:function(){return g}});var A=e(35290),t=e.n(A),D=e(93275),P=e.n(D),a=e(30279),s=e.n(a),h=e(411),T=e.n(h),y=e(85880),j=e(17218),v=e(12824),_=e(3650),n=e.n(_),m=e(74444),p=e(25081),R=e(98205),W="systemMenu",ee=function(ne){var te=function Q(w){return w.filter(function(H){return H.menuType!==y.og.F}).map(function(H){var N=H.menuId,J=H.menuName,X=H.children;return{menuId:N,menuName:J,children:X?Q(X):[]}})};return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:ne?te(ne):[]}]},U=(0,R.cn)({key:"".concat(W,"SelectedMenuId"),default:0}),ue=function(){return(0,R.rb)(U)},K=function(){return(0,R.FV)(U)},l=function(){return(0,R.sJ)(U)},c=(0,R.cn)({key:"".concat(W,"VisibleCreateModal"),default:!1}),g=function(){return(0,R.rb)(c)},Y=function(){return(0,R.Zl)(c)},u=function(){return(0,R.sJ)(c)},se=[W,"list"],_e=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,_.useQuery)(se,T()(t()().mark(function te(){var Q,w;return t()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,j.CP)(ne);case 2:return Q=N.sent,w=(0,v.tw)(Q,{id:"menuId",pId:"parentId",rootPId:null}),N.abrupt("return",{options:ee((0,v.dH)(w)),treeData:(0,v.dH)(w),map:Q.reduce(function(J,X){return s()(s()({},J),{},P()({},X.menuId,X))},{}),parentIds:(0,v.Vy)(Q)});case 5:case"end":return N.stop()}},te)})))},ce=function(){var ne=(0,_.useQueryClient)(),te=ue();return(0,_.useMutation)(function(){var Q=T()(t()().mark(function w(H){return t()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:m.Z.confirm({title:"\u5220\u9664\u83DC\u5355",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u83DC\u5355\u5417\uFF1F",onOk:function(){var X=T()(t()().mark(function fe(){return t()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,j.tg)({menuId:H});case 2:return k.next=4,ne.invalidateQueries(se);case 4:te(),p.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return k.stop()}},fe)}));function Pe(){return X.apply(this,arguments)}return Pe}()});case 1:case"end":return J.stop()}},w)}));return function(w){return Q.apply(this,arguments)}}())}},17218:function(oe,B,e){e.d(B,{CP:function(){return m},FV:function(){return T},WJ:function(){return _},Yh:function(){return j},tg:function(){return R}});var A=e(35290),t=e.n(A),D=e(30279),P=e.n(D),a=e(411),s=e.n(a),h=e(12824);function T(l,c){return y.apply(this,arguments)}function y(){return y=s()(t()().mark(function l(c,g){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.WY)("/system/menu/add",P()({method:"POST",headers:{"Content-Type":"application/json"},data:c},g||{})));case 1:case"end":return u.stop()}},l)})),y.apply(this,arguments)}function j(l,c){return v.apply(this,arguments)}function v(){return v=s()(t()().mark(function l(c,g){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.WY)("/system/menu/edit",P()({method:"POST",headers:{"Content-Type":"application/json"},data:c},g||{})));case 1:case"end":return u.stop()}},l)})),v.apply(this,arguments)}function _(l,c){return n.apply(this,arguments)}function n(){return n=s()(t()().mark(function l(c,g){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.WY)("/system/menu/info",P()({method:"GET",params:P()({},c)},g||{})));case 1:case"end":return u.stop()}},l)})),n.apply(this,arguments)}function m(l,c){return p.apply(this,arguments)}function p(){return p=s()(t()().mark(function l(c,g){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.WY)("/system/menu/list",P()({method:"POST",headers:{"Content-Type":"application/json"},data:c},g||{})));case 1:case"end":return u.stop()}},l)})),p.apply(this,arguments)}function R(l,c){return W.apply(this,arguments)}function W(){return W=s()(t()().mark(function l(c,g){return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,h.WY)("/system/menu/remove",P()({method:"POST",params:P()({},c)},g||{})));case 1:case"end":return u.stop()}},l)})),W.apply(this,arguments)}function ee(l,c){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,g){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/system/menu/roleMenuTreeSelect",_objectSpread({method:"GET",params:_objectSpread({},c)},g||{})));case 1:case"end":return u.stop()}},l)})),U.apply(this,arguments)}function ue(l,c){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime().mark(function l(c,g){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},g||{})));case 1:case"end":return u.stop()}},l)})),K.apply(this,arguments)}}}]);
