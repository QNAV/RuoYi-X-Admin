"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[925],{70477:function(Pe,$,t){t.d($,{gp:function(){return Y},jk:function(){return C},mJ:function(){return f},nj:function(){return m}});var f={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},Y={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},C={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},m={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"}},20747:function(Pe,$,t){t.d($,{ew:function(){return Q},Jx:function(){return ae},iT:function(){return ve},Zi:function(){return ce},Bw:function(){return L},eJ:function(){return C},fk:function(){return j},nj:function(){return A.nj},sE:function(){return oe},WW:function(){return w},sy:function(){return Ee},E$:function(){return _},_M:function(){return q},tC:function(){return Y},wX:function(){return z},oh:function(){return U},Uc:function(){return X},x:function(){return G},Mw:function(){return fe},p_:function(){return S},$V:function(){return pe},gp:function(){return A.gp},Qo:function(){return Se},y4:function(){return c},$9:function(){return F},jk:function(){return A.jk},Jy:function(){return B},VP:function(){return ne},g4:function(){return n},Fu:function(){return o},Rj:function(){return re},tE:function(){return i},iO:function(){return J},q2:function(){return H},jR:function(){return Z},BP:function(){return Ce},au:function(){return m}});var f=t(31194),Y={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},C={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},m={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},oe={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:f.al},j={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(v){return{beginCreateTime:v[0],endCreateTime:v[1]}}}},ne={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},c={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},A=t(70477),Z={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},H={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},ae={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},w={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},ce={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},ve={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},L={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},pe={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:f.gh,width:90},S={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},U={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:f.gc},z={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:f.gc},X={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:f.gc},G={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:f.gc},fe={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:f.gc},B={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:f.CX,width:70},Ce={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:f.V},F={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},Se={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},Q={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},Ee={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},q={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:f.LZ},_={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},J={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},re={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},n={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},o={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},i={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},89163:function(Pe,$,t){t.r($),t.d($,{default:function(){return xe}});var f=t(93275),Y=t.n(f),C=t(35290),m=t.n(C),oe=t(30279),j=t.n(oe),ne=t(44463),c=t.n(ne),A=t(411),Z=t.n(A),H=t(94434),ae=t.n(H),w=t(20747),ce=t(70477),ve=t(36937),L=t(45402);function pe(l,a){return S.apply(this,arguments)}function S(){return S=_asyncToGenerator(_regeneratorRuntime().mark(function l(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/dept/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return e.stop()}},l)})),S.apply(this,arguments)}function U(l,a){return z.apply(this,arguments)}function z(){return z=Z()(m()().mark(function l(a,s){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.WY)("/system/dept/edit",j()({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return e.stop()}},l)})),z.apply(this,arguments)}function X(l,a){return G.apply(this,arguments)}function G(){return G=Z()(m()().mark(function l(a,s){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.WY)("/system/dept/info",j()({method:"GET",params:j()({},a)},s||{})));case 1:case"end":return e.stop()}},l)})),G.apply(this,arguments)}function fe(l,a){return B.apply(this,arguments)}function B(){return B=Z()(m()().mark(function l(a,s){return m()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.WY)("/system/dept/list",j()({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return e.stop()}},l)})),B.apply(this,arguments)}function Ce(l,a){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function l(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/dept/list/exclude",_objectSpread({method:"GET",params:_objectSpread({},a)},s||{})));case 1:case"end":return e.stop()}},l)})),F.apply(this,arguments)}function Se(l,a){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function l(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/dept/remove",_objectSpread({method:"POST",params:_objectSpread({},a)},s||{})));case 1:case"end":return e.stop()}},l)})),Q.apply(this,arguments)}function Ee(l,a){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function l(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/dept/roleDeptTreeSelect",_objectSpread({method:"GET",params:_objectSpread({},a)},s||{})));case 1:case"end":return e.stop()}},l)})),q.apply(this,arguments)}function _(l,a){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function l(a,s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/dept/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return e.stop()}},l)})),J.apply(this,arguments)}var re=t(3650),n=t(98205),o="systemDept",i=(0,n.cn)({key:"".concat(o,"AtomSelectedDeptId"),default:0}),u=function(){return(0,n.sJ)(i)},v=function(){return(0,n.Zl)(i)},h=function(){return(0,n.rb)(i)},r=[o,"list"],D=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,re.useQuery)(r,Z()(m()().mark(function s(){var d,e;return m()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,fe(a);case 2:return d=g.sent,e=(0,L.tw)(d,{id:"deptId",pId:"parentId",rootPId:null}),g.abrupt("return",{list:d,treeData:e});case 5:case"end":return g.stop()}},s)})),{})},x=t(15328),b=t(70675),N=t(84337),ye=t(70264),ee=t(96022),ue=t(95331),p=t(11527),le=["ancestors"],k=function(a,s){var d=new Map(a.map(function(g){return[g.deptId,g]})),e=[],E=function g(T){var R,y=(R=d.get(T))===null||R===void 0?void 0:R.parentId;y&&(e.push(y),g(y))};return E(s),[0].concat(ae()(e.reverse())).join(",")},P=function(){var a,s=(0,x.md)(),d=(0,re.useQueryClient)(),e=D(),E=e.data,g=(a=E==null?void 0:E.treeData)!==null&&a!==void 0?a:[],T=u(),R=(0,N.Z)(Z()(m()().mark(function Te(){var I,de,O,De,M;return m()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,X({deptId:T});case 2:return de=te.sent,O=de.ancestors,De=c()(de,le),M=(I=O==null?void 0:O.split(","))!==null&&I!==void 0?I:[],te.abrupt("return",j()(j()({},De),{},{ancestors:Number(M[M.length-1])}));case 7:case"end":return te.stop()}},Te)})),{ready:T>0,refreshDeps:[T]}),y=R.data,V=R.loading,W=R.refreshAsync,ge=s!=null&&s.canEditSysDept?{onSave:function(){var Te=Z()(m()().mark(function de(O,De){var M,Ne;return m()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return M=De[O],O==="ancestors"&&(M=k((Ne=E==null?void 0:E.list)!==null&&Ne!==void 0?Ne:[],M)),Ie.next=4,U(Y()({deptId:y.deptId,deptName:y.deptName,orderNum:y.orderNum,parentId:y.parentId},O,M));case 4:return Ie.next=6,Promise.all([d.invalidateQueries(r),W()]);case 6:ye.ZP.success("\u4FDD\u5B58\u6210\u529F");case 7:case"end":return Ie.stop()}},de)}));function I(de,O){return Te.apply(this,arguments)}return I}()}:void 0;return T===0?(0,p.jsx)(ve._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u90E8\u95E8\u9879\u67E5\u770B\u8BE6\u60C5"}):(0,p.jsxs)(ee.Z,{spinning:V,children:[(0,p.jsx)(b.vY,{editable:ge,dataSource:y,columns:[w.sE,w.y4]}),(0,p.jsx)(ue.Z,{}),(0,p.jsx)(b.vY,{editable:ge,dataSource:y,columns:[ce.mJ,{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"ancestors",key:"ancestors",valueType:"treeSelect",fieldProps:{span:2,options:g,dropdownMatchSelectWidth:300,fieldNames:{label:"deptName",value:"deptId",children:"children"}}}]}),(0,p.jsx)(ue.Z,{}),(0,p.jsx)(b.vY,{editable:ge,dataSource:y,columns:[w.gp,w.jk,w.nj]})]})},se=P,me=t(12416),K=t(44786),ie=function(a){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(me.Z,{color:"rgb(148 163 184)",children:a.orderNum}),a.deptName]})},je=function(){var a,s=D(),d=s.data,e=s.isFetching,E=v(),g=h();return d!=null&&d.treeData?(0,p.jsx)(ee.Z,{spinning:e,children:(0,p.jsx)(K.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},titleRender:ie,treeData:(a=d==null?void 0:d.treeData)!==null&&a!==void 0?a:[],fieldNames:{title:"deptName",key:"deptId",children:"children"},onSelect:function(R,y){var V=y.selected,W=y.node.key;if(V){E(W);return}g()}})}):null},Ke=je,Re=t(92112),he=t(75521),Ze=function(){return(0,p.jsx)(Re.ZP,{children:(0,p.jsxs)(he.Z,{ghost:!0,gutter:24,children:[(0,p.jsx)(he.Z,{title:"\u90E8\u95E8\u5217\u8868",colSpan:"400px",children:(0,p.jsx)(Ke,{})}),(0,p.jsx)(he.Z,{title:"\u90E8\u95E8\u8BE6\u60C5",children:(0,p.jsx)(se,{})})]})})},xe=Ze},44786:function(Pe,$,t){t.d($,{Z:function(){return re}});var f=t(82269),Y=t(31307),C=t(62081),m=t(60864),oe=t(19803),j=t.n(oe),ne=t(88038),c=t(50959),A=t(51283),Z=t(4187),H=t(86298),ae=t(38619),w=t(98495),ce=t(7090),ve=t(36455),L=t(36198),pe=t(38804),S;(function(n){n[n.None=0]="None",n[n.Start=1]="Start",n[n.End=2]="End"})(S||(S={}));function U(n,o){function i(u){var v=u.key,h=u.children;o(v,u)!==!1&&U(h||[],o)}n.forEach(i)}function z(n){var o=n.treeData,i=n.expandedKeys,u=n.startKey,v=n.endKey,h=[],r=S.None;if(u&&u===v)return[u];if(!u||!v)return[];function D(x){return x===u||x===v}return U(o,function(x){if(r===S.End)return!1;if(D(x)){if(h.push(x),r===S.None)r=S.Start;else if(r===S.Start)return r=S.End,!1}else r===S.Start&&h.push(x);return i.indexOf(x)!==-1}),h}function X(n,o){var i=(0,H.Z)(o),u=[];return U(n,function(v,h){var r=i.indexOf(v);return r!==-1&&(u.push(h),i.splice(r,1)),!!i.length}),u}var G=function(n,o){var i={};for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&o.indexOf(u)<0&&(i[u]=n[u]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var v=0,u=Object.getOwnPropertySymbols(n);v<u.length;v++)o.indexOf(u[v])<0&&Object.prototype.propertyIsEnumerable.call(n,u[v])&&(i[u[v]]=n[u[v]]);return i};function fe(n){var o=n.isLeaf,i=n.expanded;return o?c.createElement(w.Z,null):i?c.createElement(ce.Z,null):c.createElement(ve.Z,null)}function B(n){var o=n.treeData,i=n.children;return o||(0,pe.zn)(i)}var Ce=function(o,i){var u=o.defaultExpandAll,v=o.defaultExpandParent,h=o.defaultExpandedKeys,r=G(o,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),D=c.useRef(),x=c.useRef(),b=c.createRef();c.useImperativeHandle(i,function(){return b.current});var N=function(){var s=(0,pe.I8)(B(r)),d=s.keyEntities,e;return u?e=Object.keys(d):v?e=(0,L.r7)(r.expandedKeys||h||[],d):e=r.expandedKeys||h,e},ye=c.useState(r.selectedKeys||r.defaultSelectedKeys||[]),ee=(0,ae.Z)(ye,2),ue=ee[0],p=ee[1],le=c.useState(N()),k=(0,ae.Z)(le,2),P=k[0],se=k[1];c.useEffect(function(){"selectedKeys"in r&&p(r.selectedKeys)},[r.selectedKeys]),c.useEffect(function(){"expandedKeys"in r&&se(r.expandedKeys)},[r.expandedKeys]);var me=function(s,d){var e;return"expandedKeys"in r||se(s),(e=r.onExpand)===null||e===void 0?void 0:e.call(r,s,d)},K=function(s,d){var e,E=r.multiple,g=d.node,T=d.nativeEvent,R=g.key,y=R===void 0?"":R,V=B(r),W=(0,C.Z)((0,C.Z)({},d),{selected:!0}),ge=(T==null?void 0:T.ctrlKey)||(T==null?void 0:T.metaKey),Te=T==null?void 0:T.shiftKey,I;E&&ge?(I=s,D.current=y,x.current=I,W.selectedNodes=X(V,I)):E&&Te?(I=Array.from(new Set([].concat((0,H.Z)(x.current||[]),(0,H.Z)(z({treeData:V,expandedKeys:P,startKey:y,endKey:D.current}))))),W.selectedNodes=X(V,I)):(I=[y],D.current=y,x.current=I,W.selectedNodes=X(V,I)),(e=r.onSelect)===null||e===void 0||e.call(r,I,W),"selectedKeys"in r||p(I)},ie=c.useContext(A.E_),je=ie.getPrefixCls,Ke=ie.direction,Re=r.prefixCls,he=r.className,Ze=G(r,["prefixCls","className"]),xe=je("tree",Re),l=j()("".concat(xe,"-directory"),(0,f.Z)({},"".concat(xe,"-directory-rtl"),Ke==="rtl"),he);return c.createElement(J,(0,C.Z)({icon:fe,ref:b,blockNode:!0},Ze,{prefixCls:xe,className:l,expandedKeys:P,selectedKeys:ue,onSelect:K,onExpand:me}))},F=c.forwardRef(Ce);F.defaultProps={showIcon:!0,expandAction:"click"};var Se=F,Q=4;function Ee(n){var o,i=n.dropPosition,u=n.dropLevelOffset,v=n.prefixCls,h=n.indent,r=n.direction,D=r===void 0?"ltr":r,x=D==="ltr"?"left":"right",b=D==="ltr"?"right":"left",N=(o={},(0,f.Z)(o,x,-u*h+Q),(0,f.Z)(o,b,0),o);switch(i){case-1:N.top=-3;break;case 1:N.bottom=-3;break;default:N.bottom=-3,N[x]=h+Q;break}return c.createElement("div",{style:N,className:"".concat(v,"-drop-indicator")})}var q=t(94400),_=c.forwardRef(function(n,o){var i,u=c.useContext(A.E_),v=u.getPrefixCls,h=u.direction,r=u.virtual,D=n.prefixCls,x=n.className,b=n.showIcon,N=n.showLine,ye=n.switcherIcon,ee=n.blockNode,ue=n.children,p=n.checkable,le=n.selectable,k=n.draggable,P=v("tree",D),se=(0,C.Z)((0,C.Z)({},n),{showLine:Boolean(N),dropIndicatorRender:Ee}),me=c.useMemo(function(){if(!k)return!1;var K={};switch((0,Y.Z)(k)){case"function":K.nodeDraggable=k;break;case"object":K=(0,C.Z)({},k);break;default:}return K.icon!==!1&&(K.icon=K.icon||c.createElement(m.Z,null)),K},[k]);return c.createElement(ne.Z,(0,C.Z)({itemHeight:20,ref:o,virtual:r},se,{prefixCls:P,className:j()((i={},(0,f.Z)(i,"".concat(P,"-icon-hide"),!b),(0,f.Z)(i,"".concat(P,"-block-node"),ee),(0,f.Z)(i,"".concat(P,"-unselectable"),!le),(0,f.Z)(i,"".concat(P,"-rtl"),h==="rtl"),i),x),direction:h,checkable:p&&c.createElement("span",{className:"".concat(P,"-checkbox-inner")}),selectable:le,switcherIcon:function(ie){return(0,q.Z)(P,ye,N,ie)},draggable:me}),ue)});_.TreeNode=ne.O,_.DirectoryTree=Se,_.defaultProps={checkable:!1,selectable:!0,showIcon:!1,motion:(0,C.Z)((0,C.Z)({},Z.ZP),{motionAppear:!1}),blockNode:!1};var J=_,re=J}}]);
