"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{99194:function(re,P,e){e.d(P,{gp:function(){return k},jk:function(){return p},l:function(){return f},mJ:function(){return s},nj:function(){return M}});var c=e(50959),s={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},k={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},p={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},M={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"},f=function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,c.useMemo)(function(){return{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentId",key:"parentId",valueType:"treeSelect",fieldProps:{treeData:N,dropdownMatchSelectWidth:250,fieldNames:{value:"id"}}}},[N])}},55819:function(re,P,e){e.d(P,{ew:function(){return oe},Jx:function(){return y},iT:function(){return x},Zi:function(){return d},Bw:function(){return T},eJ:function(){return k},fk:function(){return f},nj:function(){return g.nj},sE:function(){return M},WW:function(){return o},sy:function(){return Ee},E$:function(){return je},_M:function(){return le},tC:function(){return s},wX:function(){return L},oh:function(){return D},Uc:function(){return U},x:function(){return m},Mw:function(){return S},p_:function(){return h},$V:function(){return v},gp:function(){return g.gp},Qo:function(){return pe},xM:function(){return Fe},y4:function(){return N},$9:function(){return l},jk:function(){return g.jk},x_:function(){return A},C9:function(){return Q},dy:function(){return Y},QT:function(){return V},Jy:function(){return C},VP:function(){return E},g4:function(){return ye},Fu:function(){return De},Rj:function(){return _},tE:function(){return Se},iO:function(){return q},q2:function(){return O},jR:function(){return $},BP:function(){return W},au:function(){return p},oo:function(){return Re},HW:function(){return Ae},VG:function(){return ge},D1:function(){return Me},l:function(){return g.l}});var c=e(70819),s={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},k={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},p={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},M={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:c.al},f={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(xe){return{beginCreateTime:xe[0],endCreateTime:xe[1]}}}},E={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},N={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},g=e(99194),$={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},O={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},y={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},o={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},d={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},x={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},T={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},v={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:c.gh,width:90},h={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},D={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:c.gc},L={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:c.gc},U={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:c.gc},m={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:c.gc},S={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:c.gc},C={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:c.CX,width:70},W={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:c.V},l={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},pe={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},oe={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},Ee={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},le={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:c.LZ},je={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},q={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},Q={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},A={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},Y={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},V={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},_={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},ye={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},De={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},Se={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},Ae={dataIndex:"userId",key:"userId",title:"\u7528\u6237\u7F16\u53F7",valueType:"text",editable:!1,hideInSearch:!0},ge={dataIndex:"userName",key:"userName",title:"\u7528\u6237\u540D\u79F0",valueType:"text"},Fe={dataIndex:"nickName",key:"nickName",title:"\u7528\u6237\u6635\u79F0",valueType:"text",hideInSearch:!0},Re={dataIndex:["dept","deptName"],key:"deptDeptName",title:"\u90E8\u95E8\u540D\u79F0",valueType:"text",hideInSearch:!0},Me={dataIndex:"phoneNumber",key:"phoneNumber",title:"\u624B\u673A\u53F7\u7801",valueType:"text"}},4828:function(re,P,e){e.d(P,{Z:function(){return k},n:function(){return x}});var c=e(50959),s=e(98205),k=function(v){var h=(0,c.useRef)(),D=(0,s.Zl)(v);return(0,c.useEffect)(function(){h!=null&&h.current&&D(h.current)},[]),h},p=e(35290),M=e.n(p),f=e(411),E=e.n(f),N=e(94434),g=e.n(N),$=e(46686),O=e.n($),y=e(55024),o=e(32222),d=e.n(o),x=function(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,L=(0,c.useState)([]),U=O()(L,2),m=U[0],S=U[1],C=(0,c.useState)([]),W=O()(C,2),l=W[0],pe=W[1],oe={alwaysShowAlert:D,type:h,selectedRowKeys:m,onChange:function(Q,A){pe(A),S(Q)}},Ee=function(Q){var A=Q[v],Y=[Q],V=[A];if(h==="checkbox")if(V=g()(m),Y=d()(l),V.includes(A)){var _=m.indexOf(A);V.splice(_,1),Y.splice(_,1)}else Y.push(Q),V.push(A);pe(Y),S(V)},le=function(){pe([]),S([])},je=function(){var q=E()(M()().mark(function Q(){var A,Y=arguments;return M()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(A=Y.length>0&&Y[0]!==void 0?Y[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(l==null?void 0:l.length)!==0){_.next=4;break}return y.ZP.warning(A),_.abrupt("return",Promise.reject(A));case 4:return _.abrupt("return",Promise.resolve(l));case 5:case"end":return _.stop()}},Q)}));return function(){return q.apply(this,arguments)}}();return{selectedRows:l,selectedRowKeys:m,rowSelection:oe,onClick:Ee,clearSelection:le,setSelectedRowKeys:S,checkRowSelection:je}}},2322:function(re,P,e){e.r(P),e.d(P,{default:function(){return Et}});var c=e(35290),s=e.n(c),k=e(30279),p=e.n(k),M=e(411),f=e.n(M),E=e(70819),N=e(4828),g=e(98205),$="systemRole",O=(0,g.cn)({key:"".concat($,"AtomRoleListActions"),default:void 0}),y=function(){return(0,g.sJ)(O)},o=function(){return(0,N.Z)(O)},d=(0,g.cn)({key:"".concat($,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),x=function(){return(0,g.rb)(d)},T=function(){return(0,g.Zl)(d)},v=function(){return(0,g.sJ)(d)},h=e(7093);function D(n,r){return L.apply(this,arguments)}function L(){return L=f()(s()().mark(function n(r,a){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/add",p()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),L.apply(this,arguments)}function U(n,r){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),m.apply(this,arguments)}function S(n,r){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),C.apply(this,arguments)}function W(n,r){return l.apply(this,arguments)}function l(){return l=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),l.apply(this,arguments)}function pe(n,r){return oe.apply(this,arguments)}function oe(){return oe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),oe.apply(this,arguments)}function Ee(n,r){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),le.apply(this,arguments)}function je(n,r){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),q.apply(this,arguments)}function Q(n,r){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),A.apply(this,arguments)}function Y(n,r){return V.apply(this,arguments)}function V(){return V=f()(s()().mark(function n(r,a){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/edit",p()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),V.apply(this,arguments)}function _(n,r){return ye.apply(this,arguments)}function ye(){return ye=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),ye.apply(this,arguments)}function De(n,r){return Se.apply(this,arguments)}function Se(){return Se=f()(s()().mark(function n(r,a){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/info",p()({method:"GET",params:p()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),Se.apply(this,arguments)}function Ae(n,r){return ge.apply(this,arguments)}function ge(){return ge=f()(s()().mark(function n(r,a){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/list",p()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),ge.apply(this,arguments)}function Fe(n){return Re.apply(this,arguments)}function Re(){return Re=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return i.stop()}},n)})),Re.apply(this,arguments)}function Me(n,r){return Pe.apply(this,arguments)}function Pe(){return Pe=f()(s()().mark(function n(r,a){return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/remove",p()({method:"POST",params:p()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),Pe.apply(this,arguments)}var xe=e(21954),we=e(29838),He=e(54064),F=e(78409),he=e(4733),Ne=e(55024),ee=e(50959),u=e(11527),qe=function(){var r=(0,we.md)(),a=(0,ee.useRef)(),i=y();return(0,u.jsx)(xe.Access,{accessible:r.canAddSysRole,children:(0,u.jsxs)(F.Yr8,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,u.jsx)(he.Z,{type:"primary",icon:(0,u.jsx)(He.Z,{}),children:"\u65B0\u5EFA"}),formRef:a,onFinish:function(){var t=f()(s()().mark(function K(Z){var w;return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,D(p()(p()({},Z),{},{menuIds:[],menuCheckStrictly:!0}));case 2:return i==null||i.reload(),(w=a.current)===null||w===void 0||w.resetFields(),Ne.ZP.success("\u65B0\u5EFA\u6210\u529F"),B.abrupt("return",!0);case 6:case"end":return B.stop()}},K)}));return function(K){return t.apply(this,arguments)}}(),width:500,children:[(0,u.jsx)(F.VaQ,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,u.jsx)(F.VaQ,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,u.jsx)(F.k_F,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,u.jsx)(F.$Oj.Group,{name:"status",label:"\u72B6\u6001",valueEnum:E.al,initialValue:E.vu.ENABLE}),(0,u.jsx)(F.$JJ,{name:"remark",label:"\u5907\u6CE8"})]})})},et=qe,tt=e(39449),nt=e(88171),Ke=e(52398),rt=function(){var r=(0,we.md)(),a=y(),i=x(),t=v(),K=t.roleId,Z=t.roleName,w=function(){return nt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,u.jsxs)(u.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,u.jsx)(Ke.Z.Text,{code:!0,children:Z}),"\u8FDB\u884C",(0,u.jsx)(Ke.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var B=f()(s()().mark(function z(){var te;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Me({roleIds:K});case 2:a==null||a.reload(),a==null||(te=a.clearSelected)===null||te===void 0||te.call(a),i(),Ne.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return j.stop()}},z)}));function ce(){return B.apply(this,arguments)}return ce}()})};return(0,u.jsx)(we.Nv,{accessible:r.canRemoveSysRole,children:(0,u.jsx)(he.Z,{danger:!0,ghost:!0,icon:(0,u.jsx)(tt.Z,{}),onClick:w,children:"\u5220\u9664"})})},at=rt,ut=e(93275),Ze=e.n(ut),st=e(46686),se=e.n(st),ie=e(55819),Ge=e(13234),ot=e(94434),lt=e.n(ot),it=e(18949),ct=e(71600),dt=e(29993),$e=e(28622),We=e(41202),Ye=e(35082),mt=e(66102),pt=e(84495),ht={title:"label",key:"id",children:"children"},vt=function n(r){var a=[];return r.forEach(function(i){var t=i.id,K=i.children;a.push(t),K&&a.push.apply(a,lt()(n(K)))}),a},ft=function(r){var a,i=r.roleId,t=r.handleEdit,K=(0,ee.useState)([]),Z=se()(K,2),w=Z[0],J=Z[1],B=(0,ee.useState)(!1),ce=se()(B,2),z=ce[0],te=ce[1],ve=(0,ee.useState)([]),j=se()(ve,2),ae=j[0],be=j[1],Oe=(0,ee.useState)([]),Te=se()(Oe,2),Ce=Te[0],H=Te[1],G=(0,ee.useState)(!1),ne=se()(G,2),ue=ne[0],Ie=ne[1],de=(0,ee.useState)(!0),me=se()(de,2),Je=me[0],Le=me[1],Xe=(0,We.Z)(f()(s()().mark(function X(){var R,b,Be;return s()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,it.bi)({roleId:i});case 2:return R=fe.sent,b=R.menus,Be=R.checkedKeys,fe.abrupt("return",{treeData:b,selectedMenuIds:Be,selectedTreeData:(0,h.Cr)(b,Be),allMenuIds:(0,h.x$)(b)});case 6:case"end":return fe.stop()}},X)})),{ready:i>0,refreshDeps:[i],onSuccess:function(R){te(!1),H(R.selectedTreeData)}}),I=Xe.data,jt=Xe.refresh,Qe=(0,$e.D)(f()(s()().mark(function X(){return s()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,t({menuIds:w});case 2:jt();case 3:case"end":return b.stop()}},X)}))),ze=Qe.isLoading,Pt=Qe.mutate,ke=vt((a=I==null?void 0:I.treeData)!==null&&a!==void 0?a:[]),Ue=(ae==null?void 0:ae.length)!==0&&(ae==null?void 0:ae.length)===(ke==null?void 0:ke.length),wt=function(R){if(R||Je){var b;J((b=I==null?void 0:I.allMenuIds)!==null&&b!==void 0?b:[]);return}J([])};return(0,ee.useEffect)(function(){if((I==null?void 0:I.allMenuIds.length)===w.length){Ie(!0),Le(!1);return}if(w.length===0){Ie(!1),Le(!1);return}Le(!0)},[I==null?void 0:I.allMenuIds,w]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,u.jsxs)(Ye.Z,{children:[Ce.length>0&&(0,u.jsx)(he.Z,{size:"small",icon:Ue?(0,u.jsx)(ct.Z,{}):(0,u.jsx)(dt.Z,{}),onClick:function(){return be(Ue?[]:ke)},children:Ue?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),z&&(0,u.jsx)(mt.Z,{indeterminate:Je,onChange:function(R){return wt(R.target.checked)},checked:ue,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),(0,u.jsx)(xe.Access,{accessible:!0,children:z?(0,u.jsxs)(Ye.Z,{children:[(0,u.jsx)(he.Z,{loading:ze,onClick:function(){var R;te(!1),H((R=I==null?void 0:I.selectedTreeData)!==null&&R!==void 0?R:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,u.jsx)(he.Z,{type:"primary",ghost:!0,loading:ze,onClick:function(){return Pt()},children:"\u4FDD\u5B58"})]}):(0,u.jsx)(he.Z,{type:"primary",ghost:!0,onClick:function(){var R,b;te(!0),J((R=I==null?void 0:I.selectedMenuIds)!==null&&R!==void 0?R:[]),H((b=I==null?void 0:I.treeData)!==null&&b!==void 0?b:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,u.jsx)("div",{className:"h-[390px] overflow-y-auto",children:Ce.length>0?(0,u.jsx)(pt.Z,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:z,checkStrictly:!0,fieldNames:ht,checkedKeys:w,treeData:Ce,expandedKeys:ae,onExpand:function(R){return be(R)},onCheck:function(R){J(R.checked)}}):(0,u.jsx)(Ge._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},yt=ft,St=e(43090),gt=e(68707),Ve=e(37117),Rt=function(){var r=(0,ee.useState)([]),a=se()(r,2),i=a[0],t=a[1],K=St.Z.useForm(),Z=se()(K,1),w=Z[0],J=(0,we.md)(),B=y(),ce=v(),z=ce.roleId,te=ce.visible,ve=(0,We.Z)(function(){return De({roleId:z})},{ready:te&&z>0,refreshDeps:[z],onSuccess:function(){t([])}}),j=ve.data,ae=ve.loading,be=ve.refresh,Oe=(0,$e.D)(function(){var H=f()(s()().mark(function G(ne){var ue;return s()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,Y(p()({roleId:z,menuIds:(ue=j==null?void 0:j.menuIds)!==null&&ue!==void 0?ue:[],roleKey:j.roleKey,roleName:j.roleName,roleSort:j.roleSort,status:j.status},ne));case 2:case"end":return de.stop()}},G)}));return function(G){return H.apply(this,arguments)}}(),{onSuccess:function(){be(),B==null||B.reload(),Ne.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),Te=Oe.mutateAsync,Ce=J.canEditSysRole&&j?{form:w,editableKeys:i,onChange:function(G,ne){t(G),G.length===1&&!Array.isArray(ne)&&w.setFieldsValue(Ze()({},G[0],ne[G[0]]))},onSave:function(){var H=f()(s()().mark(function ne(ue,Ie){return s()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,Te(Ze()({},ue,Ie[ue]));case 2:case"end":return me.stop()}},ne)}));function G(ne,ue){return H.apply(this,arguments)}return G}()}:void 0;return te?(0,u.jsxs)(gt.Z,{spinning:ae,children:[(0,u.jsx)(F.vYc,{column:2,columns:[ie.g4,ie.eJ],dataSource:j}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(F.vYc,{column:2,columns:[ie.sE,ie.tE,ie.Rj,ie.VP,ie.Fu],dataSource:j,editable:Ce}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(yt,{roleId:z,handleEdit:function(G){return Te(G)}})]}):(0,u.jsx)(Ge._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},xt=Rt,_e=e(21107),Tt=function(){var r=o(),a=T(),i=(0,N.n)("roleId","radio"),t=i.onClick,K=i.rowSelection,Z=i.selectedRows;return(0,ee.useEffect)(function(){Z.length===1&&a({roleId:Z[0].roleId,roleName:Z[0].roleName,visible:!0})},[Z]),(0,u.jsx)(F.RsR,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(J){return J===E.vu.ENABLE?(0,u.jsx)(_e.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,u.jsx)(_e.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(J){return{onClick:function(){return t(J)}}},rowSelection:K,pagination:{pageSize:10},request:function(){return Ae(h.h$.apply(void 0,arguments))}})},Ct=Tt,It=function(){return(0,u.jsx)(F._zJ,{children:(0,u.jsxs)(F.QWM,{ghost:!0,gutter:24,children:[(0,u.jsx)(F.QWM,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,u.jsx)(et,{}),children:(0,u.jsx)(Ct,{})}),(0,u.jsx)(F.QWM,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,u.jsx)(at,{}),children:(0,u.jsx)(xt,{})})]})})},Et=It},18949:function(re,P,e){e.d(P,{CP:function(){return d},FV:function(){return N},WJ:function(){return y},Yh:function(){return $},bi:function(){return h},tg:function(){return T}});var c=e(35290),s=e.n(c),k=e(30279),p=e.n(k),M=e(411),f=e.n(M),E=e(7093);function N(m,S){return g.apply(this,arguments)}function g(){return g=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/add",p()({method:"POST",headers:{"Content-Type":"application/json"},data:S},C||{})));case 1:case"end":return l.stop()}},m)})),g.apply(this,arguments)}function $(m,S){return O.apply(this,arguments)}function O(){return O=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/edit",p()({method:"POST",headers:{"Content-Type":"application/json"},data:S},C||{})));case 1:case"end":return l.stop()}},m)})),O.apply(this,arguments)}function y(m,S){return o.apply(this,arguments)}function o(){return o=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/info",p()({method:"GET",params:p()({},S)},C||{})));case 1:case"end":return l.stop()}},m)})),o.apply(this,arguments)}function d(m,S){return x.apply(this,arguments)}function x(){return x=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/list",p()({method:"POST",headers:{"Content-Type":"application/json"},data:S},C||{})));case 1:case"end":return l.stop()}},m)})),x.apply(this,arguments)}function T(m,S){return v.apply(this,arguments)}function v(){return v=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/remove",p()({method:"POST",params:p()({},S)},C||{})));case 1:case"end":return l.stop()}},m)})),v.apply(this,arguments)}function h(m,S){return D.apply(this,arguments)}function D(){return D=f()(s()().mark(function m(S,C){return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,E.WY)("/system/menu/roleMenuTreeSelect",p()({method:"GET",params:p()({},S)},C||{})));case 1:case"end":return l.stop()}},m)})),D.apply(this,arguments)}function L(m,S){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function m(S,C){return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:S},C||{})));case 1:case"end":return l.stop()}},m)})),U.apply(this,arguments)}},12415:function(re,P,e){var c=e(50959);function s(y,o){return y===o&&(y!==0||1/y===1/o)||y!==y&&o!==o}var k=typeof Object.is=="function"?Object.is:s,p=c.useState,M=c.useEffect,f=c.useLayoutEffect,E=c.useDebugValue;function N(y,o){var d=o(),x=p({inst:{value:d,getSnapshot:o}}),T=x[0].inst,v=x[1];return f(function(){T.value=d,T.getSnapshot=o,g(T)&&v({inst:T})},[y,d,o]),M(function(){return g(T)&&v({inst:T}),y(function(){g(T)&&v({inst:T})})},[y]),E(d),d}function g(y){var o=y.getSnapshot;y=y.value;try{var d=o();return!k(y,d)}catch{return!0}}function $(y,o){return o()}var O=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$:N;P.useSyncExternalStore=c.useSyncExternalStore!==void 0?c.useSyncExternalStore:O},4322:function(re,P,e){re.exports=e(12415)},28622:function(re,P,e){e.d(P,{D:function(){return $}});var c=e(50959),s=e(61142),k=e(66146),p=e(42128),M=e(39210);class f extends p.l{constructor(o,d){super(),this.client=o,this.setOptions(d),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(o){const d=this.options;this.options=this.client.defaultMutationOptions(o),(0,M.VS)(d,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var o;(o=this.currentMutation)==null||o.removeObserver(this)}}onMutationUpdate(o){this.updateResult();const d={listeners:!0};o.type==="success"?d.onSuccess=!0:o.type==="error"&&(d.onError=!0),this.notify(d)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(o,d){return this.mutateOptions=d,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof o<"u"?o:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const o=this.currentMutation?this.currentMutation.state:(0,s.R)(),d={...o,isLoading:o.status==="loading",isSuccess:o.status==="success",isError:o.status==="error",isIdle:o.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=d}notify(o){k.V.batch(()=>{if(this.mutateOptions){if(o.onSuccess){var d,x,T,v;(d=(x=this.mutateOptions).onSuccess)==null||d.call(x,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(T=(v=this.mutateOptions).onSettled)==null||T.call(v,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(o.onError){var h,D,L,U;(h=(D=this.mutateOptions).onError)==null||h.call(D,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(L=(U=this.mutateOptions).onSettled)==null||L.call(U,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}o.listeners&&this.listeners.forEach(m=>{m(this.currentResult)})})}}var E=e(6647),N=e(34118),g=e(4322);function $(y,o,d){const x=(0,M.lV)(y,o,d),T=(0,E.NL)({context:x.context}),[v]=c.useState(()=>new f(T,x));c.useEffect(()=>{v.setOptions(x)},[v,x]);const h=(0,g.useSyncExternalStore)(c.useCallback(L=>v.subscribe(k.V.batchCalls(L)),[v]),()=>v.getCurrentResult(),()=>v.getCurrentResult()),D=c.useCallback((L,U)=>{v.mutate(L,U).catch(O)},[v]);if(h.error&&(0,N.L)(v.options.useErrorBoundary,[h.error]))throw h.error;return{...h,mutate:D,mutateAsync:h.mutate}}function O(){}},34118:function(re,P,e){e.d(P,{L:function(){return c}});function c(s,k){return typeof s=="function"?s(...k):!!s}}}]);
