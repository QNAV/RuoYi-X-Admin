"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{70477:function(Re,F,e){e.d(F,{gp:function(){return X},jk:function(){return c},l:function(){return m},mJ:function(){return l},nj:function(){return K}});var v=e(50959),l={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},X={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},c={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},K={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"},m=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,v.useMemo)(function(){return{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentId",key:"parentId",valueType:"treeSelect",fieldProps:{treeData:O,dropdownMatchSelectWidth:250,fieldNames:{value:"id"}}}},[O])}},35334:function(Re,F,e){e.d(F,{ew:function(){return ue},Jx:function(){return J},iT:function(){return H},Zi:function(){return z},Bw:function(){return ae},eJ:function(){return X},fk:function(){return m},nj:function(){return g.nj},sE:function(){return K},WW:function(){return Q},sy:function(){return Ce},E$:function(){return xe},_M:function(){return se},tC:function(){return l},wX:function(){return ne},oh:function(){return L},Uc:function(){return _},x:function(){return i},Mw:function(){return d},p_:function(){return h},$V:function(){return A},gp:function(){return g.gp},Qo:function(){return ce},y4:function(){return O},$9:function(){return s},jk:function(){return g.jk},x_:function(){return C},C9:function(){return B},dy:function(){return w},QT:function(){return k},Jy:function(){return f},VP:function(){return x},g4:function(){return fe},Fu:function(){return Ee},Rj:function(){return b},tE:function(){return ye},iO:function(){return G},q2:function(){return Z},jR:function(){return te},BP:function(){return D},au:function(){return c},l:function(){return g.l}});var v=e(31194),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},X={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},c={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},K={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:v.al},m={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(me){return{beginCreateTime:me[0],endCreateTime:me[1]}}}},x={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},O={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},g=e(70477),te={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},Z={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},J={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},Q={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},z={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},H={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},ae={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},A={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:v.gh,width:90},h={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},L={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:v.gc},ne={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:v.gc},_={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:v.gc},i={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:v.gc},d={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:v.gc},f={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:v.CX,width:70},D={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:v.V},s={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},ce={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},ue={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},Ce={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},se={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:v.LZ},xe={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},G={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},B={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},C={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},w={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},k={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},b={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},fe={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},Ee={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},ye={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},44926:function(Re,F,e){e.d(F,{Z:function(){return X},n:function(){return H}});var v=e(50959),l=e(98205),X=function(A){var h=(0,v.useRef)(),L=(0,l.Zl)(A);return(0,v.useEffect)(function(){h!=null&&h.current&&L(h.current)},[]),h},c=e(35290),K=e.n(c),m=e(411),x=e.n(m),O=e(94434),g=e.n(O),te=e(46686),Z=e.n(te),J=e(28287),Q=e(32222),z=e.n(Q),H=function(A){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ne=(0,v.useState)([]),_=Z()(ne,2),i=_[0],d=_[1],f=(0,v.useState)([]),D=Z()(f,2),s=D[0],ce=D[1],ue={alwaysShowAlert:L,type:h,selectedRowKeys:i,onChange:function(B,C){ce(C),d(B)}},Ce=function(B){var C=B[A],w=[B],k=[C];if(h==="checkbox")if(k=g()(i),w=z()(s),k.includes(C)){var b=i.indexOf(C);k.splice(b,1),w.splice(b,1)}else w.push(B),k.push(C);ce(w),d(k)},se=function(){ce([]),d([])},xe=function(){var G=x()(K()().mark(function B(){var C,w=arguments;return K()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(C=w.length>0&&w[0]!==void 0?w[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(s==null?void 0:s.length)!==0){b.next=4;break}return J.ZP.warning(C),b.abrupt("return",Promise.reject(C));case 4:return b.abrupt("return",Promise.resolve(s));case 5:case"end":return b.stop()}},B)}));return function(){return G.apply(this,arguments)}}();return{selectedRows:s,selectedRowKeys:i,rowSelection:ue,onClick:Ce,clearSelection:se,setSelectedRowKeys:d,checkRowSelection:xe}}},16930:function(Re,F,e){e.r(F),e.d(F,{default:function(){return bt}});var v=e(35290),l=e.n(v),X=e(30279),c=e.n(X),K=e(411),m=e.n(K),x=e(31194),O=e(44926),g=e(98205),te="systemRole",Z=(0,g.cn)({key:"".concat(te,"AtomRoleListActions"),default:void 0}),J=function(){return(0,g.sJ)(Z)},Q=function(){return(0,O.Z)(Z)},z=(0,g.cn)({key:"".concat(te,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),H=function(){return(0,g.rb)(z)},ae=function(){return(0,g.Zl)(z)},A=function(){return(0,g.sJ)(z)},h=e(45402);function L(n,r){return ne.apply(this,arguments)}function ne(){return ne=m()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/add",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),ne.apply(this,arguments)}function _(n,r){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),i.apply(this,arguments)}function d(n,r){return f.apply(this,arguments)}function f(){return f=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),f.apply(this,arguments)}function D(n,r){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),s.apply(this,arguments)}function ce(n,r){return ue.apply(this,arguments)}function ue(){return ue=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),ue.apply(this,arguments)}function Ce(n,r){return se.apply(this,arguments)}function se(){return se=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),se.apply(this,arguments)}function xe(n,r){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),G.apply(this,arguments)}function B(n,r){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),C.apply(this,arguments)}function w(n,r){return k.apply(this,arguments)}function k(){return k=m()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/edit",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),k.apply(this,arguments)}function b(n,r){return fe.apply(this,arguments)}function fe(){return fe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),fe.apply(this,arguments)}function Ee(n,r){return ye.apply(this,arguments)}function ye(){return ye=m()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/info",c()({method:"GET",params:c()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),ye.apply(this,arguments)}function Ze(n,r){return me.apply(this,arguments)}function me(){return me=m()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/list",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),me.apply(this,arguments)}function Zt(n){return Ae.apply(this,arguments)}function Ae(){return Ae=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return o.stop()}},n)})),Ae.apply(this,arguments)}function _e(n,r){return De.apply(this,arguments)}function De(){return De=m()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/remove",c()({method:"POST",params:c()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),De.apply(this,arguments)}var Le=e(53136),Ie=e(15328),qe=e(54064),et=e(98221),Be=e(55099),tt=e(18723),nt=e(37349),rt=e(1206),pe=e(93066),we=e(28287),Y=e(50959),u=e(11527),at=function(){var r=(0,Ie.md)(),a=(0,Y.useRef)(),o=J();return(0,u.jsx)(Le.Access,{accessible:r.canAddSysRole,children:(0,u.jsxs)(et.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,u.jsx)(pe.Z,{type:"primary",icon:(0,u.jsx)(qe.Z,{}),children:"\u65B0\u5EFA"}),formRef:a,onFinish:function(){var t=m()(l()().mark(function j(P){var T;return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,L(c()(c()({},P),{},{menuIds:[],menuCheckStrictly:!0}));case 2:return o==null||o.reload(),(T=a.current)===null||T===void 0||T.resetFields(),we.ZP.success("\u65B0\u5EFA\u6210\u529F"),I.abrupt("return",!0);case 6:case"end":return I.stop()}},j)}));return function(j){return t.apply(this,arguments)}}(),width:500,children:[(0,u.jsx)(Be.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,u.jsx)(Be.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,u.jsx)(tt.Z,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,u.jsx)(nt.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:x.al,initialValue:x.vu.ENABLE}),(0,u.jsx)(rt.Z,{name:"remark",label:"\u5907\u6CE8"})]})})},ut=at,st=e(39449),lt=e(48111),$e=e(7537),ot=function(){var r=(0,Ie.md)(),a=J(),o=H(),t=A(),j=t.roleId,P=t.roleName,T=function(){return lt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,u.jsxs)(u.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,u.jsx)($e.Z.Text,{code:!0,children:P}),"\u8FDB\u884C",(0,u.jsx)($e.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var I=m()(l()().mark(function $(){var W;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,_e({roleIds:j});case 2:a==null||a.reload(),a==null||(W=a.clearSelected)===null||W===void 0||W.call(a),o(),we.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return S.stop()}},$)}));function oe(){return I.apply(this,arguments)}return oe}()})};return(0,u.jsx)(Ie.Nv,{accessible:r.canRemoveSysRole,children:(0,u.jsx)(pe.Z,{danger:!0,ghost:!0,icon:(0,u.jsx)(st.Z,{}),onClick:T,children:"\u5220\u9664"})})},it=ot,dt=e(93275),Ue=e.n(dt),ct=e(46686),re=e.n(ct),le=e(35334),Fe=e(36937),mt=e(94434),pt=e.n(mt),vt=e(90026),ht=e(71600),ft=e(29993),Ke=e(3650),Ge=e(84337),Ye=e(38395),yt=e(63442),St=e(53016),gt={title:"label",key:"id",children:"children"},Tt=function n(r){var a=[];return r.forEach(function(o){var t=o.id,j=o.children;a.push(t),j&&a.push.apply(a,pt()(n(j)))}),a},Rt=function(r){var a,o=r.roleId,t=r.handleEdit,j=(0,Y.useState)([]),P=re()(j,2),T=P[0],M=P[1],I=(0,Y.useState)(!1),oe=re()(I,2),$=oe[0],W=oe[1],ve=(0,Y.useState)([]),S=re()(ve,2),q=S[0],je=S[1],be=(0,Y.useState)([]),Se=re()(be,2),ge=Se[0],U=Se[1],E=(0,Y.useState)(!1),V=re()(E,2),ee=V[0],Te=V[1],ie=(0,Y.useState)(!0),de=re()(ie,2),Je=de[0],Me=de[1],Qe=(0,Ge.Z)(m()(l()().mark(function N(){var p,R,Oe;return l()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,vt.bi)({roleId:o});case 2:return p=he.sent,R=p.menus,Oe=p.checkedKeys,he.abrupt("return",{treeData:R,selectedMenuIds:Oe,selectedTreeData:(0,h.Cr)(R,Oe),allMenuIds:(0,h.x$)(R)});case 6:case"end":return he.stop()}},N)})),{ready:o>0,refreshDeps:[o],onSuccess:function(p){W(!1),U(p.selectedTreeData)}}),y=Qe.data,Mt=Qe.refresh,ze=(0,Ke.useMutation)(m()(l()().mark(function N(){return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,t({menuIds:T});case 2:Mt();case 3:case"end":return R.stop()}},N)}))),He=ze.isLoading,Nt=ze.mutate,Pe=Tt((a=y==null?void 0:y.treeData)!==null&&a!==void 0?a:[]),Ne=(q==null?void 0:q.length)!==0&&(q==null?void 0:q.length)===(Pe==null?void 0:Pe.length),Ot=function(p){if(p||Je){var R;M((R=y==null?void 0:y.allMenuIds)!==null&&R!==void 0?R:[]);return}M([])};return(0,Y.useEffect)(function(){if((y==null?void 0:y.allMenuIds.length)===T.length){Te(!0),Me(!1);return}if(T.length===0){Te(!1),Me(!1);return}Me(!0)},[y==null?void 0:y.allMenuIds,T]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,u.jsxs)(Ye.Z,{children:[ge.length>0&&(0,u.jsx)(pe.Z,{size:"small",icon:Ne?(0,u.jsx)(ht.Z,{}):(0,u.jsx)(ft.Z,{}),onClick:function(){return je(Ne?[]:Pe)},children:Ne?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),$&&(0,u.jsx)(yt.Z,{indeterminate:Je,onChange:function(p){return Ot(p.target.checked)},checked:ee,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),(0,u.jsx)(Le.Access,{accessible:!0,children:$?(0,u.jsxs)(Ye.Z,{children:[(0,u.jsx)(pe.Z,{loading:He,onClick:function(){var p;W(!1),U((p=y==null?void 0:y.selectedTreeData)!==null&&p!==void 0?p:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,u.jsx)(pe.Z,{type:"primary",ghost:!0,loading:He,onClick:function(){return Nt()},children:"\u4FDD\u5B58"})]}):(0,u.jsx)(pe.Z,{type:"primary",ghost:!0,onClick:function(){var p,R;W(!0),M((p=y==null?void 0:y.selectedMenuIds)!==null&&p!==void 0?p:[]),U((R=y==null?void 0:y.treeData)!==null&&R!==void 0?R:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,u.jsx)("div",{className:"h-[390px] overflow-y-auto",children:ge.length>0?(0,u.jsx)(St.Z,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:$,checkStrictly:!0,fieldNames:gt,checkedKeys:T,treeData:ge,expandedKeys:q,onExpand:function(p){return je(p)},onCheck:function(p){M(p.checked)}}):(0,u.jsx)(Fe._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},Ct=Rt,We=e(93612),xt=e(86131),It=e(53554),Ve=e(42381),jt=function(){var r=(0,Y.useState)([]),a=re()(r,2),o=a[0],t=a[1],j=xt.Z.useForm(),P=re()(j,1),T=P[0],M=(0,Ie.md)(),I=J(),oe=A(),$=oe.roleId,W=oe.visible,ve=(0,Ge.Z)(function(){return Ee({roleId:$})},{ready:W&&$>0,refreshDeps:[$],onSuccess:function(){t([])}}),S=ve.data,q=ve.loading,je=ve.refresh,be=(0,Ke.useMutation)(function(){var U=m()(l()().mark(function E(V){var ee;return l()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,w(c()({roleId:$,menuIds:(ee=S==null?void 0:S.menuIds)!==null&&ee!==void 0?ee:[],roleKey:S.roleKey,roleName:S.roleName,roleSort:S.roleSort,status:S.status},V));case 2:case"end":return ie.stop()}},E)}));return function(E){return U.apply(this,arguments)}}(),{onSuccess:function(){je(),I==null||I.reload(),we.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),Se=be.mutateAsync,ge=M.canEditSysRole&&S?{form:T,editableKeys:o,onChange:function(E,V){t(E),E.length===1&&!Array.isArray(V)&&T.setFieldsValue(Ue()({},E[0],V[E[0]]))},onSave:function(){var U=m()(l()().mark(function V(ee,Te){return l()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,Se(Ue()({},ee,Te[ee]));case 2:case"end":return de.stop()}},V)}));function E(V,ee){return U.apply(this,arguments)}return E}()}:void 0;return W?(0,u.jsxs)(It.Z,{spinning:q,children:[(0,u.jsx)(We.vY,{column:2,columns:[le.g4,le.eJ],dataSource:S}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(We.vY,{column:2,columns:[le.sE,le.tE,le.Rj,le.VP,le.Fu],dataSource:S,editable:ge}),(0,u.jsx)(Ve.Z,{}),(0,u.jsx)(Ct,{roleId:$,handleEdit:function(E){return Se(E)}})]}):(0,u.jsx)(Fe._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},Pt=jt,Et=e(47027),Xe=e(67415),At=function(){var r=Q(),a=ae(),o=(0,O.n)("roleId","radio"),t=o.onClick,j=o.rowSelection,P=o.selectedRows;return(0,Y.useEffect)(function(){P.length===1&&a({roleId:P[0].roleId,roleName:P[0].roleName,visible:!0})},[P]),(0,u.jsx)(Et.Rs,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(M){return M===x.vu.ENABLE?(0,u.jsx)(Xe.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,u.jsx)(Xe.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(M){return{onClick:function(){return t(M)}}},rowSelection:j,pagination:{pageSize:10},request:function(){return Ze(h.h$.apply(void 0,arguments))}})},Dt=At,wt=e(23070),ke=e(79372),kt=function(){return(0,u.jsx)(wt.ZP,{children:(0,u.jsxs)(ke.Z,{ghost:!0,gutter:24,children:[(0,u.jsx)(ke.Z,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,u.jsx)(ut,{}),children:(0,u.jsx)(Dt,{})}),(0,u.jsx)(ke.Z,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,u.jsx)(it,{}),children:(0,u.jsx)(Pt,{})})]})})},bt=kt},90026:function(Re,F,e){e.d(F,{CP:function(){return z},FV:function(){return O},WJ:function(){return J},Yh:function(){return te},bi:function(){return h},tg:function(){return ae}});var v=e(35290),l=e.n(v),X=e(30279),c=e.n(X),K=e(411),m=e.n(K),x=e(45402);function O(i,d){return g.apply(this,arguments)}function g(){return g=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/add",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},f||{})));case 1:case"end":return s.stop()}},i)})),g.apply(this,arguments)}function te(i,d){return Z.apply(this,arguments)}function Z(){return Z=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/edit",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},f||{})));case 1:case"end":return s.stop()}},i)})),Z.apply(this,arguments)}function J(i,d){return Q.apply(this,arguments)}function Q(){return Q=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/info",c()({method:"GET",params:c()({},d)},f||{})));case 1:case"end":return s.stop()}},i)})),Q.apply(this,arguments)}function z(i,d){return H.apply(this,arguments)}function H(){return H=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/list",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},f||{})));case 1:case"end":return s.stop()}},i)})),H.apply(this,arguments)}function ae(i,d){return A.apply(this,arguments)}function A(){return A=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/remove",c()({method:"POST",params:c()({},d)},f||{})));case 1:case"end":return s.stop()}},i)})),A.apply(this,arguments)}function h(i,d){return L.apply(this,arguments)}function L(){return L=m()(l()().mark(function i(d,f){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/roleMenuTreeSelect",c()({method:"GET",params:c()({},d)},f||{})));case 1:case"end":return s.stop()}},i)})),L.apply(this,arguments)}function ne(i,d){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function i(d,f){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:d},f||{})));case 1:case"end":return s.stop()}},i)})),_.apply(this,arguments)}}}]);
