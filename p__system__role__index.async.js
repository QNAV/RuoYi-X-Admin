"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{78798:function(ye,q,e){e.d(q,{ew:function(){return a},Jx:function(){return W},iT:function(){return F},Zi:function(){return O},Bw:function(){return G},eJ:function(){return ne},fk:function(){return w},sE:function(){return ee},WW:function(){return v},sy:function(){return re},E$:function(){return ie},_M:function(){return ae},tC:function(){return o},wX:function(){return A},oh:function(){return M},Uc:function(){return E},x:function(){return V},Mw:function(){return N},p_:function(){return S},$V:function(){return X},Qo:function(){return D},$9:function(){return m},Jy:function(){return c},VP:function(){return B},g4:function(){return x},Fu:function(){return _},Rj:function(){return J},tE:function(){return p},iO:function(){return I},q2:function(){return L},jR:function(){return y},BP:function(){return l},au:function(){return d}});var f=e(85880),o={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},ne={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},d={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},ee={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:f.al},w={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(h){return{beginCreateTime:h[0],endCreateTime:h[1]}}}},B={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},y={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},L={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},W={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},v={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},O={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},F={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},G={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},X={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:f.gh,width:90},S={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},M={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:f.gc},A={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:f.gc},E={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:f.gc},V={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:f.gc},N={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:f.gc},c={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:f.CX,width:70},l={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:f.V},m={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},D={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},a={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},re={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},ae={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:f.LZ},ie={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},I={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},J={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},x={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},_={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},p={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},84660:function(ye,q,e){e.d(q,{Z:function(){return ne},n:function(){return X}});var f=e(50959),o=e(98205),ne=function(M){var A=(0,f.useRef)(),E=(0,o.Zl)(M);return(0,f.useEffect)(function(){A!=null&&A.current&&E(A.current)},[]),A},d=e(35290),ee=e.n(d),w=e(411),B=e.n(w),y=e(94434),L=e.n(y),W=e(46686),v=e.n(W),O=e(25081),F=e(32222),G=e.n(F),X=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,V=(0,f.useState)([]),N=v()(V,2),c=N[0],l=N[1],m=(0,f.useState)([]),D=v()(m,2),a=D[0],re=D[1],ae={alwaysShowAlert:E,type:A,selectedRowKeys:c,onChange:function(_,p){re(p),l(_)}},ie=function(_){var p=_[M],R=[_],h=[p];if(A==="checkbox")if(h=L()(c),R=G()(a),h.includes(p)){var g=c.indexOf(p);h.splice(g,1),R.splice(g,1)}else R.push(_),h.push(p);re(R),l(h)},I=function(){re([]),l([])},J=function(){var x=B()(ee()().mark(function _(){var p,R=arguments;return ee()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=R.length>0&&R[0]!==void 0?R[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(a==null?void 0:a.length)!==0){g.next=4;break}return O.ZP.warning(p),g.abrupt("return",Promise.reject(p));case 4:return g.abrupt("return",Promise.resolve(a));case 5:case"end":return g.stop()}},_)}));return function(){return x.apply(this,arguments)}}();return{selectedRows:a,selectedRowKeys:c,rowSelection:ae,onClick:ie,clearSelection:I,setSelectedRowKeys:l,checkRowSelection:J}}},58075:function(ye,q,e){e.d(q,{BD:function(){return V},Wd:function(){return a},XL:function(){return ie},YG:function(){return c},bW:function(){return N},ms:function(){return D},ns:function(){return ae},xK:function(){return m}});var f=e(35290),o=e.n(f),ne=e(93275),d=e.n(ne),ee=e(30279),w=e.n(ee),B=e(411),y=e.n(B),L=e(85880),W=e(17218),v=e(12824),O=e(3650),F=e.n(O),G=e(74444),X=e(25081),S=e(98205),M="systemMenu",A=function(J){var x=function _(p){return p.filter(function(R){return R.menuType!==L.og.F}).map(function(R){var h=R.menuId,g=R.menuName,Q=R.children;return{menuId:h,menuName:g,children:Q?_(Q):[]}})};return[{menuId:0,menuName:"\u6839\u76EE\u5F55",children:J?x(J):[]}]},E=(0,S.cn)({key:"".concat(M,"SelectedMenuId"),default:0}),V=function(){return(0,S.rb)(E)},N=function(){return(0,S.FV)(E)},c=function(){return(0,S.sJ)(E)},l=(0,S.cn)({key:"".concat(M,"VisibleCreateModal"),default:!1}),m=function(){return(0,S.rb)(l)},D=function(){return(0,S.Zl)(l)},a=function(){return(0,S.sJ)(l)},re=[M,"list"],ae=function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,O.useQuery)(re,y()(o()().mark(function x(){var _,p;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,W.CP)(J);case 2:return _=h.sent,p=(0,v.tw)(_,{id:"menuId",pId:"parentId",rootPId:null}),h.abrupt("return",{options:A((0,v.dH)(p)),treeData:(0,v.dH)(p),map:_.reduce(function(g,Q){return w()(w()({},g),{},d()({},Q.menuId,Q))},{}),parentIds:(0,v.Vy)(_)});case 5:case"end":return h.stop()}},x)})))},ie=function(){var J=(0,O.useQueryClient)(),x=V();return(0,O.useMutation)(function(){var _=y()(o()().mark(function p(R){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:G.Z.confirm({title:"\u5220\u9664\u83DC\u5355",content:"\u786E\u5B9A\u5220\u9664\u8BE5\u83DC\u5355\u5417\uFF1F",onOk:function(){var Q=y()(o()().mark(function pe(){return o()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,W.tg)({menuId:R});case 2:return ue.next=4,J.invalidateQueries(re);case 4:x(),X.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return ue.stop()}},pe)}));function Ae(){return Q.apply(this,arguments)}return Ae}()});case 1:case"end":return g.stop()}},p)}));return function(p){return _.apply(this,arguments)}}())}},43684:function(ye,q,e){e.r(q),e.d(q,{default:function(){return Et}});var f=e(35290),o=e.n(f),ne=e(30279),d=e.n(ne),ee=e(44463),w=e.n(ee),B=e(411),y=e.n(B),L=e(85880),W=e(84660),v=e(98205),O="systemRole",F=(0,v.cn)({key:"".concat(O,"AtomRoleListActions"),default:void 0}),G=function(){return(0,v.sJ)(F)},X=function(){return(0,W.Z)(F)},S=(0,v.cn)({key:"".concat(O,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),M=function(){return(0,v.rb)(S)},A=function(){return(0,v.Zl)(S)},E=function(){return(0,v.sJ)(S)},V=(0,v.cn)({key:"".concat(O,"AtomRolePermission"),default:!1}),N=function(){var r=(0,v.Zl)(V);return function(){return r(!0)}},c=function(){return(0,v.rb)(V)},l=function(){return(0,v.sJ)(V)},m=e(12824);function D(n,r){return a.apply(this,arguments)}function a(){return a=y()(o()().mark(function n(r,u){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/system/role/add",d()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),a.apply(this,arguments)}function re(n,r){return ae.apply(this,arguments)}function ae(){return ae=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),ae.apply(this,arguments)}function ie(n,r){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),I.apply(this,arguments)}function J(n,r){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),x.apply(this,arguments)}function _(n,r){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),p.apply(this,arguments)}function R(n,r){return h.apply(this,arguments)}function h(){return h=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),h.apply(this,arguments)}function g(n,r){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Q.apply(this,arguments)}function Ae(n,r){return pe.apply(this,arguments)}function pe(){return pe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),pe.apply(this,arguments)}function De(n,r){return ue.apply(this,arguments)}function ue(){return ue=y()(o()().mark(function n(r,u){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/system/role/edit",d()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),ue.apply(this,arguments)}function It(n,r){return Te.apply(this,arguments)}function Te(){return Te=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Te.apply(this,arguments)}function Ze(n,r){return Ce.apply(this,arguments)}function Ce(){return Ce=y()(o()().mark(function n(r,u){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/system/role/info",d()({method:"GET",params:d()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),Ce.apply(this,arguments)}function Ne(n,r){return Pe.apply(this,arguments)}function Pe(){return Pe=y()(o()().mark(function n(r,u){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/system/role/list",d()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Pe.apply(this,arguments)}function xt(n){return Ee.apply(this,arguments)}function Ee(){return Ee=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return i.stop()}},n)})),Ee.apply(this,arguments)}function Ye(n,r){return Ie.apply(this,arguments)}function Ie(){return Ie=y()(o()().mark(function n(r,u){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.WY)("/system/role/remove",d()({method:"POST",params:d()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),Ie.apply(this,arguments)}var $e=e(62325),ve=e(38562),We=e(20436),Fe=e(21007),be=e(64539),Ge=e(30041),Xe=e(2090),Ve=e(30942),we=e(3650),xe=e(25081),he=e(61857),s=e(11527),Je=["menuInfo"],Qe=function(){var r=(0,ve.md)(),u=G(),i=(0,we.useMutation)(D,{onSuccess:function(){u==null||u.reload(),xe.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),t=i.mutateAsync;return(0,s.jsx)($e.Access,{accessible:r.canAddSysRole,children:(0,s.jsxs)(Fe.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,s.jsx)(he.Z,{type:"primary",icon:(0,s.jsx)(We.Z,{}),children:"\u65B0\u5EFA"}),onFinish:function(){var Y=y()(o()().mark(function k(T){var P,U,K;return o()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return P=T.menuInfo,U=P===void 0?{menuIds:[],menuCheckStrictly:!0}:P,K=w()(T,Je),Z.next=3,t(d()(d()({},K),U));case 3:return Z.abrupt("return",!0);case 4:case"end":return Z.stop()}},k)}));return function(k){return Y.apply(this,arguments)}}(),width:500,children:[(0,s.jsx)(be.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,s.jsx)(be.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,s.jsx)(Ge.Z,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,s.jsx)(Xe.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:L.al,initialValue:L.vu.ENABLE}),(0,s.jsx)(Ve.Z,{name:"remark",label:"\u5907\u6CE8"})]})})},He=Qe,ze=e(71224),qe=e(74444),Oe=e(62200),et=function(){var r=(0,ve.md)(),u=G(),i=M(),t=E(),Y=t.visible,k=t.roleId,T=t.roleName,P=function(){return qe.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,s.jsxs)(s.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,s.jsx)(Oe.Z.Text,{code:!0,children:T}),"\u8FDB\u884C",(0,s.jsx)(Oe.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var K=y()(o()().mark(function Z(){var b;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Ye({roleIds:k});case 2:i(),u==null||(b=u.clearSelected)===null||b===void 0||b.call(u),u==null||u.reload(),xe.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return C.stop()}},Z)}));function $(){return K.apply(this,arguments)}return $}()})};return(0,s.jsx)(ve.Nv,{accessible:r.canRemoveSysRole,children:(0,s.jsx)(he.Z,{danger:!0,ghost:!0,icon:(0,s.jsx)(ze.Z,{}),disabled:!Y,onClick:P,children:"\u5220\u9664"})})},tt=et,nt=e(93275),Ue=e.n(nt),rt=e(46686),fe=e.n(rt),oe=e(78798),at=e(14267),ut=function(){var r=(0,ve.md)(),u=N(),i=c(),t=l();return r.canEditSysRole?t?(0,s.jsx)(he.Z,{onClick:i,children:"\u53D6\u6D88\u7F16\u8F91"}):(0,s.jsx)(he.Z,{type:"primary",onClick:u,children:"\u7F16\u8F91\u6743\u9650"}):null},st=ut,ot=e(58075),lt=e(8790),it=e(98408),Be=e(814),ct=e(5606),dt=e(8346),ce=e(50959),mt={title:"label",key:"id",children:"children"},pt=function(r){var u,i,t=r.value,Y=r.onChange,k=(0,ot.ns)(),T=k.data,P=(0,ce.useState)([]),U=fe()(P,2),K=U[0],$=U[1],Z=(0,ce.useState)([]),b=fe()(Z,2),se=b[0],C=b[1],je=(0,ce.useState)(!1),Re=fe()(je,2),Se=Re[0],Me=Re[1],ge=function(j){Y==null||Y(d()(d()({menuIds:K,menuCheckStrictly:Se},t),j))},le=function(j){var me=Array.isArray(j)?j:j==null?void 0:j.checked;$(me),ge({menuIds:me})},H=function(j){Me(!j.target.checked),ge({menuCheckStrictly:!j.target.checked})},te=(u=T==null?void 0:T.parentIds)!==null&&u!==void 0?u:[],z=se&&se.length>0&&se.length===te.length;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Be.Z,{className:"mb-2",children:[(0,s.jsx)(he.Z,{size:"small",icon:z?(0,s.jsx)(lt.Z,{}):(0,s.jsx)(it.Z,{}),onClick:function(){return C(z?[]:te)},children:z?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),(0,s.jsx)(ct.Z,{defaultChecked:!0,onChange:H,children:"\u7236\u5B50\u8054\u52A8"})]}),(0,s.jsx)(dt.Z,{checkable:!0,treeData:(i=T==null?void 0:T.treeData)!==null&&i!==void 0?i:[],fieldNames:mt,checkedKeys:K,onCheck:le,expandedKeys:se,onExpand:C,checkStrictly:Se})]})},vt=pt,Le=e(72137),_e=e(24466),ht=e(10979),ft=e(99390),yt=e(96022),ke=e(95331),_t=function(){var r=(0,ce.useState)([]),u=fe()(r,2),i=u[0],t=u[1],Y=ft.Z.useForm(),k=fe()(Y,1),T=k[0],P=(0,ve.md)(),U=G(),K=E(),$=K.roleId,Z=K.visible,b=c(),se=(0,ht.Z)(function(){return Ze({roleId:$})},{ready:Z,refreshDeps:[$]}),C=se.data,je=se.loading,Re=se.refresh,Se=(0,we.useMutation)(function(){var le=y()(o()().mark(function H(te){var z;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,De(d()({roleId:$,menuIds:(z=C==null?void 0:C.menuIds)!==null&&z!==void 0?z:[],roleKey:C.roleKey,roleName:C.roleName,roleSort:C.roleSort,status:C.status},te));case 2:case"end":return j.stop()}},H)}));return function(H){return le.apply(this,arguments)}}(),{onSuccess:function(){Re(),U==null||U.reload(),xe.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),Me=Se.mutate,ge=P.canEditSysRole&&C?{form:T,editableKeys:i,onChange:function(H,te){t(H),H.length===1&&!Array.isArray(te)&&T.setFieldsValue(Ue()({},H[0],te[H[0]]))},onSave:function(){var le=y()(o()().mark(function te(z,de){return o()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:Me(Ue()({},z,de[z]));case 1:case"end":return me.stop()}},te)}));function H(te,z){return le.apply(this,arguments)}return H}()}:void 0;return(0,ce.useEffect)(function(){$>0&&(t([]),b())},[$]),Z?(0,s.jsx)("div",{className:"max-h-[60vh] overflow-y-auto",children:(0,s.jsxs)(yt.Z,{spinning:je,children:[(0,s.jsx)(Le.vY,{column:2,columns:[oe.g4,oe.eJ],dataSource:C}),(0,s.jsx)(ke.Z,{}),(0,s.jsx)(Le.vY,{column:2,columns:[oe.sE,oe.tE,oe.Rj,oe.VP,oe.Fu],dataSource:C,editable:ge}),(0,s.jsx)(ke.Z,{}),(0,s.jsx)(_e.Z,{title:"\u89D2\u8272\u6743\u9650",ghost:!0,extra:(0,s.jsx)(st,{}),children:(0,s.jsx)(vt,{})})]})}):(0,s.jsx)(at._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},Rt=_t,St=e(32386),Ke=e(17324),gt=function(){var r=X(),u=A(),i=(0,W.n)("roleId","radio"),t=i.onClick,Y=i.rowSelection,k=i.selectedRows;return(0,ce.useEffect)(function(){k.length===1&&u({roleId:k[0].roleId,roleName:k[0].roleName,visible:!0})},[k]),(0,s.jsx)(St.Rs,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(P){return P===L.vu.ENABLE?(0,s.jsx)(Ke.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,s.jsx)(Ke.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(P){return{onClick:function(){return t(P)}}},rowSelection:Y,pagination:{current:1,pageSize:10},request:y()(o()().mark(function T(){var P,U,K,$=arguments;return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Ne(m.h$.apply(void 0,$));case 2:return P=b.sent,U=P.rows,K=P.total,b.abrupt("return",{data:U,total:K,success:!0});case 6:case"end":return b.stop()}},T)})),children:"1"})},Tt=gt,Ct=e(47652),Pt=function(){return(0,s.jsx)(Ct.ZP,{children:(0,s.jsxs)(_e.Z,{ghost:!0,gutter:24,children:[(0,s.jsx)(_e.Z,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,s.jsxs)(Be.Z,{children:[(0,s.jsx)(He,{}),(0,s.jsx)(tt,{})]}),children:(0,s.jsx)(Tt,{})}),(0,s.jsx)(_e.Z,{title:"\u89D2\u8272\u8BE6\u60C5",children:(0,s.jsx)(Rt,{})})]})})},Et=Pt},17218:function(ye,q,e){e.d(q,{CP:function(){return G},FV:function(){return y},WJ:function(){return O},Yh:function(){return W},tg:function(){return S}});var f=e(35290),o=e.n(f),ne=e(30279),d=e.n(ne),ee=e(411),w=e.n(ee),B=e(12824);function y(c,l){return L.apply(this,arguments)}function L(){return L=w()(o()().mark(function c(l,m){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)("/system/menu/add",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},m||{})));case 1:case"end":return a.stop()}},c)})),L.apply(this,arguments)}function W(c,l){return v.apply(this,arguments)}function v(){return v=w()(o()().mark(function c(l,m){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)("/system/menu/edit",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},m||{})));case 1:case"end":return a.stop()}},c)})),v.apply(this,arguments)}function O(c,l){return F.apply(this,arguments)}function F(){return F=w()(o()().mark(function c(l,m){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)("/system/menu/info",d()({method:"GET",params:d()({},l)},m||{})));case 1:case"end":return a.stop()}},c)})),F.apply(this,arguments)}function G(c,l){return X.apply(this,arguments)}function X(){return X=w()(o()().mark(function c(l,m){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)("/system/menu/list",d()({method:"POST",headers:{"Content-Type":"application/json"},data:l},m||{})));case 1:case"end":return a.stop()}},c)})),X.apply(this,arguments)}function S(c,l){return M.apply(this,arguments)}function M(){return M=w()(o()().mark(function c(l,m){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,B.WY)("/system/menu/remove",d()({method:"POST",params:d()({},l)},m||{})));case 1:case"end":return a.stop()}},c)})),M.apply(this,arguments)}function A(c,l){return E.apply(this,arguments)}function E(){return E=_asyncToGenerator(_regeneratorRuntime().mark(function c(l,m){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/system/menu/roleMenuTreeSelect",_objectSpread({method:"GET",params:_objectSpread({},l)},m||{})));case 1:case"end":return a.stop()}},c)})),E.apply(this,arguments)}function V(c,l){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function c(l,m){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:l},m||{})));case 1:case"end":return a.stop()}},c)})),N.apply(this,arguments)}}}]);
