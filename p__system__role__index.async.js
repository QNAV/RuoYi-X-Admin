"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{13026:function(Ie,K,t){t.d(K,{gp:function(){return J},jk:function(){return c},l:function(){return m},mJ:function(){return l},nj:function(){return Z}});var v=t(50959),l={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},J={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},c={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},Z={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"},m=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,v.useMemo)(function(){return{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentId",key:"parentId",valueType:"treeSelect",fieldProps:{treeData:L,dropdownMatchSelectWidth:250,fieldNames:{value:"id"}}}},[L])}},14145:function(Ie,K,t){t.d(K,{ew:function(){return se},Jx:function(){return X},iT:function(){return H},Zi:function(){return z},Bw:function(){return ue},eJ:function(){return J},fk:function(){return m},nj:function(){return g.nj},sE:function(){return Z},WW:function(){return Q},sy:function(){return je},E$:function(){return Pe},_M:function(){return le},tC:function(){return l},wX:function(){return re},oh:function(){return _},Uc:function(){return q},x:function(){return i},Mw:function(){return d},p_:function(){return h},$V:function(){return w},gp:function(){return g.gp},Qo:function(){return me},xM:function(){return $e},y4:function(){return L},$9:function(){return s},jk:function(){return g.jk},x_:function(){return C},C9:function(){return $},dy:function(){return A},QT:function(){return b},Jy:function(){return y},VP:function(){return R},g4:function(){return ye},Fu:function(){return Ae},Rj:function(){return N},tE:function(){return fe},iO:function(){return G},q2:function(){return U},jR:function(){return ne},BP:function(){return D},au:function(){return c},oo:function(){return ge},HW:function(){return be},VG:function(){return Se},D1:function(){return Ne},l:function(){return g.l}});var v=t(43380),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},J={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},c={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},Z={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:v.al},m={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(Te){return{beginCreateTime:Te[0],endCreateTime:Te[1]}}}},R={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},L={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},g=t(13026),ne={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},U={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},X={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},Q={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},z={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},H={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},ue={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},w={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:v.gh,width:90},h={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},_={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:v.gc},re={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:v.gc},q={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:v.gc},i={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:v.gc},d={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:v.gc},y={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:v.CX,width:70},D={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:v.V},s={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},me={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},se={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},je={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},le={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:v.LZ},Pe={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},G={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},$={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},C={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},A={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},b={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},N={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},ye={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},Ae={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},fe={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},be={dataIndex:"userId",key:"userId",title:"\u7528\u6237\u7F16\u53F7",valueType:"text",editable:!1,hideInSearch:!0},Se={dataIndex:"userName",key:"userName",title:"\u7528\u6237\u540D\u79F0",valueType:"text"},$e={dataIndex:"nickName",key:"nickName",title:"\u7528\u6237\u6635\u79F0",valueType:"text",hideInSearch:!0},ge={dataIndex:["dept","deptName"],key:"deptDeptName",title:"\u90E8\u95E8\u540D\u79F0",valueType:"text",hideInSearch:!0},Ne={dataIndex:"phoneNumber",key:"phoneNumber",title:"\u624B\u673A\u53F7\u7801",valueType:"text"}},19993:function(Ie,K,t){t.d(K,{Z:function(){return J},n:function(){return H}});var v=t(50959),l=t(98205),J=function(w){var h=(0,v.useRef)(),_=(0,l.Zl)(w);return(0,v.useEffect)(function(){h!=null&&h.current&&_(h.current)},[]),h},c=t(35290),Z=t.n(c),m=t(411),R=t.n(m),L=t(94434),g=t.n(L),ne=t(46686),U=t.n(ne),X=t(28287),Q=t(32222),z=t.n(Q),H=function(w){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,re=(0,v.useState)([]),q=U()(re,2),i=q[0],d=q[1],y=(0,v.useState)([]),D=U()(y,2),s=D[0],me=D[1],se={alwaysShowAlert:_,type:h,selectedRowKeys:i,onChange:function($,C){me(C),d($)}},je=function($){var C=$[w],A=[$],b=[C];if(h==="checkbox")if(b=g()(i),A=z()(s),b.includes(C)){var N=i.indexOf(C);b.splice(N,1),A.splice(N,1)}else A.push($),b.push(C);me(A),d(b)},le=function(){me([]),d([])},Pe=function(){var G=R()(Z()().mark(function $(){var C,A=arguments;return Z()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(C=A.length>0&&A[0]!==void 0?A[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(s==null?void 0:s.length)!==0){N.next=4;break}return X.ZP.warning(C),N.abrupt("return",Promise.reject(C));case 4:return N.abrupt("return",Promise.resolve(s));case 5:case"end":return N.stop()}},$)}));return function(){return G.apply(this,arguments)}}();return{selectedRows:s,selectedRowKeys:i,rowSelection:se,onClick:je,clearSelection:le,setSelectedRowKeys:d,checkRowSelection:Pe}}},93646:function(Ie,K,t){t.r(K),t.d(K,{default:function(){return jt}});var v=t(35290),l=t.n(v),J=t(30279),c=t.n(J),Z=t(411),m=t.n(Z),R=t(43380),L=t(19993),g=t(98205),ne="systemRole",U=(0,g.cn)({key:"".concat(ne,"AtomRoleListActions"),default:void 0}),X=function(){return(0,g.sJ)(U)},Q=function(){return(0,L.Z)(U)},z=(0,g.cn)({key:"".concat(ne,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),H=function(){return(0,g.rb)(z)},ue=function(){return(0,g.Zl)(z)},w=function(){return(0,g.sJ)(z)},h=t(26931);function _(n,r){return re.apply(this,arguments)}function re(){return re=m()(l()().mark(function n(r,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.WY)("/system/role/add",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),re.apply(this,arguments)}function q(n,r){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),i.apply(this,arguments)}function d(n,r){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),y.apply(this,arguments)}function D(n,r){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),s.apply(this,arguments)}function me(n,r){return se.apply(this,arguments)}function se(){return se=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),se.apply(this,arguments)}function je(n,r){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),le.apply(this,arguments)}function Pe(n,r){return G.apply(this,arguments)}function G(){return G=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),G.apply(this,arguments)}function $(n,r){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),C.apply(this,arguments)}function A(n,r){return b.apply(this,arguments)}function b(){return b=m()(l()().mark(function n(r,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.WY)("/system/role/edit",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),b.apply(this,arguments)}function N(n,r){return ye.apply(this,arguments)}function ye(){return ye=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),ye.apply(this,arguments)}function Ae(n,r){return fe.apply(this,arguments)}function fe(){return fe=m()(l()().mark(function n(r,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.WY)("/system/role/info",c()({method:"GET",params:c()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),fe.apply(this,arguments)}function be(n,r){return Se.apply(this,arguments)}function Se(){return Se=m()(l()().mark(function n(r,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.WY)("/system/role/list",c()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return e.stop()}},n)})),Se.apply(this,arguments)}function $e(n){return ge.apply(this,arguments)}function ge(){return ge=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return o.stop()}},n)})),ge.apply(this,arguments)}function Ne(n,r){return Ee.apply(this,arguments)}function Ee(){return Ee=m()(l()().mark(function n(r,a){return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.WY)("/system/role/remove",c()({method:"POST",params:c()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),Ee.apply(this,arguments)}var Te=t(60225),ke=t(65174),He=t(54064),j=t(55633),pe=t(93066),Me=t(28287),W=t(50959),u=t(11527),qe=function(){var r=(0,ke.md)(),a=(0,W.useRef)(),o=X();return(0,u.jsx)(Te.Access,{accessible:r.canAddSysRole,children:(0,u.jsxs)(j.Yr8,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,u.jsx)(pe.Z,{type:"primary",icon:(0,u.jsx)(He.Z,{}),children:"\u65B0\u5EFA"}),formRef:a,onFinish:function(){var e=m()(l()().mark(function P(E){var T;return l()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,_(c()(c()({},E),{},{menuIds:[],menuCheckStrictly:!0}));case 2:return o==null||o.reload(),(T=a.current)===null||T===void 0||T.resetFields(),Me.ZP.success("\u65B0\u5EFA\u6210\u529F"),I.abrupt("return",!0);case 6:case"end":return I.stop()}},P)}));return function(P){return e.apply(this,arguments)}}(),width:500,children:[(0,u.jsx)(j.VaQ,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,u.jsx)(j.VaQ,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,u.jsx)(j.k_F,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,u.jsx)(j.$Oj.Group,{name:"status",label:"\u72B6\u6001",valueEnum:R.al,initialValue:R.vu.ENABLE}),(0,u.jsx)(j.$JJ,{name:"remark",label:"\u5907\u6CE8"})]})})},et=qe,tt=t(39449),nt=t(48111),Be=t(29230),rt=function(){var r=(0,ke.md)(),a=X(),o=H(),e=w(),P=e.roleId,E=e.roleName,T=function(){return nt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,u.jsxs)(u.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,u.jsx)(Be.Z.Text,{code:!0,children:E}),"\u8FDB\u884C",(0,u.jsx)(Be.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var I=m()(l()().mark(function B(){var Y;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Ne({roleIds:P});case 2:a==null||a.reload(),a==null||(Y=a.clearSelected)===null||Y===void 0||Y.call(a),o(),Me.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return S.stop()}},B)}));function ie(){return I.apply(this,arguments)}return ie}()})};return(0,u.jsx)(ke.Nv,{accessible:r.canRemoveSysRole,children:(0,u.jsx)(pe.Z,{danger:!0,ghost:!0,icon:(0,u.jsx)(tt.Z,{}),onClick:T,children:"\u5220\u9664"})})},at=rt,ut=t(93275),Fe=t.n(ut),st=t(46686),ae=t.n(st),oe=t(14145),Ke=t(51534),lt=t(94434),ot=t.n(lt),it=t(43290),dt=t(71600),ct=t(29993),Ze=t(3650),Ge=t(84337),We=t(38395),mt=t(63442),pt=t(53016),vt={title:"label",key:"id",children:"children"},ht=function n(r){var a=[];return r.forEach(function(o){var e=o.id,P=o.children;a.push(e),P&&a.push.apply(a,ot()(n(P)))}),a},yt=function(r){var a,o=r.roleId,e=r.handleEdit,P=(0,W.useState)([]),E=ae()(P,2),T=E[0],M=E[1],I=(0,W.useState)(!1),ie=ae()(I,2),B=ie[0],Y=ie[1],ve=(0,W.useState)([]),S=ae()(ve,2),ee=S[0],we=S[1],Oe=(0,W.useState)([]),xe=ae()(Oe,2),Ce=xe[0],F=xe[1],k=(0,W.useState)(!1),V=ae()(k,2),te=V[0],Re=V[1],de=(0,W.useState)(!0),ce=ae()(de,2),Je=ce[0],Le=ce[1],Xe=(0,Ge.Z)(m()(l()().mark(function O(){var p,x,_e;return l()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,it.bi)({roleId:o});case 2:return p=he.sent,x=p.menus,_e=p.checkedKeys,he.abrupt("return",{treeData:x,selectedMenuIds:_e,selectedTreeData:(0,h.Cr)(x,_e),allMenuIds:(0,h.x$)(x)});case 6:case"end":return he.stop()}},O)})),{ready:o>0,refreshDeps:[o],onSuccess:function(p){Y(!1),F(p.selectedTreeData)}}),f=Xe.data,Pt=Xe.refresh,Qe=(0,Ze.useMutation)(m()(l()().mark(function O(){return l()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,e({menuIds:T});case 2:Pt();case 3:case"end":return x.stop()}},O)}))),ze=Qe.isLoading,Et=Qe.mutate,De=ht((a=f==null?void 0:f.treeData)!==null&&a!==void 0?a:[]),Ue=(ee==null?void 0:ee.length)!==0&&(ee==null?void 0:ee.length)===(De==null?void 0:De.length),kt=function(p){if(p||Je){var x;M((x=f==null?void 0:f.allMenuIds)!==null&&x!==void 0?x:[]);return}M([])};return(0,W.useEffect)(function(){if((f==null?void 0:f.allMenuIds.length)===T.length){Re(!0),Le(!1);return}if(T.length===0){Re(!1),Le(!1);return}Le(!0)},[f==null?void 0:f.allMenuIds,T]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,u.jsxs)(We.Z,{children:[Ce.length>0&&(0,u.jsx)(pe.Z,{size:"small",icon:Ue?(0,u.jsx)(dt.Z,{}):(0,u.jsx)(ct.Z,{}),onClick:function(){return we(Ue?[]:De)},children:Ue?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),B&&(0,u.jsx)(mt.Z,{indeterminate:Je,onChange:function(p){return kt(p.target.checked)},checked:te,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),(0,u.jsx)(Te.Access,{accessible:!0,children:B?(0,u.jsxs)(We.Z,{children:[(0,u.jsx)(pe.Z,{loading:ze,onClick:function(){var p;Y(!1),F((p=f==null?void 0:f.selectedTreeData)!==null&&p!==void 0?p:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,u.jsx)(pe.Z,{type:"primary",ghost:!0,loading:ze,onClick:function(){return Et()},children:"\u4FDD\u5B58"})]}):(0,u.jsx)(pe.Z,{type:"primary",ghost:!0,onClick:function(){var p,x;Y(!0),M((p=f==null?void 0:f.selectedMenuIds)!==null&&p!==void 0?p:[]),F((x=f==null?void 0:f.treeData)!==null&&x!==void 0?x:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,u.jsx)("div",{className:"h-[390px] overflow-y-auto",children:Ce.length>0?(0,u.jsx)(pt.Z,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:B,checkStrictly:!0,fieldNames:vt,checkedKeys:T,treeData:Ce,expandedKeys:ee,onExpand:function(p){return we(p)},onCheck:function(p){M(p.checked)}}):(0,u.jsx)(Ke._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},ft=yt,St=t(86131),gt=t(53554),Ye=t(42381),Tt=function(){var r=(0,W.useState)([]),a=ae()(r,2),o=a[0],e=a[1],P=St.Z.useForm(),E=ae()(P,1),T=E[0],M=(0,ke.md)(),I=X(),ie=w(),B=ie.roleId,Y=ie.visible,ve=(0,Ge.Z)(function(){return Ae({roleId:B})},{ready:Y&&B>0,refreshDeps:[B],onSuccess:function(){e([])}}),S=ve.data,ee=ve.loading,we=ve.refresh,Oe=(0,Ze.useMutation)(function(){var F=m()(l()().mark(function k(V){var te;return l()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,A(c()({roleId:B,menuIds:(te=S==null?void 0:S.menuIds)!==null&&te!==void 0?te:[],roleKey:S.roleKey,roleName:S.roleName,roleSort:S.roleSort,status:S.status},V));case 2:case"end":return de.stop()}},k)}));return function(k){return F.apply(this,arguments)}}(),{onSuccess:function(){we(),I==null||I.reload(),Me.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),xe=Oe.mutateAsync,Ce=M.canEditSysRole&&S?{form:T,editableKeys:o,onChange:function(k,V){e(k),k.length===1&&!Array.isArray(V)&&T.setFieldsValue(Fe()({},k[0],V[k[0]]))},onSave:function(){var F=m()(l()().mark(function V(te,Re){return l()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,xe(Fe()({},te,Re[te]));case 2:case"end":return ce.stop()}},V)}));function k(V,te){return F.apply(this,arguments)}return k}()}:void 0;return Y?(0,u.jsxs)(gt.Z,{spinning:ee,children:[(0,u.jsx)(j.vYc,{column:2,columns:[oe.g4,oe.eJ],dataSource:S}),(0,u.jsx)(Ye.Z,{}),(0,u.jsx)(j.vYc,{column:2,columns:[oe.sE,oe.tE,oe.Rj,oe.VP,oe.Fu],dataSource:S,editable:Ce}),(0,u.jsx)(Ye.Z,{}),(0,u.jsx)(ft,{roleId:B,handleEdit:function(k){return xe(k)}})]}):(0,u.jsx)(Ke._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},xt=Tt,Ve=t(67415),Ct=function(){var r=Q(),a=ue(),o=(0,L.n)("roleId","radio"),e=o.onClick,P=o.rowSelection,E=o.selectedRows;return(0,W.useEffect)(function(){E.length===1&&a({roleId:E[0].roleId,roleName:E[0].roleName,visible:!0})},[E]),(0,u.jsx)(j.RsR,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(M){return M===R.vu.ENABLE?(0,u.jsx)(Ve.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,u.jsx)(Ve.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(M){return{onClick:function(){return e(M)}}},rowSelection:P,pagination:{pageSize:10},request:function(){return be(h.h$.apply(void 0,arguments))}})},Rt=Ct,It=function(){return(0,u.jsx)(j._zJ,{children:(0,u.jsxs)(j.QWM,{ghost:!0,gutter:24,children:[(0,u.jsx)(j.QWM,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,u.jsx)(et,{}),children:(0,u.jsx)(Rt,{})}),(0,u.jsx)(j.QWM,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,u.jsx)(at,{}),children:(0,u.jsx)(xt,{})})]})})},jt=It},43290:function(Ie,K,t){t.d(K,{CP:function(){return z},FV:function(){return L},WJ:function(){return X},Yh:function(){return ne},bi:function(){return h},tg:function(){return ue}});var v=t(35290),l=t.n(v),J=t(30279),c=t.n(J),Z=t(411),m=t.n(Z),R=t(26931);function L(i,d){return g.apply(this,arguments)}function g(){return g=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/add",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},y||{})));case 1:case"end":return s.stop()}},i)})),g.apply(this,arguments)}function ne(i,d){return U.apply(this,arguments)}function U(){return U=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/edit",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},y||{})));case 1:case"end":return s.stop()}},i)})),U.apply(this,arguments)}function X(i,d){return Q.apply(this,arguments)}function Q(){return Q=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/info",c()({method:"GET",params:c()({},d)},y||{})));case 1:case"end":return s.stop()}},i)})),Q.apply(this,arguments)}function z(i,d){return H.apply(this,arguments)}function H(){return H=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/list",c()({method:"POST",headers:{"Content-Type":"application/json"},data:d},y||{})));case 1:case"end":return s.stop()}},i)})),H.apply(this,arguments)}function ue(i,d){return w.apply(this,arguments)}function w(){return w=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/remove",c()({method:"POST",params:c()({},d)},y||{})));case 1:case"end":return s.stop()}},i)})),w.apply(this,arguments)}function h(i,d){return _.apply(this,arguments)}function _(){return _=m()(l()().mark(function i(d,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,R.WY)("/system/menu/roleMenuTreeSelect",c()({method:"GET",params:c()({},d)},y||{})));case 1:case"end":return s.stop()}},i)})),_.apply(this,arguments)}function re(i,d){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function i(d,y){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:d},y||{})));case 1:case"end":return s.stop()}},i)})),q.apply(this,arguments)}}}]);
