"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{27111:function(H,j,e){e.d(j,{gp:function(){return p},j5:function(){return S},jk:function(){return l},mJ:function(){return i},nj:function(){return R}});var i={title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"deptName",key:"deptName",valueType:"text"},p={title:"\u8D1F\u8D23\u4EBA",dataIndex:"leader",key:"leader",valueType:"text"},l={title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"phone",key:"phone",valueType:"text"},R={title:"\u90AE\u7BB1",dataIndex:"email",key:"email",valueType:"text"},S=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentId",key:"parentId",valueType:"treeSelect",fieldProps:{treeData:v,dropdownMatchSelectWidth:250,fieldNames:{value:"id"}}}}},91500:function(H,j,e){e.d(j,{ew:function(){return Ee},Jx:function(){return y},iT:function(){return x},Zi:function(){return d},Bw:function(){return I},eJ:function(){return l},fk:function(){return P},nj:function(){return w.nj},sE:function(){return S},WW:function(){return u},sy:function(){return oe},E$:function(){return le},_M:function(){return je},tC:function(){return p},wX:function(){return G},oh:function(){return C},Uc:function(){return k},x:function(){return h},Mw:function(){return m},p_:function(){return g},$V:function(){return f},gp:function(){return w.gp},Qo:function(){return re},xM:function(){return Re},y4:function(){return Z},$9:function(){return o},jk:function(){return w.jk},x_:function(){return W},C9:function(){return B},dy:function(){return F},QT:function(){return q},Jy:function(){return D},VP:function(){return v},g4:function(){return Ue},Fu:function(){return Se},Rj:function(){return U},tE:function(){return be},iO:function(){return ie},q2:function(){return O},jR:function(){return N},BP:function(){return L},au:function(){return R},oo:function(){return Be},HW:function(){return ge},VG:function(){return ke},D1:function(){return xe},j5:function(){return w.j5}});var i=e(87230),p={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},l={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},R={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},S={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:i.al},P={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(he){return{beginCreateTime:he[0],endCreateTime:he[1]}}}},v={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},Z={title:"\u6392\u5E8F",dataIndex:"orderNum",key:"orderNum",valueType:"digit"},w=e(27111),N={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},O={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},y={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},u={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},d={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},x={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},I={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},f={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:i.gh,width:90},g={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},C={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:i.gc},G={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:i.gc},k={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:i.gc},h={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:i.gc},m={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:i.gc},D={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:i.CX,width:70},L={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:i.V},o={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},re={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},Ee={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},oe={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},je={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:i.LZ},le={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},ie={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},B={dataIndex:"postId",key:"postId",title:"\u5C97\u4F4D\u7F16\u53F7",valueType:"text",hideInSearch:!0},W={dataIndex:"postCode",key:"postCode",title:"\u5C97\u4F4D\u7F16\u7801",valueType:"text"},F={dataIndex:"postName",key:"postName",title:"\u5C97\u4F4D\u540D\u79F0",valueType:"text"},q={dataIndex:"postSort",key:"postSort",title:"\u663E\u793A\u987A\u5E8F",valueType:"text",hideInSearch:!0},U={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},Ue={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},Se={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},be={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0},ge={dataIndex:"userId",key:"userId",title:"\u7528\u6237\u7F16\u53F7",valueType:"text",editable:!1,hideInSearch:!0},ke={dataIndex:"userName",key:"userName",title:"\u7528\u6237\u540D\u79F0",valueType:"text"},Re={dataIndex:"nickName",key:"nickName",title:"\u7528\u6237\u6635\u79F0",valueType:"text",hideInSearch:!0},Be={dataIndex:["dept","deptName"],key:"deptDeptName",title:"\u90E8\u95E8\u540D\u79F0",valueType:"text",hideInSearch:!0},xe={dataIndex:"phoneNumber",key:"phoneNumber",title:"\u624B\u673A\u53F7\u7801",valueType:"text"}},15769:function(H,j,e){e.d(j,{A:function(){return R}});var i=e(78054),p=e(50959),l=e(11527),R=function(P){return(0,p.cloneElement)((0,l.jsx)(i._zJ,{className:"px-[24px]",header:{title:"",breadcrumb:{}}}),P)}},6923:function(H,j,e){e.d(j,{Z:function(){return l},n:function(){return x}});var i=e(50959),p=e(98205),l=function(f){var g=(0,i.useRef)(),C=(0,p.Zl)(f);return(0,i.useEffect)(function(){g!=null&&g.current&&C(g.current)},[]),g},R=e(35290),S=e.n(R),P=e(411),v=e.n(P),Z=e(94434),w=e.n(Z),N=e(46686),O=e.n(N),y=e(55024),u=e(32222),d=e.n(u),x=function(f){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,G=(0,i.useState)([]),k=O()(G,2),h=k[0],m=k[1],D=(0,i.useState)([]),L=O()(D,2),o=L[0],re=L[1],Ee={alwaysShowAlert:C,type:g,selectedRowKeys:h,onChange:function(B,W){re(W),m(B)}},oe=function(B){var W=B[f],F=[B],q=[W];if(g==="checkbox")if(q=w()(h),F=d()(o),q.includes(W)){var U=h.indexOf(W);q.splice(U,1),F.splice(U,1)}else F.push(B),q.push(W);re(F),m(q)},je=function(){re([]),m([])},le=function(){var ie=v()(S()().mark(function B(){var W,F=arguments;return S()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(W=F.length>0&&F[0]!==void 0?F[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(o==null?void 0:o.length)!==0){U.next=4;break}return y.ZP.warning(W),U.abrupt("return",Promise.reject(W));case 4:return U.abrupt("return",Promise.resolve(o));case 5:case"end":return U.stop()}},B)}));return function(){return ie.apply(this,arguments)}}();return{selectedRows:o,selectedRowKeys:h,rowSelection:Ee,onClick:oe,clearSelection:je,setSelectedRowKeys:m,checkRowSelection:le}}},97389:function(H,j,e){e.r(j),e.d(j,{default:function(){return jt}});var i=e(15769),p=e(35290),l=e.n(p),R=e(30279),S=e.n(R),P=e(411),v=e.n(P),Z=e(87230),w=e(6923),N=e(98205),O="systemRole",y=(0,N.cn)({key:"".concat(O,"AtomRoleListActions"),default:void 0}),u=function(){return(0,N.sJ)(y)},d=function(){return(0,w.Z)(y)},x=(0,N.cn)({key:"".concat(O,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),I=function(){return(0,N.rb)(x)},f=function(){return(0,N.Zl)(x)},g=function(){return(0,N.sJ)(x)},C=e(72259);function G(n,r){return k.apply(this,arguments)}function k(){return k=v()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/system/role/add",S()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),k.apply(this,arguments)}function h(n,r){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),m.apply(this,arguments)}function D(n,r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),L.apply(this,arguments)}function o(n,r){return re.apply(this,arguments)}function re(){return re=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),re.apply(this,arguments)}function Ee(n,r){return oe.apply(this,arguments)}function oe(){return oe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),oe.apply(this,arguments)}function je(n,r){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),le.apply(this,arguments)}function ie(n,r){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),B.apply(this,arguments)}function W(n,r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),F.apply(this,arguments)}function q(n,r){return U.apply(this,arguments)}function U(){return U=v()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/system/role/edit",S()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),U.apply(this,arguments)}function Ue(n,r){return Se.apply(this,arguments)}function Se(){return Se=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),Se.apply(this,arguments)}function be(n,r){return ge.apply(this,arguments)}function ge(){return ge=v()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/system/role/info",S()({method:"GET",params:S()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),ge.apply(this,arguments)}function ke(n,r){return Re.apply(this,arguments)}function Re(){return Re=v()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/system/role/list",S()({method:"POST",headers:{"Content-Type":"application/json"},data:r},a||{})));case 1:case"end":return t.stop()}},n)})),Re.apply(this,arguments)}function Be(n){return xe.apply(this,arguments)}function xe(){return xe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return c.stop()}},n)})),xe.apply(this,arguments)}function Fe(n,r){return he.apply(this,arguments)}function he(){return he=v()(l()().mark(function n(r,a){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,C.WY)("/system/role/remove",S()({method:"POST",params:S()({},r)},a||{})));case 1:case"end":return t.stop()}},n)})),he.apply(this,arguments)}var Ke=e(18662),Pe=e(38135),qe=e(54064),V=e(78054),ve=e(4733),Ae=e(55024),ee=e(50959),s=e(11527),et=function(){var r=(0,Pe.md)(),a=(0,ee.useRef)(),c=u();return(0,s.jsx)(Ke.Access,{accessible:r.canAddSysRole,children:(0,s.jsxs)(V.Yr8,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,s.jsx)(ve.Z,{type:"primary",icon:(0,s.jsx)(qe.Z,{}),children:"\u65B0\u5EFA"}),formRef:a,onFinish:function(){var t=v()(l()().mark(function $(Y){var A;return l()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,G(S()(S()({},Y),{},{menuIds:[],menuCheckStrictly:!0}));case 2:return c==null||c.reload(),(A=a.current)===null||A===void 0||A.resetFields(),Ae.ZP.success("\u65B0\u5EFA\u6210\u529F"),K.abrupt("return",!0);case 6:case"end":return K.stop()}},$)}));return function($){return t.apply(this,arguments)}}(),width:500,children:[(0,s.jsx)(V.VaQ,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,s.jsx)(V.VaQ,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,s.jsx)(V.k_F,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,s.jsx)(V.$Oj.Group,{name:"status",label:"\u72B6\u6001",valueEnum:Z.al,initialValue:Z.vu.ENABLE}),(0,s.jsx)(V.$JJ,{name:"remark",label:"\u5907\u6CE8"})]})})},tt=et,nt=e(39449),rt=e(88171),Ze=e(52398),at=function(){var r=(0,Pe.md)(),a=u(),c=I(),t=g(),$=t.roleId,Y=t.roleName,A=function(){return rt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,s.jsxs)(s.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,s.jsx)(Ze.Z.Text,{code:!0,children:Y}),"\u8FDB\u884C",(0,s.jsx)(Ze.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var K=v()(l()().mark(function Q(){var te;return l()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Fe({roleIds:$});case 2:a==null||a.reload(),a==null||(te=a.clearSelected)===null||te===void 0||te.call(a),c(),Ae.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return b.stop()}},Q)}));function de(){return K.apply(this,arguments)}return de}()})};return(0,s.jsx)(Pe.Nv,{accessible:r.canRemoveSysRole,children:(0,s.jsx)(ve.Z,{danger:!0,ghost:!0,icon:(0,s.jsx)(nt.Z,{}),onClick:A,children:"\u5220\u9664"})})},ut=at,st=e(93275),Ge=e.n(st),ot=e(46686),se=e.n(ot),ce=e(91500),We=e(96346),lt=e(94434),it=e.n(lt),ct=e(10453),dt=e(71600),mt=e(29993),$e=e(28622),Ye=e(41202),_e=e(35082),pt=e(66102),ht=e(84495),vt={title:"label",key:"id",children:"children"},ft=function n(r){var a=[];return r.forEach(function(c){var t=c.id,$=c.children;a.push(t),$&&a.push.apply(a,it()(n($)))}),a},yt=function(r){var a,c=r.roleId,t=r.handleEdit,$=(0,ee.useState)([]),Y=se()($,2),A=Y[0],J=Y[1],K=(0,ee.useState)(!1),de=se()(K,2),Q=de[0],te=de[1],fe=(0,ee.useState)([]),b=se()(fe,2),ae=b[0],we=b[1],Me=(0,ee.useState)([]),Ce=se()(Me,2),Te=Ce[0],z=Ce[1],_=(0,ee.useState)(!1),ne=se()(_,2),ue=ne[0],Ie=ne[1],me=(0,ee.useState)(!0),pe=se()(me,2),Xe=pe[0],Ne=pe[1],Qe=(0,Ye.Z)(v()(l()().mark(function X(){var T,M,Le;return l()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,(0,ct.bi)({roleId:c});case 2:return T=ye.sent,M=T.menus,Le=T.checkedKeys,ye.abrupt("return",{treeData:M,selectedMenuIds:Le,selectedTreeData:(0,C.Cr)(M,Le),allMenuIds:(0,C.x$)(M)});case 6:case"end":return ye.stop()}},X)})),{ready:c>0,refreshDeps:[c],onSuccess:function(T){te(!1),z(T.selectedTreeData)}}),E=Qe.data,Pt=Qe.refresh,ze=(0,$e.D)(v()(l()().mark(function X(){return l()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,t({menuIds:A});case 2:Pt();case 3:case"end":return M.stop()}},X)}))),He=ze.isLoading,wt=ze.mutate,De=ft((a=E==null?void 0:E.treeData)!==null&&a!==void 0?a:[]),Oe=(ae==null?void 0:ae.length)!==0&&(ae==null?void 0:ae.length)===(De==null?void 0:De.length),Dt=function(T){if(T||Xe){var M;J((M=E==null?void 0:E.allMenuIds)!==null&&M!==void 0?M:[]);return}J([])};return(0,ee.useEffect)(function(){if((E==null?void 0:E.allMenuIds.length)===A.length){Ie(!0),Ne(!1);return}if(A.length===0){Ie(!1),Ne(!1);return}Ne(!0)},[E==null?void 0:E.allMenuIds,A]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,s.jsxs)(_e.Z,{children:[Te.length>0&&(0,s.jsx)(ve.Z,{size:"small",icon:Oe?(0,s.jsx)(dt.Z,{}):(0,s.jsx)(mt.Z,{}),onClick:function(){return we(Oe?[]:De)},children:Oe?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),Q&&(0,s.jsx)(pt.Z,{indeterminate:Xe,onChange:function(T){return Dt(T.target.checked)},checked:ue,children:"\u5168\u9009/\u5168\u4E0D\u9009"})]}),(0,s.jsx)(Ke.Access,{accessible:!0,children:Q?(0,s.jsxs)(_e.Z,{children:[(0,s.jsx)(ve.Z,{loading:He,onClick:function(){var T;te(!1),z((T=E==null?void 0:E.selectedTreeData)!==null&&T!==void 0?T:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,s.jsx)(ve.Z,{type:"primary",ghost:!0,loading:He,onClick:function(){return wt()},children:"\u4FDD\u5B58"})]}):(0,s.jsx)(ve.Z,{type:"primary",ghost:!0,onClick:function(){var T,M;te(!0),J((T=E==null?void 0:E.selectedMenuIds)!==null&&T!==void 0?T:[]),z((M=E==null?void 0:E.treeData)!==null&&M!==void 0?M:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,s.jsx)("div",{className:"h-[390px] overflow-y-auto",children:Te.length>0?(0,s.jsx)(ht.Z,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:Q,checkStrictly:!0,fieldNames:vt,checkedKeys:A,treeData:Te,expandedKeys:ae,onExpand:function(T){return we(T)},onCheck:function(T){J(T.checked)}}):(0,s.jsx)(We._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},St=yt,gt=e(43090),Rt=e(68707),Ve=e(37117),xt=function(){var r=(0,ee.useState)([]),a=se()(r,2),c=a[0],t=a[1],$=gt.Z.useForm(),Y=se()($,1),A=Y[0],J=(0,Pe.md)(),K=u(),de=g(),Q=de.roleId,te=de.visible,fe=(0,Ye.Z)(function(){return be({roleId:Q})},{ready:te&&Q>0,refreshDeps:[Q],onSuccess:function(){t([])}}),b=fe.data,ae=fe.loading,we=fe.refresh,Me=(0,$e.D)(function(){var z=v()(l()().mark(function _(ne){var ue;return l()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,q(S()({roleId:Q,menuIds:(ue=b==null?void 0:b.menuIds)!==null&&ue!==void 0?ue:[],roleKey:b.roleKey,roleName:b.roleName,roleSort:b.roleSort,status:b.status},ne));case 2:case"end":return me.stop()}},_)}));return function(_){return z.apply(this,arguments)}}(),{onSuccess:function(){we(),K==null||K.reload(),Ae.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),Ce=Me.mutateAsync,Te=J.canEditSysRole&&b?{form:A,editableKeys:c,onChange:function(_,ne){t(_),_.length===1&&!Array.isArray(ne)&&A.setFieldsValue(Ge()({},_[0],ne[_[0]]))},onSave:function(){var z=v()(l()().mark(function ne(ue,Ie){return l()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,Ce(Ge()({},ue,Ie[ue]));case 2:case"end":return pe.stop()}},ne)}));function _(ne,ue){return z.apply(this,arguments)}return _}()}:void 0;return te?(0,s.jsxs)(Rt.Z,{spinning:ae,children:[(0,s.jsx)(V.vYc,{column:2,columns:[ce.g4,ce.eJ],dataSource:b}),(0,s.jsx)(Ve.Z,{}),(0,s.jsx)(V.vYc,{column:2,columns:[ce.sE,ce.tE,ce.Rj,ce.VP,ce.Fu],dataSource:b,editable:Te}),(0,s.jsx)(Ve.Z,{}),(0,s.jsx)(St,{roleId:Q,handleEdit:function(_){return Ce(_)}})]}):(0,s.jsx)(We._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},Ct=xt,Je=e(21107),Tt=function(){var r=d(),a=f(),c=(0,w.n)("roleId","radio"),t=c.onClick,$=c.rowSelection,Y=c.selectedRows;return(0,ee.useEffect)(function(){Y.length===1&&a({roleId:Y[0].roleId,roleName:Y[0].roleName,visible:!0})},[Y]),(0,s.jsx)(V.RsR,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(J){return J===Z.vu.ENABLE?(0,s.jsx)(Je.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,s.jsx)(Je.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(J){return{onClick:function(){return t(J)}}},rowSelection:$,pagination:{pageSize:10},request:function(){return ke(C.h$.apply(void 0,arguments))}})},It=Tt,Et=function(){return(0,s.jsx)(i.A,{children:(0,s.jsxs)(V.QWM,{ghost:!0,gutter:24,children:[(0,s.jsx)(V.QWM,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,s.jsx)(tt,{}),children:(0,s.jsx)(It,{})}),(0,s.jsx)(V.QWM,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,s.jsx)(ut,{}),children:(0,s.jsx)(Ct,{})})]})})},jt=Et},10453:function(H,j,e){e.d(j,{CP:function(){return d},FV:function(){return Z},WJ:function(){return y},Yh:function(){return N},bi:function(){return g},tg:function(){return I}});var i=e(35290),p=e.n(i),l=e(30279),R=e.n(l),S=e(411),P=e.n(S),v=e(72259);function Z(h,m){return w.apply(this,arguments)}function w(){return w=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/add",R()({method:"POST",headers:{"Content-Type":"application/json"},data:m},D||{})));case 1:case"end":return o.stop()}},h)})),w.apply(this,arguments)}function N(h,m){return O.apply(this,arguments)}function O(){return O=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/edit",R()({method:"POST",headers:{"Content-Type":"application/json"},data:m},D||{})));case 1:case"end":return o.stop()}},h)})),O.apply(this,arguments)}function y(h,m){return u.apply(this,arguments)}function u(){return u=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/info",R()({method:"GET",params:R()({},m)},D||{})));case 1:case"end":return o.stop()}},h)})),u.apply(this,arguments)}function d(h,m){return x.apply(this,arguments)}function x(){return x=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/list",R()({method:"POST",headers:{"Content-Type":"application/json"},data:m},D||{})));case 1:case"end":return o.stop()}},h)})),x.apply(this,arguments)}function I(h,m){return f.apply(this,arguments)}function f(){return f=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/remove",R()({method:"POST",params:R()({},m)},D||{})));case 1:case"end":return o.stop()}},h)})),f.apply(this,arguments)}function g(h,m){return C.apply(this,arguments)}function C(){return C=P()(p()().mark(function h(m,D){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,v.WY)("/system/menu/roleMenuTreeSelect",R()({method:"GET",params:R()({},m)},D||{})));case 1:case"end":return o.stop()}},h)})),C.apply(this,arguments)}function G(h,m){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function h(m,D){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:m},D||{})));case 1:case"end":return o.stop()}},h)})),k.apply(this,arguments)}},12415:function(H,j,e){var i=e(50959);function p(y,u){return y===u&&(y!==0||1/y===1/u)||y!==y&&u!==u}var l=typeof Object.is=="function"?Object.is:p,R=i.useState,S=i.useEffect,P=i.useLayoutEffect,v=i.useDebugValue;function Z(y,u){var d=u(),x=R({inst:{value:d,getSnapshot:u}}),I=x[0].inst,f=x[1];return P(function(){I.value=d,I.getSnapshot=u,w(I)&&f({inst:I})},[y,d,u]),S(function(){return w(I)&&f({inst:I}),y(function(){w(I)&&f({inst:I})})},[y]),v(d),d}function w(y){var u=y.getSnapshot;y=y.value;try{var d=u();return!l(y,d)}catch{return!0}}function N(y,u){return u()}var O=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?N:Z;j.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:O},4322:function(H,j,e){H.exports=e(12415)},28622:function(H,j,e){e.d(j,{D:function(){return N}});var i=e(50959),p=e(61142),l=e(66146),R=e(42128),S=e(39210);class P extends R.l{constructor(u,d){super(),this.client=u,this.setOptions(d),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(u){const d=this.options;this.options=this.client.defaultMutationOptions(u),(0,S.VS)(d,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var u;(u=this.currentMutation)==null||u.removeObserver(this)}}onMutationUpdate(u){this.updateResult();const d={listeners:!0};u.type==="success"?d.onSuccess=!0:u.type==="error"&&(d.onError=!0),this.notify(d)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(u,d){return this.mutateOptions=d,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof u<"u"?u:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const u=this.currentMutation?this.currentMutation.state:(0,p.R)(),d={...u,isLoading:u.status==="loading",isSuccess:u.status==="success",isError:u.status==="error",isIdle:u.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=d}notify(u){l.V.batch(()=>{if(this.mutateOptions){if(u.onSuccess){var d,x,I,f;(d=(x=this.mutateOptions).onSuccess)==null||d.call(x,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(I=(f=this.mutateOptions).onSettled)==null||I.call(f,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(u.onError){var g,C,G,k;(g=(C=this.mutateOptions).onError)==null||g.call(C,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(G=(k=this.mutateOptions).onSettled)==null||G.call(k,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}u.listeners&&this.listeners.forEach(h=>{h(this.currentResult)})})}}var v=e(6647),Z=e(34118),w=e(4322);function N(y,u,d){const x=(0,S.lV)(y,u,d),I=(0,v.NL)({context:x.context}),[f]=i.useState(()=>new P(I,x));i.useEffect(()=>{f.setOptions(x)},[f,x]);const g=(0,w.useSyncExternalStore)(i.useCallback(G=>f.subscribe(l.V.batchCalls(G)),[f]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),C=i.useCallback((G,k)=>{f.mutate(G,k).catch(O)},[f]);if(g.error&&(0,Z.L)(f.options.useErrorBoundary,[g.error]))throw g.error;return{...g,mutate:C,mutateAsync:g.mutate}}function O(){}},34118:function(H,j,e){e.d(j,{L:function(){return i}});function i(p,l){return typeof p=="function"?p(...l):!!p}}}]);
