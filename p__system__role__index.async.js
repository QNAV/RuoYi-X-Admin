"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{20747:function(je,_,e){e.d(_,{ew:function(){return s},Jx:function(){return te},iT:function(){return W},Zi:function(){return Y},Bw:function(){return V},eJ:function(){return re},fk:function(){return p},sE:function(){return q},WW:function(){return L},sy:function(){return ie},E$:function(){return fe},_M:function(){return ue},tC:function(){return l},wX:function(){return h},oh:function(){return k},Uc:function(){return O},x:function(){return ne},Mw:function(){return J},p_:function(){return ae},$V:function(){return X},Qo:function(){return b},$9:function(){return y},Jy:function(){return i},VP:function(){return x},g4:function(){return F},Fu:function(){return N},Rj:function(){return Se},tE:function(){return T},iO:function(){return se},q2:function(){return j},jR:function(){return ee},BP:function(){return c},au:function(){return m}});var S=e(31194),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},re={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},m={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},q={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:S.al},p={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(A){return{beginCreateTime:A[0],endCreateTime:A[1]}}}},x={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},ee={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},j={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},te={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},L={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},Y={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},W={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},V={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},X={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:S.gh,width:90},ae={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},k={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:S.gc},h={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:S.gc},O={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:S.gc},ne={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:S.gc},J={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:S.gc},i={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:S.CX,width:70},c={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:S.V},y={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},b={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},s={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},ie={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},ue={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:S.LZ},fe={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},se={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},Se={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},F={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},N={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},T={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},44926:function(je,_,e){e.d(_,{Z:function(){return re},n:function(){return X}});var S=e(50959),l=e(98205),re=function(k){var h=(0,S.useRef)(),O=(0,l.Zl)(k);return(0,S.useEffect)(function(){h!=null&&h.current&&O(h.current)},[]),h},m=e(35290),q=e.n(m),p=e(411),x=e.n(p),ee=e(94434),j=e.n(ee),te=e(46686),L=e.n(te),Y=e(70264),W=e(32222),V=e.n(W),X=function(k){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ne=(0,S.useState)([]),J=L()(ne,2),i=J[0],c=J[1],y=(0,S.useState)([]),b=L()(y,2),s=b[0],ie=b[1],ue={alwaysShowAlert:O,type:h,selectedRowKeys:i,onChange:function(N,T){ie(T),c(N)}},fe=function(N){var T=N[k],B=[N],A=[T];if(h==="checkbox")if(A=j()(i),B=V()(s),A.includes(T)){var U=i.indexOf(T);A.splice(U,1),B.splice(U,1)}else B.push(N),A.push(T);ie(B),c(A)},se=function(){ie([]),c([])},Se=function(){var F=x()(q()().mark(function N(){var T,B=arguments;return q()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(T=B.length>0&&B[0]!==void 0?B[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(s==null?void 0:s.length)!==0){U.next=4;break}return Y.ZP.warning(T),U.abrupt("return",Promise.reject(T));case 4:return U.abrupt("return",Promise.resolve(s));case 5:case"end":return U.stop()}},N)}));return function(){return F.apply(this,arguments)}}();return{selectedRows:s,selectedRowKeys:i,rowSelection:ue,onClick:fe,clearSelection:se,setSelectedRowKeys:c,checkRowSelection:Se}}},346:function(je,_,e){e.r(_),e.d(_,{default:function(){return Lt}});var S=e(35290),l=e.n(S),re=e(30279),m=e.n(re),q=e(411),p=e.n(q),x=e(31194),ee=e(44926),j=e(98205),te="systemRole",L=(0,j.cn)({key:"".concat(te,"AtomRoleListActions"),default:void 0}),Y=function(){return(0,j.sJ)(L)},W=function(){return(0,ee.Z)(L)},V=(0,j.cn)({key:"".concat(te,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),X=function(){return(0,j.rb)(V)},ae=function(){return(0,j.Zl)(V)},k=function(){return(0,j.sJ)(V)},h=e(45402);function O(n,r){return ne.apply(this,arguments)}function ne(){return ne=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),ne.apply(this,arguments)}function J(n,r){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),i.apply(this,arguments)}function c(n,r){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),y.apply(this,arguments)}function b(n,r){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),s.apply(this,arguments)}function ie(n,r){return ue.apply(this,arguments)}function ue(){return ue=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),ue.apply(this,arguments)}function fe(n,r){return se.apply(this,arguments)}function se(){return se=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),se.apply(this,arguments)}function Se(n,r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),F.apply(this,arguments)}function N(n,r){return T.apply(this,arguments)}function T(){return T=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),T.apply(this,arguments)}function B(n,r){return A.apply(this,arguments)}function A(){return A=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/edit",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),A.apply(this,arguments)}function U(n,r){return Ie.apply(this,arguments)}function Ie(){return Ie=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Ie.apply(this,arguments)}function et(n,r){return Ee.apply(this,arguments)}function Ee(){return Ee=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/info",m()({method:"GET",params:m()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),Ee.apply(this,arguments)}function tt(n,r){return Pe.apply(this,arguments)}function Pe(){return Pe=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/list",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Pe.apply(this,arguments)}function Ut(n){return Ae.apply(this,arguments)}function Ae(){return Ae=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return o.stop()}},n)})),Ae.apply(this,arguments)}function nt(n,r){return we.apply(this,arguments)}function we(){return we=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,h.WY)("/system/role/remove",m()({method:"POST",params:m()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),we.apply(this,arguments)}var Le=e(53136),ge=e(15328),rt=e(54064),at=e(55134),Oe=e(55099),ut=e(18723),st=e(37349),lt=e(1206),ce=e(61857),De=e(70264),$=e(50959),a=e(11527),ot=function(){var r=(0,ge.md)(),u=(0,$.useRef)(),o=Y();return(0,a.jsx)(Le.Access,{accessible:r.canAddSysRole,children:(0,a.jsxs)(at.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,a.jsx)(ce.Z,{type:"primary",icon:(0,a.jsx)(rt.Z,{}),children:"\u65B0\u5EFA"}),formRef:u,onFinish:function(){var t=p()(l()().mark(function w(M){var I;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,O(m()(m()({},M),{},{menuIds:[],menuCheckStrictly:!1}));case 2:return o==null||o.reload(),(I=u.current)===null||I===void 0||I.resetFields(),De.ZP.success("\u65B0\u5EFA\u6210\u529F"),g.abrupt("return",!0);case 6:case"end":return g.stop()}},w)}));return function(w){return t.apply(this,arguments)}}(),width:500,children:[(0,a.jsx)(Oe.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,a.jsx)(Oe.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,a.jsx)(ut.Z,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,a.jsx)(st.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:x.al,initialValue:x.vu.ENABLE}),(0,a.jsx)(lt.Z,{name:"remark",label:"\u5907\u6CE8"})]})})},it=ot,ct=e(39449),dt=e(9535),Ne=e(16340),mt=function(){var r=(0,ge.md)(),u=Y(),o=X(),t=k(),w=t.roleId,M=t.roleName,I=function(){return dt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,a.jsxs)(a.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,a.jsx)(Ne.Z.Text,{code:!0,children:M}),"\u8FDB\u884C",(0,a.jsx)(Ne.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var g=p()(l()().mark(function K(){var Z;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,nt({roleIds:w});case 2:u==null||u.reload(),u==null||(Z=u.clearSelected)===null||Z===void 0||Z.call(u),o(),De.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return f.stop()}},K)}));function de(){return g.apply(this,arguments)}return de}()})};return(0,a.jsx)(ge.Nv,{accessible:r.canRemoveSysRole,children:(0,a.jsx)(ce.Z,{danger:!0,ghost:!0,icon:(0,a.jsx)(ct.Z,{}),onClick:I,children:"\u5220\u9664"})})},pt=mt,ht=e(93275),Be=e.n(ht),vt=e(46686),Q=e.n(vt),le=e(20747),$e=e(36937),yt=e(94434),ft=e.n(yt),St=e(90026),gt=e(71600),Rt=e(29993),Fe=e(3650),Ue=e(84337),Ke=e(60171),Ge=e(48777),Tt=e(44786),Ct={title:"label",key:"id",children:"children"},xt=function n(r){var u=[];return r.forEach(function(o){var t=o.id,w=o.children;u.push(t),w&&u.push.apply(u,ft()(n(w)))}),u},jt=function(r){var u,o=r.roleId,t=r.menuCheckStrictly,w=r.handleEdit,M=(0,$.useState)([]),I=Q()(M,2),E=I[0],g=I[1],de=(0,$.useState)(!1),K=Q()(de,2),Z=K[0],oe=K[1],f=(0,$.useState)(!1),Re=Q()(f,2),ve=Re[0],ye=Re[1],Te=(0,$.useState)([]),Ce=Q()(Te,2),C=Ce[0],P=Ce[1],z=(0,$.useState)([]),G=Q()(z,2),me=G[0],H=G[1],pe=(0,$.useState)(!1),Xe=Q()(pe,2),Ot=Xe[0],Je=Xe[1],Nt=(0,$.useState)(!0),Qe=Q()(Nt,2),ze=Qe[0],be=Qe[1],He=(0,Ue.Z)(p()(l()().mark(function D(){var d,R,Ze;return l()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,St.bi)({roleId:o});case 2:return d=he.sent,R=d.menus,Ze=d.checkedKeys,he.abrupt("return",{treeData:R,selectedMenuIds:Ze,selectedTreeData:(0,h.Cr)(R,Ze),allMenuIds:(0,h.x$)(R)});case 6:case"end":return he.stop()}},D)})),{ready:o>0,refreshDeps:[o],onSuccess:function(d){ye(!1),H(d.selectedTreeData)}}),v=He.data,Bt=He.refresh,_e=(0,Fe.useMutation)(p()(l()().mark(function D(){return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,w({menuIds:Z?E:(0,h.iL)(v.treeData,E),menuCheckStrictly:Z});case 2:Bt();case 3:case"end":return R.stop()}},D)}))),qe=_e.isLoading,$t=_e.mutate,xe=xt((u=v==null?void 0:v.treeData)!==null&&u!==void 0?u:[]),Me=(C==null?void 0:C.length)!==0&&(C==null?void 0:C.length)===(xe==null?void 0:xe.length),Ft=function(d){if(d||ze){var R;g((R=v==null?void 0:v.allMenuIds)!==null&&R!==void 0?R:[]);return}g([])};return(0,$.useEffect)(function(){if((v==null?void 0:v.allMenuIds.length)===E.length){Je(!0),be(!1);return}if(E.length===0){Je(!1),be(!1);return}be(!0)},[v==null?void 0:v.allMenuIds,E]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,a.jsxs)(Ke.Z,{children:[me.length>0&&(0,a.jsx)(ce.Z,{size:"small",icon:Me?(0,a.jsx)(gt.Z,{}):(0,a.jsx)(Rt.Z,{}),onClick:function(){return P(Me?[]:xe)},children:Me?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),ve&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ge.Z,{indeterminate:ze,onChange:function(d){return Ft(d.target.checked)},checked:Ot,children:"\u5168\u9009/\u5168\u4E0D\u9009"}),(0,a.jsx)(Ge.Z,{checked:!Z,onChange:function(d){return oe(!d.target.checked)},children:"\u7236\u5B50\u8054\u52A8"})]})]}),(0,a.jsx)(Le.Access,{accessible:!0,children:ve?(0,a.jsxs)(Ke.Z,{children:[(0,a.jsx)(ce.Z,{loading:qe,onClick:function(){var d;ye(!1),H((d=v==null?void 0:v.selectedTreeData)!==null&&d!==void 0?d:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,a.jsx)(ce.Z,{type:"primary",ghost:!0,loading:qe,onClick:function(){return $t()},children:"\u4FDD\u5B58"})]}):(0,a.jsx)(ce.Z,{type:"primary",ghost:!0,onClick:function(){var d,R;ye(!0),g((d=v==null?void 0:v.selectedMenuIds)!==null&&d!==void 0?d:[]),oe(t),H((R=v==null?void 0:v.treeData)!==null&&R!==void 0?R:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,a.jsx)("div",{className:"h-[390px] overflow-y-auto",children:me.length>0?(0,a.jsx)(Tt.Z,{blockNode:!0,showLine:{showLeafIcon:!1},checkable:ve,checkStrictly:Z,fieldNames:Ct,checkedKeys:E,treeData:me,expandedKeys:C,onExpand:function(d){return P(d)},onCheck:function(d){if(Z){g(d.checked);return}g(d)}}):(0,a.jsx)($e._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},It=jt,Ye=e(70675),Et=e(45374),Pt=e(96022),We=e(95331),At=function(){var r=(0,$.useState)([]),u=Q()(r,2),o=u[0],t=u[1],w=Et.Z.useForm(),M=Q()(w,1),I=M[0],E=(0,ge.md)(),g=Y(),de=k(),K=de.roleId,Z=de.visible,oe=(0,Ue.Z)(function(){return et({roleId:K})},{ready:Z&&K>0,refreshDeps:[K],onSuccess:function(){t([])}}),f=oe.data,Re=oe.loading,ve=oe.refresh,ye=(0,Fe.useMutation)(function(){var C=p()(l()().mark(function P(z){var G;return l()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,B(m()({roleId:K,menuIds:(G=f==null?void 0:f.menuIds)!==null&&G!==void 0?G:[],roleKey:f.roleKey,roleName:f.roleName,roleSort:f.roleSort,status:f.status},z));case 2:case"end":return H.stop()}},P)}));return function(P){return C.apply(this,arguments)}}(),{onSuccess:function(){ve(),g==null||g.reload(),De.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),Te=ye.mutateAsync,Ce=E.canEditSysRole&&f?{form:I,editableKeys:o,onChange:function(P,z){t(P),P.length===1&&!Array.isArray(z)&&I.setFieldsValue(Be()({},P[0],z[P[0]]))},onSave:function(){var C=p()(l()().mark(function z(G,me){return l()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,Te(Be()({},G,me[G]));case 2:case"end":return pe.stop()}},z)}));function P(z,G){return C.apply(this,arguments)}return P}()}:void 0;return Z?(0,a.jsxs)(Pt.Z,{spinning:Re,children:[(0,a.jsx)(Ye.vY,{column:2,columns:[le.g4,le.eJ],dataSource:f}),(0,a.jsx)(We.Z,{}),(0,a.jsx)(Ye.vY,{column:2,columns:[le.sE,le.tE,le.Rj,le.VP,le.Fu],dataSource:f,editable:Ce}),(0,a.jsx)(We.Z,{}),(0,a.jsx)(It,{roleId:K,menuCheckStrictly:!!(f!=null&&f.menuCheckStrictly),handleEdit:function(P){return Te(P)}})]}):(0,a.jsx)($e._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},wt=At,Dt=e(18825),Ve=e(12416),kt=function(){var r=W(),u=ae(),o=(0,ee.n)("roleId","radio"),t=o.onClick,w=o.rowSelection,M=o.selectedRows;return(0,$.useEffect)(function(){M.length===1&&u({roleId:M[0].roleId,roleName:M[0].roleName,visible:!0})},[M]),(0,a.jsx)(Dt.Rs,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(E){return E===x.vu.ENABLE?(0,a.jsx)(Ve.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,a.jsx)(Ve.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(E){return{onClick:function(){return t(E)}}},rowSelection:w,pagination:{pageSize:10},request:function(){return tt(h.h$.apply(void 0,arguments))}})},bt=kt,Mt=e(92112),ke=e(75521),Zt=function(){return(0,a.jsx)(Mt.ZP,{children:(0,a.jsxs)(ke.Z,{ghost:!0,gutter:24,children:[(0,a.jsx)(ke.Z,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,a.jsx)(it,{}),children:(0,a.jsx)(bt,{})}),(0,a.jsx)(ke.Z,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,a.jsx)(pt,{}),children:(0,a.jsx)(wt,{})})]})})},Lt=Zt},90026:function(je,_,e){e.d(_,{CP:function(){return V},FV:function(){return ee},WJ:function(){return Y},Yh:function(){return te},bi:function(){return h},tg:function(){return ae}});var S=e(35290),l=e.n(S),re=e(30279),m=e.n(re),q=e(411),p=e.n(q),x=e(45402);function ee(i,c){return j.apply(this,arguments)}function j(){return j=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),j.apply(this,arguments)}function te(i,c){return L.apply(this,arguments)}function L(){return L=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/edit",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),L.apply(this,arguments)}function Y(i,c){return W.apply(this,arguments)}function W(){return W=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/info",m()({method:"GET",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),W.apply(this,arguments)}function V(i,c){return X.apply(this,arguments)}function X(){return X=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/list",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),X.apply(this,arguments)}function ae(i,c){return k.apply(this,arguments)}function k(){return k=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/remove",m()({method:"POST",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),k.apply(this,arguments)}function h(i,c){return O.apply(this,arguments)}function O(){return O=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,x.WY)("/system/menu/roleMenuTreeSelect",m()({method:"GET",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),O.apply(this,arguments)}function ne(i,c){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function i(c,y){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),J.apply(this,arguments)}}}]);
