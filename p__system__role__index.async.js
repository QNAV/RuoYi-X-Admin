"use strict";(self.webpackChunkruoyi_x_umi=self.webpackChunkruoyi_x_umi||[]).push([[24],{20747:function(Pe,q,e){e.d(q,{ew:function(){return s},Jx:function(){return ne},iT:function(){return V},Zi:function(){return W},Bw:function(){return X},eJ:function(){return ue},fk:function(){return p},sE:function(){return ee},WW:function(){return N},sy:function(){return de},E$:function(){return ge},_M:function(){return le},tC:function(){return l},wX:function(){return v},oh:function(){return k},Uc:function(){return B},x:function(){return re},Mw:function(){return Q},p_:function(){return se},$V:function(){return J},Qo:function(){return b},$9:function(){return y},Jy:function(){return i},VP:function(){return I},g4:function(){return L},Fu:function(){return $},Rj:function(){return Re},tE:function(){return R},iO:function(){return oe},q2:function(){return j},jR:function(){return te},BP:function(){return c},au:function(){return m}});var S=e(31194),l={title:"\u5E8F\u53F7",dataIndex:"index",key:"index",valueType:"indexBorder",editable:!1,width:60},ue={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},m={title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",key:"updateTime",valueType:"dateTime",editable:!1,hideInSearch:!0,sorter:!0},ee={title:"\u72B6\u6001",dataIndex:"status",key:"status",valueType:"radio",valueEnum:S.al},p={title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTimeRange",key:"createTimeRange",valueType:"dateTimeRange",hideInTable:!0,search:{transform:function(P){return{beginCreateTime:P[0],endCreateTime:P[1]}}}},I={title:"\u5907\u6CE8",dataIndex:"remark",key:"remark",valueType:"textarea",hideInSearch:!0},te={title:"\u8868\u540D\u79F0",dataIndex:"tableName",key:"tableName",valueType:"text"},j={title:"\u8868\u63CF\u8FF0",dataIndex:"tableComment",key:"tableComment",valueType:"text"},ne={title:"\u5B9E\u4F53\u540D\u79F0",dataIndex:"className",key:"className",valueType:"text",hideInSearch:!0},N={title:"\u4F5C\u8005",dataIndex:"functionAuthor",key:"functionAuthor",valueType:"text"},W={title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"columnName",key:"columnName",valueType:"text",editable:!1,ellipsis:!0,width:100},V={title:"\u5B57\u6BB5\u63CF\u8FF0",dataIndex:"columnComment",key:"columnComment",valueType:"text",width:250},X={title:"\u7269\u7406\u7C7B\u578B",dataIndex:"columnType",key:"columnType",valueType:"text",editable:!1,ellipsis:!0,width:100},J={title:"JAVA\u7C7B\u578B",dataIndex:"javaType",key:"javaType",valueType:"select",valueEnum:S.gh,width:90},se={title:"JAVA\u5C5E\u6027",dataIndex:"javaField",key:"javaField",valueType:"text",width:140},k={title:"\u63D2\u5165",dataIndex:"isInsert",key:"isInsert",valueType:"radioButton",width:115,valueEnum:S.gc},v={title:"\u7F16\u8F91",dataIndex:"isEdit",key:"isEdit",valueType:"radioButton",width:115,valueEnum:S.gc},B={title:"\u5217\u8868",dataIndex:"isList",key:"isList",valueType:"radioButton",width:115,valueEnum:S.gc},re={title:"\u67E5\u8BE2",dataIndex:"isQuery",key:"isQuery",valueType:"radioButton",width:115,valueEnum:S.gc},Q={title:"\u5FC5\u586B",dataIndex:"isRequired",key:"isRequired",valueType:"radioButton",width:115,valueEnum:S.gc},i={title:"\u67E5\u8BE2\u65B9\u5F0F",dataIndex:"queryType",key:"queryType",valueType:"select",valueEnum:S.CX,width:70},c={title:"\u751F\u6210\u6A21\u7248",dataIndex:"tplCategory",key:"tplCategory",valueType:"select",valueEnum:S.V},y={title:"\u751F\u6210\u5305\u8DEF\u5F84",dataIndex:"packageName",key:"packageName",valueType:"text"},b={title:"\u751F\u6210\u6A21\u5757\u540D",dataIndex:"moduleName",key:"moduleName",valueType:"text"},s={title:"\u751F\u6210\u4E1A\u52A1\u540D",dataIndex:"businessName",key:"businessName",valueType:"text"},de={title:"\u751F\u6210\u529F\u80FD\u540D",dataIndex:"functionName",key:"functionName",valueType:"text"},le={title:"\u751F\u6210\u4EE3\u7801\u65B9\u5F0F",dataIndex:"genType",key:"genType",valueType:"select",valueEnum:S.LZ},ge={title:"\u81EA\u5B9A\u4E49\u8DEF\u5F84",dataIndex:"genPath",key:"genPath",valueType:"text"},oe={title:"\u5E8F\u53F7",dataIndex:"sort",valueType:"indexBorder",editable:!1,width:80},Re={title:"\u89D2\u8272\u540D\u79F0",dataIndex:"roleName",key:"roleName",valueType:"text"},L={title:"\u89D2\u8272\u7F16\u53F7",dataIndex:"roleId",key:"roleId",valueType:"text",hideInSearch:!0,editable:!1},$={title:"\u6743\u9650\u5B57\u7B26",dataIndex:"roleKey",key:"roleKey",valueType:"text"},R={title:"\u663E\u793A\u6392\u5E8F",dataIndex:"roleSort",key:"roleSort",valueType:"text",hideInSearch:!0}},44926:function(Pe,q,e){e.d(q,{Z:function(){return ue},n:function(){return J}});var S=e(50959),l=e(98205),ue=function(k){var v=(0,S.useRef)(),B=(0,l.Zl)(k);return(0,S.useEffect)(function(){v!=null&&v.current&&B(v.current)},[]),v},m=e(35290),ee=e.n(m),p=e(411),I=e.n(p),te=e(94434),j=e.n(te),ne=e(46686),N=e.n(ne),W=e(70264),V=e(32222),X=e.n(V),J=function(k){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"checkbox",B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,re=(0,S.useState)([]),Q=N()(re,2),i=Q[0],c=Q[1],y=(0,S.useState)([]),b=N()(y,2),s=b[0],de=b[1],le={alwaysShowAlert:B,type:v,selectedRowKeys:i,onChange:function($,R){de(R),c($)}},ge=function($){var R=$[k],F=[$],P=[R];if(v==="checkbox")if(P=j()(i),F=X()(s),P.includes(R)){var K=i.indexOf(R);P.splice(K,1),F.splice(K,1)}else F.push($),P.push(R);de(F),c(P)},oe=function(){de([]),c([])},Re=function(){var L=I()(ee()().mark(function $(){var R,F=arguments;return ee()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(R=F.length>0&&F[0]!==void 0?F[0]:"\u672A\u9009\u62E9\u9700\u8981\u64CD\u4F5C\u7684\u5BF9\u8C61",(s==null?void 0:s.length)!==0){K.next=4;break}return W.ZP.warning(R),K.abrupt("return",Promise.reject(R));case 4:return K.abrupt("return",Promise.resolve(s));case 5:case"end":return K.stop()}},$)}));return function(){return L.apply(this,arguments)}}();return{selectedRows:s,selectedRowKeys:i,rowSelection:le,onClick:ge,clearSelection:oe,setSelectedRowKeys:c,checkRowSelection:Re}}},346:function(Pe,q,e){e.r(q),e.d(q,{default:function(){return Nt}});var S=e(35290),l=e.n(S),ue=e(30279),m=e.n(ue),ee=e(411),p=e.n(ee),I=e(31194),te=e(44926),j=e(98205),ne="systemRole",N=(0,j.cn)({key:"".concat(ne,"AtomRoleListActions"),default:void 0}),W=function(){return(0,j.sJ)(N)},V=function(){return(0,te.Z)(N)},X=(0,j.cn)({key:"".concat(ne,"AtomRoleDetails"),default:{visible:!1,roleId:0,roleName:""}}),J=function(){return(0,j.rb)(X)},se=function(){return(0,j.Zl)(X)},k=function(){return(0,j.sJ)(X)},v=e(45402);function B(n,r){return re.apply(this,arguments)}function re(){return re=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/system/role/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),re.apply(this,arguments)}function Q(n,r){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/allocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),i.apply(this,arguments)}function c(n,r){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancel",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),y.apply(this,arguments)}function b(n,r){return s.apply(this,arguments)}function s(){return s=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/cancelAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),s.apply(this,arguments)}function de(n,r){return le.apply(this,arguments)}function le(){return le=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/selectAll",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),le.apply(this,arguments)}function ge(n,r){return oe.apply(this,arguments)}function oe(){return oe=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/authUser/unallocatedList",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),oe.apply(this,arguments)}function Re(n,r){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/changeStatus",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),L.apply(this,arguments)}function $(n,r){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/dataScope",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),R.apply(this,arguments)}function F(n,r){return P.apply(this,arguments)}function P(){return P=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/system/role/edit",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),P.apply(this,arguments)}function K(n,r){return Ae.apply(this,arguments)}function Ae(){return Ae=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,u){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/system/role/export",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),Ae.apply(this,arguments)}function nt(n,r){return we.apply(this,arguments)}function we(){return we=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/system/role/info",m()({method:"GET",params:m()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),we.apply(this,arguments)}function rt(n,r){return De.apply(this,arguments)}function De(){return De=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/system/role/list",m()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return t.stop()}},n)})),De.apply(this,arguments)}function Gt(n){return ke.apply(this,arguments)}function ke(){return ke=_asyncToGenerator(_regeneratorRuntime().mark(function n(r){return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",request("/system/role/optionSelect",_objectSpread({method:"GET"},r||{})));case 1:case"end":return o.stop()}},n)})),ke.apply(this,arguments)}function at(n,r){return be.apply(this,arguments)}function be(){return be=p()(l()().mark(function n(r,u){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,v.WY)("/system/role/remove",m()({method:"POST",params:m()({},r)},u||{})));case 1:case"end":return t.stop()}},n)})),be.apply(this,arguments)}var $e=e(53136),Te=e(15328),ut=e(54064),st=e(55134),Fe=e(55099),lt=e(18723),ot=e(37349),it=e(1206),Me=e(3650),Ze=e(70264),me=e(61857),U=e(50959),a=e(11527),ct=function(){var r=(0,Te.md)(),u=(0,U.useRef)(),o=W(),t=(0,Me.useMutation)(B,{onSuccess:function(){var g;o==null||o.reload(),(g=u.current)===null||g===void 0||g.resetFields(),Ze.ZP.success("\u65B0\u5EFA\u6210\u529F")}}),M=t.mutateAsync;return(0,a.jsx)($e.Access,{accessible:r.canAddSysRole,children:(0,a.jsxs)(st.Y,{title:"\u65B0\u5EFA\u89D2\u8272",trigger:(0,a.jsx)(me.Z,{type:"primary",icon:(0,a.jsx)(ut.Z,{}),children:"\u65B0\u5EFA"}),formRef:u,onFinish:function(){var A=p()(l()().mark(function g(T){return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,M(m()(m()({},T),{},{menuIds:[],menuCheckStrictly:!1}));case 2:return Z.abrupt("return",!0);case 3:case"end":return Z.stop()}},g)}));return function(g){return A.apply(this,arguments)}}(),width:500,children:[(0,a.jsx)(Fe.Z,{name:"roleName",label:"\u89D2\u8272\u540D\u79F0",rules:[{required:!0}]}),(0,a.jsx)(Fe.Z,{name:"roleKey",label:"\u6743\u9650\u5B57\u7B26",rules:[{required:!0}],tooltip:"\u63A7\u5236\u5668\u4E2D\u5B9A\u4E49\u7684\u6743\u9650\u5B57\u7B26\uFF0C\u5982\uFF1A@PreAuthorize(`@ss.hasRole('admin')`)"}),(0,a.jsx)(lt.Z,{name:"roleSort",label:"\u663E\u793A\u6392\u5E8F",rules:[{required:!0}],initialValue:0}),(0,a.jsx)(ot.Z.Group,{name:"status",label:"\u72B6\u6001",valueEnum:I.al,initialValue:I.vu.ENABLE}),(0,a.jsx)(it.Z,{name:"remark",label:"\u5907\u6CE8"})]})})},dt=ct,mt=e(39449),pt=e(9535),Ue=e(16340),vt=function(){var r=(0,Te.md)(),u=W(),o=J(),t=k(),M=t.roleId,A=t.roleName,g=function(){return pt.Z.confirm({title:"\u5220\u9664\u786E\u8BA4",content:(0,a.jsxs)(a.Fragment,{children:["\u786E\u5B9A\u5BF9\u89D2\u8272",(0,a.jsx)(Ue.Z.Text,{code:!0,children:A}),"\u8FDB\u884C",(0,a.jsx)(Ue.Z.Text,{code:!0,children:"\u5220\u9664"}),"\u64CD\u4F5C\u5417\uFF1F"]}),onOk:function(){var w=p()(l()().mark(function G(){var O;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,at({roleIds:M});case 2:u==null||u.reload(),u==null||(O=u.clearSelected)===null||O===void 0||O.call(u),o(),Ze.ZP.success("\u5220\u9664\u6210\u529F");case 6:case"end":return f.stop()}},G)}));function Z(){return w.apply(this,arguments)}return Z}()})};return(0,a.jsx)(Te.Nv,{accessible:r.canRemoveSysRole,children:(0,a.jsx)(me.Z,{danger:!0,ghost:!0,icon:(0,a.jsx)(mt.Z,{}),onClick:g,children:"\u5220\u9664"})})},ht=vt,yt=e(93275),Le=e.n(yt),ft=e(46686),z=e.n(ft),ie=e(20747),Ke=e(36937),St=e(94434),he=e.n(St),gt=e(90026),Rt=e(71600),Tt=e(29993),Ge=e(84337),Ye=e(60171),We=e(48777),Ct=e(44786),xt={title:"label",key:"id",children:"children"},It=function n(r){var u=[];return r.forEach(function(o){var t=o.id,M=o.children;u.push(t),M&&u.push.apply(u,he()(n(M)))}),u},jt=function(r){var u,o=r.roleId,t=r.menuCheckStrictly,M=r.handleEdit,A=(0,U.useState)([]),g=z()(A,2),T=g[0],w=g[1],Z=(0,U.useState)(!1),G=z()(Z,2),O=G[0],ce=G[1],f=(0,U.useState)(!1),Ce=z()(f,2),ye=Ce[0],fe=Ce[1],xe=(0,U.useState)([]),Ie=z()(xe,2),C=Ie[0],E=Ie[1],H=(0,U.useState)([]),Y=z()(H,2),pe=Y[0],_=Y[1],ve=(0,U.useState)(!1),Qe=z()(ve,2),Bt=Qe[0],ze=Qe[1],$t=(0,U.useState)(!0),He=z()($t,2),_e=He[0],Ne=He[1],qe=(0,Ge.Z)(p()(l()().mark(function D(){var d,x,Ee;return l()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(0,gt.bi)({roleId:o});case 2:return d=ae.sent,x=d.menus,Ee=d.checkedKeys,ae.abrupt("return",{treeData:x,selectedMenuIds:Ee,selectedTreeData:(0,v.Cr)(x,Ee),allMenuIds:(0,v.x$)(x)});case 6:case"end":return ae.stop()}},D)})),{ready:o>0,refreshDeps:[o],onSuccess:function(d){fe(!1),_(d.selectedTreeData)}}),h=qe.data,Ft=qe.refresh,Ut=function(d){if(d||_e){var x;w((x=h==null?void 0:h.allMenuIds)!==null&&x!==void 0?x:[]);return}w([])},et=(0,Me.useMutation)(p()(l()().mark(function D(){var d,x;return l()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return O?d=T:(x=T.reduce(function(ae,Kt){return[].concat(he()(ae),he()((0,v.b0)(h.treeData,Kt)))},[]),d=Array.from(new Set([].concat(he()(T),he()(x))))),Se.next=3,M({menuIds:d,menuCheckStrictly:O});case 3:Ft();case 4:case"end":return Se.stop()}},D)}))),tt=et.isLoading,Lt=et.mutate,je=It((u=h==null?void 0:h.treeData)!==null&&u!==void 0?u:[]),Be=(C==null?void 0:C.length)!==0&&(C==null?void 0:C.length)===(je==null?void 0:je.length);return(0,U.useEffect)(function(){if((h==null?void 0:h.allMenuIds.length)===T.length){ze(!0),Ne(!1);return}if(T.length===0){ze(!1),Ne(!1);return}Ne(!0)},[h==null?void 0:h.allMenuIds,T]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:"flex justify-between mb-2",children:[(0,a.jsxs)(Ye.Z,{children:[pe.length>0&&(0,a.jsx)(me.Z,{size:"small",icon:Be?(0,a.jsx)(Rt.Z,{}):(0,a.jsx)(Tt.Z,{}),onClick:function(){return E(Be?[]:je)},children:Be?"\u5168\u90E8\u6298\u53E0":"\u5168\u90E8\u5C55\u5F00"}),ye&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(We.Z,{indeterminate:_e,onChange:function(d){return Ut(d.target.checked)},checked:Bt,children:"\u5168\u9009/\u5168\u4E0D\u9009"}),(0,a.jsx)(We.Z,{checked:!O,onChange:function(d){return ce(!d.target.checked)},children:"\u7236\u5B50\u8054\u52A8"})]})]}),(0,a.jsx)($e.Access,{accessible:!0,children:ye?(0,a.jsxs)(Ye.Z,{children:[(0,a.jsx)(me.Z,{loading:tt,onClick:function(){var d;fe(!1),_((d=h==null?void 0:h.selectedTreeData)!==null&&d!==void 0?d:[])},children:"\u53D6\u6D88\u7F16\u8F91"}),(0,a.jsx)(me.Z,{type:"primary",ghost:!0,loading:tt,onClick:function(){return Lt()},children:"\u4FDD\u5B58"})]}):(0,a.jsx)(me.Z,{type:"primary",ghost:!0,onClick:function(){var d,x;fe(!0),w((d=h==null?void 0:h.selectedMenuIds)!==null&&d!==void 0?d:[]),ce(t),_((x=h==null?void 0:h.treeData)!==null&&x!==void 0?x:[])},children:"\u7F16\u8F91\u6743\u9650"})})]}),(0,a.jsx)("div",{className:"h-[390px] overflow-y-auto",children:pe.length>0?(0,a.jsx)(Ct.Z,{blockNode:!0,checkable:ye,checkStrictly:O,fieldNames:xt,checkedKeys:T,treeData:pe,expandedKeys:C,onExpand:function(d){return E(d)},onCheck:function(d){if(O){w(d.checked);return}w(d)}}):(0,a.jsx)(Ke._E,{description:"\u6682\u672A\u5206\u914D\u6743\u9650"})})]})},Et=jt,Ve=e(70675),Pt=e(45374),At=e(96022),Xe=e(95331),wt=function(){var r=(0,U.useState)([]),u=z()(r,2),o=u[0],t=u[1],M=Pt.Z.useForm(),A=z()(M,1),g=A[0],T=(0,Te.md)(),w=W(),Z=k(),G=Z.roleId,O=Z.visible,ce=(0,Ge.Z)(function(){return nt({roleId:G})},{ready:O&&G>0,refreshDeps:[G],onSuccess:function(){t([])}}),f=ce.data,Ce=ce.loading,ye=ce.refresh,fe=(0,Me.useMutation)(function(){var C=p()(l()().mark(function E(H){var Y;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,F(m()({roleId:G,menuIds:(Y=f==null?void 0:f.menuIds)!==null&&Y!==void 0?Y:[],roleKey:f.roleKey,roleName:f.roleName,roleSort:f.roleSort,status:f.status},H));case 2:case"end":return _.stop()}},E)}));return function(E){return C.apply(this,arguments)}}(),{onSuccess:function(){ye(),w==null||w.reload(),Ze.ZP.success("\u4FDD\u5B58\u6210\u529F")}}),xe=fe.mutateAsync,Ie=T.canEditSysRole&&f?{form:g,editableKeys:o,onChange:function(E,H){t(E),E.length===1&&!Array.isArray(H)&&g.setFieldsValue(Le()({},E[0],H[E[0]]))},onSave:function(){var C=p()(l()().mark(function H(Y,pe){return l()().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,xe(Le()({},Y,pe[Y]));case 2:case"end":return ve.stop()}},H)}));function E(H,Y){return C.apply(this,arguments)}return E}()}:void 0;return O?(0,a.jsxs)(At.Z,{spinning:Ce,children:[(0,a.jsx)(Ve.vY,{column:2,columns:[ie.g4,ie.eJ],dataSource:f}),(0,a.jsx)(Xe.Z,{}),(0,a.jsx)(Ve.vY,{column:2,columns:[ie.sE,ie.tE,ie.Rj,ie.VP,ie.Fu],dataSource:f,editable:Ie}),(0,a.jsx)(Xe.Z,{}),(0,a.jsx)(Et,{roleId:G,menuCheckStrictly:!!(f!=null&&f.menuCheckStrictly),handleEdit:function(E){return xe(E)}})]}):(0,a.jsx)(Ke._E,{description:"\u70B9\u51FB\u9009\u62E9\u5DE6\u4FA7\u89D2\u8272\u67E5\u770B\u8BE6\u60C5"})},Dt=wt,kt=e(18825),Je=e(12416),bt=function(){var r=V(),u=se(),o=(0,te.n)("roleId","radio"),t=o.onClick,M=o.rowSelection,A=o.selectedRows;return(0,U.useEffect)(function(){A.length===1&&u({roleId:A[0].roleId,roleName:A[0].roleName,visible:!0})},[A]),(0,a.jsx)(kt.Rs,{ghost:!0,rowKey:"roleId",actionRef:r,metas:{title:{dataIndex:"roleName"},subTitle:{dataIndex:"status",render:function(T){return T===I.vu.ENABLE?(0,a.jsx)(Je.Z,{color:"success",children:"\u542F\u7528\u4E2D"}):(0,a.jsx)(Je.Z,{color:"error",children:"\u5DF2\u7981\u7528"})}}},tableAlertRender:!1,onRow:function(T){return{onClick:function(){return t(T)}}},rowSelection:M,pagination:{pageSize:10},request:function(){return rt(v.h$.apply(void 0,arguments))}})},Mt=bt,Zt=e(92112),Oe=e(75521),Ot=function(){return(0,a.jsx)(Zt.ZP,{children:(0,a.jsxs)(Oe.Z,{ghost:!0,gutter:24,children:[(0,a.jsx)(Oe.Z,{title:"\u89D2\u8272\u5217\u8868",colSpan:"400px",extra:(0,a.jsx)(dt,{}),children:(0,a.jsx)(Mt,{})}),(0,a.jsx)(Oe.Z,{title:"\u89D2\u8272\u8BE6\u60C5",extra:(0,a.jsx)(ht,{}),children:(0,a.jsx)(Dt,{})})]})})},Nt=Ot},90026:function(Pe,q,e){e.d(q,{CP:function(){return X},FV:function(){return te},WJ:function(){return W},Yh:function(){return ne},bi:function(){return v},tg:function(){return se}});var S=e(35290),l=e.n(S),ue=e(30279),m=e.n(ue),ee=e(411),p=e.n(ee),I=e(45402);function te(i,c){return j.apply(this,arguments)}function j(){return j=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/add",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),j.apply(this,arguments)}function ne(i,c){return N.apply(this,arguments)}function N(){return N=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/edit",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),N.apply(this,arguments)}function W(i,c){return V.apply(this,arguments)}function V(){return V=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/info",m()({method:"GET",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),V.apply(this,arguments)}function X(i,c){return J.apply(this,arguments)}function J(){return J=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/list",m()({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),J.apply(this,arguments)}function se(i,c){return k.apply(this,arguments)}function k(){return k=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/remove",m()({method:"POST",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),k.apply(this,arguments)}function v(i,c){return B.apply(this,arguments)}function B(){return B=p()(l()().mark(function i(c,y){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,I.WY)("/system/menu/roleMenuTreeSelect",m()({method:"GET",params:m()({},c)},y||{})));case 1:case"end":return s.stop()}},i)})),B.apply(this,arguments)}function re(i,c){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function i(c,y){return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",request("/system/menu/treeSelect",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:c},y||{})));case 1:case"end":return s.stop()}},i)})),Q.apply(this,arguments)}}}]);
